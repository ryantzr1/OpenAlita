<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head><script type="text/javascript" src="https://web-static.archive.org/_static/js/bundle-playback.js?v=1B2M2Y8A" charset="utf-8"></script>
<script type="text/javascript" src="https://web-static.archive.org/_static/js/wombat.js?v=1B2M2Y8A" charset="utf-8"></script>
<script>window.RufflePlayer=window.RufflePlayer||{};window.RufflePlayer.config={"autoplay":"on","unmuteOverlay":"hidden","showSwfDownload":true};</script>
<script type="text/javascript" src="https://web-static.archive.org/_static/js/ruffle/ruffle.js"></script>
<script type="text/javascript">
    __wm.init("https://web.archive.org/web");
  __wm.wombat("https://rosettacode.org/wiki/Sorting_algorithms/Quicksort","20230609112831","https://web.archive.org/","web","https://web-static.archive.org/_static/",
	      "1686310111");
</script>
<link rel="stylesheet" type="text/css" href="https://web-static.archive.org/_static/css/banner-styles.css?v=1B2M2Y8A" />
<link rel="stylesheet" type="text/css" href="https://web-static.archive.org/_static/css/iconochive.css?v=1B2M2Y8A" />
<!-- End Wayback Rewrite JS Include -->

<meta charset="UTF-8"/>
<title>Sorting algorithms/Quicksort - Rosetta Code</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"2cb82d396564f8ef6274e513","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Sorting_algorithms/Quicksort","wgTitle":"Sorting algorithms/Quicksort","wgCurRevisionId":343393,"wgRevisionId":343393,"wgArticleId":560,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Pages with syntax highlighting errors","Programming Tasks","Sorting Algorithms","Sorting","Recursion","WikipediaSourced","11l","360 Assembly","AArch64 Assembly","ABAP","ACL2","Action!","ActionScript","Ada","ALGOL 68","ALGOL W","APL","AppleScript","Arc","ARM Assembly","Arturo","ATS",
"AutoHotkey","AWK","BASIC","BBC BASIC","IS-BASIC","QB64","BCPL","Beads","Bracmat","C","C sharp","CafeOBJ","C++","Clojure","COBOL","CoffeeScript","Common Lisp","Cowgol","Craft Basic","Crystal","Curry","D","Delphi","SysUtils,StdCtrls","Dart","E","EasyLang","EchoLisp","Eero","Eiffel","Elena","Elixir","Erlang","Emacs Lisp","Seq.el","ERRE","F Sharp","Factor","Fe","Fexl","Forth","Fortran","FreeBASIC","FunL","FutureBasic","Go","Haskell","Icon","Unicon","IDL","Idris","Io","Isabelle","J","Java","JavaScript","Joy","Jq","Julia","K","Koka","Kotlin","Lambdatalk","Lobster","Logo","Logtalk","Lua","Lucid","M2000 Interpreter","M4","Maclisp","Maple","Mathematica","Wolfram Language","MATLAB","MAXScript","Mercury","MiniScript","Miranda","Modula-2","Modula-3","Mond","MUMPS","Nanoquery","Nemerle","NetRexx","Nial","Nim","Procedural (in place) algorithm","Functional (inmmutability) algorithm","Nix","Oberon-2","Objeck","Objective-C","OCaml","Octave","Oforth","Ol","OoRexx","Oz","PARI/GP","Pascal","Perl","Phix",
"PHP","Picat","PicoLisp","PL/I","PowerShell","Prolog","PureBasic","Python","Qi","Quackery","R","Racket","Raku","Red","REXX","Ring","Ruby","Run BASIC","Rust","SASL","Sather","Scala","Scheme","R7rs","Seed7","SETL","Sidef","Simula","Standard ML","Swift","Symsyn","Tailspin","Tcl","True BASIC","TypeScript","UBasic/4tH","UnixPipes","Ursala","V","GUISS/Omit","VBA","VBScript","Visual Basic","V (Vlang)","Wart","Wren","Wren-sort","Yabasic","XPL0","Z80 Assembly","Zkl"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Sorting_algorithms/Quicksort","wgRelevantArticleId":560,"wgIsProbablyEditable":true,"wgRelevantPageIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgMFDisplayWikibaseDescriptions":{"search":false,"nearby":false,"watchlist":false,"tagline":false},"wgNoticeProject":"all","wgVector2022PreviewPages":[],"wgCentralAuthMobileDomain":false,"wgSiteNoticeId":"84.0"};RLSTATE={"skins.vector.user.styles":"ready",
"ext.globalCssJs.user.styles":"ready","site.styles":"ready","user.styles":"ready","skins.vector.user":"ready","ext.globalCssJs.user":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","mediawiki.ui.button":"ready","skins.vector.styles":"ready","skins.vector.icons":"ready","mediawiki.ui.icon":"ready","ext.smw.style":"ready","ext.smw.tooltip.styles":"ready","ext.CookieWarning.styles":"ready","oojs-ui-core.styles":"ready","oojs-ui.styles.indicators":"ready","mediawiki.widgets.styles":"ready","oojs-ui-core.icons":"ready","ext.MobileDetect.nomobile":"ready","ext.DarkMode.styles":"ready","ext.dismissableSiteNotice.styles":"ready"};RLPAGEMODULES=["ext.smw.style","ext.smw.tooltips","smw.entityexaminer","site","mediawiki.page.ready","mediawiki.toc","skins.vector.js","skins.vector.es6","ext.eventLogging","ext.urlShortener.toolbar","ext.centralNotice.geoIP","ext.centralNotice.startUp","ext.CookieWarning","ext.toctree","ext.DarkMode","ext.centralauth.centralautologin",
"ext.dismissableSiteNotice"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="/web/20230609112831cs_/https://rosettacode.org/w/load.php?lang=en&amp;modules=ext.CookieWarning.styles%7Cext.DarkMode.styles%7Cext.MobileDetect.nomobile%7Cext.dismissableSiteNotice.styles%7Cext.pygments%7Cext.smw.style%7Cext.smw.tooltip.styles%7Cmediawiki.ui.button%2Cicon%7Cmediawiki.widgets.styles%7Coojs-ui-core.icons%2Cstyles%7Coojs-ui.styles.indicators%7Cskins.vector.icons%2Cstyles&amp;only=styles&amp;skin=vector-2022"/>
<script async="" src="/web/20230609112831js_/https://rosettacode.org/w/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector-2022"></script>
<style>#mw-indicator-mw-helplink {display:none;}</style>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/web/20230609112831cs_/https://rosettacode.org/w/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector-2022"/>
<meta name="generator" content="MediaWiki 1.39.3"/>
<meta name="referrer" content="origin"/>
<meta name="referrer" content="origin-when-cross-origin"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="description" content="Task  Sort an array (or list) elements using the   quicksort   algorithm.  The elements must have a   strict weak order   and the index of the array can be of any..."/>
<meta name="twitter:site" content=""/>
<meta name="twitter:card" content="summary_large_image"/>
<meta name="viewport" content="width=1000"/>
<link rel="preconnect" href="//web.archive.org/web/20230609112831/https://static.miraheze.org/"/>
<link rel="alternate" type="application/rdf+xml" title="Sorting algorithms/Quicksort" href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Special:ExportRDF/Sorting_algorithms/Quicksort&amp;xmlmime=rdf"/>
<link rel="alternate" type="application/x-wiki" title="Edit" href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit"/>
<link rel="apple-touch-icon" href="/web/20230609112831im_/https://rosettacode.org/apple-touch-icon.png"/>
<link rel="icon" href="/web/20230609112831im_/https://rosettacode.org/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="/web/20230609112831/https://rosettacode.org/w/opensearch_desc.php" title="Rosetta Code (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://rosettacode.org/w/api.php?action=rsd"/>
<link rel="license" href="https://www.gnu.org/licenses/fdl-1.3.en.html"/>
<link rel="dns-prefetch" href="https://web.archive.org/web/20230609112831/https://meta.miraheze.org/"/>
<meta property="og:title" content="Sorting algorithms/Quicksort"/>
<meta property="og:site_name" content="Rosetta Code"/>
<meta property="og:url" content="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Quicksort"/>
<meta property="og:description" content="Task  Sort an array (or list) elements using the   quicksort   algorithm.  The elements must have a   strict weak order   and the index of the array can be of any..."/>
<meta property="og:image" content="https://web.archive.org/web/20230609112831im_/https://static.miraheze.org/rosettacodewiki/d/d3/RosettaCodeTitle.png"/>
<meta property="article:modified_time" content="2023-05-28T17:14:47Z"/>
<meta property="article:published_time" content="2023-05-28T17:14:47Z"/>
<script type="application/ld+json">{"@context":"https:\/\/web.archive.org\/web\/20230609112831\/http:\/\/schema.org","@type":"Article","name":"Sorting algorithms\/Quicksort - Rosetta Code","headline":"Sorting algorithms\/Quicksort - Rosetta Code","mainEntityOfPage":"<span class=\"mw-page-title-main\">Sorting algorithms\/Quicksort<\/span>","identifier":"https:\/\/web.archive.org\/web\/20230609112831\/https:\/\/rosettacode.org\/wiki\/Sorting_algorithms\/Quicksort","url":"https:\/\/web.archive.org\/web\/20230609112831\/https:\/\/rosettacode.org\/wiki\/Sorting_algorithms\/Quicksort","description":"Task  Sort an array (or list) elements using the   quicksort   algorithm.  The elements must have a   strict weak order   and the index of the array can be of any...","dateModified":"2023-05-28T17:14:47Z","datePublished":"2023-05-28T17:14:47Z","image":{"@type":"ImageObject","url":"https:\/\/web.archive.org\/web\/20230609112831\/https:\/\/static.miraheze.org\/rosettacodewiki\/d\/d3\/RosettaCodeTitle.png"},"author":{"@type":"Organization","name":"Rosetta Code","url":"https:\/\/web.archive.org\/web\/20230609112831\/https:\/\/rosettacode.org","logo":{"@type":"ImageObject","url":"https:\/\/web.archive.org\/web\/20230609112831\/https:\/\/static.miraheze.org\/rosettacodewiki\/d\/d3\/RosettaCodeTitle.png","caption":"Rosetta Code"}},"publisher":{"@type":"Organization","name":"Rosetta Code","url":"https:\/\/web.archive.org\/web\/20230609112831\/https:\/\/rosettacode.org","logo":{"@type":"ImageObject","url":"https:\/\/web.archive.org\/web\/20230609112831\/https:\/\/static.miraheze.org\/rosettacodewiki\/d\/d3\/RosettaCodeTitle.png","caption":"Rosetta Code"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/web.archive.org\/web\/20230609112831\/https:\/\/rosettacode.org\/w\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
<link rel="dns-prefetch" href="//web.archive.org/web/20230609112831/https://login.miraheze.org/"/>
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject mw-editable page-Sorting_algorithms_Quicksort rootpage-Sorting_algorithms skin-vector-2022 action-view vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled"><div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox" checked>
		<header class="mw-header">
			<div class="mw-header-aside">
			<label id="mw-sidebar-button" class="mw-checkbox-hack-button mw-ui-icon mw-ui-button mw-ui-quiet mw-ui-icon-element" for="mw-sidebar-checkbox" role="button" aria-controls="mw-panel" data-event-name="ui.sidebar" tabindex="0" title="Main menu">
				<span>Toggle sidebar</span>
			</label>
			
<a href="/web/20230609112831/https://rosettacode.org/wiki/Rosetta_Code" class="mw-logo">
	<img class="mw-logo-icon" src="https://web.archive.org/web/20230609112831im_/https://static.miraheze.org/rosettacodewiki/c/c8/RosettaCodeTitle.ico" alt="" aria-hidden="true" height="50" width="50">
	<span class="mw-logo-container">
		<strong class="mw-logo-wordmark">Rosetta Code</strong>
	</span>
</a>

			</div>
			<div class="mw-header-content">
			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-collapses  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<a href="/web/20230609112831/https://rosettacode.org/wiki/Special:Search" title="Search Rosetta Code [f]" accesskey="f" class="mw-ui-button mw-ui-quiet mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-search search-toggle">
		<span>Search</span>
	</a>
	
	<div>
		<form action="/web/20230609112831/https://rosettacode.org/w/index.php" id="searchform" class="vector-search-box-form">
			<div id="simpleSearch" class="vector-search-box-inner" data-search-loc="header-moved">
				<input class="vector-search-box-input" type="search" name="search" placeholder="Search Rosetta Code" aria-label="Search Rosetta Code" autocapitalize="sentences" title="Search Rosetta Code [f]" accesskey="f" id="searchInput">
				<input type="hidden" name="title" value="Special:Search">
				<input id="mw-searchButton" class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
				<input id="searchButton" class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
			</div>
		</form>
	</div>
</div>

			<nav class="vector-user-links" aria-label="Personal tools" role="navigation">
	

<div id="p-vector-user-menu-overflow" class="vector-menu mw-portlet mw-portlet-vector-user-menu-overflow vector-user-menu-overflow">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-createaccount-2" class="user-links-collapsible-item mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Special:CreateAccount&amp;returnto=Sorting+algorithms%2FQuicksort" title="You are encouraged to create an account and log in; however, it is not mandatory"><span>Create account</span></a></li></ul>
		
	</div>
</div>

	

<div id="p-personal" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu vector-user-menu-logged-out vector-menu-dropdown" title="More options">
	<input type="checkbox" id="p-personal-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-personal" class="vector-menu-checkbox"/>
	<label id="p-personal-label" for="p-personal-checkbox" class="vector-menu-heading mw-ui-button mw-ui-quiet mw-ui-icon mw-ui-icon-element mw-ui-icon-ellipsis mw-ui-icon-wikimedia-ellipsis">
		<span class="vector-menu-heading-label">Personal tools</span>
	</label>
	<div class="vector-menu-content">
		<div class="vector-user-menu-create-account"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Special:CreateAccount&amp;returnto=Sorting+algorithms%2FQuicksort" class="vector-menu-content-item user-links-collapsible-item" title="You are encouraged to create an account and log in; however, it is not mandatory"><span class="mw-ui-icon mw-ui-icon-userAdd mw-ui-icon-wikimedia-userAdd"></span> <span>Create account</span></a></div>
<div class="vector-user-menu-login"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Special:UserLogin&amp;returnto=Sorting+algorithms%2FQuicksort" class="vector-menu-content-item vector-menu-content-item-login" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span class="mw-ui-icon mw-ui-icon-logIn mw-ui-icon-wikimedia-logIn"></span> <span>Log in</span></a></div>
<div class="vector-user-menu-anon-editor">
	<p>
		Pages for logged out editors <a href="/web/20230609112831/https://rosettacode.org/wiki/Help:Introduction" aria-label="Learn more about editing"><span>learn more</span></a>
	</p>
</div>

		<ul class="vector-menu-content-list"><li id="pt-anontalk" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Special:MyTalk" title="Discussion about edits from this IP address [n]" accesskey="n"><span>Talk</span></a></li><li id="pt-darkmode" class="ext-darkmode-link mw-list-item"><a href="#"><span>Dark mode</span></a></li><li id="pt-anoncontribs" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Special:MyContributions" title="A list of edits made from this IP address [y]" accesskey="y"><span>Contributions</span></a></li></ul>
		
	</div>
</div>

</nav>

			</div>
		</header>
		<div class="vector-sidebar-container ">
			<div id="mw-navigation">
				

<nav id="mw-panel" class="mw-sidebar" aria-label="Site" role="navigation">
	

<div id="p-Social" class="vector-menu mw-portlet mw-portlet-Social vector-menu-portal portal">
	<div id="p-Social-label" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">Social</span>
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Discord" class="mw-list-item"><a href="https://web.archive.org/web/20230609112831/https://discord.gg/JUAQDevqaH" rel="nofollow"><span>Discord</span></a></li><li id="n-Facebook" class="mw-list-item"><a href="https://web.archive.org/web/20230609112831/https://www.facebook.com/rosettacode" rel="nofollow"><span>Facebook</span></a></li><li id="n-Twitter" class="mw-list-item"><a href="https://web.archive.org/web/20230609112831/https://twitter.com/rosettacode" rel="nofollow"><span>Twitter</span></a></li></ul>
		
	</div>
</div>

	
	

<div id="p-Explore" class="vector-menu mw-portlet mw-portlet-Explore vector-menu-portal portal">
	<div id="p-Explore-label" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">Explore</span>
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Languages" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Programming_Languages"><span>Languages</span></a></li><li id="n-Tasks" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Programming_Tasks"><span>Tasks</span></a></li><li id="n-randompage" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Special:Random" title="Load a random page [x]" accesskey="x"><span>Random page</span></a></li></ul>
		
	</div>
</div>


<div id="p-tb" class="vector-menu mw-portlet mw-portlet-tb vector-menu-portal portal">
	<div id="p-tb-label" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">Tools</span>
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Special:WhatLinksHere/Sorting_algorithms/Quicksort" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Special:RecentChangesLinked/Sorting_algorithms/Quicksort" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;oldid=343393" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=info" title="More information about this page"><span>Page information</span></a></li><li id="t-urlshortener" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Special:UrlShortener&amp;url=https%3A%2F%2Frosettacode.org%2Fwiki%2FSorting_algorithms%2FQuicksort"><span>Get shortened URL</span></a></li><li id="t-smwbrowselink" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Special:Browse/:Sorting-5Falgorithms-2FQuicksort" rel="search"><span>Browse properties</span></a></li><li id="t-cite" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Special:CiteThisPage&amp;page=Sorting_algorithms%2FQuicksort&amp;id=343393&amp;wpFormIdentifier=titleform" title="Information on how to cite this page"><span>Cite this page</span></a></li></ul>
		
	</div>
</div>

	
</nav>

			</div>
		</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"><!-- CentralNotice --><div id="mw-dismissablenotice-anonplace"></div><script>(function(){var node=document.getElementById("mw-dismissablenotice-anonplace");if(node){node.outerHTML="\u003Cdiv class=\"mw-dismissable-notice\"\u003E\u003Cdiv class=\"mw-dismissable-notice-close\"\u003E[\u003Ca tabindex=\"0\" role=\"button\"\u003Edismiss\u003C/a\u003E]\u003C/div\u003E\u003Cdiv class=\"mw-dismissable-notice-body\"\u003E\u003Cdiv id=\"localNotice\"\u003E\u003Cdiv class=\"sitenotice\" lang=\"en\" dir=\"ltr\"\u003E\u003Ctable class=\"messagebox\" style=\"text-align: center; background-color: lightblue; clear: both;\"\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd\u003E\u003Ci\u003EThe site is Up! Have at it! If you encounter any issues, \u003Ca rel=\"nofollow\" class=\"external text\" href=\"https://discord.gg/JUAQDevqaH\"\u003EJoin our Discord.\u003C/a\u003E If you've already joined, you can  go \u003Ca rel=\"nofollow\" class=\"external text\" href=\"https://discord.com/channels/1011262808001880065/1011262809172103300\"\u003Edirectly to our Discord server.\u003C/a\u003E --\u003Ca href=\"/wiki/User:MikeMol\" title=\"User:MikeMol\"\u003EMikeMol\u003C/a\u003E (\u003Ca href=\"/wiki/User_talk:MikeMol\" title=\"User talk:MikeMol\"\u003Etalk\u003C/a\u003E) 17:01, 25 August 2022 (UTC) '\u003C/i\u003E\n\u003C/td\u003E\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E";}}());</script></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-11l" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#11l">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>11l</div>
			</a>
			
			<ul id="toc-11l-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-360_Assembly" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#360_Assembly">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>360 Assembly</div>
			</a>
			
			<ul id="toc-360_Assembly-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-AArch64_Assembly" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#AArch64_Assembly">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>AArch64 Assembly</div>
			</a>
			
			<ul id="toc-AArch64_Assembly-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-ABAP" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#ABAP">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>ABAP</div>
			</a>
			
			<ul id="toc-ABAP-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-ACL2" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#ACL2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>ACL2</div>
			</a>
			
			<ul id="toc-ACL2-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Action!" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Action!">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6</span>Action!</div>
			</a>
			
			<ul id="toc-Action!-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-ActionScript" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#ActionScript">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">7</span>ActionScript</div>
			</a>
			
			<ul id="toc-ActionScript-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Ada" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Ada">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8</span>Ada</div>
			</a>
			
			<ul id="toc-Ada-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-ALGOL_68" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#ALGOL_68">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">9</span>ALGOL 68</div>
			</a>
			
			<ul id="toc-ALGOL_68-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-ALGOL_W" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#ALGOL_W">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">10</span>ALGOL W</div>
			</a>
			
			<ul id="toc-ALGOL_W-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-APL" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#APL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">11</span>APL</div>
			</a>
			
			<ul id="toc-APL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-AppleScript" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#AppleScript">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">12</span>AppleScript</div>
			</a>
			
				<button aria-controls="toc-AppleScript-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle AppleScript subsection
				</button>
			
			<ul id="toc-AppleScript-sublist" class="sidebar-toc-list">
				<li id="toc-Functional" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Functional">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">12.1</span>Functional</div>
			</a>
			
			<ul id="toc-Functional-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Straightforward" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Straightforward">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">12.2</span>Straightforward</div>
			</a>
			
			<ul id="toc-Straightforward-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Arc" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Arc">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">13</span>Arc</div>
			</a>
			
			<ul id="toc-Arc-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-ARM_Assembly" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#ARM_Assembly">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">14</span>ARM Assembly</div>
			</a>
			
			<ul id="toc-ARM_Assembly-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Arturo" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Arturo">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">15</span>Arturo</div>
			</a>
			
			<ul id="toc-Arturo-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-ATS" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#ATS">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">16</span>ATS</div>
			</a>
			
				<button aria-controls="toc-ATS-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle ATS subsection
				</button>
			
			<ul id="toc-ATS-sublist" class="sidebar-toc-list">
				<li id="toc-A_quicksort_working_on_non-linear_linked_lists" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#A_quicksort_working_on_non-linear_linked_lists">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">16.1</span>A quicksort working on non-linear linked lists</div>
			</a>
			
			<ul id="toc-A_quicksort_working_on_non-linear_linked_lists-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-A_quicksort_working_on_linear_linked_lists" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#A_quicksort_working_on_linear_linked_lists">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">16.2</span>A quicksort working on linear linked lists</div>
			</a>
			
			<ul id="toc-A_quicksort_working_on_linear_linked_lists-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-A_quicksort_working_on_arrays_of_non-linear_elements" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#A_quicksort_working_on_arrays_of_non-linear_elements">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">16.3</span>A quicksort working on arrays of non-linear elements</div>
			</a>
			
			<ul id="toc-A_quicksort_working_on_arrays_of_non-linear_elements-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-A_quicksort_working_on_arrays_of_linear_elements" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#A_quicksort_working_on_arrays_of_linear_elements">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">16.4</span>A quicksort working on arrays of linear elements</div>
			</a>
			
			<ul id="toc-A_quicksort_working_on_arrays_of_linear_elements-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-A_stable_quicksort_working_on_linear_lists" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#A_stable_quicksort_working_on_linear_lists">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">16.5</span>A <i>stable</i> quicksort working on linear lists</div>
			</a>
			
			<ul id="toc-A_stable_quicksort_working_on_linear_lists-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-AutoHotkey" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#AutoHotkey">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">17</span>AutoHotkey</div>
			</a>
			
			<ul id="toc-AutoHotkey-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-AWK" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#AWK">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">18</span>AWK</div>
			</a>
			
			<ul id="toc-AWK-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-BASIC" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#BASIC">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">19</span>BASIC</div>
			</a>
			
				<button aria-controls="toc-BASIC-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle BASIC subsection
				</button>
			
			<ul id="toc-BASIC-sublist" class="sidebar-toc-list">
				<li id="toc-BBC_BASIC" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#BBC_BASIC">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">19.1</span>BBC BASIC</div>
			</a>
			
			<ul id="toc-BBC_BASIC-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-IS-BASIC" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#IS-BASIC">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">19.2</span>IS-BASIC</div>
			</a>
			
			<ul id="toc-IS-BASIC-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-QB64" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#QB64">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">19.3</span>QB64</div>
			</a>
			
			<ul id="toc-QB64-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-BCPL" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#BCPL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">20</span>BCPL</div>
			</a>
			
			<ul id="toc-BCPL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Beads" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Beads">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">21</span>Beads</div>
			</a>
			
			<ul id="toc-Beads-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Bracmat" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Bracmat">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">22</span>Bracmat</div>
			</a>
			
			<ul id="toc-Bracmat-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-C" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#C">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">23</span>C</div>
			</a>
			
			<ul id="toc-C-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-C#" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#C#">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">24</span>C#</div>
			</a>
			
			<ul id="toc-C#-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-CafeOBJ" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#CafeOBJ">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">25</span>CafeOBJ</div>
			</a>
			
			<ul id="toc-CafeOBJ-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-C++" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#C++">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">26</span>C++</div>
			</a>
			
			<ul id="toc-C++-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Clojure" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Clojure">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">27</span>Clojure</div>
			</a>
			
			<ul id="toc-Clojure-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-COBOL" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#COBOL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">28</span>COBOL</div>
			</a>
			
			<ul id="toc-COBOL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-CoffeeScript" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#CoffeeScript">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">29</span>CoffeeScript</div>
			</a>
			
			<ul id="toc-CoffeeScript-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Common_Lisp" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Common_Lisp">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">30</span>Common Lisp</div>
			</a>
			
			<ul id="toc-Common_Lisp-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Cowgol" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Cowgol">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">31</span>Cowgol</div>
			</a>
			
			<ul id="toc-Cowgol-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Craft_Basic" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Craft_Basic">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">32</span>Craft Basic</div>
			</a>
			
			<ul id="toc-Craft_Basic-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Crystal" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Crystal">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">33</span>Crystal</div>
			</a>
			
			<ul id="toc-Crystal-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Curry" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Curry">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">34</span>Curry</div>
			</a>
			
			<ul id="toc-Curry-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-D" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#D">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">35</span>D</div>
			</a>
			
			<ul id="toc-D-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Delphi" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Delphi">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">36</span>Delphi</div>
			</a>
			
			<ul id="toc-Delphi-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Dart" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Dart">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">37</span>Dart</div>
			</a>
			
			<ul id="toc-Dart-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-E" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#E">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">38</span>E</div>
			</a>
			
			<ul id="toc-E-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-EasyLang" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#EasyLang">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">39</span>EasyLang</div>
			</a>
			
			<ul id="toc-EasyLang-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-EchoLisp" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#EchoLisp">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">40</span>EchoLisp</div>
			</a>
			
			<ul id="toc-EchoLisp-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Eero" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Eero">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">41</span>Eero</div>
			</a>
			
			<ul id="toc-Eero-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Eiffel" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Eiffel">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">42</span>Eiffel</div>
			</a>
			
			<ul id="toc-Eiffel-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Elena" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Elena">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">43</span>Elena</div>
			</a>
			
			<ul id="toc-Elena-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Elixir" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Elixir">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">44</span>Elixir</div>
			</a>
			
			<ul id="toc-Elixir-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Erlang" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Erlang">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">45</span>Erlang</div>
			</a>
			
			<ul id="toc-Erlang-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Emacs_Lisp" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Emacs_Lisp">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">46</span>Emacs Lisp</div>
			</a>
			
			<ul id="toc-Emacs_Lisp-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-ERRE" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#ERRE">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">47</span>ERRE</div>
			</a>
			
			<ul id="toc-ERRE-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-F#" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#F#">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">48</span>F#</div>
			</a>
			
			<ul id="toc-F#-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Factor" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Factor">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">49</span>Factor</div>
			</a>
			
			<ul id="toc-Factor-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Fe" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Fe">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">50</span>Fe</div>
			</a>
			
			<ul id="toc-Fe-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Fexl" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Fexl">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">51</span>Fexl</div>
			</a>
			
			<ul id="toc-Fexl-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Forth" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Forth">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">52</span>Forth</div>
			</a>
			
			<ul id="toc-Forth-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Fortran" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Fortran">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">53</span>Fortran</div>
			</a>
			
			<ul id="toc-Fortran-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-FreeBASIC" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#FreeBASIC">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">54</span>FreeBASIC</div>
			</a>
			
			<ul id="toc-FreeBASIC-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-FunL" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#FunL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">55</span>FunL</div>
			</a>
			
			<ul id="toc-FunL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-FutureBasic" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#FutureBasic">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">56</span>FutureBasic</div>
			</a>
			
			<ul id="toc-FutureBasic-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Go" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Go">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">57</span>Go</div>
			</a>
			
			<ul id="toc-Go-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Haskell" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Haskell">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">58</span>Haskell</div>
			</a>
			
			<ul id="toc-Haskell-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Icon_and_Unicon" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Icon_and_Unicon">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">59</span>Icon and Unicon</div>
			</a>
			
			<ul id="toc-Icon_and_Unicon-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-IDL" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#IDL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">60</span>IDL</div>
			</a>
			
			<ul id="toc-IDL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Idris" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Idris">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">61</span>Idris</div>
			</a>
			
			<ul id="toc-Idris-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Io" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Io">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">62</span>Io</div>
			</a>
			
			<ul id="toc-Io-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Isabelle" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Isabelle">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">63</span>Isabelle</div>
			</a>
			
			<ul id="toc-Isabelle-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-J" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#J">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">64</span>J</div>
			</a>
			
			<ul id="toc-J-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Java" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Java">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">65</span>Java</div>
			</a>
			
				<button aria-controls="toc-Java-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Java subsection
				</button>
			
			<ul id="toc-Java-sublist" class="sidebar-toc-list">
				<li id="toc-Imperative" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Imperative">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">65.1</span>Imperative</div>
			</a>
			
			<ul id="toc-Imperative-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Functional_2" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Functional_2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">65.2</span>Functional</div>
			</a>
			
			<ul id="toc-Functional_2-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-JavaScript" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#JavaScript">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">66</span>JavaScript</div>
			</a>
			
				<button aria-controls="toc-JavaScript-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle JavaScript subsection
				</button>
			
			<ul id="toc-JavaScript-sublist" class="sidebar-toc-list">
				<li id="toc-Imperative_2" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Imperative_2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">66.1</span>Imperative</div>
			</a>
			
			<ul id="toc-Imperative_2-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Functional_3" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Functional_3">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">66.2</span>Functional</div>
			</a>
			
			<ul id="toc-Functional_3-sublist" class="sidebar-toc-list">
				<li id="toc-ES6" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#ES6">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">66.2.1</span>ES6</div>
			</a>
			
			<ul id="toc-ES6-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-ES5" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#ES5">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">66.2.2</span>ES5</div>
			</a>
			
			<ul id="toc-ES5-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Joy" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Joy">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">67</span>Joy</div>
			</a>
			
			<ul id="toc-Joy-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-jq" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#jq">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">68</span>jq</div>
			</a>
			
			<ul id="toc-jq-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Julia" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Julia">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">69</span>Julia</div>
			</a>
			
			<ul id="toc-Julia-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-K" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#K">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">70</span>K</div>
			</a>
			
			<ul id="toc-K-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Koka" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Koka">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">71</span>Koka</div>
			</a>
			
			<ul id="toc-Koka-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Kotlin" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Kotlin">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">72</span>Kotlin</div>
			</a>
			
			<ul id="toc-Kotlin-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Lambdatalk" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Lambdatalk">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">73</span>Lambdatalk</div>
			</a>
			
			<ul id="toc-Lambdatalk-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Lobster" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Lobster">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">74</span>Lobster</div>
			</a>
			
			<ul id="toc-Lobster-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Logo" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Logo">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">75</span>Logo</div>
			</a>
			
			<ul id="toc-Logo-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Logtalk" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Logtalk">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">76</span>Logtalk</div>
			</a>
			
			<ul id="toc-Logtalk-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Lua" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Lua">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">77</span>Lua</div>
			</a>
			
				<button aria-controls="toc-Lua-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Lua subsection
				</button>
			
			<ul id="toc-Lua-sublist" class="sidebar-toc-list">
				<li id="toc-in-place" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#in-place">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">77.1</span>in-place</div>
			</a>
			
			<ul id="toc-in-place-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-non_in-place" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#non_in-place">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">77.2</span>non in-place</div>
			</a>
			
			<ul id="toc-non_in-place-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Lucid" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Lucid">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">78</span>Lucid</div>
			</a>
			
			<ul id="toc-Lucid-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-M2000_Interpreter" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#M2000_Interpreter">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">79</span>M2000 Interpreter</div>
			</a>
			
				<button aria-controls="toc-M2000_Interpreter-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle M2000 Interpreter subsection
				</button>
			
			<ul id="toc-M2000_Interpreter-sublist" class="sidebar-toc-list">
				<li id="toc-Recursive_calling_Functions" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Recursive_calling_Functions">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">79.1</span>Recursive calling Functions</div>
			</a>
			
			<ul id="toc-Recursive_calling_Functions-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Recursive_calling_Subs" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Recursive_calling_Subs">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">79.2</span>Recursive calling Subs</div>
			</a>
			
			<ul id="toc-Recursive_calling_Subs-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Non_Recursive" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Non_Recursive">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">79.3</span>Non Recursive</div>
			</a>
			
			<ul id="toc-Non_Recursive-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-M4" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#M4">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">80</span>M4</div>
			</a>
			
			<ul id="toc-M4-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Maclisp" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Maclisp">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">81</span>Maclisp</div>
			</a>
			
			<ul id="toc-Maclisp-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Maple" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Maple">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">82</span>Maple</div>
			</a>
			
			<ul id="toc-Maple-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Mathematica/Wolfram_Language" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Mathematica/Wolfram_Language">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">83</span>Mathematica/Wolfram Language</div>
			</a>
			
			<ul id="toc-Mathematica/Wolfram_Language-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-MATLAB" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#MATLAB">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">84</span>MATLAB</div>
			</a>
			
			<ul id="toc-MATLAB-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-MAXScript" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#MAXScript">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">85</span>MAXScript</div>
			</a>
			
			<ul id="toc-MAXScript-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Mercury" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Mercury">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">86</span>Mercury</div>
			</a>
			
				<button aria-controls="toc-Mercury-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Mercury subsection
				</button>
			
			<ul id="toc-Mercury-sublist" class="sidebar-toc-list">
				<li id="toc-A_quicksort_that_works_on_linked_lists" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#A_quicksort_that_works_on_linked_lists">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">86.1</span>A quicksort that works on linked lists</div>
			</a>
			
			<ul id="toc-A_quicksort_that_works_on_linked_lists-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-A_quicksort_that_works_on_arrays" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#A_quicksort_that_works_on_arrays">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">86.2</span>A quicksort that works on arrays</div>
			</a>
			
			<ul id="toc-A_quicksort_that_works_on_arrays-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-MiniScript" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#MiniScript">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">87</span>MiniScript</div>
			</a>
			
			<ul id="toc-MiniScript-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Miranda" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Miranda">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">88</span>Miranda</div>
			</a>
			
			<ul id="toc-Miranda-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Modula-2" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Modula-2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">89</span>Modula-2</div>
			</a>
			
			<ul id="toc-Modula-2-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Modula-3" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Modula-3">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">90</span>Modula-3</div>
			</a>
			
			<ul id="toc-Modula-3-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Mond" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Mond">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">91</span>Mond</div>
			</a>
			
			<ul id="toc-Mond-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-MUMPS" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#MUMPS">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">92</span>MUMPS</div>
			</a>
			
			<ul id="toc-MUMPS-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Nanoquery" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Nanoquery">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">93</span>Nanoquery</div>
			</a>
			
			<ul id="toc-Nanoquery-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Nemerle" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Nemerle">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">94</span>Nemerle</div>
			</a>
			
			<ul id="toc-Nemerle-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-NetRexx" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#NetRexx">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">95</span>NetRexx</div>
			</a>
			
			<ul id="toc-NetRexx-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Nial" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Nial">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">96</span>Nial</div>
			</a>
			
			<ul id="toc-Nial-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Nim" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Nim">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">97</span>Nim</div>
			</a>
			
				<button aria-controls="toc-Nim-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Nim subsection
				</button>
			
			<ul id="toc-Nim-sublist" class="sidebar-toc-list">
				<li id="toc-Procedural_(in_place)_algorithm" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Procedural_(in_place)_algorithm">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">97.1</span>Procedural (in place) algorithm</div>
			</a>
			
			<ul id="toc-Procedural_(in_place)_algorithm-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Functional_(inmmutability)_algorithm" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Functional_(inmmutability)_algorithm">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">97.2</span>Functional (inmmutability) algorithm</div>
			</a>
			
			<ul id="toc-Functional_(inmmutability)_algorithm-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Nix" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Nix">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">98</span>Nix</div>
			</a>
			
			<ul id="toc-Nix-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Oberon-2" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Oberon-2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">99</span>Oberon-2</div>
			</a>
			
			<ul id="toc-Oberon-2-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Objeck" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Objeck">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">100</span>Objeck</div>
			</a>
			
			<ul id="toc-Objeck-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Objective-C" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Objective-C">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">101</span>Objective-C</div>
			</a>
			
			<ul id="toc-Objective-C-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-OCaml" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#OCaml">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">102</span>OCaml</div>
			</a>
			
				<button aria-controls="toc-OCaml-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle OCaml subsection
				</button>
			
			<ul id="toc-OCaml-sublist" class="sidebar-toc-list">
				<li id="toc-Declarative_and_purely_functional" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Declarative_and_purely_functional">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">102.1</span>Declarative and purely functional</div>
			</a>
			
			<ul id="toc-Declarative_and_purely_functional-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Imperative_and_in_place" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Imperative_and_in_place">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">102.2</span>Imperative and in place</div>
			</a>
			
			<ul id="toc-Imperative_and_in_place-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Octave" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Octave">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">103</span>Octave</div>
			</a>
			
			<ul id="toc-Octave-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Oforth" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Oforth">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">104</span>Oforth</div>
			</a>
			
			<ul id="toc-Oforth-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Ol" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Ol">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">105</span>Ol</div>
			</a>
			
			<ul id="toc-Ol-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-ooRexx" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#ooRexx">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">106</span>ooRexx</div>
			</a>
			
			<ul id="toc-ooRexx-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Oz" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Oz">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">107</span>Oz</div>
			</a>
			
			<ul id="toc-Oz-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-PARI/GP" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#PARI/GP">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">108</span>PARI/GP</div>
			</a>
			
			<ul id="toc-PARI/GP-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Pascal" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Pascal">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">109</span>Pascal</div>
			</a>
			
			<ul id="toc-Pascal-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Perl" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Perl">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">110</span>Perl</div>
			</a>
			
			<ul id="toc-Perl-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Phix" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Phix">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">111</span>Phix</div>
			</a>
			
			<ul id="toc-Phix-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-PHP" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#PHP">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">112</span>PHP</div>
			</a>
			
			<ul id="toc-PHP-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Picat" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Picat">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">113</span>Picat</div>
			</a>
			
				<button aria-controls="toc-Picat-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Picat subsection
				</button>
			
			<ul id="toc-Picat-sublist" class="sidebar-toc-list">
				<li id="toc-Function" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Function">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">113.1</span>Function</div>
			</a>
			
			<ul id="toc-Function-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Recursion" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Recursion">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">113.2</span>Recursion</div>
			</a>
			
			<ul id="toc-Recursion-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-PicoLisp" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#PicoLisp">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">114</span>PicoLisp</div>
			</a>
			
			<ul id="toc-PicoLisp-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-PL/I" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#PL/I">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">115</span>PL/I</div>
			</a>
			
			<ul id="toc-PL/I-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-PowerShell" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#PowerShell">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">116</span>PowerShell</div>
			</a>
			
				<button aria-controls="toc-PowerShell-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle PowerShell subsection
				</button>
			
			<ul id="toc-PowerShell-sublist" class="sidebar-toc-list">
				<li id="toc-First_solution" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#First_solution">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">116.1</span>First solution</div>
			</a>
			
			<ul id="toc-First_solution-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Another_solution" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Another_solution">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">116.2</span>Another solution</div>
			</a>
			
			<ul id="toc-Another_solution-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Yet_another_solution" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Yet_another_solution">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">116.3</span>Yet another solution</div>
			</a>
			
			<ul id="toc-Yet_another_solution-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Prolog" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Prolog">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">117</span>Prolog</div>
			</a>
			
			<ul id="toc-Prolog-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-PureBasic" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#PureBasic">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">118</span>PureBasic</div>
			</a>
			
			<ul id="toc-PureBasic-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Python" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Python">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">119</span>Python</div>
			</a>
			
			<ul id="toc-Python-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Qi" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Qi">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">120</span>Qi</div>
			</a>
			
			<ul id="toc-Qi-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Quackery" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Quackery">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">121</span>Quackery</div>
			</a>
			
			<ul id="toc-Quackery-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-R" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#R">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">122</span>R</div>
			</a>
			
			<ul id="toc-R-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Racket" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Racket">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">123</span>Racket</div>
			</a>
			
			<ul id="toc-Racket-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Raku" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Raku">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">124</span>Raku</div>
			</a>
			
			<ul id="toc-Raku-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Red" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Red">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">125</span>Red</div>
			</a>
			
			<ul id="toc-Red-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-REXX" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#REXX">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">126</span>REXX</div>
			</a>
			
				<button aria-controls="toc-REXX-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle REXX subsection
				</button>
			
			<ul id="toc-REXX-sublist" class="sidebar-toc-list">
				<li id="toc-version_1" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#version_1">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">126.1</span>version 1</div>
			</a>
			
			<ul id="toc-version_1-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-version_2" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#version_2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">126.2</span>version 2</div>
			</a>
			
			<ul id="toc-version_2-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Ring" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Ring">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">127</span>Ring</div>
			</a>
			
			<ul id="toc-Ring-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Ruby" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Ruby">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">128</span>Ruby</div>
			</a>
			
			<ul id="toc-Ruby-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Run_BASIC" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Run_BASIC">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">129</span>Run BASIC</div>
			</a>
			
			<ul id="toc-Run_BASIC-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Rust" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Rust">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">130</span>Rust</div>
			</a>
			
			<ul id="toc-Rust-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-SASL" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#SASL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">131</span>SASL</div>
			</a>
			
			<ul id="toc-SASL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Sather" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Sather">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">132</span>Sather</div>
			</a>
			
			<ul id="toc-Sather-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Scala" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Scala">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">133</span>Scala</div>
			</a>
			
			<ul id="toc-Scala-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Scheme" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Scheme">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">134</span>Scheme</div>
			</a>
			
				<button aria-controls="toc-Scheme-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Scheme subsection
				</button>
			
			<ul id="toc-Scheme-sublist" class="sidebar-toc-list">
				<li id="toc-List_quicksort" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#List_quicksort">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">134.1</span>List quicksort</div>
			</a>
			
			<ul id="toc-List_quicksort-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Vector_quicksort_(in_place)" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Vector_quicksort_(in_place)">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">134.2</span>Vector quicksort (in place)</div>
			</a>
			
			<ul id="toc-Vector_quicksort_(in_place)-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Seed7" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Seed7">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">135</span>Seed7</div>
			</a>
			
			<ul id="toc-Seed7-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-SETL" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#SETL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">136</span>SETL</div>
			</a>
			
			<ul id="toc-SETL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Sidef" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Sidef">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">137</span>Sidef</div>
			</a>
			
			<ul id="toc-Sidef-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Simula" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Simula">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">138</span>Simula</div>
			</a>
			
			<ul id="toc-Simula-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Standard_ML" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Standard_ML">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">139</span>Standard ML</div>
			</a>
			
			<ul id="toc-Standard_ML-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Swift" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Swift">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">140</span>Swift</div>
			</a>
			
			<ul id="toc-Swift-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Symsyn" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Symsyn">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">141</span>Symsyn</div>
			</a>
			
			<ul id="toc-Symsyn-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Tailspin" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Tailspin">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">142</span>Tailspin</div>
			</a>
			
			<ul id="toc-Tailspin-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Tcl" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Tcl">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">143</span>Tcl</div>
			</a>
			
			<ul id="toc-Tcl-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-True_BASIC" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#True_BASIC">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">144</span>True BASIC</div>
			</a>
			
			<ul id="toc-True_BASIC-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-TypeScript" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#TypeScript">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">145</span>TypeScript</div>
			</a>
			
			<ul id="toc-TypeScript-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-uBasic/4tH" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#uBasic/4tH">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">146</span>uBasic/4tH</div>
			</a>
			
			<ul id="toc-uBasic/4tH-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-UnixPipes" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#UnixPipes">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">147</span>UnixPipes</div>
			</a>
			
			<ul id="toc-UnixPipes-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Ursala" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Ursala">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">148</span>Ursala</div>
			</a>
			
			<ul id="toc-Ursala-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-V" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#V">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">149</span>V</div>
			</a>
			
			<ul id="toc-V-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-VBA" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#VBA">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">150</span>VBA</div>
			</a>
			
			<ul id="toc-VBA-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-VBScript" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#VBScript">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">151</span>VBScript</div>
			</a>
			
			<ul id="toc-VBScript-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Visual_Basic" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Visual_Basic">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">152</span>Visual Basic</div>
			</a>
			
			<ul id="toc-Visual_Basic-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-V_(Vlang)" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#V_(Vlang)">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">153</span>V (Vlang)</div>
			</a>
			
			<ul id="toc-V_(Vlang)-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Wart" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Wart">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">154</span>Wart</div>
			</a>
			
			<ul id="toc-Wart-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Wren" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Wren">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">155</span>Wren</div>
			</a>
			
			<ul id="toc-Wren-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Yabasic" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Yabasic">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">156</span>Yabasic</div>
			</a>
			
			<ul id="toc-Yabasic-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-XPL0" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#XPL0">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">157</span>XPL0</div>
			</a>
			
			<ul id="toc-XPL0-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Z80_Assembly" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Z80_Assembly">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">158</span>Z80 Assembly</div>
			</a>
			
			<ul id="toc-Z80_Assembly-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-zkl" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#zkl">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">159</span>zkl</div>
			</a>
			
			<ul id="toc-zkl-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main">
				<a id="top"></a>
				<header class="mw-body-header">
				
				
					<label id="vector-toc-collapsed-button" class="mw-ui-button mw-ui-quiet mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-listBullet mw-checkbox-hack-button" for="vector-toc-collapsed-checkbox" role="button" aria-controls="toc-toggle-list" data-event-name="vector.toc-toggle-list" tabindex="0" title="Table of Contents">
						Toggle the table of contents
					</label>
				    <h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Sorting algorithms/Quicksort</span></h1>
				</header>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Quicksort" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Talk:Sorting_algorithms/Quicksort" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li></ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant"/>
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Quicksort"><span>Read</span></a></li><li id="ca-edit" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit" title="Edit this page [e]" accesskey="e"><span>Edit</span></a></li><li id="ca-history" class="mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li></ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox"/>
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Quicksort"><span>Read</span></a></li><li id="ca-more-edit" class="vector-more-collapsible-item mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit"><span>Edit</span></a></li><li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=history"><span>View history</span></a></li></ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        <div id="mw-indicator-smw-entity-examiner" class="mw-indicator"><div class="smw-entity-examiner smw-indicator-vertical-bar-loader" data-subject="Sorting_algorithms/Quicksort#0##" data-dir="ltr" data-uselang="" title="Running an examiner in the background"></div></div>
        </div>

					    <div id="siteSub" class="noprint">From Rosetta Code</div>
					</div>
					<div id="contentSub"><span class="subpages">&lt; <a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms" class="mw-redirect" title="Sorting algorithms">Sorting algorithms</a></span></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><div class="infobox" style="width: 2in"><div class="floatleft"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Solutions_by_Programming_Task" title="Category:Solutions by Programming Task"><img alt="Task" src="//web.archive.org/web/20230609112831im_/https://static.miraheze.org/rosettacodewiki/thumb/b/ba/Rcode-button-task-crushed.png/64px-Rcode-button-task-crushed.png" decoding="async" width="64" height="64" srcset="//web.archive.org/web/20230609112831im_/https://static.miraheze.org/rosettacodewiki/thumb/b/ba/Rcode-button-task-crushed.png/96px-Rcode-button-task-crushed.png 1.5x, //web.archive.org/web/20230609112831im_/https://static.miraheze.org/rosettacodewiki/thumb/b/ba/Rcode-button-task-crushed.png/128px-Rcode-button-task-crushed.png 2x"/></a></div><b>Sorting algorithms/Quicksort</b><br/>
You are encouraged to <a href="/web/20230609112831/https://rosettacode.org/wiki/Rosetta_Code:Solve_a_Task" title="Rosetta Code:Solve a Task">solve this task</a> according to the task description, using any language you may know.</div>
<div class="infobox" style="width: 2in">
<p><big><b>Sorting Algorithm</b></big><br/>
This is a sorting algorithm. &#160; It may be applied to a set of data in order to sort it. &#160; &#160;
For comparing various sorts, see <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Compare_sorting_algorithms%27_performance">compare sorts</a>. &#160;
For other sorting algorithms, &#160; see <a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Sorting_Algorithms" title="Category:Sorting Algorithms">sorting&#160;algorithms</a>, &#160; or:
</p>
<small><center><b><a href="/web/20230609112831/https://rosettacode.org/wiki/O" title="O">O</a>(<i>n</i> log<i>n</i>) sorts</b><br/>
<p><a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Heapsort" title="Sorting algorithms/Heapsort">Heap&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Merge_sort" title="Sorting algorithms/Merge sort">Merge&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Patience_sort" title="Sorting algorithms/Patience sort">Patience&#160;sort</a> | 
<a class="mw-selflink selflink">Quick&#160;sort</a>
</p><p><b><a href="/web/20230609112831/https://rosettacode.org/wiki/O" title="O">O</a>(<i>n</i> log<sup>2</sup><i>n</i>) sorts</b><br/>
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Shell_sort" title="Sorting algorithms/Shell sort">Shell&#160;Sort</a>
</p><p><b><a href="/web/20230609112831/https://rosettacode.org/wiki/O" title="O">O</a>(<i>n</i><sup>2</sup>) sorts</b><br/>
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Bubble_sort" title="Sorting algorithms/Bubble sort">Bubble&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Cocktail_sort" title="Sorting algorithms/Cocktail sort">Cocktail&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Cocktail_sort_with_shifting_bounds" title="Sorting algorithms/Cocktail sort with shifting bounds">Cocktail&#160;sort&#160;with&#160;shifting&#160;bounds</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Comb_sort" title="Sorting algorithms/Comb sort">Comb&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Cycle_sort" title="Sorting algorithms/Cycle sort">Cycle&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Gnome_sort" title="Sorting algorithms/Gnome sort">Gnome&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Insertion_sort" title="Sorting algorithms/Insertion sort">Insertion&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Selection_sort" title="Sorting algorithms/Selection sort">Selection&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Strand_sort" title="Sorting algorithms/Strand sort">Strand&#160;sort</a> 
</p><p><b>other sorts</b><br/>
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Bead_sort" title="Sorting algorithms/Bead sort">Bead&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Bogosort" title="Sorting algorithms/Bogosort">Bogo&#160;sort</a> | 
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Common_sorted_list">Common&#160;sorted&#160;list</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Sort_an_array_of_composite_structures">Composite&#160;structures&#160;sort</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Sort_using_a_custom_comparator">Custom&#160;comparator&#160;sort</a> |
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Counting_sort" title="Sorting algorithms/Counting sort">Counting&#160;sort</a> | 
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Sort_disjoint_sublist">Disjoint&#160;sublist&#160;sort</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/External_sort">External&#160;sort</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/JortSort">Jort&#160;sort</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Sort_numbers_lexicographically">Lexicographical&#160;sort</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Natural_sorting">Natural&#160;sorting</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Order_by_pair_comparisons">Order&#160;by&#160;pair&#160;comparisons</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Order_disjoint_list_items">Order&#160;disjoint&#160;list&#160;items</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Order_two_numerical_lists">Order&#160;two&#160;numerical&#160;lists</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Sort_a_list_of_object_identifiers">Object&#160;identifier&#160;(OID)&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Pancake_sort" title="Sorting algorithms/Pancake sort">Pancake&#160;sort</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Quickselect_algorithm">Quickselect</a> |
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Permutation_sort" title="Sorting algorithms/Permutation sort">Permutation&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Radix_sort" title="Sorting algorithms/Radix sort">Radix&#160;sort</a> |
<a href="/web/20230609112831/https://rosettacode.org/wiki/Ranking_methods" title="Ranking methods">Ranking&#160;methods</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Remove_duplicate_elements">Remove&#160;duplicate&#160;elements</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Sleep_sort" title="Sorting algorithms/Sleep sort">Sleep&#160;sort</a> | 
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Stooge_sort" title="Sorting algorithms/Stooge sort">Stooge&#160;sort</a> |
[<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Sort_the_letters_of_string_in_alphabitical_order">Sort&#160;letters&#160;of&#160;a&#160;string</a>] |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Sort_three_variables">Three&#160;variable&#160;sort</a> |
<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Topological_sort">Topological&#160;sort</a> |
<a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Tree_sort_on_a_linked_list" title="Sorting algorithms/Tree sort on a linked list">Tree&#160;sort</a>
</p>
</center></small></div>
<table align="center" border="0" cellpadding="3" cellspacing="3" style="border: 1px solid #E0E0E0; background-color: #F8F8F8; color:black;">
<tbody><tr>
<td style="font-size: 90%">This page uses content from <b><a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/http://en.wikipedia.org/">Wikipedia</a></b>. The original article was at <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/http://en.wikipedia.org/wiki/Quicksort">Quicksort</a>. The list of authors can be seen in the <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/http://en.wikipedia.org/w/index.php?title=Quicksort&amp;action=history"><b>page history</b></a>. <a href="/web/20230609112831/https://rosettacode.org/wiki/Rosetta_Code:Copyrights" title="Rosetta Code:Copyrights">As with Rosetta Code</a>, the text of Wikipedia <a href="https://web.archive.org/web/20230609112831/https://en.wikipedia.org/wiki/Project:Copyrights" class="extiw" title="wp:Project:Copyrights">is available</a> under the <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/http://www.gnu.org/licenses/fdl.html">GNU FDL</a>. (See links for details on variance)
</td></tr></tbody></table>
<p><br/>
</p>
<dl><dt>Task</dt>
<dd></dd></dl>
<p>Sort an array (or list) elements using the &#160; <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://en.wikipedia.org/wiki/Quicksort"><i>quicksort</i></a> &#160; algorithm. 
</p><p>The elements must have a &#160; <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://en.wikipedia.org/wiki/Weak_ordering">strict weak order</a> &#160; and the index of the array can be of any discrete type. 
</p><p>For languages where this is not possible, sort an array of integers.
</p><p><br/>
Quicksort, also known as &#160; <i>partition-exchange sort</i>, &#160; uses these steps.
</p>
<dl><dd><dl><dd><ol><li>&#160; Choose any element of the array to be the pivot.</li>
<li>&#160; Divide all other elements (except the pivot) into two partitions.
<ul><li>&#160; All elements less than the pivot must be in the first partition.</li>
<li>&#160; All elements greater than the pivot must be in the second partition.</li></ul></li>
<li>&#160; Use recursion to sort both partitions.</li>
<li>&#160; Join the first sorted partition, the pivot, and the second sorted partition.</li></ol></dd></dl></dd></dl>
<p><br/>
The best pivot creates partitions of equal length (or lengths differing by &#160; <b>1</b>). 
</p><p>The worst pivot creates an empty partition (for example, if the pivot is the first or last element of a sorted array). 
</p><p>The run-time of Quicksort ranges from &#160; <big> <i><a href="/web/20230609112831/https://rosettacode.org/wiki/O" title="O">O</a>(n </i>log<i> n)</i> </big> &#160; with the best pivots, to &#160; <big>  <i><a href="/web/20230609112831/https://rosettacode.org/wiki/O" title="O">O</a>(n<sup>2</sup>)</i> </big> &#160; with the worst pivots, where &#160; <big> <i>n</i> </big> &#160; is the number of elements in the array.
</p><p><br/>
This is a simple quicksort algorithm, adapted from Wikipedia.
</p>
<pre><b>function</b> <i>quicksort</i>(array)
    less, equal, greater <b>:=</b> three empty arrays
    <b>if</b> length(array) &gt; 1  
        pivot <b>:=</b> <i>select any element of</i> array
        <b>for each</b> x <b>in</b> array
            <b>if</b> x &lt; pivot <b>then add</b> x <b>to</b> less
            <b>if</b> x = pivot <b>then add</b> x <b>to</b> equal
            <b>if</b> x &gt; pivot <b>then add</b> x <b>to</b> greater
        quicksort(less)
        quicksort(greater)
        array <b>:=</b> concatenate(less, equal, greater)
</pre>
<p>A better quicksort algorithm works in place, by swapping elements within the array, to avoid the memory allocation of more arrays.
</p>
<pre><b>function</b> <i>quicksort</i>(array)
    <b>if</b> length(array) &gt; 1
        pivot <b>:=</b> <i>select any element of</i> array
        left <b>:= first index of</b> array
        right <b>:=</b> <b>last index of</b> array
        <b>while</b> left  right
            <b>while</b> array[left] &lt; pivot
                left&#160;:= left + 1
            <b>while</b> array[right] &gt; pivot
                right&#160;:= right - 1
            <b>if</b> left  right
                <b>swap</b> array[left] <b>with</b> array[right]
                left&#160;:= left + 1
                right&#160;:= right - 1
        quicksort(array <b>from first index to</b> right)
        quicksort(array <b>from</b> left <b>to last index</b>)
</pre>
<p>Quicksort has a reputation as the fastest sort. Optimized variants of quicksort are common features of many languages and libraries. One often contrasts quicksort with &#160; <a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Merge_sort" title="Sorting algorithms/Merge sort">merge sort</a>, &#160; because both sorts have an average time of &#160; <big> <i><a href="/web/20230609112831/https://rosettacode.org/wiki/O" title="O">O</a>(n </i>log<i> n)</i>. </big>
</p>
<dl><dd><i>"On average, mergesort does fewer comparisons than quicksort, so it may be better when complicated comparison routines are used. Mergesort also takes advantage of pre-existing order, so it would be favored for using sort() to merge several sorted arrays. On the other hand, quicksort is often faster for small arrays, and on arrays of a few distinct values, repeated many times."</i>  <a rel="nofollow" class="external free" href="https://web.archive.org/web/20230609112831/http://perldoc.perl.org/sort.html">http://perldoc.perl.org/sort.html</a></dd></dl>
<p>Quicksort is at one end of the spectrum of divide-and-conquer algorithms, with merge sort at the opposite end.
</p>
<ul><li>Quicksort is a conquer-then-divide algorithm, which does most of the work during the partitioning and the recursive calls. The subsequent reassembly of the sorted partitions involves trivial effort.</li>
<li>Merge sort is a divide-then-conquer algorithm. The partioning happens in a trivial way, by splitting the input array in half. Most of the work happens during the recursive calls and the merge phase.</li></ul>
<p><br/>
With quicksort, every element in the first partition is less than or equal to every element in the second partition. Therefore, the merge phase of quicksort is so trivial that it needs no mention!
</p><p>This task has not specified whether to allocate new arrays, or sort in place. This task also has not specified how to choose the pivot element. (Common ways to are to choose the first element, the middle element, or the median of three elements.) Thus there is a variety among the following implementations.
<br/><br/>
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="11l"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:11l" title="Category:11l">11l</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=1" title="Edit section: 11l">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#Python">Python</a></div>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>F _quicksort(&amp;array, start, stop) -&gt; N
   I stop - start &gt; 0
      V pivot = array[start]
      V left = start
      V right = stop
      L left &lt;= right
         L array[left] &lt; pivot
            left++
         L array[right] &gt; pivot
            right--
         I left &lt;= right
            swap(&amp;array[left], &amp;array[right])
            left++
            right--
      _quicksort(&amp;array, start, right)
      _quicksort(&amp;array, left, stop)

F quicksort(&amp;array)
   _quicksort(&amp;array, 0, array.len - 1)

V arr = [7, 6, 5, 9, 8, 4, 3, 1, 2, 0]
quicksort(&amp;arr)
print(arr)</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</pre>
<h2><span class="mw-headline" id="360_Assembly"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:360_Assembly" title="Category:360 Assembly">360 Assembly</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=2" title="Edit section: 360 Assembly">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#REXX">REXX</a></div>
<p>Structured version with ASM &amp; ASSIST macros.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>*        Quicksort                 14/09/2015 &amp; 23/06/2016
QUICKSOR CSECT
         USING  QUICKSOR,R13       base register
         B      72(R15)            skip savearea
         DC     17F'0'             savearea
         STM    R14,R12,12(R13)    prolog
         ST     R13,4(R15)         "
         ST     R15,8(R13)         " 
         LR     R13,R15            "
         MVC    A,=A(1)            a(1)=1
         MVC    B,=A(NN)           b(1)=hbound(t)
         L      R6,=F'1'           k=1
       DO WHILE=(LTR,R6,NZ,R6)   do while k&lt;&gt;0    ==================
         LR     R1,R6              k 
         SLA    R1,2               ~
         L      R10,A-4(R1)        l=a(k)
         LR     R1,R6              k
         SLA    R1,2               ~
         L      R11,B-4(R1)        m=b(k)
         BCTR   R6,0               k=k-1
         LR     R4,R11             m
         C      R4,=F'2'           if m&lt;2 
         BL     ITERATE            then iterate
         LR     R2,R10             l
         AR     R2,R11             +m
         BCTR   R2,0               -1
         ST     R2,X               x=l+m-1
         LR     R2,R11             m
         SRA    R2,1               m/2
         AR     R2,R10             +l
         ST     R2,Y               y=l+m/2
         L      R1,X               x
         SLA    R1,2               ~
         L      R4,T-4(R1)         r4=t(x)
         L      R1,Y               y
         SLA    R1,2               ~
         L      R5,T-4(R1)         r5=t(y)
         LR     R1,R10             l
         SLA    R1,2               ~
         L      R3,T-4(R1)         r3=t(l)
         IF     CR,R4,LT,R3        if t(x)&lt;t(l)       ---+
         IF     CR,R5,LT,R4          if t(y)&lt;t(x)        |
         LR     R7,R4                  p=t(x)            |
         L      R1,X                   x                 |
         SLA    R1,2                   ~                 |
         ST     R3,T-4(R1)             t(x)=t(l)         |
         ELSEIF CR,R5,GT,R3          elseif t(y)&gt;t(l)    |
         LR     R7,R3                  p=t(l)            |
         ELSE   ,                    else                |
         LR     R7,R5                  p=t(y)            |
         L      R1,Y                   y                 |
         SLA    R1,2                   ~                 |
         ST     R3,T-4(R1)            t(y)=t(l)          |
         ENDIF  ,                    end if              |
         ELSE   ,                  else                  |
         IF     CR,R5,LT,R3          if t(y)&lt;t(l)        |
         LR     R7,R3                  p=t(l)            |
         ELSEIF CR,R5,GT,R4          elseif t(y)&gt;t(x)    |
         LR     R7,R4                  p=t(x)            |
         L      R1,X                   x                 |
         SLA    R1,2                   ~                 |
         ST     R3,T-4(R1)             t(x)=t(l)         |
         ELSE   ,                    else                |
         LR     R7,R5                  p=t(y)            |
         L      R1,Y                   y                 |
         SLA    R1,2                   ~                 |
         ST     R3,T-4(R1)             t(y)=t(l)         |
         ENDIF  ,                    end if              |
         ENDIF  ,                  end if             ---+
         LA     R8,1(R10)          i=l+1
         L      R9,X               j=x
FOREVER  EQU    *                  do forever  --------------------+  
         LR     R1,R8                i                             |
         SLA    R1,2                 ~                             |
         LA     R2,T-4(R1)           @t(i)                         |
         L      R0,0(R2)             t(i)                          |
         DO WHILE=(CR,R8,LE,R9,AND,  while i&lt;=j and   ---+         |   X
               CR,R0,LE,R7)                t(i)&lt;=p       |         |
         AH     R8,=H'1'               i=i+1             |         |
         AH     R2,=H'4'               @t(i)             |         |
         L      R0,0(R2)               t(i)              |         |
         ENDDO  ,                    end while        ---+         |
         LR     R1,R9                j                             |
         SLA    R1,2                 ~                             |
         LA     R2,T-4(R1)           @t(j)                         |
         L      R0,0(R2)             t(j)                          |
         DO WHILE=(CR,R8,LT,R9,AND,  while i&lt;j and    ---+         |   X
               CR,R0,GE,R7)                t(j)&gt;=p       |         |
         SH     R9,=H'1'               j=j-1             |         |
         SH     R2,=H'4'               @t(j)             |         |
         L      R0,0(R2)               t(j)              |         |
         ENDDO  ,                    end while        ---+         |
         CR     R8,R9                if i&gt;=j                       |
         BNL    LEAVE                then leave (segment finished) |
         LR     R1,R8                i                             |
         SLA    R1,2                 ~                             |
         LA     R2,T-4(R1)           @t(i)                         |
         LR     R1,R9                j                             |
         SLA    R1,2                 ~                             |
         LA     R3,T-4(R1)           @t(j)                         |
         L      R0,0(R2)             w=t(i)       +                |
         MVC    0(4,R2),0(R3)        t(i)=t(j)    |swap t(i),t(j)  |
         ST     R0,0(R3)             t(j)=w       +                |
         B      FOREVER            end do forever  ----------------+
LEAVE    EQU    *
         LR     R9,R8              j=i
         BCTR   R9,0               j=i-1
         LR     R1,R9              j
         SLA    R1,2               ~
         LA     R3,T-4(R1)         @t(j)
         L      R2,0(R3)           t(j)
         LR     R1,R10             l
         SLA    R1,2               ~
         ST     R2,T-4(R1)         t(l)=t(j)
         ST     R7,0(R3)           t(j)=p
         LA     R6,1(R6)           k=k+1
         LR     R1,R6              k
         SLA    R1,2               ~
         LA     R4,A-4(R1)         r4=@a(k)
         LA     R5,B-4(R1)         r5=@b(k)
         IF     C,R8,LE,Y          if i&lt;=y           ----+
         ST     R8,0(R4)             a(k)=i              |
         L      R2,X                 x                   |
         SR     R2,R8                -i                  |
         LA     R2,1(R2)             +1                  |
         ST     R2,0(R5)             b(k)=x-i+1          |
         LA     R6,1(R6)             k=k+1               |
         ST     R10,4(R4)            a(k)=l              |
         LR     R2,R9                j                   |
         SR     R2,R10               -l                  |
         ST     R2,4(R5)             b(k)=j-l            |
         ELSE   ,                  else                  |
         ST     R10,4(R4)            a(k)=l              |
         LR     R2,R9                j                   |
         SR     R2,R10               -l                  |
         ST     R2,0(R5)             b(k)=j-l            |
         LA     R6,1(R6)             k=k+1               |
         ST     R8,4(R4)             a(k)=i              |
         L      R2,X                 x                   |
         SR     R2,R8                -i                  |
         LA     R2,1(R2)             +1                  |
         ST     R2,4(R5)             b(k)=x-i+1          |
         ENDIF  ,                  end if            ----+
ITERATE  EQU    *                  
       ENDDO    ,                  end while  =====================
*        ***    *********          print sorted table
         LA     R3,PG              ibuffer
         LA     R4,T               @t(i)
       DO WHILE=(C,R4,LE,=A(TEND)) do i=1 to hbound(t)
         L      R2,0(R4)             t(i)
         XDECO  R2,XD                edit t(i)
         MVC    0(4,R3),XD+8         put in buffer
         LA     R3,4(R3)             ibuffer=ibuffer+1
         LA     R4,4(R4)             i=i+1
       ENDDO    ,                  end do
         XPRNT  PG,80              print buffer
         L      R13,4(0,R13)       epilog 
         LM     R14,R12,12(R13)    "
         XR     R15,R15            "
         BR     R14                exit
T        DC     F'10',F'9',F'9',F'6',F'7',F'16',F'1',F'16',F'17',F'15'
         DC     F'1',F'9',F'18',F'16',F'8',F'20',F'18',F'2',F'19',F'8'
TEND     DS     0F
NN       EQU    (TEND-T)/4)
A        DS     (NN)F              same size as T
B        DS     (NN)F              same size as T
X        DS     F
Y        DS     F
PG       DS     CL80
XD       DS     CL12
         YREGS 
         END    QUICKSOR</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>   1   1   2   6   7   8   8   9   9   9  10  15  16  16  16  17  18  18  19  20
</pre>
<h2><span class="mw-headline" id="AArch64_Assembly"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:AArch64_Assembly" title="Category:AArch64 Assembly">AArch64 Assembly</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=3" title="Edit section: AArch64 Assembly">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=As&amp;action=edit&amp;redlink=1" class="new" title="As (page does not exist)">as</a> version Raspberry Pi 3B version Buster 64 bits</div>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>/* ARM assembly AARCH64 Raspberry PI 3B */
/*  program quickSort64.s  */
 
/*******************************************/
/* Constantes file                         */
/*******************************************/
/* for this file see task include a file in language AArch64 assembly */
.include "../includeConstantesARM64.inc"

/*********************************/
/* Initialized data              */
/*********************************/
.data
szMessSortOk:       .asciz "Table sorted.\n"
szMessSortNok:      .asciz "Table not sorted&#160;!!!!!.\n"
sMessResult:        .asciz "Value &#160;: @ \n"
szCarriageReturn:   .asciz "\n"
 
.align 4
TableNumber:      .quad   1,3,6,2,5,9,10,8,4,7,11
#TableNumber:     .quad   10,9,8,7,6,-5,4,3,2,1
                 .equ NBELEMENTS, (. - TableNumber) / 8 
/*********************************/
/* UnInitialized data            */
/*********************************/
.bss
sZoneConv:       .skip 24
/*********************************/
/*  code section                 */
/*********************************/
.text
.global main 
main:                                              // entry of program 
    ldr x0,qAdrTableNumber                         // address number table
    mov x1,0                                       // first element
    mov x2,NBELEMENTS                              // number of lements 
    bl quickSort
    ldr x0,qAdrTableNumber                         // address number table
    bl displayTable
 
    ldr x0,qAdrTableNumber                         // address number table
    mov x1,NBELEMENTS                              // number of lements 
    bl isSorted                                    // control sort
    cmp x0,1                                       // sorted&#160;?
    beq 1f                                    
    ldr x0,qAdrszMessSortNok                       // no&#160;!! error sort
    bl affichageMess
    b 100f
1:                                                 // yes
    ldr x0,qAdrszMessSortOk
    bl affichageMess
100:                                               // standard end of the program 
    mov x0,0                                       // return code
    mov x8,EXIT                                    // request to exit program
    svc 0                                          // perform the system call
 
qAdrsZoneConv:            .quad sZoneConv
qAdrszCarriageReturn:     .quad szCarriageReturn
qAdrsMessResult:          .quad sMessResult
qAdrTableNumber:          .quad TableNumber
qAdrszMessSortOk:         .quad szMessSortOk
qAdrszMessSortNok:        .quad szMessSortNok
/******************************************************************/
/*     control sorted table                                   */ 
/******************************************************************/
/* x0 contains the address of table */
/* x1 contains the number of elements  &gt; 0  */
/* x0 return 0  if not sorted   1  if sorted */
isSorted:
    stp x2,lr,[sp,-16]!             // save  registers
    stp x3,x4,[sp,-16]!             // save  registers
    mov x2,0
    ldr x4,[x0,x2,lsl 3]
1:
    add x2,x2,1
    cmp x2,x1
    bge 99f
    ldr x3,[x0,x2, lsl 3]
    cmp x3,x4
    blt 98f
    mov x4,x3
    b 1b
98:
    mov x0,0                       // not sorted
    b 100f
99:
    mov x0,1                       // sorted
100:
    ldp x3,x4,[sp],16              // restaur  2 registers
    ldp x2,lr,[sp],16              // restaur  2 registers
    ret                            // return to address lr x30
/***************************************************/
/*   Appel rcursif Tri Rapide quicksort           */
/***************************************************/
/* x0 contains the address of table */
/* x1 contains index of first item  */
/* x2 contains the number of elements  &gt; 0  */
quickSort:
    stp x2,lr,[sp,-16]!             // save  registers
    stp x3,x4,[sp,-16]!             // save  registers
    str x5,   [sp,-16]!             // save  registers
    sub x2,x2,1                     // last item index
    cmp x1,x2                       // first &gt; last&#160;? 
    bge 100f                        // yes -&gt; end
    mov x4,x0                       // save x0
    mov x5,x2                       // save x2
    bl partition1                   // cutting into 2 parts
    mov x2,x0                       // index partition
    mov x0,x4                       // table address
    bl quickSort                    // sort lower part
    add x1,x2,1                     // index begin = index partition + 1
    add x2,x5,1                     // number of elements
    bl quickSort                    // sort higter part
 
 100:                               // end function
    ldr x5,   [sp],16               // restaur  1 register
    ldp x3,x4,[sp],16               // restaur  2 registers
    ldp x2,lr,[sp],16               // restaur  2 registers
    ret                             // return to address lr x30
 
/******************************************************************/
/*      Partition table elements                                */ 
/******************************************************************/
/* x0 contains the address of table */
/* x1 contains index of first item  */
/* x2 contains index of last item   */
partition1:
    stp x1,lr,[sp,-16]!             // save  registers
    stp x2,x3,[sp,-16]!             // save  registers
    stp x4,x5,[sp,-16]!             // save  registers
    stp x6,x7,[sp,-16]!             // save  registers
    ldr x3,[x0,x2,lsl 3]            // load value last index
    mov x4,x1                       // init with first index
    mov x5,x1                       // init with first index
1:                                  // begin loop
    ldr x6,[x0,x5,lsl 3]            // load value
    cmp x6,x3                       // compare value
    bge 2f
    ldr x7,[x0,x4,lsl 3]            // if &lt; swap value table
    str x6,[x0,x4,lsl 3]
    str x7,[x0,x5,lsl 3]
    add x4,x4,1                     // and increment index 1
2:
    add x5,x5,1                     // increment index 2
    cmp x5,x2                       // end&#160;?
    blt 1b                          // no loop
    ldr x7,[x0,x4,lsl 3]            // swap value
    str x3,[x0,x4,lsl 3]
    str x7,[x0,x2,lsl 3]
    mov x0,x4                       // return index partition
100:
    ldp x6,x7,[sp],16               // restaur  2 registers
    ldp x4,x5,[sp],16               // restaur  2 registers
    ldp x2,x3,[sp],16               // restaur  2 registers
    ldp x1,lr,[sp],16               // restaur  2 registers
    ret                             // return to address lr x30
 
/******************************************************************/
/*      Display table elements                                */ 
/******************************************************************/
/* x0 contains the address of table */
displayTable:
    stp x1,lr,[sp,-16]!              // save  registers
    stp x2,x3,[sp,-16]!              // save  registers
    mov x2,x0                        // table address
    mov x3,0
1:                                   // loop display table
    ldr x0,[x2,x3,lsl 3]
    ldr x1,qAdrsZoneConv
    bl conversion10S                  // dcimal conversion
    ldr x0,qAdrsMessResult
    ldr x1,qAdrsZoneConv
    bl strInsertAtCharInc            // insert result at // character
    bl affichageMess                 // display message
    add x3,x3,1
    cmp x3,NBELEMENTS - 1
    ble 1b
    ldr x0,qAdrszCarriageReturn
    bl affichageMess
    mov x0,x2
100:
    ldp x2,x3,[sp],16               // restaur  2 registers
    ldp x1,lr,[sp],16               // restaur  2 registers
    ret                             // return to address lr x30
/********************************************************/
/*        File Include fonctions                        */
/********************************************************/
/* for this file see task include a file in language AArch64 assembly */
.include "../includeARM64.inc"</pre></div>
<pre>Value &#160;: +1
Value &#160;: +2
Value &#160;: +3
Value &#160;: +4
Value &#160;: +5
Value &#160;: +6
Value &#160;: +7
Value &#160;: +8
Value &#160;: +9
Value &#160;: +10
Value &#160;: +11

Table sorted.
</pre>
<h2><span class="mw-headline" id="ABAP"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ABAP" title="Category:ABAP">ABAP</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=4" title="Edit section: ABAP">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This works for ABAP Version 7.40 and above
</p>
<div class="mw-highlight mw-highlight-lang-abap mw-content-ltr" dir="ltr"><pre><span></span><span class="k">report</span><span class="w"> </span><span class="nv">z_quicksort</span><span class="p">.</span><span class="w"></span>

<span class="k">data</span><span class="p">(</span><span class="nv">numbers</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="nv">int4_table</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">65</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">-</span><span class="mi">31</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">99</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">83</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">782</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">).</span><span class="w"></span>
<span class="k">perform</span><span class="w"> </span><span class="nf">quicksort</span><span class="w"> </span><span class="k">changing</span><span class="w"> </span><span class="nv">numbers</span><span class="p">.</span><span class="w"></span>

<span class="k">write</span><span class="w"> </span><span class="s1">`[`</span><span class="p">.</span><span class="w"></span>
<span class="k">loop at </span><span class="nv">numbers</span><span class="w"> </span><span class="k">assigning</span><span class="w"> </span><span class="k">field</span><span class="o">-</span><span class="nv">symbol</span><span class="p">(</span><span class="nv">&lt;numbers&gt;</span><span class="p">).</span><span class="w"></span>
<span class="w">  </span><span class="k">write</span><span class="w"> </span><span class="nv">&lt;numbers&gt;</span><span class="p">.</span><span class="w"></span>
<span class="k">endloop</span><span class="p">.</span><span class="w"></span>
<span class="k">write</span><span class="w"> </span><span class="s1">`]`</span><span class="p">.</span><span class="w"></span>

<span class="k">form</span><span class="w"> </span><span class="nf">quicksort</span><span class="w"> </span><span class="k">changing</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="k">type </span><span class="nv">int4_table</span><span class="p">.</span><span class="w"></span>
<span class="w">  </span><span class="k">data</span><span class="p">(</span><span class="nv">less</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="nv">int4_table</span><span class="p">(</span><span class="w"> </span><span class="p">).</span><span class="w"></span>
<span class="w">  </span><span class="k">data</span><span class="p">(</span><span class="nv">equal</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="nv">int4_table</span><span class="p">(</span><span class="w"> </span><span class="p">).</span><span class="w"></span>
<span class="w">  </span><span class="k">data</span><span class="p">(</span><span class="nv">greater</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="nv">int4_table</span><span class="p">(</span><span class="w"> </span><span class="p">).</span><span class="w"></span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="k">lines</span><span class="p">(</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="k">data</span><span class="p">(</span><span class="nv">pivot</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">numbers</span><span class="p">[</span><span class="w"> </span><span class="k">lines</span><span class="p">(</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">].</span><span class="w"></span>

<span class="w">    </span><span class="k">loop at </span><span class="nv">numbers</span><span class="w"> </span><span class="k">assigning</span><span class="w"> </span><span class="k">field</span><span class="o">-</span><span class="nv">symbol</span><span class="p">(</span><span class="nv">&lt;number&gt;</span><span class="p">).</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="nv">&lt;number&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">pivot</span><span class="p">.</span><span class="w"></span>
<span class="w">        </span><span class="k">append</span><span class="w"> </span><span class="nv">&lt;number&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nv">less</span><span class="p">.</span><span class="w"></span>
<span class="w">      </span><span class="k">elseif</span><span class="w"> </span><span class="nv">&lt;number&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">pivot</span><span class="p">.</span><span class="w"></span>
<span class="w">        </span><span class="k">append</span><span class="w"> </span><span class="nv">&lt;number&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nv">equal</span><span class="p">.</span><span class="w"></span>
<span class="w">      </span><span class="k">elseif</span><span class="w"> </span><span class="nv">&lt;number&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">pivot</span><span class="p">.</span><span class="w"></span>
<span class="w">        </span><span class="k">append</span><span class="w"> </span><span class="nv">&lt;number&gt;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nv">greater</span><span class="p">.</span><span class="w"></span>
<span class="w">      </span><span class="k">endif</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="k">endloop</span><span class="p">.</span><span class="w"></span>

<span class="w">    </span><span class="k">perform</span><span class="w"> </span><span class="nf">quicksort</span><span class="w"> </span><span class="k">changing</span><span class="w"> </span><span class="nv">less</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="k">perform</span><span class="w"> </span><span class="nf">quicksort</span><span class="w"> </span><span class="k">changing</span><span class="w"> </span><span class="nv">greater</span><span class="p">.</span><span class="w"></span>

<span class="w">    </span><span class="k">clear</span><span class="w"> </span><span class="nv">numbers</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="k">append lines of</span><span class="w"> </span><span class="nv">less</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nv">numbers</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="k">append lines of</span><span class="w"> </span><span class="nv">equal</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nv">numbers</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="k">append lines of</span><span class="w"> </span><span class="nv">greater</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nv">numbers</span><span class="p">.</span><span class="w"></span>
<span class="w">  </span><span class="k">endif</span><span class="p">.</span><span class="w"></span>
<span class="k">endform</span><span class="p">.</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>[        31-         0          1          2          2          4         65         83         99        782  ]
</pre>
<h2><span class="mw-headline" id="ACL2"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ACL2" title="Category:ACL2">ACL2</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=5" title="Edit section: ACL2">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">partition</span> <span class="p">(</span><span class="nv">p</span> <span class="nv">xs</span><span class="p">)</span>
   <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">endp</span> <span class="nv">xs</span><span class="p">)</span>
       <span class="p">(</span><span class="nv">mv</span> <span class="no">nil</span> <span class="no">nil</span><span class="p">)</span>
       <span class="p">(</span><span class="nv">mv-let</span> <span class="p">(</span><span class="nv">less</span> <span class="nv">more</span><span class="p">)</span>
               <span class="p">(</span><span class="nv">partition</span> <span class="nv">p</span> <span class="p">(</span><span class="nb">rest</span> <span class="nv">xs</span><span class="p">))</span>
          <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="p">(</span><span class="nb">first</span> <span class="nv">xs</span><span class="p">)</span> <span class="nv">p</span><span class="p">)</span>
              <span class="p">(</span><span class="nv">mv</span> <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nb">first</span> <span class="nv">xs</span><span class="p">)</span> <span class="nv">less</span><span class="p">)</span> <span class="nv">more</span><span class="p">)</span>
              <span class="p">(</span><span class="nv">mv</span> <span class="nv">less</span> <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nb">first</span> <span class="nv">xs</span><span class="p">)</span> <span class="nv">more</span><span class="p">))))))</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">qsort</span> <span class="p">(</span><span class="nv">xs</span><span class="p">)</span>
   <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">endp</span> <span class="nv">xs</span><span class="p">)</span>
       <span class="no">nil</span>
       <span class="p">(</span><span class="nv">mv-let</span> <span class="p">(</span><span class="nv">less</span> <span class="nv">more</span><span class="p">)</span>
               <span class="p">(</span><span class="nv">partition</span> <span class="p">(</span><span class="nb">first</span> <span class="nv">xs</span><span class="p">)</span> <span class="p">(</span><span class="nb">rest</span> <span class="nv">xs</span><span class="p">))</span>
          <span class="p">(</span><span class="nb">append</span> <span class="p">(</span><span class="nv">qsort</span> <span class="nv">less</span><span class="p">)</span>
                  <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">first</span> <span class="nv">xs</span><span class="p">))</span>
                  <span class="p">(</span><span class="nv">qsort</span> <span class="nv">more</span><span class="p">)))))</span>
</pre></div>
<p>Usage:
</p>
<div class="mw-highlight mw-highlight-lang-text mw-content-ltr" dir="ltr"><pre><span></span>&gt; (qsort &#39;(8 6 7 5 3 0 9))
(0 3 5 6 7 8 9)
</pre></div>
<h2><span id="Action.21"></span><span class="mw-headline" id="Action!"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Action!" title="Category:Action!">Action!</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=6" title="Edit section: Action!">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Action! language does not support recursion. Therefore an iterative approach with a stack has been proposed. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>DEFINE MAX_COUNT="100"
INT ARRAY stack(MAX_COUNT)
INT stackSize

PROC PrintArray(INT ARRAY a INT size)
  INT i

  Put('[)
  FOR i=0 TO size-1
  DO
    IF i&gt;0 THEN Put(' ) FI
    PrintI(a(i))
  OD
  Put(']) PutE()
RETURN

PROC InitStack()
  stackSize=0
RETURN

BYTE FUNC IsEmpty()
  IF stackSize=0 THEN
    RETURN (1)
  FI
RETURN (0)

PROC Push(INT low,high)
  stack(stackSize)=low  stackSize==+1
  stack(stackSize)=high stackSize==+1
RETURN

PROC Pop(INT POINTER low,high)
  stackSize==-1 high^=stack(stackSize)
  stackSize==-1 low^=stack(stackSize)
RETURN

INT FUNC Partition(INT ARRAY a INT low,high)
  INT part,v,i,tmp

  v=a(high)
  part=low-1

  FOR i=low TO high-1
  DO
    IF a(i)&lt;=v THEN
      part==+1
      tmp=a(part) a(part)=a(i) a(i)=tmp
    FI
  OD

  part==+1
  tmp=a(part) a(part)=a(high) a(high)=tmp
RETURN (part)

PROC QuickSort(INT ARRAY a INT size)
  INT low,high,part

  InitStack()
  Push(0,size-1)
  WHILE IsEmpty()=0
  DO
    Pop(@low,@high)
    part=Partition(a,low,high)
    IF part-1&gt;low THEN
      Push(low,part-1)      
    FI
    IF part+1&lt;high THEN
      Push(part+1,high)
    FI
  OD
RETURN

PROC Test(INT ARRAY a INT size)
  PrintE("Array before sort:")
  PrintArray(a,size)
  QuickSort(a,size)
  PrintE("Array after sort:")
  PrintArray(a,size)
  PutE()
RETURN

PROC Main()
  INT ARRAY
    a(10)=[1 4 65535 0 3 7 4 8 20 65530],
    b(21)=[10 9 8 7 6 5 4 3 2 1 0
      65535 65534 65533 65532 65531
      65530 65529 65528 65527 65526],
    c(8)=[101 102 103 104 105 106 107 108],
    d(12)=[1 65535 1 65535 1 65535 1
      65535 1 65535 1 65535]
  
  Test(a,10)
  Test(b,21)
  Test(c,8)
  Test(d,12)
RETURN</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<p><a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://gitlab.com/amarok8bit/action-rosetta-code/-/raw/master/images/Quicksort.png">Screenshot from Atari 8-bit computer</a>
</p>
<pre>Array before sort:
[1 4 -1 0 3 7 4 8 20 -6]
Array after sort:
[-6 -1 0 1 3 4 4 7 8 20]

Array before sort:
[10 9 8 7 6 5 4 3 2 1 0 -1 -2 -3 -4 -5 -6 -7 -8 -9 -10]
Array after sort:
[-10 -9 -8 -7 -6 -5 -4 -3 -2 -1 0 1 2 3 4 5 6 7 8 9 10]

Array before sort:
[101 102 103 104 105 106 107 108]
Array after sort:
[101 102 103 104 105 106 107 108]

Array before sort:
[1 -1 1 -1 1 -1 1 -1 1 -1 1 -1]
Array after sort:
[-1 -1 -1 -1 -1 -1 1 1 1 1 1 1]
</pre>
<h2><span class="mw-headline" id="ActionScript"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ActionScript" title="Category:ActionScript">ActionScript</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=7" title="Edit section: ActionScript">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/ActionScript" class="mw-redirect" title="ActionScript">ActionScript</a> version 3</div><br/>
<p>The functional programming way
</p>
<div class="mw-highlight mw-highlight-lang-actionscript mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">quickSort</span><span class="w"> </span><span class="p">(</span><span class="nx">array</span><span class="o">:</span><span class="nb">Array</span><span class="p">)</span><span class="o">:</span><span class="nb">Array</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">array</span><span class="o">;</span><span class="w"></span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="nx">pivot</span><span class="o">:</span><span class="nb">Number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">array</span><span class="p">[</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">)];</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">quickSort</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="nb">Number</span><span class="o">,</span><span class="w"> </span><span class="nx">index</span><span class="o">:</span><span class="nb">int</span><span class="o">,</span><span class="w"> </span><span class="nx">array</span><span class="o">:</span><span class="nb">Array</span><span class="p">)</span><span class="o">:</span><span class="nb">Boolean</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w">  </span><span class="nx">pivot</span><span class="o">;</span><span class="w"> </span><span class="p">})).</span><span class="nx">concat</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="nx">array</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="nb">Number</span><span class="o">,</span><span class="w"> </span><span class="nx">index</span><span class="o">:</span><span class="nb">int</span><span class="o">,</span><span class="w"> </span><span class="nx">array</span><span class="o">:</span><span class="nb">Array</span><span class="p">)</span><span class="o">:</span><span class="nb">Boolean</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">pivot</span><span class="o">;</span><span class="w"> </span><span class="p">})).</span><span class="nx">concat</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="nx">quickSort</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="nb">Number</span><span class="o">,</span><span class="w"> </span><span class="nx">index</span><span class="o">:</span><span class="nb">int</span><span class="o">,</span><span class="w"> </span><span class="nx">array</span><span class="o">:</span><span class="nb">Array</span><span class="p">)</span><span class="o">:</span><span class="nb">Boolean</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">pivot</span><span class="o">;</span><span class="w"> </span><span class="p">})));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>The faster way
</p>
<div class="mw-highlight mw-highlight-lang-actionscript mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">quickSort</span><span class="w"> </span><span class="p">(</span><span class="nx">array</span><span class="o">:</span><span class="nb">Array</span><span class="p">)</span><span class="o">:</span><span class="nb">Array</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">array</span><span class="o">;</span><span class="w"></span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="nx">pivot</span><span class="o">:</span><span class="nb">Number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">array</span><span class="p">[</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">)];</span><span class="w"></span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="nx">less</span><span class="o">:</span><span class="nb">Array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"></span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="nx">equal</span><span class="o">:</span><span class="nb">Array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"></span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="nx">greater</span><span class="o">:</span><span class="nb">Array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"></span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="nx">x</span><span class="o">:</span><span class="nb">Number</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">array</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">pivot</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="nx">less</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">pivot</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="nx">equal</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">pivot</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="nx">greater</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">quickSort</span><span class="p">(</span><span class="nx">less</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="nx">equal</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="nx">quickSort</span><span class="p">(</span><span class="nx">greater</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="Ada"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Ada" title="Category:Ada">Ada</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=8" title="Edit section: Ada">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This example is implemented as a generic procedure.
</p><p>The procedure specification is:
</p>
<div class="mw-highlight mw-highlight-lang-ada mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">-----------------------------------------------------------------------</span>
<span class="c1">-- Generic Quick_Sort procedure</span>
<span class="c1">-----------------------------------------------------------------------</span>
<span class="kd">generic</span>
   <span class="kd">type</span> <span class="kt">Element</span> <span class="kr">is</span> <span class="kd">private</span><span class="p">;</span>
   <span class="kd">type</span> <span class="kt">Index</span> <span class="kr">is</span> <span class="p">(&lt;&gt;);</span>
   <span class="kd">type</span> <span class="kt">Element_Array</span> <span class="kr">is</span> <span class="kr">array</span><span class="p">(</span><span class="kt">Index</span> <span class="kr">range</span> <span class="p">&lt;&gt;)</span> <span class="kr">of</span> <span class="n">Element</span><span class="p">;</span>
   <span class="kn">with</span> <span class="nn">function</span> <span class="s">&quot;&lt;&quot;</span> <span class="p">(</span><span class="n">Left</span><span class="p">,</span> <span class="n">Right</span> <span class="p">:</span> <span class="n">Element</span><span class="p">)</span> <span class="kr">return</span> <span class="kt">Boolean</span> <span class="kr">is</span> <span class="p">&lt;&gt;;</span>
<span class="kd">procedure</span> <span class="nf">Quick_Sort</span><span class="p">(</span><span class="nv">A</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">out</span> <span class="nv">Element_Array</span><span class="p">);</span>
</pre></div>
<p>The procedure body deals with any discrete index type, either an integer type or an enumerated type.
</p>
<div class="mw-highlight mw-highlight-lang-ada mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">-----------------------------------------------------------------------</span>
<span class="c1">-- Generic Quick_Sort procedure</span>
<span class="c1">----------------------------------------------------------------------- </span>

<span class="kd">procedure</span> <span class="nf">Quick_Sort</span> <span class="p">(</span><span class="nv">A</span> <span class="p">: </span><span class="nv">in</span> <span class="nv">out</span> <span class="nv">Element_Array</span><span class="p">)</span> <span class="kr">is</span>
   
   <span class="kd">procedure</span> <span class="nf">Swap</span><span class="p">(</span><span class="nv">Left</span><span class="p">,</span> <span class="nv">Right</span> <span class="p">: </span><span class="nv">Index</span><span class="p">)</span> <span class="kr">is</span>
      <span class="n">Temp</span> <span class="p">:</span> <span class="n">Element</span> <span class="p">:=</span> <span class="n">A</span> <span class="p">(</span><span class="n">Left</span><span class="p">);</span>
   <span class="kr">begin</span>
      <span class="n">A</span> <span class="p">(</span><span class="n">Left</span><span class="p">)</span> <span class="p">:=</span> <span class="n">A</span> <span class="p">(</span><span class="n">Right</span><span class="p">);</span>
      <span class="n">A</span> <span class="p">(</span><span class="n">Right</span><span class="p">)</span> <span class="p">:=</span> <span class="n">Temp</span><span class="p">;</span>
   <span class="kr">end</span> <span class="nf">Swap</span><span class="p">;</span>
  
<span class="kr">begin</span>
   <span class="kr">if</span> <span class="n">A</span><span class="p">&#39;</span><span class="na">Length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="kr">then</span>
   <span class="kr">declare</span>
      <span class="n">Pivot_Value</span> <span class="p">:</span> <span class="n">Element</span> <span class="p">:=</span> <span class="n">A</span> <span class="p">(</span><span class="n">A</span><span class="p">&#39;</span><span class="na">First</span><span class="p">);</span>
      <span class="n">Right</span>       <span class="p">:</span> <span class="n">Index</span> <span class="p">:=</span> <span class="n">A</span><span class="p">&#39;</span><span class="na">Last</span><span class="p">;</span>
      <span class="n">Left</span>        <span class="p">:</span> <span class="n">Index</span> <span class="p">:=</span> <span class="n">A</span><span class="p">&#39;</span><span class="na">First</span><span class="p">;</span>
   <span class="kr">begin</span>
       <span class="kr">loop</span>
          <span class="kr">while</span> <span class="n">Left</span> <span class="o">&lt;</span> <span class="n">Right</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">Pivot_Value</span> <span class="o">&lt;</span> <span class="n">A</span> <span class="p">(</span><span class="n">Left</span><span class="p">))</span> <span class="kr">loop</span>
             <span class="n">Left</span> <span class="p">:=</span> <span class="n">Index</span><span class="p">&#39;</span><span class="na">Succ</span> <span class="p">(</span><span class="n">Left</span><span class="p">);</span>
          <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>
          <span class="kr">while</span> <span class="n">Pivot_Value</span> <span class="o">&lt;</span> <span class="n">A</span> <span class="p">(</span><span class="n">Right</span><span class="p">)</span> <span class="kr">loop</span>
             <span class="n">Right</span> <span class="p">:=</span> <span class="n">Index</span><span class="p">&#39;</span><span class="na">Pred</span> <span class="p">(</span><span class="n">Right</span><span class="p">);</span>
          <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>
          <span class="kr">exit</span> <span class="kr">when</span> <span class="n">Right</span> <span class="o">&lt;=</span> <span class="n">Left</span><span class="p">;</span>
          <span class="n">Swap</span> <span class="p">(</span><span class="n">Left</span><span class="p">,</span> <span class="n">Right</span><span class="p">);</span>
          <span class="n">Left</span> <span class="p">:=</span> <span class="n">Index</span><span class="p">&#39;</span><span class="na">Succ</span> <span class="p">(</span><span class="n">Left</span><span class="p">);</span>
          <span class="n">Right</span> <span class="p">:=</span> <span class="n">Index</span><span class="p">&#39;</span><span class="na">Pred</span> <span class="p">(</span><span class="n">Right</span><span class="p">);</span>
       <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>
       <span class="kr">if</span> <span class="n">Right</span> <span class="o">=</span> <span class="n">A</span><span class="p">&#39;</span><span class="na">Last</span> <span class="kr">then</span>
          <span class="n">Right</span> <span class="p">:=</span> <span class="n">Index</span><span class="p">&#39;</span><span class="na">Pred</span> <span class="p">(</span><span class="n">Right</span><span class="p">);</span>
          <span class="n">Swap</span> <span class="p">(</span><span class="n">A</span><span class="p">&#39;</span><span class="na">First</span><span class="p">,</span> <span class="n">A</span><span class="p">&#39;</span><span class="na">Last</span><span class="p">);</span>
       <span class="kr">end</span> <span class="kr">if</span><span class="p">;</span>
       <span class="kr">if</span> <span class="n">Left</span> <span class="o">=</span> <span class="n">A</span><span class="p">&#39;</span><span class="na">First</span> <span class="kr">then</span>
          <span class="n">Left</span> <span class="p">:=</span> <span class="n">Index</span><span class="p">&#39;</span><span class="na">Succ</span> <span class="p">(</span><span class="n">Left</span><span class="p">);</span>
       <span class="kr">end</span> <span class="kr">if</span><span class="p">;</span>
       <span class="n">Quick_Sort</span> <span class="p">(</span><span class="n">A</span> <span class="p">(</span><span class="n">A</span><span class="p">&#39;</span><span class="na">First</span> <span class="p">..</span> <span class="n">Right</span><span class="p">));</span>
       <span class="n">Quick_Sort</span> <span class="p">(</span><span class="n">A</span> <span class="p">(</span><span class="n">Left</span> <span class="p">..</span> <span class="n">A</span><span class="p">&#39;</span><span class="na">Last</span><span class="p">));</span>
   <span class="kr">end</span><span class="p">;</span>
   <span class="kr">end</span> <span class="kr">if</span><span class="p">;</span>
<span class="kr">end</span> <span class="nf">Quick_Sort</span><span class="p">;</span>
</pre></div>
<p>An example of how this procedure may be used is:
</p>
<div class="mw-highlight mw-highlight-lang-ada mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">with</span> <span class="nn">Ada.Text_Io</span><span class="p">;</span>
<span class="kn">with</span> <span class="nn">Ada.Float_Text_IO</span><span class="p">;</span> <span class="kn">use</span> <span class="nn">Ada.Float_Text_IO</span><span class="p">;</span> 
<span class="kn">with</span> <span class="nn">Quick_Sort</span><span class="p">;</span>

<span class="kd">procedure</span> <span class="nf">Sort_Test</span> <span class="kr">is</span>
   <span class="kd">type</span> <span class="kt">Days</span> <span class="kr">is</span> <span class="p">(</span><span class="nv">Mon</span><span class="p">,</span> <span class="nv">Tue</span><span class="p">,</span> <span class="nv">Wed</span><span class="p">,</span> <span class="nv">Thu</span><span class="p">,</span> <span class="nv">Fri</span><span class="p">,</span> <span class="nv">Sat</span><span class="p">,</span> <span class="nv">Sun</span><span class="p">);</span>
   <span class="kd">type</span> <span class="kt">Sales</span> <span class="kr">is</span> <span class="kr">array</span> <span class="p">(</span><span class="kt">Days</span> <span class="kr">range</span> <span class="p">&lt;&gt;)</span> <span class="kr">of</span> <span class="kt">Float</span><span class="p">;</span>
   <span class="kd">procedure</span> <span class="nf">Sort_Days</span> <span class="kr">is</span> <span class="kr">new</span> <span class="n">Quick_Sort</span><span class="p">(</span><span class="kt">Float</span><span class="p">,</span> <span class="n">Days</span><span class="p">,</span> <span class="n">Sales</span><span class="p">);</span>
   
   <span class="kd">procedure</span> <span class="nf">Print</span> <span class="p">(</span><span class="nv">Item</span> <span class="p">: </span><span class="nv">Sales</span><span class="p">)</span> <span class="kr">is</span>
   <span class="kr">begin</span>
      <span class="kr">for</span> <span class="n">I</span> <span class="ow">in</span> <span class="n">Item</span><span class="p">&#39;</span><span class="na">range</span> <span class="kr">loop</span>
         <span class="n">Put</span><span class="p">(</span><span class="n">Item</span> <span class="p">=&gt;</span> <span class="n">Item</span><span class="p">(</span><span class="n">I</span><span class="p">),</span> <span class="n">Fore</span> <span class="p">=&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">Aft</span> <span class="p">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Exp</span> <span class="p">=&gt;</span> <span class="mi">0</span><span class="p">);</span>
      <span class="kr">end</span> <span class="kr">loop</span><span class="p">;</span>
   <span class="kr">end</span> <span class="nf">Print</span><span class="p">;</span>
  
   <span class="n">Weekly_Sales</span> <span class="p">:</span> <span class="n">Sales</span> <span class="p">:=</span> <span class="p">(</span><span class="n">Mon</span> <span class="p">=&gt;</span> <span class="mf">300.0</span><span class="p">,</span> 
      <span class="n">Tue</span> <span class="p">=&gt;</span> <span class="mf">700.0</span><span class="p">,</span> 
      <span class="n">Wed</span> <span class="p">=&gt;</span> <span class="mf">800.0</span><span class="p">,</span> 
      <span class="n">Thu</span> <span class="p">=&gt;</span> <span class="mf">500.0</span><span class="p">,</span> 
      <span class="n">Fri</span> <span class="p">=&gt;</span> <span class="mf">200.0</span><span class="p">,</span> 
      <span class="n">Sat</span> <span class="p">=&gt;</span> <span class="mf">100.0</span><span class="p">,</span> 
      <span class="n">Sun</span> <span class="p">=&gt;</span> <span class="mf">900.0</span><span class="p">);</span>
  
<span class="kr">begin</span>
  
   <span class="n">Print</span><span class="p">(</span><span class="n">Weekly_Sales</span><span class="p">);</span>
   <span class="n">Ada</span><span class="p">.</span><span class="n">Text_Io</span><span class="p">.</span><span class="n">New_Line</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
   <span class="n">Sort_Days</span><span class="p">(</span><span class="n">Weekly_Sales</span><span class="p">);</span>
   <span class="n">Print</span><span class="p">(</span><span class="n">Weekly_Sales</span><span class="p">);</span>
  
<span class="kr">end</span> <span class="nf">Sort_Test</span><span class="p">;</span>
</pre></div>
<h2><span class="mw-headline" id="ALGOL_68"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ALGOL_68" title="Category:ALGOL 68">ALGOL 68</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=9" title="Edit section: ALGOL 68">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>#--- Swap function ---#
PROC swap = (REF []INT array, INT first, INT second) VOID:
(
    INT temp&#160;:= array[first];
    array[first]&#160;:= array[second];
    array[second]:= temp
);

#--- Quick sort 3 arg function ---#
PROC quick = (REF [] INT array, INT first, INT last) VOID:
(
    INT smaller&#160;:= first + 1,  
        larger &#160;:= last,
        pivot  &#160;:= array[first];
  
    WHILE smaller &lt;= larger DO
        WHILE array[smaller] &lt; pivot   AND   smaller &lt; last DO   
            smaller +:= 1        
        OD;
        WHILE array[larger]  &gt; pivot   AND   larger &gt; first DO   
            larger  -:= 1       
        OD; 
        IF smaller &lt; larger THEN 
            swap(array, smaller, larger); 
            smaller +:= 1;
            larger  -:= 1
        ELSE
            smaller +:= 1
        FI
    OD;
    
    swap(array, first, larger);    

    IF first &lt; larger-1 THEN
        quick(array, first, larger-1)  
    FI;
    IF last &gt; larger +1 THEN
        quick(array, larger+1, last)   
    FI
);

#--- Quick sort 1 arg function ---#
PROC quicksort = (REF []INT array) VOID:
(
  IF UPB array &gt; 1 THEN
    quick(array, 1, UPB array) 
  FI
);

#***************************************************************#
main:
(
    [10]INT a; 
    FOR i FROM 1 TO UPB a DO 
        a[i]&#160;:= ROUND(random*1000)
    OD;                             

    print(("Before:", a));
    quicksort(a);
    print((newline, newline));
    print(("After: ", a))
)</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>Before:        +73       +921       +179       +961        +50       +324        +82       +178       +243       +458
                                                                                                                     
After:         +50        +73        +82       +178       +179       +243       +324       +458       +921       +961
</pre>
<h2><span class="mw-headline" id="ALGOL_W"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ALGOL_W" title="Category:ALGOL W">ALGOL W</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=10" title="Edit section: ALGOL W">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>% Quicksorts in-place the array of integers v, from lb to ub&#160;%
procedure quicksort ( integer array v( * )
                   &#160;; integer value lb, ub
                    )&#160;;
if ub &gt; lb then begin
   &#160;% more than one element, so must sort&#160;%
    integer left, right, pivot;
    left  &#160;:= lb;
    right &#160;:= ub;
   &#160;% choosing the middle element of the array as the pivot&#160;%
    pivot &#160;:= v( left + ( ( right + 1 ) - left ) div 2 );
    while begin
        while left  &lt;= ub and v( left  ) &lt; pivot do left &#160;:= left  + 1;
        while right &gt;= lb and v( right ) &gt; pivot do right&#160;:= right - 1;
        left &lt;= right
    end do begin
        integer swap;
        swap      &#160;:= v( left  );
        v( left  )&#160;:= v( right );
        v( right )&#160;:= swap;
        left      &#160;:= left  + 1;
        right     &#160;:= right - 1
    end while_left_le_right&#160;;
    quicksort( v, lb,   right );
    quicksort( v, left, ub    )
end quicksort&#160;;</pre></div>
<h2><span class="mw-headline" id="APL"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:APL" title="Category:APL">APL</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=11" title="Edit section: APL">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/Dyalog_APL" title="Dyalog APL">Dyalog APL</a></div><div class="examplemeta translation"><b>Translation of</b>: <a href="#J">J</a></div>
<div class="mw-highlight mw-highlight-lang-apl mw-content-ltr" dir="ltr"><pre><span></span><span class="w">      </span><span class="nv">qsort</span><span class="w"> </span><span class="kd"></span><span class="w"> </span><span class="kt">{</span><span class="m">1</span><span class="o"></span><span class="bp">:</span><span class="w"> </span><span class="p"></span><span class="w"> </span><span class="nv">e</span><span class="kd"></span><span class="bp"></span><span class="sr">[</span><span class="o">?</span><span class="bp"></span><span class="sr">]</span><span class="w"> </span><span class="p"></span><span class="w"> </span><span class="p">(</span><span class="bp"></span><span class="p">(</span><span class="bp"></span><span class="o">&lt;</span><span class="nv">e</span><span class="p">)</span><span class="na">/</span><span class="bp"></span><span class="p">)</span><span class="w"> </span><span class="o">,</span><span class="w"> </span><span class="p">((</span><span class="bp"></span><span class="o">=</span><span class="nv">e</span><span class="p">)</span><span class="na">/</span><span class="bp"></span><span class="p">)</span><span class="w"> </span><span class="o">,</span><span class="w"> </span><span class="p">(</span><span class="bp"></span><span class="p">(</span><span class="bp"></span><span class="o">&gt;</span><span class="nv">e</span><span class="p">)</span><span class="na">/</span><span class="bp"></span><span class="p">)</span><span class="kt">}</span><span class="w"></span>
<span class="w">      </span><span class="nv">qsort</span><span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">31</span><span class="w"></span>
</pre></div>
<p>Of course, in real APL applications, one would use  (Grade Up) to sort (which will pick a sorting algorithm suited to the argument):
</p>
<div class="mw-highlight mw-highlight-lang-apl mw-content-ltr" dir="ltr"><pre><span></span><span class="w">      </span><span class="nv">sort</span><span class="w"> </span><span class="kd"></span><span class="w"> </span><span class="kt">{</span><span class="bp"></span><span class="sr">[</span><span class="o"></span><span class="bp"></span><span class="sr">]</span><span class="kt">}</span><span class="w"></span>
<span class="w">      </span><span class="nv">sort</span><span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">31</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="AppleScript"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:AppleScript" title="Category:AppleScript">AppleScript</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=12" title="Edit section: AppleScript">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Functional">Functional</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=13" title="Edit section: Functional">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Emphasising clarity and simplicity more than run-time performance. (Practical scripts will often delegate sorting to the OS X shell, or, since OS X Yosemite, to Foundation classes through the ObjC interface).
</p>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#JavaScript">JavaScript</a></div>
<p>(Functional ES5 version)
</p>
<div class="mw-highlight mw-highlight-lang-applescript mw-content-ltr" dir="ltr"><pre><span></span><span class="c">-- quickSort&#160;:: (Ord a) =&gt; [a] -&gt; [a]</span>
<span class="k">on</span> <span class="nv">quickSort</span><span class="p">(</span><span class="nv">xs</span><span class="p">)</span>
    <span class="k">if</span> <span class="nv">length</span> <span class="k">of</span> <span class="nv">xs</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">then</span>
        <span class="k">set</span> <span class="p">{</span><span class="nv">h</span><span class="p">,</span> <span class="nv">t</span><span class="p">}</span> <span class="k">to</span> <span class="nv">uncons</span><span class="p">(</span><span class="nv">xs</span><span class="p">)</span>
        
        <span class="c">-- lessOrEqual&#160;:: a -&gt; Bool</span>
        <span class="nv">script</span> <span class="nv">lessOrEqual</span>
            <span class="nb">on</span> <span class="err">||</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span>
                <span class="nv">x</span> <span class="o"></span> <span class="nv">h</span>
            <span class="k">end</span> <span class="err">||</span>
        <span class="k">end</span> <span class="nv">script</span>
        
        <span class="k">set</span> <span class="p">{</span><span class="nv">less</span><span class="p">,</span> <span class="nv">more</span><span class="p">}</span> <span class="k">to</span> <span class="nv">partition</span><span class="p">(</span><span class="nv">lessOrEqual</span><span class="p">,</span> <span class="nv">t</span><span class="p">)</span>
        
        <span class="nv">quickSort</span><span class="p">(</span><span class="nv">less</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nv">h</span> <span class="o">&amp;</span> <span class="nv">quickSort</span><span class="p">(</span><span class="nv">more</span><span class="p">)</span>
    <span class="k">else</span>
        <span class="nv">xs</span>
    <span class="k">end</span> <span class="k">if</span>
<span class="k">end</span> <span class="nv">quickSort</span>


<span class="c">-- TEST -----------------------------------------------------------------------</span>
<span class="k">on</span> <span class="nb">run</span>
    
    <span class="nv">quickSort</span><span class="p">(</span><span class="err">[</span><span class="mf">11.8</span><span class="p">,</span> <span class="mf">14.1</span><span class="p">,</span> <span class="mf">21.3</span><span class="p">,</span> <span class="mf">8.5</span><span class="p">,</span> <span class="mf">16.7</span><span class="p">,</span> <span class="mf">5.7</span><span class="err">]</span><span class="p">)</span>
    
    <span class="c">--&gt; {5.7, 8.5, 11.8, 14.1, 16.7, 21.3}</span>
    
<span class="k">end</span> <span class="nb">run</span>


<span class="c">-- GENERIC FUNCTIONS ----------------------------------------------------------</span>

<span class="c">-- partition&#160;:: predicate -&gt; List -&gt; (Matches, nonMatches)</span>
<span class="c">-- partition&#160;:: (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])</span>
<span class="k">on</span> <span class="nv">partition</span><span class="p">(</span><span class="nv">f</span><span class="p">,</span> <span class="nv">xs</span><span class="p">)</span>
    <span class="k">tell</span> <span class="nv">mReturn</span><span class="p">(</span><span class="nv">f</span><span class="p">)</span>
        <span class="k">set</span> <span class="nv">lst</span> <span class="k">to</span> <span class="p">{{},</span> <span class="p">{}}</span>
        <span class="k">repeat</span> <span class="nv">with</span> <span class="nv">x</span> <span class="k">in</span> <span class="nv">xs</span>
            <span class="k">set</span> <span class="nv">v</span> <span class="k">to</span> <span class="na">contents</span> <span class="k">of</span> <span class="nv">x</span>
            <span class="k">set</span> <span class="k">end</span> <span class="k">of</span> <span class="nb">item</span> <span class="p">((</span><span class="err">||</span><span class="p">(</span><span class="nv">v</span><span class="p">)</span> <span class="k">as</span> <span class="nv">integer</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">of</span> <span class="nv">lst</span> <span class="k">to</span> <span class="nv">v</span>
        <span class="k">end</span> <span class="k">repeat</span>
        <span class="no">return</span> <span class="p">{</span><span class="nb">item</span> <span class="mi">2</span> <span class="k">of</span> <span class="nv">lst</span><span class="p">,</span> <span class="nb">item</span> <span class="mi">1</span> <span class="k">of</span> <span class="nv">lst</span><span class="p">}</span>
    <span class="k">end</span> <span class="k">tell</span>
<span class="k">end</span> <span class="nv">partition</span>

<span class="c">-- uncons&#160;:: [a] -&gt; Maybe (a, [a])</span>
<span class="k">on</span> <span class="nv">uncons</span><span class="p">(</span><span class="nv">xs</span><span class="p">)</span>
    <span class="k">if</span> <span class="nv">length</span> <span class="k">of</span> <span class="nv">xs</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">then</span>
        <span class="p">{</span><span class="nb">item</span> <span class="mi">1</span> <span class="k">of</span> <span class="nv">xs</span><span class="p">,</span> <span class="nv">rest</span> <span class="k">of</span> <span class="nv">xs</span><span class="p">}</span>
    <span class="k">else</span>
        <span class="no">missing value</span>
    <span class="k">end</span> <span class="k">if</span>
<span class="k">end</span> <span class="nv">uncons</span>

<span class="c">-- Lift 2nd class handler function into 1st class script wrapper </span>
<span class="c">-- mReturn&#160;:: Handler -&gt; Script</span>
<span class="k">on</span> <span class="nv">mReturn</span><span class="p">(</span><span class="nv">f</span><span class="p">)</span>
    <span class="k">if</span> <span class="na">class</span> <span class="k">of</span> <span class="nv">f</span> <span class="ow">is</span> <span class="nv">script</span> <span class="k">then</span>
        <span class="nv">f</span>
    <span class="k">else</span>
        <span class="nv">script</span>
            <span class="k">property</span> <span class="err">||</span> <span class="p">:</span> <span class="nv">f</span>
        <span class="k">end</span> <span class="nv">script</span>
    <span class="k">end</span> <span class="k">if</span>
<span class="k">end</span> <span class="nv">mReturn</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<div class="mw-highlight mw-highlight-lang-applescript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span><span class="mf">5.7</span><span class="p">,</span> <span class="mf">8.5</span><span class="p">,</span> <span class="mf">11.8</span><span class="p">,</span> <span class="mf">14.1</span><span class="p">,</span> <span class="mf">16.7</span><span class="p">,</span> <span class="mf">21.3</span><span class="p">}</span>
</pre></div>
<hr/>
<h3><span class="mw-headline" id="Straightforward">Straightforward</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=14" title="Edit section: Straightforward">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Emphasising clarity, quick sorting, <i>and</i> correct AppleScript:
</p>
<div class="mw-highlight mw-highlight-lang-applescript mw-content-ltr" dir="ltr"><pre><span></span><span class="c">-- In-place Quicksort (basic algorithm).</span>
<span class="c">-- Algorithm: S.A.R. (Tony) Hoare, 1960.</span>
<span class="k">on</span> <span class="nv">quicksort</span><span class="p">(</span><span class="nv">theList</span><span class="p">,</span> <span class="nv">l</span><span class="p">,</span> <span class="nv">r</span><span class="p">)</span> <span class="c">-- Sort items l thru r of theList.</span>
    <span class="k">set</span> <span class="nv">listLength</span> <span class="k">to</span> <span class="p">(</span><span class="nb">count</span> <span class="nv">theList</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">listLength</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">then</span> <span class="no">return</span>
    <span class="c">-- Convert negative and/or transposed range indices.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">l</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">then</span> <span class="k">set</span> <span class="nv">l</span> <span class="k">to</span> <span class="nv">listLength</span> <span class="o">+</span> <span class="nv">l</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">r</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">then</span> <span class="k">set</span> <span class="nv">r</span> <span class="k">to</span> <span class="nv">listLength</span> <span class="o">+</span> <span class="nv">r</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">l</span> <span class="o">&gt;</span> <span class="nv">r</span><span class="p">)</span> <span class="k">then</span> <span class="k">set</span> <span class="p">{</span><span class="nv">l</span><span class="p">,</span> <span class="nv">r</span><span class="p">}</span> <span class="k">to</span> <span class="p">{</span><span class="nv">r</span><span class="p">,</span> <span class="nv">l</span><span class="p">}</span>
    
    <span class="c">-- Script object containing the list as a property (to allow faster references to its items)</span>
    <span class="c">-- and the recursive subhandler.</span>
    <span class="nv">script</span> <span class="nv">o</span>
        <span class="k">property</span> <span class="nv">lst</span> <span class="p">:</span> <span class="nv">theList</span>
        
        <span class="nb">on</span> <span class="nv">qsrt</span><span class="p">(</span><span class="nv">l</span><span class="p">,</span> <span class="nv">r</span><span class="p">)</span>
            <span class="k">set</span> <span class="nv">pivot</span> <span class="k">to</span> <span class="k">my</span> <span class="nv">lst</span>&#39;s <span class="nb">item</span> <span class="p">((</span><span class="nv">l</span> <span class="o">+</span> <span class="nv">r</span><span class="p">)</span> <span class="ow">div</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">set</span> <span class="nv">i</span> <span class="k">to</span> <span class="nv">l</span>
            <span class="k">set</span> <span class="nv">j</span> <span class="k">to</span> <span class="nv">r</span>
            <span class="k">repeat</span> <span class="k">until</span> <span class="p">(</span><span class="nv">i</span> <span class="o">&gt;</span> <span class="nv">j</span><span class="p">)</span>
                <span class="k">set</span> <span class="nv">lv</span> <span class="k">to</span> <span class="k">my</span> <span class="nv">lst</span>&#39;s <span class="nb">item</span> <span class="nv">i</span>
                <span class="k">repeat</span> <span class="k">while</span> <span class="p">(</span><span class="nv">pivot</span> <span class="o">&gt;</span> <span class="nv">lv</span><span class="p">)</span>
                    <span class="k">set</span> <span class="nv">i</span> <span class="k">to</span> <span class="nv">i</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="k">set</span> <span class="nv">lv</span> <span class="k">to</span> <span class="k">my</span> <span class="nv">lst</span>&#39;s <span class="nb">item</span> <span class="nv">i</span>
                <span class="k">end</span> <span class="k">repeat</span>
                
                <span class="k">set</span> <span class="nv">rv</span> <span class="k">to</span> <span class="k">my</span> <span class="nv">lst</span>&#39;s <span class="nb">item</span> <span class="nv">j</span>
                <span class="k">repeat</span> <span class="k">while</span> <span class="p">(</span><span class="nv">rv</span> <span class="o">&gt;</span> <span class="nv">pivot</span><span class="p">)</span>
                    <span class="k">set</span> <span class="nv">j</span> <span class="k">to</span> <span class="nv">j</span> <span class="o">-</span> <span class="mi">1</span>
                    <span class="k">set</span> <span class="nv">rv</span> <span class="k">to</span> <span class="k">my</span> <span class="nv">lst</span>&#39;s <span class="nb">item</span> <span class="nv">j</span>
                <span class="k">end</span> <span class="k">repeat</span>
                
                <span class="k">if</span> <span class="p">(</span><span class="nv">j</span> <span class="o">&gt;</span> <span class="nv">i</span><span class="p">)</span> <span class="k">then</span>
                    <span class="k">set</span> <span class="k">my</span> <span class="nv">lst</span>&#39;s <span class="nb">item</span> <span class="nv">i</span> <span class="k">to</span> <span class="nv">rv</span>
                    <span class="k">set</span> <span class="k">my</span> <span class="nv">lst</span>&#39;s <span class="nb">item</span> <span class="nv">j</span> <span class="k">to</span> <span class="nv">lv</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">i</span> <span class="o">&gt;</span> <span class="nv">j</span><span class="p">)</span> <span class="k">then</span>
                    <span class="k">exit</span> <span class="k">repeat</span>
                <span class="k">end</span> <span class="k">if</span>
                
                <span class="k">set</span> <span class="nv">i</span> <span class="k">to</span> <span class="nv">i</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">set</span> <span class="nv">j</span> <span class="k">to</span> <span class="nv">j</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="k">end</span> <span class="k">repeat</span>
            
            <span class="k">if</span> <span class="p">(</span><span class="nv">j</span> <span class="o">&gt;</span> <span class="nv">l</span><span class="p">)</span> <span class="k">then</span> <span class="nv">qsrt</span><span class="p">(</span><span class="nv">l</span><span class="p">,</span> <span class="nv">j</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">i</span> <span class="o">&lt;</span> <span class="nv">r</span><span class="p">)</span> <span class="k">then</span> <span class="nv">qsrt</span><span class="p">(</span><span class="nv">i</span><span class="p">,</span> <span class="nv">r</span><span class="p">)</span>
        <span class="k">end</span> <span class="nv">qsrt</span>
    <span class="k">end</span> <span class="nv">script</span>
    
    <span class="k">tell</span> <span class="nv">o</span> <span class="k">to</span> <span class="nv">qsrt</span><span class="p">(</span><span class="nv">l</span><span class="p">,</span> <span class="nv">r</span><span class="p">)</span>
    
    <span class="no">return</span> <span class="c">-- nothing.</span>
<span class="k">end</span> <span class="nv">quicksort</span>
<span class="k">property</span> <span class="nv">sort</span> <span class="p">:</span> <span class="nv">quicksort</span>

<span class="c">-- Demo:</span>
<span class="k">local</span> <span class="nv">aList</span>
<span class="k">set</span> <span class="nv">aList</span> <span class="k">to</span> <span class="p">{</span><span class="mi">28</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">39</span><span class="p">}</span>
<span class="nv">sort</span><span class="p">(</span><span class="nv">aList</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c">-- Sort items 1 thru -1 of aList.</span>
<span class="no">return</span> <span class="nv">aList</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<div class="mw-highlight mw-highlight-lang-applescript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span><span class="mi">9</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">100</span><span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="Arc"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Arc" title="Category:Arc">Arc</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=15" title="Edit section: Arc">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>(def qs (seq)
  (if (empty seq) nil
      (let pivot (car seq)
	(join (qs (keep [&lt; _ pivot] (cdr seq)))
	      (list pivot)
	      (qs (keep [&gt;= _ pivot] (cdr seq)))))))</pre></div>
<h2><span class="mw-headline" id="ARM_Assembly"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ARM_Assembly" title="Category:ARM Assembly">ARM Assembly</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=16" title="Edit section: ARM Assembly">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=As&amp;action=edit&amp;redlink=1" class="new" title="As (page does not exist)">as</a> version Raspberry Pi</div>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>/* ARM assembly Raspberry PI  */
/*  program quickSort.s   */
/* look pseudo code in wikipedia  quicksort */

/************************************/
/* Constantes                       */
/************************************/
.equ STDOUT, 1     @ Linux output console
.equ EXIT,   1     @ Linux syscall
.equ WRITE,  4     @ Linux syscall
/*********************************/
/* Initialized data              */
/*********************************/
.data
szMessSortOk:       .asciz "Table sorted.\n"
szMessSortNok:      .asciz "Table not sorted&#160;!!!!!.\n"
sMessResult:        .ascii "Value &#160;: "
sMessValeur:        .fill 11, 1, ' '            @ size =&gt; 11
szCarriageReturn:   .asciz "\n"
 
.align 4
iGraine:  .int 123456
.equ NBELEMENTS,      10
#TableNumber:	     .int   9,5,6,1,2,3,10,8,4,7
#TableNumber:	     .int   1,3,5,2,4,6,10,8,4,7
#TableNumber:	     .int   1,3,5,2,4,6,10,8,4,7
#TableNumber:	     .int   1,2,3,4,5,6,10,8,4,7
TableNumber:	     .int   10,9,8,7,6,5,4,3,2,1
#TableNumber:	     .int   13,12,11,10,9,8,7,6,5,4,3,2,1
/*********************************/
/* UnInitialized data            */
/*********************************/
.bss  
/*********************************/
/*  code section                 */
/*********************************/
.text
.global main 
main:                                              @ entry of program 
 
1:
    ldr r0,iAdrTableNumber                         @ address number table

    mov r1,#0                                      @ indice first item
    mov r2,#NBELEMENTS                             @ number of lements 
    bl triRapide                                   @ call quicksort
    ldr r0,iAdrTableNumber                         @ address number table
    bl displayTable
 
    ldr r0,iAdrTableNumber                         @ address number table
    mov r1,#NBELEMENTS                             @ number of lements 
    bl isSorted                                    @ control sort
    cmp r0,#1                                      @ sorted&#160;?
    beq 2f                                    
    ldr r0,iAdrszMessSortNok                       @ no&#160;!! error sort
    bl affichageMess
    b 100f
2:                                                 @ yes
    ldr r0,iAdrszMessSortOk
    bl affichageMess
100:                                               @ standard end of the program 
    mov r0, #0                                     @ return code
    mov r7, #EXIT                                  @ request to exit program
    svc #0                                         @ perform the system call
 
iAdrsMessValeur:          .int sMessValeur
iAdrszCarriageReturn:    .int szCarriageReturn
iAdrsMessResult:          .int sMessResult
iAdrTableNumber:          .int TableNumber
iAdrszMessSortOk:         .int szMessSortOk
iAdrszMessSortNok:        .int szMessSortNok
/******************************************************************/
/*     control sorted table                                   */ 
/******************************************************************/
/* r0 contains the address of table */
/* r1 contains the number of elements  &gt; 0  */
/* r0 return 0  if not sorted   1  if sorted */
isSorted:
    push {r2-r4,lr}                                    @ save registers
    mov r2,#0
    ldr r4,[r0,r2,lsl #2]
1:
    add r2,#1
    cmp r2,r1
    movge r0,#1
    bge 100f
    ldr r3,[r0,r2, lsl #2]
    cmp r3,r4
    movlt r0,#0
    blt 100f
    mov r4,r3
    b 1b
100:
    pop {r2-r4,lr}
    bx lr                                              @ return 


/***************************************************/
/*   Appel rcursif Tri Rapide quicksort           */
/***************************************************/
/* r0 contains the address of table */
/* r1 contains index of first item  */
/* r2 contains the number of elements  &gt; 0  */
triRapide:
    push {r2-r5,lr}                                   @ save registers
    sub r2,#1                                         @ last item index
    cmp r1,r2                                         @ first &gt; last&#160;? 
    bge 100f                                          @ yes -&gt; end
    mov r4,r0                                         @ save r0
    mov r5,r2                                         @ save r2
    bl partition1                                     @ cutting into 2 parts
    mov r2,r0                                         @ index partition
    mov r0,r4                                         @ table address
    bl triRapide                                      @ sort lower part
    add r1,r2,#1                                      @ index begin = index partition + 1
    add r2,r5,#1                                      @ number of elements
    bl triRapide                                      @ sort higter part
   
 100:                                                 @ end function
    pop {r2-r5,lr}                                    @ restaur  registers 
    bx lr                                             @ return


/******************************************************************/
/*      Partition table elements                                */ 
/******************************************************************/
/* r0 contains the address of table */
/* r1 contains index of first item  */
/* r2 contains index of last item   */

partition1:
    push {r1-r7,lr}                                    @ save registers
    ldr r3,[r0,r2,lsl #2]                              @ load value last index
    mov r4,r1                                          @ init with first index
    mov r5,r1                                          @ init with first index
1:                                                     @ begin loop
    ldr r6,[r0,r5,lsl #2]                              @ load value
    cmp r6,r3                                          @ compare value
    ldrlt r7,[r0,r4,lsl #2]                            @ if &lt; swap value table
    strlt r6,[r0,r4,lsl #2]
    strlt r7,[r0,r5,lsl #2]
    addlt r4,#1                                        @ and increment index 1
    add    r5,#1                                       @ increment index 2
    cmp r5,r2                                          @ end&#160;?
    blt 1b                                             @ no loop
    ldr r7,[r0,r4,lsl #2]                              @ swap value
    str r3,[r0,r4,lsl #2]
    str r7,[r0,r2,lsl #2]
    mov r0,r4                                          @ return index partition
100:
    pop {r1-r7,lr}
    bx lr

/******************************************************************/
/*      Display table elements                                */ 
/******************************************************************/
/* r0 contains the address of table */
displayTable:
    push {r0-r3,lr}                                    @ save registers
    mov r2,r0                                          @ table address
    mov r3,#0
1:                                                     @ loop display table
    ldr r0,[r2,r3,lsl #2]
    ldr r1,iAdrsMessValeur                             @ display value
    bl conversion10                                    @ call function
    ldr r0,iAdrsMessResult
    bl affichageMess                                   @ display message
    add r3,#1
    cmp r3,#NBELEMENTS - 1
    ble 1b
    ldr r0,iAdrszCarriageReturn
    bl affichageMess
100:
    pop {r0-r3,lr}
    bx lr
/******************************************************************/
/*     display text with size calculation                         */ 
/******************************************************************/
/* r0 contains the address of the message */
affichageMess:
    push {r0,r1,r2,r7,lr}                          @ save  registres
    mov r2,#0                                      @ counter length 
1:                                                 @ loop length calculation 
    ldrb r1,[r0,r2]                                @ read octet start position + index 
    cmp r1,#0                                      @ if 0 its over 
    addne r2,r2,#1                                 @ else add 1 in the length 
    bne 1b                                         @ and loop 
                                                   @ so here r2 contains the length of the message 
    mov r1,r0                                      @ address message in r1 
    mov r0,#STDOUT                                 @ code to write to the standard output Linux 
    mov r7, #WRITE                                 @ code call system "write" 
    svc #0                                         @ call systeme 
    pop {r0,r1,r2,r7,lr}                           @ restaur des  2 registres */ 
    bx lr                                          @ return  
/******************************************************************/
/*     Converting a register to a decimal unsigned                */ 
/******************************************************************/
/* r0 contains value and r1 address area   */
/* r0 return size of result (no zero final in area) */
/* area size =&gt; 11 bytes          */
.equ LGZONECAL,   10
conversion10:
    push {r1-r4,lr}                                 @ save registers 
    mov r3,r1
    mov r2,#LGZONECAL
 
1:	                                            @ start loop
    bl divisionpar10U                               @ unsigned  r0 &lt;- dividende. quotient -&gt;r0 reste -&gt; r1
    add r1,#48                                      @ digit
    strb r1,[r3,r2]                                 @ store digit on area
    cmp r0,#0                                       @ stop if quotient = 0 
    subne r2,#1                                     @ else previous position
    bne 1b	                                    @ and loop
                                                    @ and move digit from left of area
    mov r4,#0
2:
    ldrb r1,[r3,r2]
    strb r1,[r3,r4]
    add r2,#1
    add r4,#1
    cmp r2,#LGZONECAL
    ble 2b
                                                      @ and move spaces in end on area
    mov r0,r4                                         @ result length 
    mov r1,#' '                                       @ space
3:
    strb r1,[r3,r4]                                   @ store space in area
    add r4,#1                                         @ next position
    cmp r4,#LGZONECAL
    ble 3b                                            @ loop if r4 &lt;= area size
 
100:
    pop {r1-r4,lr}                                    @ restaur registres 
    bx lr                                             @return
 
/***************************************************/
/*   division par 10   unsigned                    */
/***************************************************/
/* r0 dividende   */
/* r0 quotient */	
/* r1 remainder  */
divisionpar10U:
    push {r2,r3,r4, lr}
    mov r4,r0                                          @ save value
    //mov r3,#0xCCCD                                   @ r3 &lt;- magic_number lower  raspberry 3
    //movt r3,#0xCCCC                                  @ r3 &lt;- magic_number higter raspberry 3
    ldr r3,iMagicNumber                                @ r3 &lt;- magic_number    raspberry 1 2
    umull r1, r2, r3, r0                               @ r1&lt;- Lower32Bits(r1*r0) r2&lt;- Upper32Bits(r1*r0) 
    mov r0, r2, LSR #3                                 @ r2 &lt;- r2 &gt;&gt; shift 3
    add r2,r0,r0, lsl #2                               @ r2 &lt;- r0 * 5 
    sub r1,r4,r2, lsl #1                               @ r1 &lt;- r4 - (r2 * 2)  = r4 - (r0 * 10)
    pop {r2,r3,r4,lr}
    bx lr                                              @ leave function 
iMagicNumber:  	.int 0xCCCCCCCD</pre></div>
<h2><span class="mw-headline" id="Arturo"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Arturo" title="Category:Arturo">Arturo</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=17" title="Edit section: Arturo">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-rebol mw-content-ltr" dir="ltr"><pre><span></span><span class="c">quickSort: function [items][</span>
<span class="c">	if 2 &gt; size items -&gt; return items</span>
<span class="c">	</span>
<span class="c">	pivot: first items</span>
<span class="c">	left:  select slice items 1 (size items)-1 &#39;x -&gt; x &lt; pivot</span>
<span class="c">	right: select slice items 1 (size items)-1 &#39;x -&gt; x &gt;= pivot</span>

<span class="c">	((quickSort left) ++ pivot) ++ quickSort right</span>
<span class="c">]</span>

<span class="c">print quickSort [3 1 2 8 5 7 9 4 6]</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>1 2 3 4 5 6 7 8 9</pre>
<h2><span class="mw-headline" id="ATS"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ATS" title="Category:ATS">ATS</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=18" title="Edit section: ATS">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="A_quicksort_working_on_non-linear_linked_lists">A quicksort working on non-linear linked lists</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=19" title="Edit section: A quicksort working on non-linear linked lists">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>(*------------------------------------------------------------------*)
(* Quicksort in ATS2, for non-linear lists.                         *)
(*------------------------------------------------------------------*)

#include "share/atspre_staload.hats"

#define NIL list_nil ()
#define&#160;::  list_cons

(*------------------------------------------------------------------*)

(* A simple quicksort working on "garbage-collected" linked lists,
   with first element as pivot. This is meant as a demonstration, not
   as a superior sort algorithm.

   It is based on the "not-in-place" task pseudocode. *)

datatype comparison_result =
| first_is_less_than_second of ()
| first_is_equal_to_second of ()
| first_is_greater_than_second of ()

extern fun {a&#160;: t@ype}
list_quicksort$comparison (x&#160;: a, y&#160;: a)&#160;:&lt;&gt; comparison_result

extern fun {a&#160;: t@ype}
list_quicksort {n  &#160;: int}
               (lst&#160;: list (a, n))&#160;:&lt;&gt; list (a, n)

(* -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - *)

implement {a}
list_quicksort {n} (lst) =
  let
    fun
    partition {n    &#160;: nat}
              .&lt;n&gt;.             (* Proof of termination. *)
              (lst  &#160;: list (a, n),
               pivot&#160;: a)
       &#160;:&lt;&gt; [n1, n2, n3&#160;: int | n1 + n2 + n3 == n]
            @(list (a, n1), list (a, n2), list (a, n3)) =
      (* This implementation is *not* tail recursive. I may get a
         scolding for using ATS to risk stack overflow! However, I
         need more practice writing non-tail routines.&#160;:) Also, a lot
         of programmers in other languages would do it this
         way--especially if the lists are evaluated lazily. *)
      case+ lst of
      | NIL =&gt; @(NIL, NIL, NIL)
      | head&#160;:: tail =&gt;
        let
          val @(lt, eq, gt) = partition (tail, pivot)
          prval () = lemma_list_param lt
          prval () = lemma_list_param eq
          prval () = lemma_list_param gt
        in
          case+ list_quicksort$comparison&lt;a&gt; (head, pivot) of
          | first_is_less_than_second ()    =&gt; @(head&#160;:: lt, eq, gt)
          | first_is_equal_to_second ()     =&gt; @(lt, head&#160;:: eq, gt)
          | first_is_greater_than_second () =&gt; @(lt, eq, head&#160;:: gt)
        end

    fun
    quicksort {n  &#160;: nat}
              .&lt;n&gt;.             (* Proof of termination. *)
              (lst&#160;: list (a, n))
       &#160;:&lt;&gt; list (a, n) =
      case+ lst of
      | NIL =&gt; lst
      | _&#160;:: NIL =&gt; lst
      | head&#160;:: tail =&gt;
        let
          (* We are careful here to run "partition" on "tail" rather
             than "lst", so the termination metric will be provably
             decreasing. (Really the compiler *forces* us to take such
             care, or else to change&#160;:&lt;&gt; to&#160;:&lt;!ntm&gt;) *)
          val pivot = head
          prval () = lemma_list_param tail
          val @(lt, eq, gt) = partition {n - 1} (tail, pivot)
          prval () = lemma_list_param lt
          prval () = lemma_list_param eq
          prval () = lemma_list_param gt
          val eq = pivot&#160;:: eq
          and lt = quicksort lt
          and gt = quicksort gt
        in
          lt + (eq + gt)
        end

    prval () = lemma_list_param lst
  in
    quicksort {n} lst
  end

(*------------------------------------------------------------------*)

val example_strings =
  $list ("choose", "any", "element", "of", "the", "array",
         "to", "be", "the", "pivot",
         "divide", "all", "other", "elements", "except",
         "the", "pivot", "into", "two", "partitions",
         "all", "elements", "less", "than", "the", "pivot",
         "must", "be", "in", "the", "first", "partition",
         "all", "elements", "greater", "than", "the", "pivot",
         "must", "be", "in", "the", "second", "partition",
         "use", "recursion", "to", "sort", "both", "partitions",
         "join", "the", "first", "sorted", "partition", "the",
         "pivot", "and", "the", "second", "sorted", "partition")

implement
list_quicksort$comparison&lt;string&gt; (x, y) =
  let
    val i = strcmp (x, y)
  in
    if i &lt; 0 then
      first_is_less_than_second
    else if i = 0 then
      first_is_equal_to_second
    else
      first_is_greater_than_second
  end

implement
main0 () =
  let
    val sorted_strings = list_quicksort&lt;string&gt; example_strings

    fun
    print_strings {n      &#160;: nat} .&lt;n&gt;.
                  (strings&#160;: list (string, n),
                   i      &#160;: int)&#160;: void =
      case+ strings of
      | NIL =&gt; if i &lt;&gt; 1 then println! () else ()
      | head&#160;:: tail =&gt;
        begin
          print! head;
          if i = 8 then
            begin
              println! ();
              print_strings (tail, 1)
            end
          else
            begin
              print! " ";
              print_strings (tail, succ i)
            end
        end
  in
    println! (length example_strings);
    println! (length sorted_strings);
    print_strings (sorted_strings, 1)
  end

(*------------------------------------------------------------------*)</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>$ patscc -O3 -DATS_MEMALLOC_GCBDW quicksort_task_for_lists.dats -lgc &amp;&amp; ./a.out
62
62
all all all and any array be be
be both choose divide element elements elements elements
except first first greater in in into join
less must must of other partition partition partition
partition partitions partitions pivot pivot pivot pivot pivot
recursion second second sort sorted sorted than than
the the the the the the the the
the the to to two use</pre>
<h3><span class="mw-headline" id="A_quicksort_working_on_linear_linked_lists">A quicksort working on linear linked lists</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=20" title="Edit section: A quicksort working on linear linked lists">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This program was derived from the quicksort for non-linear linked lists.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>(*------------------------------------------------------------------*)
(* Quicksort in ATS2, for linear lists.                             *)
(*------------------------------------------------------------------*)

#include "share/atspre_staload.hats"

#define NIL list_vt_nil ()
#define&#160;::  list_vt_cons

(*------------------------------------------------------------------*)

(* A simple quicksort working on linear linked lists, with first
   element as pivot. This is meant as a demonstration, not as a
   superior sort algorithm.

   It is based on the "not-in-place" task pseudocode. *)

#define FIRST_IS_LESS_THAN_SECOND     1
#define FIRST_IS_EQUAL_TO_SECOND      2
#define FIRST_IS_GREATER_THAN_SECOND  3

typedef comparison_result =
  [i&#160;: int | (i == FIRST_IS_LESS_THAN_SECOND    ||
              i == FIRST_IS_EQUAL_TO_SECOND     ||
              i == FIRST_IS_GREATER_THAN_SECOND)]
  int i

extern fun {a&#160;: vt@ype}
list_vt_quicksort$comparison (x&#160;: !a, y&#160;: !a)&#160;:&lt;&gt; comparison_result

extern fun {a&#160;: vt@ype}
list_vt_quicksort {n  &#160;: int}
                  (lst&#160;: list_vt (a, n))&#160;:&lt;!wrt&gt; list_vt (a, n)

(* -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - *)

implement {a}
list_vt_quicksort {n} (lst) =
  let
    fun
    partition {n    &#160;: nat}
              .&lt;n&gt;.             (* Proof of termination. *)
              (lst  &#160;: list_vt (a, n),
               pivot&#160;: !a)
       &#160;:&lt;&gt; [n1, n2, n3&#160;: int | n1 + n2 + n3 == n]
            @(list_vt (a, n1), list_vt (a, n2), list_vt (a, n3)) =
      (* This implementation is *not* tail recursive. I may get a
         scolding for using ATS to risk stack overflow! However, I
         need more practice writing non-tail routines.&#160;:) Also, a lot
         of programmers in other languages would do it this
         way--especially if the lists are evaluated lazily. *)
      case+ lst of
      | ~ NIL =&gt; @(NIL, NIL, NIL)
      | ~ head&#160;:: tail =&gt;
        let
          val @(lt, eq, gt) = partition (tail, pivot)
          prval () = lemma_list_vt_param lt
          prval () = lemma_list_vt_param eq
          prval () = lemma_list_vt_param gt
        in
          case+ list_vt_quicksort$comparison&lt;a&gt; (head, pivot) of
          | FIRST_IS_LESS_THAN_SECOND    =&gt; @(head&#160;:: lt, eq, gt)
          | FIRST_IS_EQUAL_TO_SECOND     =&gt; @(lt, head&#160;:: eq, gt)
          | FIRST_IS_GREATER_THAN_SECOND =&gt; @(lt, eq, head&#160;:: gt)
        end

    fun
    quicksort {n  &#160;: nat}
              .&lt;n&gt;.             (* Proof of termination. *)
              (lst&#160;: list_vt (a, n))
       &#160;:&lt;!wrt&gt; list_vt (a, n) =
      case+ lst of
      | NIL =&gt; lst
      | _&#160;:: NIL =&gt; lst
      | ~ head&#160;:: tail =&gt;
        let
          (* We are careful here to run "partition" on "tail" rather
             than "lst", so the termination metric will be provably
             decreasing. (Really the compiler *forces* us to take such
             care, or else to add !ntm to the effects.) *)
          val pivot = head
          prval () = lemma_list_vt_param tail
          val @(lt, eq, gt) = partition {n - 1} (tail, pivot)
          prval () = lemma_list_vt_param lt
          prval () = lemma_list_vt_param eq
          prval () = lemma_list_vt_param gt
          val eq = pivot&#160;:: eq
          and lt = quicksort lt
          and gt = quicksort gt
        in
          list_vt_append (lt, list_vt_append (eq, gt))
        end

    prval () = lemma_list_vt_param lst
  in
    quicksort {n} lst
  end

(*------------------------------------------------------------------*)

implement
list_vt_quicksort$comparison&lt;Strptr1&gt; (x, y) =
  let
    val i = compare (x, y)
  in
    if i &lt; 0 then
      FIRST_IS_LESS_THAN_SECOND
    else if i = 0 then
      FIRST_IS_EQUAL_TO_SECOND
    else
      FIRST_IS_GREATER_THAN_SECOND
  end

implement
list_vt_map$fopr&lt;string&gt;&lt;Strptr1&gt; (s) = string0_copy s

implement
list_vt_freelin$clear&lt;Strptr1&gt; (x) = strptr_free x

implement
main0 () =
  let
    val example_strings =
      $list_vt
        ("choose", "any", "element", "of", "the", "array",
         "to", "be", "the", "pivot",
         "divide", "all", "other", "elements", "except",
         "the", "pivot", "into", "two", "partitions",
         "all", "elements", "less", "than", "the", "pivot",
         "must", "be", "in", "the", "first", "partition",
         "all", "elements", "greater", "than", "the", "pivot",
         "must", "be", "in", "the", "second", "partition",
         "use", "recursion", "to", "sort", "both", "partitions",
         "join", "the", "first", "sorted", "partition", "the",
         "pivot", "and", "the", "second", "sorted", "partition")

    val example_strptrs =
      list_vt_map&lt;string&gt;&lt;Strptr1&gt; (example_strings)
    val sorted_strptrs = list_vt_quicksort&lt;Strptr1&gt; example_strptrs

    fun
    print_strptrs {n      &#160;: nat} .&lt;n&gt;.
                  (strptrs&#160;: !list_vt (Strptr1, n),
                   i      &#160;: int)&#160;: void =
      case+ strptrs of
      | NIL =&gt; if i &lt;&gt; 1 then println! () else ()
      | @ head&#160;:: tail =&gt;
        begin
          print! head;
          if i = 8 then
            begin
              println! ();
              print_strptrs (tail, 1)
            end
          else
            begin
              print! " ";
              print_strptrs (tail, succ i)
            end;
          fold@ strptrs
        end
  in
    println! (length example_strings);
    println! (length sorted_strptrs);
    print_strptrs (sorted_strptrs, 1);
    list_vt_freelin&lt;Strptr1&gt; sorted_strptrs;
    list_vt_free&lt;string&gt; example_strings
  end

(*------------------------------------------------------------------*)</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>$ patscc -O3 -DATS_MEMALLOC_LIBC quicksort_task_for_list_vt.dats &amp;&amp; ./a.out
62
62
all all all and any array be be
be both choose divide element elements elements elements
except first first greater in in into join
less must must of other partition partition partition
partition partitions partitions pivot pivot pivot pivot pivot
recursion second second sort sorted sorted than than
the the the the the the the the
the the to to two use</pre>
<h3><span class="mw-headline" id="A_quicksort_working_on_arrays_of_non-linear_elements">A quicksort working on arrays of non-linear elements</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=21" title="Edit section: A quicksort working on arrays of non-linear elements">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>(*------------------------------------------------------------------*)
(* Quicksort in ATS2, for arrays of non-linear values.              *)
(*------------------------------------------------------------------*)

#include "share/atspre_staload.hats"

#define NIL list_nil ()
#define&#160;::  list_cons

(*------------------------------------------------------------------*)

(* A simple quicksort working on arrays of non-linear values, using
   a programmer-selectible pivot.

   It is based on the "in-place" task pseudocode. *)

extern fun {a&#160;: t@ype}          (* A "less-than" predicate. *)
array_quicksort$lt (x&#160;: a, y&#160;: a)&#160;: bool

extern fun {a&#160;: t@ype}
array_quicksort$select_pivot {n    &#160;: int}
                             {i, j &#160;: nat | i &lt; j; j &lt; n}
                             (arr  &#160;: &amp;array (a, n) &gt;&gt; _,
                              first&#160;: size_t i,
                              last &#160;: size_t j)&#160;: a

extern fun {a&#160;: t@ype}
array_quicksort {n  &#160;: int}
                (arr&#160;: &amp;array (a, n) &gt;&gt; _,
                 n  &#160;: size_t n)&#160;: void

(* -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - *)

fn {a&#160;: t@ype}
swap {n   &#160;: int}
     {i, j&#160;: nat | i &lt; n; j &lt; n}
     (arr &#160;: &amp;array(a, n) &gt;&gt; _,
      i   &#160;: size_t i,
      j   &#160;: size_t j)&#160;: void =
  {
    val x = arr[i] and y = arr[j]
    val () = (arr[i]&#160;:= y) and () = (arr[j]&#160;:= x)
  }

implement {a}
array_quicksort {n} (arr, n) =
  let
    sortdef index = {i&#160;: nat | i &lt; n}
    typedef index (i&#160;: int) = [0 &lt;= i; i &lt; n] size_t i
    typedef index = [i&#160;: index] index i

    macdef lt = array_quicksort$lt&lt;a&gt;

    fun
    quicksort {i, j &#160;: index}
              (arr  &#160;: &amp;array(a, n) &gt;&gt; _,
               first&#160;: index i,
               last &#160;: index j)&#160;: void =
      if first &lt; last then
        {
          val pivot&#160;: a =
            array_quicksort$select_pivot&lt;a&gt; (arr, first, last)

          fun
          search_rightwards (arr &#160;: &amp;array (a, n),
                             left&#160;: index)&#160;: index =
            if arr[left] \lt pivot then
              let
                val () = assertloc (succ left &lt;&gt; n)
              in
                search_rightwards (arr, succ left)
              end
            else
              left

          fun
          search_leftwards (arr  &#160;: &amp;array (a, n),
                            left &#160;: index,
                            right&#160;: index)&#160;: index =
            if right &lt; left then
              right
            else if pivot \lt arr[right] then
              let
                val () = assertloc (right &lt;&gt; i2sz 0)
              in
                search_leftwards (arr, left, pred right)
              end
            else
              right

          fun
          partition (arr   &#160;: &amp;array (a, n) &gt;&gt; _,
                     left0 &#160;: index,
                     right0&#160;: index)&#160;: @(index, index) =
            let
              val left = search_rightwards (arr, left0)
              val right = search_leftwards (arr, left, right0)
            in
              if left &lt;= right then
                let
                  val () = assertloc (succ left &lt;&gt; n)
                  and () = assertloc (right &lt;&gt; i2sz 0)
                in
                  swap (arr, left, right);
                  partition (arr, succ left, pred right)
                end
              else
                @(left, right)
            end

          val @(left, right) = partition (arr, first, last)

          val () = quicksort (arr, first, right)
          and () = quicksort (arr, left, last)
        }
  in
    if i2sz 2 &lt;= n then
      quicksort {0, n - 1} (arr, i2sz 0, pred n)
  end

(*------------------------------------------------------------------*)

val example_strings =
  $list ("choose", "any", "element", "of", "the", "array",
         "to", "be", "the", "pivot",
         "divide", "all", "other", "elements", "except",
         "the", "pivot", "into", "two", "partitions",
         "all", "elements", "less", "than", "the", "pivot",
         "must", "be", "in", "the", "first", "partition",
         "all", "elements", "greater", "than", "the", "pivot",
         "must", "be", "in", "the", "second", "partition",
         "use", "recursion", "to", "sort", "both", "partitions",
         "join", "the", "first", "sorted", "partition", "the",
         "pivot", "and", "the", "second", "sorted", "partition")

implement
array_quicksort$lt&lt;string&gt; (x, y) =
  strcmp (x, y) &lt; 0

implement
array_quicksort$select_pivot&lt;string&gt; {n} (arr, first, last) =
  (* Median of three, with swapping around of elements during pivot
     selection. See https://archive.ph/oYENx *)
  let
    macdef lt = array_quicksort$lt&lt;string&gt;

    val middle = first + ((last - first) / i2sz 2)

    val xfirst = arr[first]
    and xmiddle = arr[middle]
    and xlast = arr[last]
  in
    if (xmiddle \lt xfirst) xor (xlast \lt xfirst) then
      begin
        swap (arr, first, middle);
        if xlast \lt xmiddle then
          swap (arr, first, last);
        xfirst
      end
    else if (xmiddle \lt xfirst) xor (xmiddle \lt xlast) then
      begin
        if xlast \lt xfirst then
          swap (arr, first, last);
        xmiddle
      end
    else
      begin
        swap (arr, middle, last);
        if xmiddle \lt xfirst then
          swap (arr, first, last);
        xlast
      end
  end

implement
main0 () =
  let
    prval () = lemma_list_param example_strings
    val n = length example_strings

    val @(pf, pfgc | p) = array_ptr_alloc&lt;string&gt; (i2sz n)
    macdef arr = !p

    val () = array_initize_list (arr, n, example_strings)
    val () = array_quicksort&lt;string&gt; (arr, i2sz n)
    val sorted_strings = list_vt2t (array2list (arr, i2sz n))

    val () = array_ptr_free (pf, pfgc | p)

    fun
    print_strings {n      &#160;: nat} .&lt;n&gt;.
                  (strings&#160;: list (string, n),
                   i      &#160;: int)&#160;: void =
      case+ strings of
      | NIL =&gt; if i &lt;&gt; 1 then println! () else ()
      | head&#160;:: tail =&gt;
        begin
          print! head;
          if i = 8 then
            begin
              println! ();
              print_strings (tail, 1)
            end
          else
            begin
              print! " ";
              print_strings (tail, succ i)
            end
        end
  in
    println! (length example_strings);
    println! (length sorted_strings);
    print_strings (sorted_strings, 1)
  end

(*------------------------------------------------------------------*)</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>$ patscc -O3 -DATS_MEMALLOC_GCBDW quicksort_task_for_arrays.dats -lgc &amp;&amp; ./a.out
62
62
all all all and any array be be
be both choose divide element elements elements elements
except first first greater in in into join
less must must of other partition partition partition
partition partitions partitions pivot pivot pivot pivot pivot
recursion second second sort sorted sorted than than
the the the the the the the the
the the to to two use</pre>
<h3><span class="mw-headline" id="A_quicksort_working_on_arrays_of_linear_elements">A quicksort working on arrays of linear elements</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=22" title="Edit section: A quicksort working on arrays of linear elements">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The quicksort for arrays of non-linear elements <i>makes a copy</i> of the pivot value, and compares this copy with array elements <i>by value</i>. Here, however, the array elements are <i>linear</i> values. They cannot be copied, unless a special "copy" procedure is provided. We do not want to require such a procedure. So we must do something else.
</p><p>What we do is move the pivot to the last element of the array, by safely swapping it with the original last element. We partition the array to the left of the last element, comparing array elements with the pivot (that is, the last element) <i>by reference</i>.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>(*------------------------------------------------------------------*)
(* Quicksort in ATS2, for arrays of (possibly) linear values.       *)
(*------------------------------------------------------------------*)

#include "share/atspre_staload.hats"

#define NIL list_vt_nil ()
#define&#160;::  list_vt_cons

(*------------------------------------------------------------------*)

(* A simple quicksort working on arrays of non-linear values, using
   a programmer-selectible pivot.

   It is based on the "in-place" task pseudocode. *)

extern fun {a&#160;: vt@ype}          (* A "less-than" predicate. *)
array_quicksort$lt {px, py&#160;: addr}
                   (pfx   &#160;:&#160;!(a @ px),
                    pfy   &#160;:&#160;!(a @ py) |
                    px    &#160;: ptr px,
                    py    &#160;: ptr py)&#160;: bool

extern fun {a&#160;: vt@ype}
array_quicksort$select_pivot_index {n    &#160;: int}
                                   {i, j &#160;: nat | i &lt; j; j &lt; n}
                                   (arr  &#160;: &amp;array (a, n),
                                    first&#160;: size_t i,
                                    last &#160;: size_t j)
   &#160;: [k&#160;: int | i &lt;= k; k &lt;= j] size_t k

extern fun {a&#160;: vt@ype}
array_quicksort {n  &#160;: int}
                (arr&#160;: &amp;array (a, n) &gt;&gt; _,
                 n  &#160;: size_t n)&#160;: void

(* -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - *)

prfn                   (* Subdivide an array view into three views. *)
array_v_subdivide3 {a&#160;: vt@ype} {p&#160;: addr} {n1, n2, n3&#160;: nat}
                   (pf&#160;: @[a][n1 + n2 + n3] @ p)
   &#160;:&lt;prf&gt; @(@[a][n1] @ p,
           @[a][n2] @ (p + n1 * sizeof a),
           @[a][n3] @ (p + (n1 + n2) * sizeof a)) =
  let
    prval (pf1, pf23) =
      array_v_split {a} {p} {n1 + n2 + n3} {n1} pf
    prval (pf2, pf3) =
      array_v_split {a} {p + n1 * sizeof a} {n2 + n3} {n2} pf23
  in
    @(pf1, pf2, pf3)
  end

prfn            (* Join three contiguous array views into one view. *)
array_v_join3 {a&#160;: vt@ype} {p&#160;: addr} {n1, n2, n3&#160;: nat}
              (pf1&#160;: @[a][n1] @ p,
               pf2&#160;: @[a][n2] @ (p + n1 * sizeof a),
               pf3&#160;: @[a][n3] @ (p + (n1 + n2) * sizeof a))
   &#160;:&lt;prf&gt; @[a][n1 + n2 + n3] @ p =
  let
    prval pf23 =
      array_v_unsplit {a} {p + n1 * sizeof a} {n2, n3} (pf2, pf3)
    prval pf = array_v_unsplit {a} {p} {n1, n2 + n3} (pf1, pf23)
  in
    pf
  end

fn {a&#160;: vt@ype}            (* Safely swap two elements of an array. *)
swap_elems_1 {n    &#160;: int}
             {i, j &#160;: nat | i &lt;= j; j &lt; n}
             {p    &#160;: addr}
             (pfarr&#160;: !array_v(a, p, n) &gt;&gt; _ |
              p    &#160;: ptr p,
              i    &#160;: size_t i,
              j    &#160;: size_t j)&#160;: void =

  let
    fn {a&#160;: vt@ype}
    swap {n    &#160;: int}
         {i, j &#160;: nat | i &lt; j; j &lt; n}
         {p    &#160;: addr}
         (pfarr&#160;: !array_v(a, p, n) &gt;&gt; _ |
          p    &#160;: ptr p,
          i    &#160;: size_t i,
          j    &#160;: size_t j)&#160;: void =
      {

        (* Safely swapping linear elements requires that views of
           those elements be split off from the rest of the
           array. Why? Because those elements will temporarily be in
           an uninitialized state. (Actually they will be "?!", but
           the difference is unimportant here.)

           Remember, a linear value is consumed by using it.

           The view for the whole array can be reassembled only after
           new values have been stored, making the entire array once
           again initialized. *)

        prval @(pf1, pf2, pf3) =
          array_v_subdivide3 {a} {p} {i, j - i, n - j} pfarr
        prval @(pfi, pf2_) = array_v_uncons pf2
        prval @(pfj, pf3_) = array_v_uncons pf3

        val pi = ptr_add&lt;a&gt; (p, i)
        and pj = ptr_add&lt;a&gt; (p, j)

        val xi = ptr_get&lt;a&gt; (pfi | pi)
        and xj = ptr_get&lt;a&gt; (pfj | pj)

        val () = ptr_set&lt;a&gt; (pfi | pi, xj)
        and () = ptr_set&lt;a&gt; (pfj | pj, xi)

        prval pf2 = array_v_cons (pfi, pf2_)
        prval pf3 = array_v_cons (pfj, pf3_)
        prval () = pfarr&#160;:= array_v_join3 (pf1, pf2, pf3)
      }
  in
    if i &lt; j then
      swap {n} {i, j} {p} (pfarr | p, i, j)
    else
      ()   (* i = j must be handled specially, due to linear typing.*)
  end

fn {a&#160;: vt@ype}            (* Safely swap two elements of an array. *)
swap_elems_2 {n   &#160;: int}
             {i, j&#160;: nat | i &lt;= j; j &lt; n}
             (arr &#160;: &amp;array(a, n) &gt;&gt; _,
              i    &#160;: size_t i,
              j    &#160;: size_t j)&#160;: void =
  swap_elems_1 (view@ arr | addr@ arr, i, j)

overload swap_elems with swap_elems_1
overload swap_elems with swap_elems_2
overload swap with swap_elems

fn {a&#160;: vt@ype}         (* Safely compare two elements of an array. *)
lt_elems_1 {n    &#160;: int}
           {i, j &#160;: nat | i &lt; n; j &lt; n}
           {p    &#160;: addr}
           (pfarr&#160;: !array_v(a, p, n) |
            p    &#160;: ptr p,
            i    &#160;: size_t i,
            j    &#160;: size_t j)&#160;: bool =
  let
    fn
    compare {n    &#160;: int}
            {i, j &#160;: nat | i &lt; j; j &lt; n}
            {p    &#160;: addr}
            (pfarr&#160;: !array_v(a, p, n) |
             p    &#160;: ptr p,
             i    &#160;: size_t i,
             j    &#160;: size_t j,
             gt   &#160;: bool)&#160;: bool =
      let
        prval @(pf1, pf2, pf3) =
          array_v_subdivide3 {a} {p} {i, j - i, n - j} pfarr
        prval @(pfi, pf2_) = array_v_uncons pf2
        prval @(pfj, pf3_) = array_v_uncons pf3

        val pi = ptr_add&lt;a&gt; (p, i)
        and pj = ptr_add&lt;a&gt; (p, j)

        val retval =
          if gt then
            array_quicksort$lt&lt;a&gt; (pfj, pfi | pj, pi)
          else
            array_quicksort$lt&lt;a&gt; (pfi, pfj | pi, pj)

        prval pf2 = array_v_cons (pfi, pf2_)
        prval pf3 = array_v_cons (pfj, pf3_)
        prval () = pfarr&#160;:= array_v_join3 (pf1, pf2, pf3)
      in
        retval
      end
  in
    if i &lt; j then
      compare {n} {i, j} {p} (pfarr | p, i, j, false)
    else if j &lt; i then
      compare {n} {j, i} {p} (pfarr | p, j, i, true)
    else
      false
  end

fn {a&#160;: vt@ype}         (* Safely compare two elements of an array. *)
lt_elems_2 {n   &#160;: int}
           {i, j&#160;: nat | i &lt; n; j &lt; n}
           (arr &#160;: &amp;array (a, n),
            i   &#160;: size_t i,
            j   &#160;: size_t j)&#160;: bool =
  lt_elems_1 (view@ arr | addr@ arr, i, j)

overload lt_elems with lt_elems_1
overload lt_elems with lt_elems_2

implement {a}
array_quicksort {n} (arr, n) =
  let
    sortdef index = {i&#160;: nat | i &lt; n}
    typedef index (i&#160;: int) = [0 &lt;= i; i &lt; n] size_t i
    typedef index = [i&#160;: index] index i

    macdef lt = array_quicksort$lt&lt;a&gt;

    fun
    quicksort {i, j &#160;: index}
              (arr  &#160;: &amp;array(a, n) &gt;&gt; _,
               first&#160;: index i,
               last &#160;: index j)&#160;: void =
      if first &lt; last then
        {
          val pivot =
            array_quicksort$select_pivot_index&lt;a&gt; (arr, first, last)

          (* Swap the pivot with the last element. *)
          val () = swap (arr, pivot, last)
          val pivot = last

          fun
          search_rightwards (arr &#160;: &amp;array (a, n),
                             left&#160;: index)&#160;: index =
            if lt_elems&lt;a&gt; (arr, left, pivot) then
              let
                val () = assertloc (succ left &lt;&gt; n)
              in
                search_rightwards (arr, succ left)
              end
            else
              left

          fun
          search_leftwards (arr  &#160;: &amp;array (a, n),
                            left &#160;: index,
                            right&#160;: index)&#160;: index =
            if right &lt; left then
              right
            else if lt_elems&lt;a&gt; (arr, pivot, right) then
              let
                val () = assertloc (right &lt;&gt; i2sz 0)
              in
                search_leftwards (arr, left, pred right)
              end
            else
              right

          fun
          partition (arr   &#160;: &amp;array (a, n) &gt;&gt; _,
                     left0 &#160;: index,
                     right0&#160;: index)&#160;: @(index, index) =
            let
              val left = search_rightwards (arr, left0)
              val right = search_leftwards (arr, left, right0)
            in
              if left &lt;= right then
                let
                  val () = assertloc (succ left &lt;&gt; n)
                  and () = assertloc (right &lt;&gt; i2sz 0)
                in
                  swap (arr, left, right);
                  partition (arr, succ left, pred right)
                end
              else
                @(left, right)
            end

          val @(left, right) = partition (arr, first, pred last)

          val () = quicksort (arr, first, right)
          and () = quicksort (arr, left, last)
        }
  in
    if i2sz 2 &lt;= n then
      quicksort {0, n - 1} (arr, i2sz 0, pred n)
  end

(*------------------------------------------------------------------*)

implement
array_quicksort$lt&lt;Strptr1&gt; (pfx, pfy | px, py) =
  compare (!px, !py) &lt; 0

implement
array_quicksort$select_pivot_index&lt;Strptr1&gt; {n} (arr, first, last) =
  (* Median of three. *)
  let
    val middle = first + ((last - first) / i2sz 2)
  in
    if lt_elems&lt;Strptr1&gt; (arr, middle, first)
          xor lt_elems&lt;Strptr1&gt; (arr, last, first) then
      first
    else if lt_elems&lt;Strptr1&gt; (arr, middle, first)
              xor lt_elems&lt;Strptr1&gt; (arr, middle, last) then
      middle
    else
      last
  end

implement
list_vt_map$fopr&lt;string&gt;&lt;Strptr1&gt; (s) = string0_copy s

implement
list_vt_freelin$clear&lt;Strptr1&gt; (x) = strptr_free x

implement
main0 () =
  let
    val example_strings =
      $list_vt
        ("choose", "any", "element", "of", "the", "array",
         "to", "be", "the", "pivot",
         "divide", "all", "other", "elements", "except",
         "the", "pivot", "into", "two", "partitions",
         "all", "elements", "less", "than", "the", "pivot",
         "must", "be", "in", "the", "first", "partition",
         "all", "elements", "greater", "than", "the", "pivot",
         "must", "be", "in", "the", "second", "partition",
         "use", "recursion", "to", "sort", "both", "partitions",
         "join", "the", "first", "sorted", "partition", "the",
         "pivot", "and", "the", "second", "sorted", "partition")

    val example_strptrs =
      list_vt_map&lt;string&gt;&lt;Strptr1&gt; (example_strings)

    prval () = lemma_list_vt_param example_strptrs
    val n = length example_strptrs

    val @(pf, pfgc | p) = array_ptr_alloc&lt;Strptr1&gt; (i2sz n)
    macdef arr = !p

    val () = array_initize_list_vt&lt;Strptr1&gt; (arr, n, example_strptrs)
    val () = array_quicksort&lt;Strptr1&gt; (arr, i2sz n)
    val sorted_strptrs = array2list (arr, i2sz n)

    fun
    print_strptrs {n      &#160;: nat} .&lt;n&gt;.
                  (strptrs&#160;: !list_vt (Strptr1, n),
                   i      &#160;: int)&#160;: void =
      case+ strptrs of
      | NIL =&gt; if i &lt;&gt; 1 then println! () else ()
      | @ head&#160;:: tail =&gt;
        begin
          print! head;
          if i = 8 then
            begin
              println! ();
              print_strptrs (tail, 1)
            end
          else
            begin
              print! " ";
              print_strptrs (tail, succ i)
            end;
          fold@ strptrs
        end
  in
    println! (length example_strings);
    println! (length sorted_strptrs);
    print_strptrs (sorted_strptrs, 1);
    list_vt_freelin&lt;Strptr1&gt; sorted_strptrs;
    array_ptr_free (pf, pfgc | p);
    list_vt_free&lt;string&gt; example_strings
  end

(*------------------------------------------------------------------*)</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>$ patscc -O3 -DATS_MEMALLOC_LIBC quicksort_task_for_arrays_2.dats
62
62
all all all and any array be be
be both choose divide element elements elements elements
except first first greater in in into join
less must must of other partition partition partition
partition partitions partitions pivot pivot pivot pivot pivot
recursion second second sort sorted sorted than than
the the the the the the the the
the the to to two use</pre>
<h3><span class="mw-headline" id="A_stable_quicksort_working_on_linear_lists">A <i>stable</i> quicksort working on linear lists</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=23" title="Edit section: A stable quicksort working on linear lists">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>See the code at <a href="/web/20230609112831/https://rosettacode.org/wiki/Quickselect_algorithm#Quickselect_working_on_linear_lists" title="Quickselect algorithm">the quickselect task</a>.
</p>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>$ patscc -O3 -DATS_MEMALLOC_LIBC quickselect_task_for_list_vt.dats &amp;&amp; ./a.out quicksort
stable sort by first character:
duck, deer, dolphin, elephant, earwig, giraffe, pronghorn, wildebeest, woodlouse, whip-poor-will</pre>
<h2><span class="mw-headline" id="AutoHotkey"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:AutoHotkey" title="Category:AutoHotkey">AutoHotkey</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=24" title="Edit section: AutoHotkey">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Translated from the python example:
</p>
<div class="mw-highlight mw-highlight-lang-autohotkey mw-content-ltr" dir="ltr"><pre><span></span><span class="n">a</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">31</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">782</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="n">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">QuickSort</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
	<span class="n">Out</span> <span class="o">.=</span> <span class="s">&quot;,&quot;</span> <span class="n">v</span>
<span class="nb">MsgBox</span><span class="p">,</span> <span class="o">%</span> <span class="nf">SubStr</span><span class="p">(</span><span class="n">Out</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">return</span>

<span class="n">QuickSort</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">if</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="nf">MaxIndex</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span>
		<span class="nb">return</span> <span class="n">a</span>
	<span class="n">Less</span> <span class="o">:=</span> <span class="p">[],</span> <span class="n">Same</span> <span class="o">:=</span> <span class="p">[],</span> <span class="n">More</span> <span class="o">:=</span> <span class="p">[]</span>
	<span class="n">Pivot</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
	<span class="n">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">a</span>
	<span class="p">{</span>
		<span class="n">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&lt;</span> <span class="n">Pivot</span><span class="p">)</span>
			<span class="n">less</span><span class="o">.</span><span class="nf">Insert</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
		<span class="nb">else</span> <span class="n">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;</span> <span class="n">Pivot</span><span class="p">)</span>
			<span class="n">more</span><span class="o">.</span><span class="nf">Insert</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
		<span class="nb">else</span>
			<span class="n">same</span><span class="o">.</span><span class="nf">Insert</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="n">Less</span> <span class="o">:=</span> <span class="n">QuickSort</span><span class="p">(</span><span class="n">Less</span><span class="p">)</span>
	<span class="n">Out</span> <span class="o">:=</span> <span class="n">QuickSort</span><span class="p">(</span><span class="n">More</span><span class="p">)</span>
	<span class="n">if</span> <span class="p">(</span><span class="n">Same</span><span class="o">.</span><span class="nf">MaxIndex</span><span class="p">())</span>
		<span class="n">Out</span><span class="o">.</span><span class="nf">Insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Same</span><span class="o">*</span><span class="p">)</span><span class="c1">&#160;; insert all values of same at index 1</span>
	<span class="n">if</span> <span class="p">(</span><span class="n">Less</span><span class="o">.</span><span class="nf">MaxIndex</span><span class="p">())</span>
		<span class="n">Out</span><span class="o">.</span><span class="nf">Insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Less</span><span class="o">*</span><span class="p">)</span><span class="c1">&#160;; insert all values of less at index 1</span>
	<span class="nb">return</span> <span class="n">Out</span>
<span class="p">}</span>
</pre></div>
<p>Old implementation for AutoHotkey 1.0:
</p>
<div class="mw-highlight mw-highlight-lang-autohotkey mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">MsgBox</span> <span class="o">%</span> <span class="n">quicksort</span><span class="p">(</span><span class="s">&quot;8,4,9,2,1&quot;</span><span class="p">)</span>

<span class="n">quicksort</span><span class="p">(</span><span class="n">list</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nb">StringSplit</span><span class="p">,</span> <span class="n">list</span><span class="p">,</span> <span class="n">list</span><span class="p">,</span> <span class="se">`,</span>
  <span class="n">If</span> <span class="p">(</span><span class="n">list0</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="nb">Return</span> <span class="n">list</span>
  <span class="n">pivot</span> <span class="o">:=</span> <span class="n">list1</span>
  <span class="nb">Loop</span><span class="p">,</span> <span class="n">Parse</span><span class="p">,</span> <span class="n">list</span><span class="p">,</span> <span class="se">`,</span>
  <span class="p">{</span>
    <span class="n">If</span> <span class="p">(</span><span class="nv">A_LoopField</span> <span class="o">&lt;</span> <span class="n">pivot</span><span class="p">)</span>
      <span class="n">less</span> <span class="o">=</span> <span class="nv">%less%</span><span class="p">,</span><span class="nv">%A_LoopField%</span>
    <span class="nb">Else</span> <span class="n">If</span> <span class="p">(</span><span class="nv">A_LoopField</span> <span class="o">&gt;</span> <span class="n">pivot</span><span class="p">)</span>
      <span class="n">more</span> <span class="o">=</span> <span class="nv">%more%</span><span class="p">,</span><span class="nv">%A_LoopField%</span>
    <span class="nb">Else</span>
      <span class="n">pivotlist</span> <span class="o">=</span> <span class="nv">%pivotlist%</span><span class="p">,</span><span class="nv">%A_LoopField%</span>
  <span class="p">}</span>
  <span class="nb">StringTrimLeft</span><span class="p">,</span> <span class="n">less</span><span class="p">,</span> <span class="n">less</span><span class="p">,</span> <span class="mi">1</span>
  <span class="nb">StringTrimLeft</span><span class="p">,</span> <span class="n">more</span><span class="p">,</span> <span class="n">more</span><span class="p">,</span> <span class="mi">1</span>
  <span class="nb">StringTrimLeft</span><span class="p">,</span> <span class="n">pivotList</span><span class="p">,</span> <span class="n">pivotList</span><span class="p">,</span> <span class="mi">1</span>
  <span class="n">less</span> <span class="o">:=</span> <span class="n">quicksort</span><span class="p">(</span><span class="n">less</span><span class="p">)</span>
  <span class="n">more</span> <span class="o">:=</span> <span class="n">quicksort</span><span class="p">(</span><span class="n">more</span><span class="p">)</span>
  <span class="nb">Return</span> <span class="n">less</span> <span class="o">.</span> <span class="n">pivotList</span> <span class="o">.</span> <span class="n">more</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="AWK"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:AWK" title="Category:AWK">AWK</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=25" title="Edit section: AWK">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-awk mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># the following qsort implementation extracted from:</span>
<span class="c1">#</span>
<span class="c1">#       ftp://ftp.armory.com/pub/lib/awk/qsort</span>
<span class="c1">#</span>
<span class="c1"># Copyleft GPLv2 John DuBois</span>
<span class="c1">#</span>
<span class="c1"># @(#) qsort 1.2.1 2005-10-21</span>
<span class="c1"># 1990 john h. dubois iii (john@armory.com)</span>
<span class="c1">#</span>
<span class="c1"># qsortArbIndByValue(): Sort an array according to the values of its elements.</span>
<span class="c1">#</span>
<span class="c1"># Input variables:</span>
<span class="c1">#</span>
<span class="c1"># Arr[] is an array of values with arbitrary (associative) indices.</span>
<span class="c1">#</span>
<span class="c1"># Output variables:</span>
<span class="c1">#</span>
<span class="c1"># k[] is returned with numeric indices 1..n.  The values assigned to these</span>
<span class="c1"># indices are the indices of Arr[], ordered so that if Arr[] is stepped</span>
<span class="c1"># through in the order Arr[k[1]] .. Arr[k[n]], it will be stepped through in</span>
<span class="c1"># order of the values of its elements.</span>
<span class="c1">#</span>
<span class="c1"># Return value: The number of elements in the arrays (n).</span>
<span class="c1">#</span>
<span class="c1"># NOTES:</span>
<span class="c1">#</span>
<span class="c1"># Full example for accessing results:</span>
<span class="c1">#</span>
<span class="c1">#       foolist[&quot;second&quot;] = 2;</span>
<span class="c1">#       foolist[&quot;zero&quot;] = 0;</span>
<span class="c1">#       foolist[&quot;third&quot;] = 3;</span>
<span class="c1">#       foolist[&quot;first&quot;] = 1;</span>
<span class="c1">#</span>
<span class="c1">#       outlist[1] = 0;</span>
<span class="c1">#       n = qsortArbIndByValue(foolist, outlist)</span>
<span class="c1">#</span>
<span class="c1">#       for (i = 1; i &lt;= n; i++) {</span>
<span class="c1">#               printf(&quot;item at %s has value %d\n&quot;, outlist[i], foolist[outlist[i]]);</span>
<span class="c1">#       }</span>
<span class="c1">#      delete outlist; </span>
<span class="c1">#</span>
<span class="kd">function</span> <span class="nx">qsortArbIndByValue</span><span class="p">(</span><span class="nx">Arr</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span>
                            <span class="nx">ArrInd</span><span class="p">,</span> <span class="nx">ElNum</span><span class="p">)</span>
<span class="p">{</span>
        <span class="nx">ElNum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">ArrInd</span> <span class="o">in</span> <span class="nx">Arr</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">k</span><span class="p">[</span><span class="o">++</span><span class="nx">ElNum</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ArrInd</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">qsortSegment</span><span class="p">(</span><span class="nx">Arr</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">ElNum</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">ElNum</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">#</span>
<span class="c1"># qsortSegment(): Sort a segment of an array.</span>
<span class="c1">#</span>
<span class="c1"># Input variables:</span>
<span class="c1">#</span>
<span class="c1"># Arr[] contains data with arbitrary indices.</span>
<span class="c1">#</span>
<span class="c1"># k[] has indices 1..nelem, with the indices of Arr[] as values.</span>
<span class="c1">#</span>
<span class="c1"># Output variables:</span>
<span class="c1">#</span>
<span class="c1"># k[] is modified by this function.  The elements of Arr[] that are pointed to</span>
<span class="c1"># by k[start..end] are sorted, with the values of elements of k[] swapped</span>
<span class="c1"># so that when this function returns, Arr[k[start..end]] will be in order.</span>
<span class="c1">#</span>
<span class="c1"># Return value: None.</span>
<span class="c1">#</span>
<span class="kd">function</span> <span class="nx">qsortSegment</span><span class="p">(</span><span class="nx">Arr</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span>
                      <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">,</span> <span class="nx">sepval</span><span class="p">,</span> <span class="nx">tmp</span><span class="p">,</span> <span class="nx">tmpe</span><span class="p">,</span> <span class="nx">tmps</span><span class="p">)</span>
<span class="p">{</span>
        <span class="k">if</span> <span class="p">((</span><span class="nx">end</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>        <span class="c1"># 0 or 1 elements</span>
                <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1"># handle two-element case explicitly for a tiny speedup</span>
        <span class="k">if</span> <span class="p">((</span><span class="nx">end</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">Arr</span><span class="p">[</span><span class="nx">tmps</span> <span class="o">=</span> <span class="nx">k</span><span class="p">[</span><span class="nx">start</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="nx">Arr</span><span class="p">[</span><span class="nx">tmpe</span> <span class="o">=</span> <span class="nx">k</span><span class="p">[</span><span class="nx">end</span><span class="p">]])</span> <span class="p">{</span>
                        <span class="nx">k</span><span class="p">[</span><span class="nx">start</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tmpe</span><span class="p">;</span>
                        <span class="nx">k</span><span class="p">[</span><span class="nx">end</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tmps</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1"># Make sure comparisons act on these as numbers</span>
        <span class="nx">left</span> <span class="o">=</span> <span class="nx">start</span> <span class="o">+</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">right</span> <span class="o">=</span> <span class="nx">end</span> <span class="o">+</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">sepval</span> <span class="o">=</span> <span class="nx">Arr</span><span class="p">[</span><span class="nx">k</span><span class="p">[</span><span class="kr">int</span><span class="p">((</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">right</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)]];</span>
        <span class="c1"># Make every element &lt;= sepval be to the left of every element &gt; sepval</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">left</span> <span class="o">&lt;</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">Arr</span><span class="p">[</span><span class="nx">k</span><span class="p">[</span><span class="nx">left</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="nx">sepval</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">left</span><span class="o">++</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">while</span> <span class="p">(</span><span class="nx">Arr</span><span class="p">[</span><span class="nx">k</span><span class="p">[</span><span class="nx">right</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="nx">sepval</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">right</span><span class="o">--</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">left</span> <span class="o">&lt;</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">k</span><span class="p">[</span><span class="nx">left</span><span class="p">];</span>
                        <span class="nx">k</span><span class="p">[</span><span class="nx">left</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">k</span><span class="p">[</span><span class="nx">right</span><span class="p">];</span>
                        <span class="nx">k</span><span class="p">[</span><span class="nx">right</span><span class="o">--</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">;</span>
                <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">left</span> <span class="o">==</span> <span class="nx">right</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">Arr</span><span class="p">[</span><span class="nx">k</span><span class="p">[</span><span class="nx">left</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="nx">sepval</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">left</span><span class="o">++</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">right</span><span class="o">--</span><span class="p">;</span>
                <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">start</span> <span class="o">&lt;</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">qsortSegment</span><span class="p">(</span><span class="nx">Arr</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">right</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">left</span> <span class="o">&lt;</span> <span class="nx">end</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">qsortSegment</span><span class="p">(</span><span class="nx">Arr</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">end</span><span class="p">);</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="BASIC"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:BASIC" title="Category:BASIC">BASIC</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=26" title="Edit section: BASIC">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/FreeBASIC" class="mw-redirect" title="FreeBASIC">FreeBASIC</a></div>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/PowerBASIC_for_DOS" title="PowerBASIC for DOS">PowerBASIC for DOS</a></div>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/QB64" class="mw-redirect" title="QB64">QB64</a></div>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/QBasic" class="mw-redirect" title="QBasic">QBasic</a></div>
<p>This is specifically for <code>INTEGER</code>s, but can be modified for any data type by changing <code>arr()</code>'s type.
</p>
<div class="mw-highlight mw-highlight-lang-qbasic mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">DECLARE</span><span class="w"> </span><span class="nv">SUB</span><span class="w"> </span><span class="n">quicksort</span><span class="w"> </span><span class="p">(</span><span class="vg">arr</span><span class="p">()</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="vg">leftN</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="vg">rightN</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">INTEGER</span><span class="p">)</span>

<span class="kd">DIM</span><span class="w"> </span><span class="vg">q</span><span class="p">(</span><span class="il">99</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">INTEGER</span>
<span class="kd">DIM</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">INTEGER</span>

<span class="kr">RANDOMIZE</span><span class="w"> </span><span class="kr">TIMER</span>

<span class="kr">FOR</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="il">99</span>
<span class="w">    </span><span class="vg">q</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">INT</span><span class="p">(</span><span class="kr">RND</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="il">9999</span><span class="p">)</span>
<span class="kr">NEXT</span>

<span class="kr">OPEN</span><span class="w"> </span><span class="s2">&quot;output.txt&quot;</span><span class="w"> </span><span class="kr">FOR</span><span class="w"> </span><span class="k">OUTPUT</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="il">1</span>
<span class="w">    </span><span class="kr">FOR</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="il">99</span>
<span class="w">        </span><span class="kr">PRINT</span><span class="w"> </span><span class="err">#</span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">q</span><span class="p">(</span><span class="vg">n</span><span class="p">),</span>
<span class="w">    </span><span class="kr">NEXT</span>
<span class="w">    </span><span class="kr">PRINT</span><span class="w"> </span><span class="err">#</span><span class="il">1</span><span class="p">,</span>
<span class="w">    </span><span class="vg">quicksort</span><span class="w"> </span><span class="vg">q</span><span class="p">(),</span><span class="w"> </span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="il">99</span>
<span class="w">    </span><span class="kr">FOR</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="il">99</span>
<span class="w">        </span><span class="kr">PRINT</span><span class="w"> </span><span class="err">#</span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">q</span><span class="p">(</span><span class="vg">n</span><span class="p">),</span>
<span class="w">    </span><span class="kr">NEXT</span>
<span class="kr">CLOSE</span>

<span class="kr">SUB</span><span class="w"> </span><span class="nl">quicksort</span><span class="w"> </span><span class="p">(</span><span class="vg">arr</span><span class="p">()</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="vg">leftN</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="vg">rightN</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">INTEGER</span><span class="p">)</span>
<span class="w">    </span><span class="kd">DIM</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="vg">leftNIdx</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="vg">rightNIdx</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">INTEGER</span>
<span class="w">    </span><span class="vg">leftNIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">leftN</span>
<span class="w">    </span><span class="vg">rightNIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">rightN</span>
<span class="w">    </span><span class="kr">IF</span><span class="w"> </span><span class="p">(</span><span class="vg">rightN</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">leftN</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="kr">THEN</span>
<span class="w">        </span><span class="vg">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="vg">leftN</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">rightN</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="il">2</span>
<span class="w">        </span><span class="kr">WHILE</span><span class="w"> </span><span class="p">(</span><span class="vg">leftNIdx</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="vg">pivot</span><span class="p">)</span><span class="w"> </span><span class="ow">AND</span><span class="w"> </span><span class="p">(</span><span class="vg">rightNIdx</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">pivot</span><span class="p">)</span>
<span class="w">            </span><span class="kr">WHILE</span><span class="w"> </span><span class="p">(</span><span class="vg">arr</span><span class="p">(</span><span class="vg">leftNIdx</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">pivot</span><span class="p">))</span><span class="w"> </span><span class="ow">AND</span><span class="w"> </span><span class="p">(</span><span class="vg">leftNIdx</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="vg">pivot</span><span class="p">)</span>
<span class="w">                </span><span class="vg">leftNIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">leftNIdx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">            </span><span class="kr">WEND</span>
<span class="w">            </span><span class="kr">WHILE</span><span class="w"> </span><span class="p">(</span><span class="vg">arr</span><span class="p">(</span><span class="vg">rightNIdx</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">pivot</span><span class="p">))</span><span class="w"> </span><span class="ow">AND</span><span class="w"> </span><span class="p">(</span><span class="vg">rightNIdx</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">pivot</span><span class="p">)</span>
<span class="w">                </span><span class="vg">rightNIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">rightNIdx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="w">            </span><span class="kr">WEND</span>
<span class="w">            </span><span class="kr">SWAP</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">leftNIdx</span><span class="p">),</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">rightNIdx</span><span class="p">)</span>
<span class="w">            </span><span class="vg">leftNIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">leftNIdx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">            </span><span class="vg">rightNIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">rightNIdx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="w">            </span><span class="kr">IF</span><span class="w"> </span><span class="p">(</span><span class="vg">leftNIdx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="kr">THEN</span>
<span class="w">                </span><span class="vg">rightNIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">rightNIdx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">                </span><span class="vg">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">rightNIdx</span>
<span class="w">            </span><span class="k">ELSEIF</span><span class="w"> </span><span class="p">(</span><span class="vg">rightNIdx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="kr">THEN</span>
<span class="w">                </span><span class="vg">leftNIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">leftNIdx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="w">                </span><span class="vg">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">leftNIdx</span>
<span class="w">            </span><span class="kr">END</span><span class="w"> </span><span class="kr">IF</span>
<span class="w">        </span><span class="kr">WEND</span>
<span class="w">        </span><span class="vg">quicksort</span><span class="w"> </span><span class="vg">arr</span><span class="p">(),</span><span class="w"> </span><span class="vg">leftN</span><span class="p">,</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="w">        </span><span class="vg">quicksort</span><span class="w"> </span><span class="vg">arr</span><span class="p">(),</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">rightN</span>
<span class="w">    </span><span class="kr">END</span><span class="w"> </span><span class="kr">IF</span>
<span class="kr">END</span><span class="w"> </span><span class="kr">SUB</span>
</pre></div>
<h3><span class="mw-headline" id="BBC_BASIC"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:BBC_BASIC" title="Category:BBC BASIC">BBC BASIC</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=27" title="Edit section: BBC BASIC">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-highlight-lang-bbcbasic mw-content-ltr" dir="ltr"><pre><span></span><span class="w">      </span><span class="k">DIM</span><span class="w"> </span><span class="nv">test</span><span class="o">(</span><span class="mi">9</span><span class="o">)</span><span class="w"></span>
<span class="w">      </span><span class="nv">test</span><span class="o">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">65</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">-31</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">99</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">83</span><span class="o">,</span><span class="w"> </span><span class="mi">782</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">      </span><span class="k">PROC</span><span class="nf">quicksort</span><span class="o">(</span><span class="nv">test</span><span class="o">(),</span><span class="w"> </span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">10</span><span class="o">)</span><span class="w"></span>
<span class="w">      </span><span class="k">FOR</span><span class="w"> </span><span class="nv">i%</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="mi">9</span><span class="w"></span>
<span class="w">        </span><span class="k">PRINT</span><span class="w"> </span><span class="nv">test</span><span class="o">(</span><span class="nv">i%</span><span class="o">)</span><span class="w"> </span><span class="o">;</span><span class="w"></span>
<span class="w">      </span><span class="k">NEXT</span><span class="w"></span>
<span class="w">      </span><span class="k">PRINT</span><span class="w"></span>
<span class="w">      </span><span class="k">END</span><span class="w"></span>
<span class="w">      </span>
<span class="w">      </span><span class="kd">DEF</span><span class="w"> </span><span class="kd">PROC</span><span class="nf">quicksort</span><span class="o">(</span><span class="nv">a</span><span class="o">(),</span><span class="w"> </span><span class="nv">s%</span><span class="o">,</span><span class="w"> </span><span class="nv">n%</span><span class="o">)</span><span class="w"></span>
<span class="w">      </span><span class="k">LOCAL</span><span class="w"> </span><span class="nv">l%</span><span class="o">,</span><span class="w"> </span><span class="nv">p</span><span class="o">,</span><span class="w"> </span><span class="nv">r%</span><span class="o">,</span><span class="w"> </span><span class="nv">t%</span><span class="w"></span>
<span class="w">      </span><span class="k">IF</span><span class="w"> </span><span class="nv">n%</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="k">ENDPROC</span><span class="w"></span>
<span class="w">      </span><span class="nv">t%</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">s%</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">n%</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">      </span><span class="nv">l%</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">s%</span><span class="w"></span>
<span class="w">      </span><span class="nv">r%</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">t%</span><span class="w"></span>
<span class="w">      </span><span class="nv">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">a</span><span class="o">((</span><span class="nv">l%</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">r%</span><span class="o">)</span><span class="w"> </span><span class="k">DIV</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"></span>
<span class="w">      </span><span class="k">REPEAT</span><span class="w"></span>
<span class="w">        </span><span class="k">WHILE</span><span class="w"> </span><span class="nv">a</span><span class="o">(</span><span class="nv">l%</span><span class="o">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">p</span><span class="w"> </span><span class="nv">l%</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="cp">:</span><span class="w"> </span><span class="k">ENDWHILE</span><span class="w"></span>
<span class="w">        </span><span class="k">WHILE</span><span class="w"> </span><span class="nv">a</span><span class="o">(</span><span class="nv">r%</span><span class="o">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">p</span><span class="w"> </span><span class="nv">r%</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="cp">:</span><span class="w"> </span><span class="k">ENDWHILE</span><span class="w"></span>
<span class="w">        </span><span class="k">IF</span><span class="w"> </span><span class="nv">l%</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nv">r%</span><span class="w"> </span><span class="k">THEN</span><span class="w"></span>
<span class="w">          </span><span class="k">SWAP</span><span class="w"> </span><span class="nv">a</span><span class="o">(</span><span class="nv">l%</span><span class="o">),</span><span class="w"> </span><span class="nv">a</span><span class="o">(</span><span class="nv">r%</span><span class="o">)</span><span class="w"></span>
<span class="w">          </span><span class="nv">l%</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">          </span><span class="nv">r%</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">        </span><span class="k">ENDIF</span><span class="w"></span>
<span class="w">      </span><span class="k">UNTIL</span><span class="w"> </span><span class="nv">l%</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">r%</span><span class="w"></span>
<span class="w">      </span><span class="k">IF</span><span class="w"> </span><span class="nv">s%</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">r%</span><span class="w"> </span><span class="k">PROC</span><span class="nf">quicksort</span><span class="o">(</span><span class="nv">a</span><span class="o">(),</span><span class="w"> </span><span class="nv">s%</span><span class="o">,</span><span class="w"> </span><span class="nv">r%</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">s%</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"></span>
<span class="w">      </span><span class="k">IF</span><span class="w"> </span><span class="nv">l%</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">t%</span><span class="w"> </span><span class="k">PROC</span><span class="nf">quicksort</span><span class="o">(</span><span class="nv">a</span><span class="o">(),</span><span class="w"> </span><span class="nv">l%</span><span class="o">,</span><span class="w"> </span><span class="nv">t%</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">l%</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">)</span><span class="w"></span>
<span class="w">      </span><span class="k">ENDPROC</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>       -31         0         1         2         2         4        65        83        99       782
</pre>
<h3><span class="mw-headline" id="IS-BASIC"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:IS-BASIC" title="Category:IS-BASIC">IS-BASIC</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=28" title="Edit section: IS-BASIC">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>100 PROGRAM "QuickSrt.bas"
110 RANDOMIZE
120 NUMERIC A(5 TO 19)
130 CALL INIT(A)
140 CALL WRITE(A)
150 CALL QSORT(LBOUND(A),UBOUND(A))
160 CALL WRITE(A)
170 DEF INIT(REF A)
180   FOR I=LBOUND(A) TO UBOUND(A)
190     LET A(I)=RND(98)+1
200   NEXT
210 END DEF
220 DEF WRITE(REF A)
230   FOR I=LBOUND(A) TO UBOUND(A)
240     PRINT A(I);
250   NEXT
260   PRINT
270 END DEF
280 DEF QSORT(AH,FH)
290   NUMERIC E
300   LET E=AH:LET U=FH:LET K=A(E)
310   DO UNTIL E=U
320     DO UNTIL E=U OR A(U)&lt;K
330       LET U=U-1
340     LOOP
350     IF E&lt;U THEN
360       LET A(E)=A(U):LET E=E+1
370       DO UNTIL E=U OR A(E)&gt;K
380         LET E=E+1
390       LOOP
400       IF E&lt;U THEN LET A(U)=A(E):LET U=U-1
410     END IF
420   LOOP
430   LET A(E)=K
440   IF AH&lt;E-1 THEN CALL QSORT(AH,E-1)
450   IF E+1&lt;FH THEN CALL QSORT(E+1,FH)
460 END DEF</pre></div>
<h3><span class="mw-headline" id="QB64"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:QB64" title="Category:QB64">QB64</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=29" title="Edit section: QB64">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>' Written by Sanmayce, 2021-Oct-29
' The indexes are signed, but the elements are unsigned.
_Define A-Z As _INTEGER64
Sub Quicksort_QB64 (QWORDS~&amp;&amp;())
    Left = LBound(QWORDS~&amp;&amp;)
    Right = UBound(QWORDS~&amp;&amp;)
    LeftMargin = Left
    ReDim Stack&amp;&amp;(Left To Right)
    StackPtr = 0
    StackPtr = StackPtr + 1
    Stack&amp;&amp;(StackPtr + LeftMargin) = Left
    StackPtr = StackPtr + 1
    Stack&amp;&amp;(StackPtr + LeftMargin) = Right
    Do 'Until StackPtr = 0
        Right = Stack&amp;&amp;(StackPtr + LeftMargin)
        StackPtr = StackPtr - 1
        Left = Stack&amp;&amp;(StackPtr + LeftMargin)
        StackPtr = StackPtr - 1
        Do 'Until Left &gt;= Right
            Pivot~&amp;&amp; = QWORDS~&amp;&amp;((Left + Right) \ 2)
            Indx = Left
            Jndx = Right
            Do
                Do While (QWORDS~&amp;&amp;(Indx) &lt; Pivot~&amp;&amp;)
                    Indx = Indx + 1
                Loop
                Do While (QWORDS~&amp;&amp;(Jndx) &gt; Pivot~&amp;&amp;)
                    Jndx = Jndx - 1
                Loop
                If Indx &lt;= Jndx Then
                    If Indx &lt; Jndx Then Swap QWORDS~&amp;&amp;(Indx), QWORDS~&amp;&amp;(Jndx)
                    Indx = Indx + 1
                    Jndx = Jndx - 1
                End If
            Loop While Indx &lt;= Jndx
            If Indx &lt; Right Then
                StackPtr = StackPtr + 1
                Stack&amp;&amp;(StackPtr + LeftMargin) = Indx
                StackPtr = StackPtr + 1
                Stack&amp;&amp;(StackPtr + LeftMargin) = Right
            End If
            Right = Jndx
        Loop Until Left &gt;= Right
    Loop Until StackPtr = 0
End Sub</pre></div>
<h2><span class="mw-headline" id="BCPL"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:BCPL" title="Category:BCPL">BCPL</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=30" title="Edit section: BCPL">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>// This can be run using Cintcode BCPL freely available from www.cl.cam.ac.uk/users/mr10.

GET "libhdr.h"

LET quicksort(v, n) BE qsort(v+1, v+n)

AND qsort(l, r) BE
{ WHILE l+8&lt;r DO
  { LET midpt = (l+r)/2
    // Select a good(ish) median value.
    LET val   = middle(!l, !midpt, !r)
    LET i = partition(val, l, r)
    // Only use recursion on the smaller partition.
    TEST i&gt;midpt THEN { qsort(i, r);   r&#160;:= i-1 }
                 ELSE { qsort(l, i-1); l&#160;:= i   }
  }

  FOR p = l+1 TO r DO  // Now perform insertion sort.
   FOR q = p-1 TO l BY -1 TEST q!0&lt;=q!1 THEN BREAK
                                        ELSE { LET t = q!0
                                               q!0&#160;:= q!1
                                               q!1&#160;:= t
                                             }
}

AND middle(a, b, c) = a&lt;b -&gt; b&lt;c -&gt; b,
                                    a&lt;c -&gt; c,
                                           a,
                             b&lt;c -&gt; a&lt;c -&gt; a,
                                           c,
                                    b

AND partition(median, p, q) = VALOF
{ LET t =&#160;?
  WHILE !p &lt; median DO p&#160;:= p+1
  WHILE !q &gt; median DO q&#160;:= q-1
  IF p&gt;=q RESULTIS p
  t &#160;:= !p
  !p&#160;:= !q
  !q&#160;:= t
  p, q&#160;:= p+1, q-1
} REPEAT

LET start() = VALOF {
  LET v = VEC 1000
  FOR i = 1 TO 1000 DO v!i&#160;:= randno(1_000_000)
  quicksort(v, 1000)
  FOR i = 1 TO 1000 DO
  { IF i MOD 10 = 0 DO newline()
    writef(" %i6", v!i)
  }
  newline()
}</pre></div>
<h2><span class="mw-headline" id="Beads"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Beads" title="Category:Beads">Beads</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=31" title="Edit section: Beads">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>beads 1 program Quicksort

calc main_init
	var arr = [1, 3, 5, 1, 7, 9, 8, 6, 4, 2]
	var arr2 = arr
	quicksort(arr, 1, tree_count(arr))
	var tempStr&#160;: str
	loop across:arr index:ix
		tempStr = tempStr &amp; ' ' &amp; to_str(arr[ix])
	log tempStr

calc quicksort(
	arr:array of num
	startIndex
	highIndex
	)
	if (startIndex &lt; highIndex)
		var partitionIndex = partition(arr, startIndex, highIndex)
		quicksort(arr, startIndex, partitionIndex - 1)
		quicksort(arr, partitionIndex+1, highIndex)

calc partition(
	arr:array of num
	startIndex
	highIndex
	):num
	var pivot = arr[highIndex]
	var i = startIndex - 1
	var j = startIndex
	loop while:(j &lt;= highIndex - 1)
		if arr[j] &lt; pivot
			inc i
			swap arr[i] &lt;=&gt; arr[j]
		inc j
	swap arr[i+1] &lt;=&gt; arr[highIndex]
	return (i+1)</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>1 1 2 3 4 5 6 7 8 9
</pre>
<h2><span class="mw-headline" id="Bracmat"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Bracmat" title="Category:Bracmat">Bracmat</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=32" title="Edit section: Bracmat">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Instead of comparing elements explicitly, this solution puts the two elements-to-compare in a sum. After evaluating the sum its terms are sorted. Numbers are sorted numerically, strings alphabetically and compound expressions by comparing nodes and leafs in a left-to right order. Now there are three cases: either the terms stayed put, or they were swapped, or they were equal and were combined into one term with a factor <code>2</code> in front. To not let the evaluator add numbers together, each term is constructed as a dotted list.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>( ( Q
  =   Less Greater Equal pivot element
    .     !arg:%(?pivot:?Equal)&#160;%?arg
        &amp;&#160;:?Less:?Greater
        &amp;   whl
          ' ( !arg:%?element ?arg
            &amp;   (.!element)+(.!pivot)               { BAD: 1900+90 adds to 1990,  GOOD: (.1900)+(.90) is sorted to (.90)+(.1900) }
             &#160;: (   (.!element)+(.!pivot)
                  &amp; !element !Less:?Less
                |   (.!pivot)+(.!element)
                  &amp; !element !Greater:?Greater
                |&#160;?&amp;!element !Equal:?Equal
                )
            )
        &amp; Q$!Less !Equal Q$!Greater
      | !arg
  )
&amp; out$Q$(1900 optimized variants of 4001/2 Quicksort (quick,sort) are (quick,sober) features of 90 languages)
);</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>  90
  1900
  4001/2
  Quicksort
  are
  features
  languages
  of
  of
  optimized
  variants
  (quick,sober)
  (quick,sort)</pre>
<h2><span class="mw-headline" id="C"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:C" title="Category:C">C</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=33" title="Edit section: C">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">quicksort</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">-31</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">99</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="mi">782</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">sizeof</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>

<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">quicksort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">quicksort</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">len</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">len</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">pivot</span><span class="p">)</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">pivot</span><span class="p">)</span><span class="w"> </span><span class="n">j</span><span class="o">--</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="n">quicksort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">quicksort</span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>4 65 2 -31 0 99 2 83 782 1
-31 0 1 2 2 4 65 83 99 782
</pre>
<p>Randomized sort with separated components.
</p>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="c1">     // REQ: rand()</span><span class="cp"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">swap</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="o">*</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="o">*</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">partition</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">A</span><span class="p">[],</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">q</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">A</span><span class="p">[</span><span class="n">p</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">rand</span><span class="p">()</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="p">(</span><span class="n">q</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">))],</span><span class="w"> </span><span class="o">&amp;</span><span class="n">A</span><span class="p">[</span><span class="n">q</span><span class="p">]);</span><span class="w">   </span><span class="c1">// PIVOT = A[q]</span>

<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">q</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">A</span><span class="p">[</span><span class="o">++</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="o">&amp;</span><span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">quicksort</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">A</span><span class="p">[],</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">q</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">q</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">pivotIndx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">partition</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">q</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">quicksort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">pivotIndx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">quicksort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">pivotIndx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">q</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<h2><span id="C.23"></span><span class="mw-headline" id="C#"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:C_sharp" title="Category:C sharp">C#</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=34" title="Edit section: C#">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-csharp mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">//</span>
<span class="c1">// The Tripartite conditional enables Bentley-McIlroy 3-way Partitioning.</span>
<span class="c1">// This performs additional compares to isolate islands of keys equal to</span>
<span class="c1">// the pivot value.  Use unless key-equivalent classes are of small size.</span>
<span class="c1">//</span>
<span class="cp">#define Tripartite</span><span class="w"></span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">RosettaCode</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">System.Diagnostics</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">QuickSort</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IComparable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="cp">#region Constants</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UInt32</span><span class="w"> </span><span class="n">INSERTION_LIMIT_DEFAULT</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">12</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">SAMPLES_MAX</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">19</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="cp">#endregion</span><span class="w"></span>

<span class="w">    </span><span class="cp">#region Properties</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">UInt32</span><span class="w"> </span><span class="n">InsertionLimit</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">Samples</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">Left</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">Right</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">LeftMedian</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">RightMedian</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="cp">#endregion</span><span class="w"></span>

<span class="w">    </span><span class="cp">#region Constructors</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">QuickSort</span><span class="p">(</span><span class="n">UInt32</span><span class="w"> </span><span class="n">insertionLimit</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">INSERTION_LIMIT_DEFAULT</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="n">InsertionLimit</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">insertionLimit</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="n">Samples</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">T</span><span class="p">[</span><span class="n">SAMPLES_MAX</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="cp">#endregion</span><span class="w"></span>

<span class="w">    </span><span class="cp">#region Sort Methods</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Sort</span><span class="p">(</span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">entries</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">Sort</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">entries</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="m">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Sort</span><span class="p">(</span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">length</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">length</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">InsertionLimit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">InsertionSort</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;.</span><span class="n">Sort</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">);</span><span class="w"></span>
<span class="w">          </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="n">Left</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">Right</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">last</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">median</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">pivot</span><span class="p">(</span><span class="n">entries</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">partition</span><span class="p">(</span><span class="n">median</span><span class="p">,</span><span class="w"> </span><span class="n">entries</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">//[Note]Right &lt; Left</span>

<span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">leftLength</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Right</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">rightLength</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="n">Left</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="c1">//</span>
<span class="w">        </span><span class="c1">// First recurse over shorter partition, then loop</span>
<span class="w">        </span><span class="c1">// on the longer partition to elide tail recursion.</span>
<span class="w">        </span><span class="c1">//</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">leftLength</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">rightLength</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">Sort</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">Right</span><span class="p">);</span><span class="w"></span>
<span class="w">          </span><span class="n">first</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Left</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="n">length</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">rightLength</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="n">Sort</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">Left</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">);</span><span class="w"></span>
<span class="w">          </span><span class="n">last</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Right</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="n">length</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">leftLength</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">/// &lt;summary&gt;Return an odd sample size proportional to the log of a large interval size.&lt;/summary&gt;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="nf">sampleSize</span><span class="p">(</span><span class="n">Int32</span><span class="w"> </span><span class="n">length</span><span class="p">,</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">SAMPLES_MAX</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">logLen</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">Int32</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Log10</span><span class="p">(</span><span class="n">length</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">samples</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Min</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="n">logLen</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Min</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">/// &lt;summary&gt;Estimate the median value of entries[Left:Right]&lt;/summary&gt;</span>
<span class="w">    </span><span class="c1">/// &lt;remarks&gt;A sample median is used as an estimate the true median.&lt;/remarks&gt;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">pivot</span><span class="p">(</span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">entries</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Right</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="n">Left</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">samples</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">sampleSize</span><span class="p">(</span><span class="n">length</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="c1">// Sample Linearly:</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">sample</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">sample</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">samples</span><span class="p">;</span><span class="w"> </span><span class="n">sample</span><span class="p">++)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Guard against Arithmetic Overflow:</span>
<span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">Int64</span><span class="p">)</span><span class="n">length</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="n">sample</span><span class="w"> </span><span class="p">/</span><span class="w"> </span><span class="n">samples</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">Left</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">Samples</span><span class="p">[</span><span class="n">sample</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">entries</span><span class="p">[</span><span class="n">index</span><span class="p">];</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>

<span class="w">      </span><span class="n">InsertionSort</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;.</span><span class="n">Sort</span><span class="p">(</span><span class="n">Samples</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">samples</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="m">1</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">Samples</span><span class="p">[</span><span class="n">samples</span><span class="w"> </span><span class="p">/</span><span class="w"> </span><span class="m">2</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">partition</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">median</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">entries</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Left</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Right</span><span class="p">;</span><span class="w"></span>
<span class="cp">#if Tripartite</span><span class="w"></span>
<span class="w">      </span><span class="n">LeftMedian</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="n">RightMedian</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">last</span><span class="p">;</span><span class="w"></span>
<span class="cp">#endif</span><span class="w"></span>
<span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="k">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">//[Assert]There exists some index &gt;= Left where entries[index] &gt;= median</span>
<span class="w">        </span><span class="c1">//[Assert]There exists some index &lt;= Right where entries[index] &lt;= median</span>
<span class="w">        </span><span class="c1">// So, there is no need for Left or Right bound checks</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">median</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">entries</span><span class="p">[</span><span class="n">Left</span><span class="p">])</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="n">Left</span><span class="p">++;</span><span class="w"></span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">median</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">entries</span><span class="p">[</span><span class="n">Right</span><span class="p">])</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="n">Right</span><span class="p">--;</span><span class="w"></span>

<span class="w">        </span><span class="c1">//[Assert]entries[Right] &lt;= median &lt;= entries[Left]</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Right</span><span class="w"> </span><span class="p">&lt;=</span><span class="w"> </span><span class="n">Left</span><span class="p">)</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">Swap</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">Left</span><span class="p">,</span><span class="w"> </span><span class="n">Right</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">swapOut</span><span class="p">(</span><span class="n">median</span><span class="p">,</span><span class="w"> </span><span class="n">entries</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Left</span><span class="p">++;</span><span class="w"></span>
<span class="w">        </span><span class="n">Right</span><span class="p">--;</span><span class="w"></span>
<span class="w">        </span><span class="c1">//[Assert]entries[first:Left - 1] &lt;= median &lt;= entries[Right + 1:last]</span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Left</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="n">Right</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Left</span><span class="p">++;</span><span class="w"></span>
<span class="w">        </span><span class="n">Right</span><span class="p">--;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="c1">//[Assert]Right &lt; Left</span>
<span class="w">      </span><span class="n">swapIn</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">);</span><span class="w"></span>

<span class="w">      </span><span class="c1">//[Assert]entries[first:Right] &lt;= median &lt;= entries[Left:last]</span>
<span class="w">      </span><span class="c1">//[Assert]entries[Right + 1:Left - 1] == median when non-empty</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="cp">#endregion</span><span class="w"></span>

<span class="w">    </span><span class="cp">#region Swap Methods</span><span class="w"></span>
<span class="w">    </span><span class="na">[Conditional(&quot;Tripartite&quot;)]</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">swapOut</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">median</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">entries</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">median</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">entries</span><span class="p">[</span><span class="n">Left</span><span class="p">])</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="n">Swap</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">LeftMedian</span><span class="p">++,</span><span class="w"> </span><span class="n">Left</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">median</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">entries</span><span class="p">[</span><span class="n">Right</span><span class="p">])</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="n">Swap</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">Right</span><span class="p">,</span><span class="w"> </span><span class="n">RightMedian</span><span class="p">--);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="na">[Conditional(&quot;Tripartite&quot;)]</span><span class="w"></span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">swapIn</span><span class="p">(</span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// Restore Median entries</span>
<span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">first</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">LeftMedian</span><span class="p">)</span><span class="w"> </span><span class="n">Swap</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">first</span><span class="p">++,</span><span class="w"> </span><span class="n">Right</span><span class="p">--);</span><span class="w"></span>
<span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">RightMedian</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="w"> </span><span class="n">Swap</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">Left</span><span class="p">++,</span><span class="w"> </span><span class="n">last</span><span class="p">--);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">/// &lt;summary&gt;Swap entries at the left and right indicies.&lt;/summary&gt;</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Swap</span><span class="p">(</span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">Swap</span><span class="p">(</span><span class="k">ref</span><span class="w"> </span><span class="n">entries</span><span class="p">[</span><span class="n">left</span><span class="p">],</span><span class="w"> </span><span class="k">ref</span><span class="w"> </span><span class="n">entries</span><span class="p">[</span><span class="n">right</span><span class="p">]);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">/// &lt;summary&gt;Swap two entities of type T.&lt;/summary&gt;</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Swap</span><span class="p">(</span><span class="k">ref</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">e1</span><span class="p">,</span><span class="w"> </span><span class="k">ref</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">e2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">e1</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="n">e1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">e2</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="n">e2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">e</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="cp">#endregion</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="cp">#region Insertion Sort</span><span class="w"></span>
<span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">InsertionSort</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IComparable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Sort</span><span class="p">(</span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="p">&lt;=</span><span class="w"> </span><span class="n">last</span><span class="p">;</span><span class="w"> </span><span class="n">next</span><span class="p">++)</span><span class="w"></span>
<span class="w">        </span><span class="n">insert</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">next</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">/// &lt;summary&gt;Bubble next entry up to its sorted location, assuming entries[first:next - 1] are already sorted.&lt;/summary&gt;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">entries</span><span class="p">,</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">Int32</span><span class="w"> </span><span class="n">next</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">entries</span><span class="p">[</span><span class="n">next</span><span class="p">];</span><span class="w"></span>
<span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">next</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="p">&amp;&amp;</span><span class="w"> </span><span class="n">entries</span><span class="p">[</span><span class="n">next</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="m">1</span><span class="p">].</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">entries</span><span class="p">[</span><span class="n">next</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">entries</span><span class="p">[--</span><span class="n">next</span><span class="p">];</span><span class="w"></span>
<span class="w">      </span><span class="n">entries</span><span class="p">[</span><span class="n">next</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">entry</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="cp">#endregion</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p><b>Example</b>:
</p>
<div class="mw-highlight mw-highlight-lang-csharp mw-content-ltr" dir="ltr"><pre><span></span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">Sort</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">class</span><span class="w"> </span><span class="nc">Program</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Int32</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">sorter</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">QuickSort</span><span class="p">&lt;</span><span class="n">Int32</span><span class="p">&gt;();</span><span class="w"></span>
<span class="w">      </span><span class="n">sorter</span><span class="p">.</span><span class="n">Sort</span><span class="p">(</span><span class="n">entries</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="n">Join</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">entries</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>1 2 3 4 5 6 7 8 9</pre>
<p>A very inefficient way to do qsort in C# to prove C# code can be just as compact and readable as any dynamic code
</p>
<div class="mw-highlight mw-highlight-lang-csharp mw-content-ltr" dir="ltr"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span><span class="w"></span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">QSort</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">QSorter</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">IComparable</span><span class="p">&gt;</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="p">&lt;</span><span class="n">IComparable</span><span class="p">&gt;();</span><span class="w"></span>

<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">IComparable</span><span class="p">&gt;</span><span class="w"> </span><span class="n">QSort</span><span class="p">(</span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">IComparable</span><span class="p">&gt;</span><span class="w"> </span><span class="n">iEnumerable</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">iEnumerable</span><span class="p">.</span><span class="n">Any</span><span class="p">())</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="kt">var</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">iEnumerable</span><span class="p">.</span><span class="n">First</span><span class="p">();</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nf">QSort</span><span class="p">(</span><span class="n">iEnumerable</span><span class="p">.</span><span class="n">Where</span><span class="p">((</span><span class="n">anItem</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">pivot</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">anItem</span><span class="p">)</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)).</span><span class="w"></span>
<span class="w">                    </span><span class="n">Concat</span><span class="p">(</span><span class="n">iEnumerable</span><span class="p">.</span><span class="n">Where</span><span class="p">((</span><span class="n">anItem</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">pivot</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">anItem</span><span class="p">)</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="m">0</span><span class="p">)).</span><span class="w"></span>
<span class="w">                    </span><span class="n">Concat</span><span class="p">(</span><span class="n">QSort</span><span class="p">(</span><span class="n">iEnumerable</span><span class="p">.</span><span class="n">Where</span><span class="p">((</span><span class="n">anItem</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">pivot</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">anItem</span><span class="p">)</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)));</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">empty</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="CafeOBJ"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:CafeOBJ" title="Category:CafeOBJ">CafeOBJ</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=35" title="Edit section: CafeOBJ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>There is no builtin list type in CafeOBJ, so a user written list module is included.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>mod! SIMPLE-LIST(X&#160;:: TRIV){
[NeList &lt; List ]
op []&#160;: -&gt; List
op [_]&#160;: Elt -&gt; List 
op (_:_)&#160;: Elt List -&gt; NeList  -- consr
op _++_&#160;: List List -&gt; List {assoc}  -- concatenate
var E&#160;: Elt
vars L L'&#160;: List
eq [ E ] = E&#160;: [] .
eq [] ++ L = L .
eq (E&#160;: L) ++ L' = E&#160;: (L ++ L') .
}

mod! QUICKSORT{
pr(SIMPLE-LIST(NAT))
op qsort_&#160;: List -&gt; List 
op smaller__&#160;: List  Nat -&gt; List
op larger__&#160;: List Nat -&gt; List

vars x y&#160;: Nat
vars xs ys&#160;: List

eq qsort []  = [] .
eq qsort (x&#160;: xs) = (qsort (smaller xs x)) ++ [ x ]  ++ (qsort (larger xs x)) .

eq smaller []  x = [] .
eq smaller (x&#160;: xs) y = if x &lt;= y then  (x&#160;: (smaller xs y)) else (smaller xs y) fi .
eq larger []  x  = [] .
eq larger (x&#160;: xs) y = if x &lt;= y then (larger xs  y) else (x&#160;: (larger xs y)) fi   .

}
open  QUICKSORT .
red qsort(5&#160;: 4&#160;: 3&#160;: 2&#160;: 1&#160;: 0&#160;: []) .
red qsort(5&#160;: 5&#160;: 4&#160;: 3&#160;: 5&#160;: 2&#160;: 1&#160;: 1&#160;: 0&#160;: []) .
eof</pre></div>
<h2><span id="C.2B.2B"></span><span class="mw-headline" id="C++"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:C%2B%2B" title="Category:C++">C++</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=36" title="Edit section: C++">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The following implements quicksort with a median-of-three pivot. As idiomatic in C++, the argument <tt>last</tt> is a one-past-end iterator. Note that this code takes advantage of <tt>std::partition</tt>, which is O(n). Also note that it needs a random-access iterator for efficient calculation of the median-of-three pivot (more exactly, for O(1) calculation of the iterator <tt>mid</tt>).
</p>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iterator&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;algorithm&gt;</span><span class="c1"> // for std::partition</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;functional&gt;</span><span class="c1"> // for std::less</span><span class="cp"></span>

<span class="c1">// helper function for median of three</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"></span>
<span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">median</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t1</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">t2</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">t3</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">t1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">t2</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">t2</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">t3</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">t2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">t1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">t3</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">t3</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">t1</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">else</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">t1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">t3</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">t1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">t2</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">t3</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">t3</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">t2</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// helper object to get &lt;= from &lt;</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Order</span><span class="o">&gt;</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">non_strict_op</span><span class="o">:</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">binary_function</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Order</span><span class="o">::</span><span class="n">second_argument_type</span><span class="p">,</span><span class="w"></span>
<span class="w">                              </span><span class="k">typename</span><span class="w"> </span><span class="nc">Order</span><span class="o">::</span><span class="n">first_argument_type</span><span class="p">,</span><span class="w"></span>
<span class="w">                              </span><span class="kt">bool</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">non_strict_op</span><span class="p">(</span><span class="n">Order</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">order</span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="k">operator</span><span class="p">()(</span><span class="k">typename</span><span class="w"> </span><span class="nc">Order</span><span class="o">::</span><span class="n">second_argument_type</span><span class="w"> </span><span class="n">arg1</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="k">typename</span><span class="w"> </span><span class="nc">Order</span><span class="o">::</span><span class="n">first_argument_type</span><span class="w"> </span><span class="n">arg2</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">!</span><span class="n">order</span><span class="p">(</span><span class="n">arg2</span><span class="p">,</span><span class="w"> </span><span class="n">arg1</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="k">private</span><span class="o">:</span><span class="w"></span>
<span class="w">  </span><span class="n">Order</span><span class="w"> </span><span class="n">order</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Order</span><span class="o">&gt;</span><span class="w"> </span><span class="n">non_strict_op</span><span class="o">&lt;</span><span class="n">Order</span><span class="o">&gt;</span><span class="w"> </span><span class="n">non_strict</span><span class="p">(</span><span class="n">Order</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">non_strict_op</span><span class="o">&lt;</span><span class="n">Order</span><span class="o">&gt;</span><span class="p">(</span><span class="n">o</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">RandomAccessIterator</span><span class="p">,</span><span class="w"></span>
<span class="w">         </span><span class="k">typename</span><span class="w"> </span><span class="nc">Order</span><span class="o">&gt;</span><span class="w"></span>
<span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">quicksort</span><span class="p">(</span><span class="n">RandomAccessIterator</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">RandomAccessIterator</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">Order</span><span class="w"> </span><span class="n">order</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">first</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">first</span><span class="o">+</span><span class="mi">1</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">typedef</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">std</span><span class="o">::</span><span class="n">iterator_traits</span><span class="o">&lt;</span><span class="n">RandomAccessIterator</span><span class="o">&gt;::</span><span class="n">value_type</span><span class="w"> </span><span class="n">value_type</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">RandomAccessIterator</span><span class="w"> </span><span class="n">mid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">last</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">first</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">value_type</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">median</span><span class="p">(</span><span class="o">*</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">mid</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="n">last</span><span class="mi">-1</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">RandomAccessIterator</span><span class="w"> </span><span class="n">split1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">partition</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">bind2nd</span><span class="p">(</span><span class="n">order</span><span class="p">,</span><span class="w"> </span><span class="n">pivot</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">RandomAccessIterator</span><span class="w"> </span><span class="n">split2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">partition</span><span class="p">(</span><span class="n">split1</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">bind2nd</span><span class="p">(</span><span class="n">non_strict</span><span class="p">(</span><span class="n">order</span><span class="p">),</span><span class="w"> </span><span class="n">pivot</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">quicksort</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">split1</span><span class="p">,</span><span class="w"> </span><span class="n">order</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">quicksort</span><span class="p">(</span><span class="n">split2</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">order</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">RandomAccessIterator</span><span class="o">&gt;</span><span class="w"></span>
<span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">quicksort</span><span class="p">(</span><span class="n">RandomAccessIterator</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">RandomAccessIterator</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">quicksort</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">std</span><span class="o">::</span><span class="n">iterator_traits</span><span class="o">&lt;</span><span class="n">RandomAccessIterator</span><span class="o">&gt;::</span><span class="n">value_type</span><span class="o">&gt;</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>A simpler version of the above that just uses the first element as the pivot and only does one "partition".
</p>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iterator&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;algorithm&gt;</span><span class="c1"> // for std::partition</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;functional&gt;</span><span class="c1"> // for std::less</span><span class="cp"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">RandomAccessIterator</span><span class="p">,</span><span class="w"></span>
<span class="w">         </span><span class="k">typename</span><span class="w"> </span><span class="nc">Order</span><span class="o">&gt;</span><span class="w"></span>
<span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">quicksort</span><span class="p">(</span><span class="n">RandomAccessIterator</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">RandomAccessIterator</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">Order</span><span class="w"> </span><span class="n">order</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">last</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">RandomAccessIterator</span><span class="w"> </span><span class="n">split</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">partition</span><span class="p">(</span><span class="n">first</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">bind2nd</span><span class="p">(</span><span class="n">order</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">first</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">iter_swap</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">split</span><span class="mi">-1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">quicksort</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">split</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="n">order</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">quicksort</span><span class="p">(</span><span class="n">split</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">order</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">RandomAccessIterator</span><span class="o">&gt;</span><span class="w"></span>
<span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">quicksort</span><span class="p">(</span><span class="n">RandomAccessIterator</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">RandomAccessIterator</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">quicksort</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">std</span><span class="o">::</span><span class="n">iterator_traits</span><span class="o">&lt;</span><span class="n">RandomAccessIterator</span><span class="o">&gt;::</span><span class="n">value_type</span><span class="o">&gt;</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="Clojure"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Clojure" title="Category:Clojure">Clojure</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=37" title="Edit section: Clojure">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A very Haskell-like solution using list comprehensions and lazy evaluation.
</p>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nv">defn</span> <span class="nv">qsort</span> <span class="nv">[L]</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nv">empty?</span> <span class="nv">L</span><span class="p">)</span> 
      <span class="o">&#39;</span><span class="p">()</span>
      <span class="p">(</span><span class="k">let</span> <span class="nv">[[pivot</span> <span class="nv">&amp;</span> <span class="nv">L2]</span> <span class="nv">L]</span>
           <span class="p">(</span><span class="nv">lazy-cat</span> <span class="p">(</span><span class="nv">qsort</span> <span class="p">(</span><span class="nv">for</span> <span class="nv">[y</span> <span class="nv">L2</span> <span class="ss">:when</span> <span class="p">(</span><span class="nb">&lt;</span>  <span class="nv">y</span> <span class="nv">pivot</span><span class="p">)</span><span class="nv">]</span> <span class="nv">y</span><span class="p">))</span>
                     <span class="p">(</span><span class="nb">list</span> <span class="nv">pivot</span><span class="p">)</span>
                     <span class="p">(</span><span class="nv">qsort</span> <span class="p">(</span><span class="nv">for</span> <span class="nv">[y</span> <span class="nv">L2</span> <span class="ss">:when</span> <span class="p">(</span><span class="nb">&gt;=</span> <span class="nv">y</span> <span class="nv">pivot</span><span class="p">)</span><span class="nv">]</span> <span class="nv">y</span><span class="p">))))))</span>
</pre></div>
<p>Another short version (using quasiquote):
</p>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nv">defn</span> <span class="nv">qsort</span> <span class="nv">[[pvt</span> <span class="nv">&amp;</span> <span class="nv">rs]]</span>
  <span class="p">(</span><span class="k">if</span> <span class="nv">pvt</span>
    <span class="o">`</span><span class="p">(</span><span class="nv">~@</span><span class="p">(</span><span class="nv">qsort</span> <span class="p">(</span><span class="nv">filter</span> <span class="o">#(</span><span class="nb">&lt;</span>  <span class="nv">%</span> <span class="nv">pvt</span><span class="p">)</span> <span class="nv">rs</span><span class="p">))</span>
      <span class="nv">~pvt</span> 
      <span class="nv">~@</span><span class="p">(</span><span class="nv">qsort</span> <span class="p">(</span><span class="nv">filter</span> <span class="o">#(</span><span class="nb">&gt;=</span> <span class="nv">%</span> <span class="nv">pvt</span><span class="p">)</span> <span class="nv">rs</span><span class="p">)))))</span>
</pre></div>
<p>Another, more readable version (no macros):
</p>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nv">defn</span> <span class="nv">qsort</span> <span class="nv">[[pivot</span> <span class="nv">&amp;</span> <span class="nv">xs]]</span>
  <span class="p">(</span><span class="nb">when</span> <span class="nv">pivot</span>
    <span class="p">(</span><span class="k">let</span> <span class="nv">[smaller</span> <span class="o">#(</span><span class="nb">&lt;</span> <span class="nv">%</span> <span class="nv">pivot</span><span class="p">)</span><span class="nv">]</span>
      <span class="p">(</span><span class="nv">lazy-cat</span> <span class="p">(</span><span class="nv">qsort</span> <span class="p">(</span><span class="nv">filter</span> <span class="nv">smaller</span> <span class="nv">xs</span><span class="p">))</span>
		<span class="nv">[pivot]</span>
		<span class="p">(</span><span class="nv">qsort</span> <span class="p">(</span><span class="nb">remove</span> <span class="nv">smaller</span> <span class="nv">xs</span><span class="p">))))))</span>
</pre></div>
<p>A 3-group quicksort (fast when many values are equal):
</p>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nv">defn</span> <span class="nv">qsort3</span> <span class="nv">[[pvt</span> <span class="ss">:as</span> <span class="nv">coll]]</span>
  <span class="p">(</span><span class="nb">when</span> <span class="nv">pvt</span>
    <span class="p">(</span><span class="k">let</span> <span class="nv">[{left</span> <span class="mi">-1</span> <span class="nv">mid</span> <span class="mi">0</span> <span class="nv">right</span> <span class="nv">1}</span> <span class="p">(</span><span class="nv">group-by</span> <span class="o">#(</span><span class="nv">compare</span> <span class="nv">%</span> <span class="nv">pvt</span><span class="p">)</span> <span class="nv">coll</span><span class="p">)</span><span class="nv">]</span>
      <span class="p">(</span><span class="nv">lazy-cat</span> <span class="p">(</span><span class="nv">qsort3</span> <span class="nv">left</span><span class="p">)</span> <span class="nv">mid</span> <span class="p">(</span><span class="nv">qsort3</span> <span class="nv">right</span><span class="p">)))))</span>
</pre></div>
<p>A lazier version of above (unlike group-by, filter returns (and reads) a lazy sequence)
</p>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nv">defn</span> <span class="nv">qsort3</span> <span class="nv">[[pivot</span> <span class="ss">:as</span> <span class="nv">coll]]</span>
  <span class="p">(</span><span class="nb">when</span> <span class="nv">pivot</span>
    <span class="p">(</span><span class="nv">lazy-cat</span> <span class="p">(</span><span class="nv">qsort</span> <span class="p">(</span><span class="nv">filter</span> <span class="o">#(</span><span class="nb">&lt;</span> <span class="nv">%</span> <span class="nv">pivot</span><span class="p">)</span> <span class="nv">coll</span><span class="p">))</span>
              <span class="p">(</span><span class="nv">filter</span> <span class="err">#</span><span class="nv">{pivot}</span> <span class="nv">coll</span><span class="p">)</span>
              <span class="p">(</span><span class="nv">qsort</span> <span class="p">(</span><span class="nv">filter</span> <span class="o">#(</span><span class="nb">&gt;</span> <span class="nv">%</span> <span class="nv">pivot</span><span class="p">)</span> <span class="nv">coll</span><span class="p">)))))</span>
</pre></div>
<h2><span class="mw-headline" id="COBOL"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:COBOL" title="Category:COBOL">COBOL</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=38" title="Edit section: COBOL">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/Visual_COBOL" title="Visual COBOL">Visual COBOL</a></div>
<div class="mw-highlight mw-highlight-lang-cobol mw-content-ltr" dir="ltr"><pre><span></span><span class="c">      </span><span class="w"> </span><span class="kr">IDENTIFICATION</span><span class="w"> </span><span class="kr">DIVISION</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span><span class="kr">PROGRAM-ID</span><span class="p">.</span><span class="w"> </span><span class="nv">quicksort</span><span class="w"> </span><span class="kp">RECURSIVE</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span>
<span class="c">      </span><span class="w"> </span><span class="kr">DATA</span><span class="w"> </span><span class="kr">DIVISION</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span><span class="kr">LOCAL-STORAGE</span><span class="w"> </span><span class="kr">SECTION</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span><span class="mi">01  </span><span class="nv">temp</span><span class="w">                   </span><span class="kt">PIC S9(8)</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span>
<span class="c">      </span><span class="w"> </span><span class="mi">01  </span><span class="nv">pivot</span><span class="w">                  </span><span class="kt">PIC S9(8)</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span>
<span class="c">      </span><span class="w"> </span><span class="mi">01  </span><span class="nv">left-most-idx</span><span class="w">          </span><span class="kt">PIC 9(5)</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span><span class="mi">01  </span><span class="nv">right-most-idx</span><span class="w">         </span><span class="kt">PIC 9(5)</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span>
<span class="c">      </span><span class="w"> </span><span class="mi">01  </span><span class="nv">left-idx</span><span class="w">               </span><span class="kt">PIC 9(5)</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span><span class="mi">01  </span><span class="nv">right-idx</span><span class="w">              </span><span class="kt">PIC 9(5)</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span>
<span class="c">      </span><span class="w"> </span><span class="kr">LINKAGE</span><span class="w"> </span><span class="kr">SECTION</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span><span class="mi">78  </span><span class="nv">Arr-Length</span><span class="w">             </span><span class="kp">VALUE</span><span class="w"> </span><span class="mi">50</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span>
<span class="c">      </span><span class="w"> </span><span class="mi">01  </span><span class="nv">arr-area</span><span class="p">.</span>
<span class="c">      </span><span class="w">     </span><span class="mi">03  </span><span class="nv">arr</span><span class="w">                </span><span class="kt">PIC S9(8)</span><span class="w"> </span><span class="kp">OCCURS</span><span class="w"> </span><span class="nv">Arr-Length</span><span class="w"> </span><span class="kp">TIMES</span><span class="p">.</span>
<span class="c">      </span><span class="w">     </span>
<span class="c">      </span><span class="w"> </span><span class="mi">01  </span><span class="nv">left-val</span><span class="w">               </span><span class="kt">PIC 9(5)</span><span class="p">.</span>
<span class="c">      </span><span class="w"> </span><span class="mi">01  </span><span class="nv">right-val</span><span class="w">              </span><span class="kt">PIC 9(5)</span><span class="p">.</span><span class="w">  </span>
<span class="c">      </span><span class="w"> </span>
<span class="c">      </span><span class="w"> </span><span class="kr">PROCEDURE</span><span class="w"> </span><span class="kr">DIVISION</span><span class="w"> </span><span class="kp">USING</span><span class="w"> </span><span class="kp">REFERENCE</span><span class="w"> </span><span class="nv">arr-area</span><span class="p">,</span><span class="w"> </span><span class="kp">OPTIONAL</span><span class="w"> </span><span class="nv">left-val</span><span class="p">,</span>
<span class="c">      </span><span class="w">         </span><span class="kp">OPTIONAL</span><span class="w"> </span><span class="nv">right-val</span><span class="p">.</span>
<span class="c">      </span><span class="w">     </span><span class="kr">IF</span><span class="w"> </span><span class="nv">left-val</span><span class="w"> </span><span class="kp">IS</span><span class="w"> </span><span class="kp">OMITTED</span><span class="w"> </span><span class="ow">OR</span><span class="w"> </span><span class="nv">right-val</span><span class="w"> </span><span class="kp">IS</span><span class="w"> </span><span class="kp">OMITTED</span>
<span class="kp">              </span><span class="w"> </span><span class="kr">MOVE</span><span class="w"> </span><span class="mi">1 </span><span class="kp">TO</span><span class="w"> </span><span class="nv">left-most-idx</span><span class="p">,</span><span class="w"> </span><span class="nv">left-idx</span>
<span class="c">      </span><span class="w">         </span><span class="kr">MOVE</span><span class="w"> </span><span class="nv">Arr-Length</span><span class="w"> </span><span class="kp">TO</span><span class="w"> </span><span class="nv">right-most-idx</span><span class="p">,</span><span class="w"> </span><span class="nv">right-idx</span>
<span class="c">      </span><span class="w">     </span><span class="kr">ELSE</span>
<span class="kr">              </span><span class="w"> </span><span class="kr">MOVE</span><span class="w"> </span><span class="nv">left-val</span><span class="w"> </span><span class="kp">TO</span><span class="w"> </span><span class="nv">left-most-idx</span><span class="p">,</span><span class="w"> </span><span class="nv">left-idx</span>
<span class="c">      </span><span class="w">         </span><span class="kr">MOVE</span><span class="w"> </span><span class="nv">right-val</span><span class="w"> </span><span class="kp">TO</span><span class="w"> </span><span class="nv">right-most-idx</span><span class="p">,</span><span class="w"> </span><span class="nv">right-idx</span>
<span class="c">      </span><span class="w">     </span><span class="kr">END-IF</span>
<span class="kr">           </span>
<span class="kr">          </span><span class="w"> </span><span class="kr">IF</span><span class="w"> </span><span class="nv">right-most-idx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">left-most-idx</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span>
<span class="mi">               </span><span class="kr">GOBACK</span>
<span class="kr">          </span><span class="w"> </span><span class="kr">END-IF</span>
<span class="kr">       </span>
<span class="kr">          </span><span class="w"> </span><span class="kr">COMPUTE</span><span class="w"> </span><span class="nv">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">arr</span><span class="w"> </span><span class="p">((</span><span class="nv">left-most-idx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">right-most-idx</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="c">      </span><span class="w"> </span>
<span class="c">      </span><span class="w">     </span><span class="kr">PERFORM</span><span class="w"> </span><span class="kp">UNTIL</span><span class="w"> </span><span class="nv">left-idx</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">right-idx</span>
<span class="c">      </span><span class="w">         </span><span class="kr">PERFORM</span><span class="w"> </span><span class="kp">VARYING</span><span class="w"> </span><span class="nv">left-idx</span><span class="w"> </span><span class="kp">FROM</span><span class="w"> </span><span class="nv">left-idx</span><span class="w"> </span><span class="kp">BY</span><span class="w"> </span><span class="mi">1</span>
<span class="mi">                   </span><span class="kp">UNTIL</span><span class="w"> </span><span class="nv">arr</span><span class="w"> </span><span class="p">(</span><span class="nv">left-idx</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nv">pivot</span>
<span class="c">      </span><span class="w">         </span><span class="kr">END-PERFORM</span>
<span class="kr">               </span>
<span class="kr">              </span><span class="w"> </span><span class="kr">PERFORM</span><span class="w"> </span><span class="kp">VARYING</span><span class="w"> </span><span class="nv">right-idx</span><span class="w"> </span><span class="kp">FROM</span><span class="w"> </span><span class="nv">right-idx</span><span class="w"> </span><span class="kp">BY</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>
<span class="mi">                   </span><span class="kp">UNTIL</span><span class="w"> </span><span class="nv">arr</span><span class="w"> </span><span class="p">(</span><span class="nv">right-idx</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nv">pivot</span>
<span class="c">      </span><span class="w">         </span><span class="kr">END-PERFORM</span>
<span class="kr">               </span>
<span class="kr">              </span><span class="w"> </span><span class="kr">IF</span><span class="w"> </span><span class="nv">left-idx</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nv">right-idx</span>
<span class="c">      </span><span class="w">             </span><span class="kr">MOVE</span><span class="w"> </span><span class="nv">arr</span><span class="w"> </span><span class="p">(</span><span class="nv">left-idx</span><span class="p">)</span><span class="w"> </span><span class="kp">TO</span><span class="w"> </span><span class="nv">temp</span>
<span class="c">      </span><span class="w">             </span><span class="kr">MOVE</span><span class="w"> </span><span class="nv">arr</span><span class="w"> </span><span class="p">(</span><span class="nv">right-idx</span><span class="p">)</span><span class="w"> </span><span class="kp">TO</span><span class="w"> </span><span class="nv">arr</span><span class="w"> </span><span class="p">(</span><span class="nv">left-idx</span><span class="p">)</span>
<span class="c">      </span><span class="w">             </span><span class="kr">MOVE</span><span class="w"> </span><span class="nv">temp</span><span class="w"> </span><span class="kp">TO</span><span class="w"> </span><span class="nv">arr</span><span class="w"> </span><span class="p">(</span><span class="nv">right-idx</span><span class="p">)</span>
<span class="c">      </span><span class="w">             </span>
<span class="c">      </span><span class="w">             </span><span class="kr">ADD</span><span class="w"> </span><span class="mi">1 </span><span class="kp">TO</span><span class="w"> </span><span class="nv">left-idx</span>
<span class="c">      </span><span class="w">             </span><span class="kr">SUBTRACT</span><span class="w"> </span><span class="mi">1 </span><span class="kp">FROM</span><span class="w"> </span><span class="nv">right-idx</span>
<span class="c">      </span><span class="w">         </span><span class="kr">END-IF</span>
<span class="kr">          </span><span class="w"> </span><span class="kr">END-PERFORM</span>
<span class="kr">       </span>
<span class="kr">          </span><span class="w"> </span><span class="kr">CALL </span><span class="s2">&quot;quicksort&quot;</span><span class="w"> </span><span class="kp">USING</span><span class="w"> </span><span class="kp">REFERENCE</span><span class="w"> </span><span class="nv">arr-area</span><span class="p">,</span>
<span class="c">      </span><span class="w">         </span><span class="kp">CONTENT</span><span class="w"> </span><span class="nv">left-most-idx</span><span class="p">,</span><span class="w"> </span><span class="nv">right-idx</span>
<span class="c">      </span><span class="w">     </span><span class="kr">CALL </span><span class="s2">&quot;quicksort&quot;</span><span class="w"> </span><span class="kp">USING</span><span class="w"> </span><span class="kp">REFERENCE</span><span class="w"> </span><span class="nv">arr-area</span><span class="p">,</span><span class="w"> </span><span class="kp">CONTENT</span><span class="w"> </span><span class="nv">left-idx</span><span class="p">,</span>
<span class="c">      </span><span class="w">         </span><span class="nv">right-most-idx</span>
<span class="c">      </span><span class="w">         </span>
<span class="c">      </span><span class="w">     </span><span class="kr">GOBACK</span>
<span class="kr">           </span><span class="p">.</span>
</pre></div>
<h2><span class="mw-headline" id="CoffeeScript"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:CoffeeScript" title="Category:CoffeeScript">CoffeeScript</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=39" title="Edit section: CoffeeScript">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-coffeescript mw-content-ltr" dir="ltr"><pre><span></span><span class="nv">quicksort = </span><span class="nf">([x, xs...]) -&gt;</span>
  <span class="k">return</span> <span class="p">[]</span> <span class="k">unless</span> <span class="nx">x</span><span class="o">?</span>
  <span class="nv">smallerOrEqual = </span><span class="p">(</span><span class="nx">a</span> <span class="k">for</span> <span class="nx">a</span> <span class="k">in</span> <span class="nx">xs</span> <span class="k">when</span> <span class="nx">a</span> <span class="o">&lt;=</span> <span class="nx">x</span><span class="p">)</span>
  <span class="nv">larger = </span><span class="p">(</span><span class="nx">a</span> <span class="k">for</span> <span class="nx">a</span> <span class="k">in</span> <span class="nx">xs</span> <span class="k">when</span> <span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">x</span><span class="p">)</span>
  <span class="p">(</span><span class="nx">quicksort</span> <span class="nx">smallerOrEqual</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">x</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">quicksort</span> <span class="nx">larger</span><span class="p">)</span>
</pre></div>
<h2><span class="mw-headline" id="Common_Lisp"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Common_Lisp" title="Category:Common Lisp">Common Lisp</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=40" title="Edit section: Common Lisp">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The functional programming way
</p>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">quicksort</span> <span class="p">(</span><span class="nb">list</span> <span class="k">&amp;aux</span> <span class="p">(</span><span class="nv">pivot</span> <span class="p">(</span><span class="nb">car</span> <span class="nb">list</span><span class="p">))</span> <span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nb">list</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">nconc</span> <span class="p">(</span><span class="nv">quicksort</span> <span class="p">(</span><span class="nb">remove-if-not</span> <span class="nf">#&#39;</span><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">x</span> <span class="nv">pivot</span><span class="p">))</span> <span class="nb">list</span><span class="p">))</span>
             <span class="p">(</span><span class="nb">remove-if-not</span> <span class="nf">#&#39;</span><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">=</span> <span class="nv">x</span> <span class="nv">pivot</span><span class="p">))</span> <span class="nb">list</span><span class="p">)</span>
             <span class="p">(</span><span class="nv">quicksort</span> <span class="p">(</span><span class="nb">remove-if-not</span> <span class="nf">#&#39;</span><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="nv">x</span> <span class="nv">pivot</span><span class="p">))</span> <span class="nb">list</span><span class="p">)))</span>
      <span class="nb">list</span><span class="p">))</span>
</pre></div>
<p>With flet
</p>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">qs</span> <span class="p">(</span><span class="nb">list</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nb">list</span><span class="p">)</span>
      <span class="p">(</span><span class="k">flet</span> <span class="p">((</span><span class="nv">pivot</span> <span class="p">(</span><span class="nv">test</span><span class="p">)</span>
               <span class="p">(</span><span class="nb">remove</span> <span class="p">(</span><span class="nb">car</span> <span class="nb">list</span><span class="p">)</span> <span class="nb">list</span> <span class="ss">:test-not</span> <span class="nv">test</span><span class="p">)))</span>
        <span class="p">(</span><span class="nb">nconc</span> <span class="p">(</span><span class="nv">qs</span> <span class="p">(</span><span class="nv">pivot</span> <span class="nf">#&#39;</span><span class="nb">&gt;</span><span class="p">))</span> <span class="p">(</span><span class="nv">pivot</span> <span class="nf">#&#39;</span><span class="nb">=</span><span class="p">)</span> <span class="p">(</span><span class="nv">qs</span> <span class="p">(</span><span class="nv">pivot</span> <span class="nf">#&#39;</span><span class="nb">&lt;</span><span class="p">))))</span>
      <span class="nb">list</span><span class="p">))</span>
</pre></div>
<p>In-place non-functional
</p>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">quicksort</span> <span class="p">(</span><span class="nc">sequence</span><span class="p">)</span>
  <span class="p">(</span><span class="k">labels</span> <span class="p">((</span><span class="nv">swap</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">rotatef</span> <span class="p">(</span><span class="nb">elt</span> <span class="nc">sequence</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nb">elt</span> <span class="nc">sequence</span> <span class="nv">b</span><span class="p">)))</span>
           <span class="p">(</span><span class="nv">sub-sort</span> <span class="p">(</span><span class="nv">left</span> <span class="nv">right</span><span class="p">)</span>
             <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">left</span> <span class="nv">right</span><span class="p">)</span>
               <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">pivot</span> <span class="p">(</span><span class="nb">elt</span> <span class="nc">sequence</span> <span class="nv">right</span><span class="p">))</span>
                     <span class="p">(</span><span class="nv">index</span> <span class="nv">left</span><span class="p">))</span>
                 <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">i</span> <span class="nv">from</span> <span class="nv">left</span> <span class="nv">below</span> <span class="nv">right</span>
                       <span class="nb">when</span> <span class="p">(</span><span class="nb">&lt;=</span> <span class="p">(</span><span class="nb">elt</span> <span class="nc">sequence</span> <span class="nv">i</span><span class="p">)</span> <span class="nv">pivot</span><span class="p">)</span>
                         <span class="nb">do</span> <span class="p">(</span><span class="nv">swap</span> <span class="nv">i</span> <span class="p">(</span><span class="nb">prog1</span> <span class="nv">index</span> <span class="p">(</span><span class="nb">incf</span> <span class="nv">index</span><span class="p">))))</span>
                 <span class="p">(</span><span class="nv">swap</span> <span class="nv">right</span> <span class="nv">index</span><span class="p">)</span>
                 <span class="p">(</span><span class="nv">sub-sort</span> <span class="nv">left</span> <span class="p">(</span><span class="nb">1-</span> <span class="nv">index</span><span class="p">))</span>
                 <span class="p">(</span><span class="nv">sub-sort</span> <span class="p">(</span><span class="nb">1+</span> <span class="nv">index</span><span class="p">)</span> <span class="nv">right</span><span class="p">)))))</span>
    <span class="p">(</span><span class="nv">sub-sort</span> <span class="mi">0</span> <span class="p">(</span><span class="nb">1-</span> <span class="p">(</span><span class="nb">length</span> <span class="nc">sequence</span><span class="p">)))</span>
    <span class="nc">sequence</span><span class="p">))</span>
</pre></div>
<p>Functional with destructuring
</p>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">quicksort</span> <span class="p">(</span><span class="nb">list</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">when</span> <span class="nb">list</span>
    <span class="p">(</span><span class="nb">destructuring-bind</span> <span class="p">(</span><span class="nv">x</span> <span class="o">.</span> <span class="nv">xs</span><span class="p">)</span> <span class="nb">list</span>
      <span class="p">(</span><span class="nb">nconc</span> <span class="p">(</span><span class="nv">quicksort</span> <span class="p">(</span><span class="nb">remove-if</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="nv">a</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">xs</span><span class="p">))</span>
	     <span class="o">`</span><span class="p">(</span><span class="o">,</span><span class="nv">x</span><span class="p">)</span>
	     <span class="p">(</span><span class="nv">quicksort</span> <span class="p">(</span><span class="nb">remove-if</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt;=</span> <span class="nv">a</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">xs</span><span class="p">))))))</span>
</pre></div>
<h2><span class="mw-headline" id="Cowgol"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Cowgol" title="Category:Cowgol">Cowgol</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=41" title="Edit section: Cowgol">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>include "cowgol.coh";

# Comparator interface, on the model of C, i.e:
# foo &lt; bar =&gt; -1, foo == bar =&gt; 0, foo &gt; bar =&gt; 1
typedef CompRslt is int(-1, 1);
interface Comparator(foo: intptr, bar: intptr): (rslt: CompRslt);

# Quicksort an array of pointer-sized integers given a comparator function
# (This is the closest you can get to polymorphism in Cowgol).
# Because Cowgol does not support recursion, a pointer to free memory
# for a stack must also be given.
sub qsort(A: [intptr], len: intptr, comp: Comparator, stack: [intptr]) is 
    # The partition function can be taken almost verbatim from Wikipedia
    sub partition(lo: intptr, hi: intptr): (p: intptr) is
        # This is not quite as bad as it looks: /2 compiles into a single shift
        # and "@bytesof intptr" is always power of 2 so compiles into shift(s).
        var pivot&#160;:= [A + (hi/2 + lo/2) * @bytesof intptr];
        var i&#160;:= lo - 1;
        var j&#160;:= hi + 1;
        loop
            loop    
                i&#160;:= i + 1;
                if comp([A + i*@bytesof intptr], pivot)&#160;!= -1 then
                    break;
                end if;
            end loop;
            loop
                j&#160;:= j - 1;
                if comp([A + j*@bytesof intptr], pivot)&#160;!= 1 then
                    break;
                end if;
            end loop;
            if i &gt;= j then
                p&#160;:= j;
                return;
            end if;
            var ii&#160;:= i * @bytesof intptr;
            var jj&#160;:= j * @bytesof intptr;
            var t&#160;:= [A+ii];
            [A+ii]&#160;:= [A+jj];
            [A+jj]&#160;:= t;
        end loop;
    end sub;
    
    # Cowgol lacks recursion, so we'll have to solve it by implementing
    # the stack ourselves.
    var sp: intptr&#160;:= 0; # stack index
    sub push(n: intptr) is
        sp&#160;:= sp + 1;
        [stack]&#160;:= n;
        stack&#160;:= @next stack;
    end sub;
    sub pop(): (n: intptr) is
        sp&#160;:= sp - 1;
        stack&#160;:= @prev stack;
        n&#160;:= [stack];
    end sub;
    
    # start by sorting [0..length-1]
    push(len-1); 
    push(0);
    while sp&#160;!= 0 loop
        var lo&#160;:= pop();
        var hi&#160;:= pop();
        if lo &lt; hi then
            var p&#160;:= partition(lo, hi);
            push(hi);   # note the order - we need to push the high pair
            push(p+1);  # first for it to be done last
            push(p);
            push(lo);
        end if;
    end loop;
end sub;

# Test: sort a list of numbers
sub NumComp implements Comparator is
    # Compare the inputs as numbers
    if foo &lt; bar then rslt&#160;:= -1;
    elseif foo &gt; bar then rslt&#160;:= 1;
    else rslt&#160;:= 0;
    end if;
end sub;

# Numbers
var numbers: intptr[]&#160;:= {
    65,13,4,84,29,5,96,73,5,11,17,76,38,26,44,20,36,12,44,51,79,8,99,7,19,95,26
};

# Room for the stack
var stackbuf: intptr[256];

# Sort the numbers in place
qsort(&amp;numbers as [intptr], @sizeof numbers, NumComp, &amp;stackbuf as [intptr]);

# Print the numbers (hopefully in order)
var i: @indexof numbers&#160;:= 0;
while i &lt; @sizeof numbers loop
    print_i32(numbers[i] as uint32);
    print_char(' ');
    i&#160;:= i + 1;
end loop;
print_nl();</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>4 5 5 7 8 11 12 13 17 19 20 26 26 29 36 38 44 44 51 65 73 76 79 84 95 96 99</pre>
<h2><span class="mw-headline" id="Craft_Basic"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Craft_Basic" title="Category:Craft Basic">Craft Basic</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=42" title="Edit section: Craft Basic">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-basic mw-content-ltr" dir="ltr"><pre><span></span><span class="vg">define</span><span class="w"> </span><span class="vg">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">10</span><span class="p">,</span><span class="w"> </span><span class="vg">point</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span>
<span class="vg">define</span><span class="w"> </span><span class="vg">high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="vg">low</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span>

<span class="vg">dim</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">size</span><span class="p">]</span>
<span class="vg">dim</span><span class="w"> </span><span class="vg">stack</span><span class="p">[</span><span class="vg">size</span><span class="p">]</span>

<span class="vg">gosub</span><span class="w"> </span><span class="vg">fill</span>
<span class="vg">gosub</span><span class="w"> </span><span class="vg">sort</span>
<span class="vg">gosub</span><span class="w"> </span><span class="vg">show</span>

<span class="vg">end</span>

<span class="vg">sub</span><span class="w"> </span><span class="vg">fill</span>

<span class="w">	</span><span class="vg">for</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">size</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>

<span class="w">		</span><span class="vg">let</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">int</span><span class="p">(</span><span class="vg">rnd</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="il">100</span><span class="p">)</span>

<span class="w">	</span><span class="vg">next</span><span class="w"> </span><span class="vg">i</span>

<span class="vg">return</span>

<span class="vg">sub</span><span class="w"> </span><span class="vg">sort</span>

<span class="w">	</span><span class="vg">let</span><span class="w"> </span><span class="vg">low</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span>
<span class="w">	</span><span class="vg">let</span><span class="w"> </span><span class="vg">high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">size</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="w">	</span><span class="vg">let</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">-1</span>

<span class="w">	</span><span class="vg">let</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">	</span><span class="vg">let</span><span class="w"> </span><span class="vg">stack</span><span class="p">[</span><span class="vg">top</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">low</span>
<span class="w">	</span><span class="vg">let</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">	</span><span class="vg">let</span><span class="w"> </span><span class="vg">stack</span><span class="p">[</span><span class="vg">top</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">high</span>
<span class="w"> </span>
<span class="w">	</span><span class="vg">do</span>

<span class="w">		</span><span class="vg">if</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="vg">then</span>

<span class="w">			</span><span class="vg">break</span>

<span class="w">		</span><span class="vg">endif</span>

<span class="w">		</span><span class="vg">let</span><span class="w"> </span><span class="vg">high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">stack</span><span class="p">[</span><span class="vg">top</span><span class="p">]</span>
<span class="w">		</span><span class="vg">let</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="w">		</span><span class="vg">let</span><span class="w"> </span><span class="vg">low</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">stack</span><span class="p">[</span><span class="vg">top</span><span class="p">]</span>
<span class="w">		</span><span class="vg">let</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>

<span class="w">		</span><span class="vg">let</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">low</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="w">		</span>
<span class="w">		</span><span class="vg">for</span><span class="w"> </span><span class="vg">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">low</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">high</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>

<span class="w">			</span><span class="vg">if</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">high</span><span class="p">]</span><span class="w"> </span><span class="vg">then</span>

<span class="w">				</span><span class="vg">let</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">				</span><span class="vg">let</span><span class="w"> </span><span class="vg">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span>
<span class="w">				</span><span class="vg">let</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span>
<span class="w">				</span><span class="vg">let</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">t</span>

<span class="w">			</span><span class="vg">endif</span>

<span class="w">		</span><span class="vg">next</span><span class="w"> </span><span class="vg">j</span>

<span class="w">		</span><span class="vg">let</span><span class="w"> </span><span class="vg">point</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">		</span><span class="vg">let</span><span class="w"> </span><span class="vg">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">point</span><span class="p">]</span>
<span class="w">		</span><span class="vg">let</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">point</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">high</span><span class="p">]</span>
<span class="w">		</span><span class="vg">let</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">high</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">t</span>
<span class="w">		</span><span class="vg">let</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>

<span class="w">		</span><span class="vg">if</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">low</span><span class="w"> </span><span class="vg">then</span>

<span class="w">			</span><span class="vg">let</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">			</span><span class="vg">let</span><span class="w"> </span><span class="vg">stack</span><span class="p">[</span><span class="vg">top</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">low</span>
<span class="w">			</span><span class="vg">let</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">			</span><span class="vg">let</span><span class="w"> </span><span class="vg">stack</span><span class="p">[</span><span class="vg">top</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>

<span class="w">		</span><span class="vg">endif</span>
<span class="w">  </span>
<span class="w">		</span><span class="vg">if</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">high</span><span class="w"> </span><span class="vg">then</span>

<span class="w">			</span><span class="vg">let</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">			</span><span class="vg">let</span><span class="w"> </span><span class="vg">stack</span><span class="p">[</span><span class="vg">top</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">			</span><span class="vg">let</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">			</span><span class="vg">let</span><span class="w"> </span><span class="vg">stack</span><span class="p">[</span><span class="vg">top</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">high</span>

<span class="w">		</span><span class="vg">endif</span>

<span class="w">		</span><span class="vg">wait</span>

<span class="w">	</span><span class="vg">loop</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="il">0</span>

<span class="vg">return</span>

<span class="vg">sub</span><span class="w"> </span><span class="vg">show</span>

<span class="w">	</span><span class="vg">for</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">size</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>

<span class="w">		</span><span class="vg">print</span><span class="w"> </span><span class="vg">i</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;: &quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">list</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span>

<span class="w">	</span><span class="vg">next</span><span class="w"> </span><span class="vg">i</span>

<span class="vg">return</span>
</pre></div>
<h2><span class="mw-headline" id="Crystal"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Crystal" title="Category:Crystal">Crystal</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=43" title="Edit section: Crystal">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#Ruby">Ruby</a></div>
<div class="mw-highlight mw-highlight-lang-ruby mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">quick_sort</span><span class="p">(</span><span class="n">a</span> <span class="p">:</span> <span class="nb">Array</span><span class="p">(</span><span class="no">Int32</span><span class="p">))</span> <span class="p">:</span> <span class="nb">Array</span><span class="p">(</span><span class="no">Int32</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">a</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">size</span> <span class="o">&lt;=</span> <span class="mi">1</span>
  <span class="nb">p</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
  <span class="n">lt</span><span class="p">,</span> <span class="n">rt</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="mi">1</span> <span class="o">..</span> <span class="o">-</span><span class="mi">1</span><span class="o">].</span><span class="n">partition</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="nb">p</span> <span class="p">}</span>
  <span class="k">return</span> <span class="n">quick_sort</span><span class="p">(</span><span class="n">lt</span><span class="p">)</span> <span class="o">+</span> <span class="o">[</span><span class="nb">p</span><span class="o">]</span> <span class="o">+</span> <span class="n">quick_sort</span><span class="p">(</span><span class="n">rt</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">a</span> <span class="o">=</span> <span class="o">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="o">]</span>
<span class="nb">puts</span> <span class="n">quick_sort</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1"># =&gt; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
</pre></div>
<h2><span class="mw-headline" id="Curry"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Curry" title="Category:Curry">Curry</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=44" title="Edit section: Curry">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Copied from <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/http://www.informatik.uni-kiel.de/~curry/examples/">Curry: Example Programs</a>.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>-- quicksort using higher-order functions:

qsort&#160;:: [Int] -&gt; [Int] 
qsort []     = []
qsort (x:l)  = qsort (filter (&lt;x) l) ++ x&#160;: qsort (filter (&gt;=x) l)

goal = qsort [2,3,1,0]</pre></div>
<h2><span class="mw-headline" id="D"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:D" title="Category:D">D</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=45" title="Edit section: D">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A Functional version
</p>
<div class="mw-highlight mw-highlight-lang-d mw-content-ltr" dir="ltr"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="n">stdio</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">writefln</span><span class="p">,</span><span class="w"> </span><span class="n">writeln</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="n">algorithm</span><span class="p">:</span><span class="w"> </span><span class="n">filter</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="n">array</span><span class="p">;</span><span class="w"></span>

<span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">quickSort</span><span class="p">(</span><span class="n">T</span><span class="p">)(</span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">xs</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span>
<span class="w">  </span><span class="n">xs</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">?</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">:</span><span class="w">  </span>
<span class="w">    </span><span class="n">xs</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">$].</span><span class="n">filter</span><span class="p">!(</span><span class="n">x</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">&lt;</span><span class="w"> </span><span class="n">xs</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="n">array</span><span class="p">.</span><span class="n">quickSort</span><span class="w"> </span><span class="p">~</span><span class="w">  </span>
<span class="w">    </span><span class="n">xs</span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">~</span><span class="w">  </span>
<span class="w">    </span><span class="n">xs</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">$].</span><span class="n">filter</span><span class="p">!(</span><span class="n">x</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">&gt;=</span><span class="n">xs</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="n">array</span><span class="p">.</span><span class="n">quickSort</span><span class="p">;</span><span class="w"> </span>

<span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="p">-</span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">99</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="mi">782</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">].</span><span class="n">quickSort</span><span class="p">.</span><span class="n">writeln</span><span class="p">;</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>[-31, 0, 1, 2, 2, 4, 65, 83, 99, 782]</pre>
<p>A simple high-level version (same output):
</p>
<div class="mw-highlight mw-highlight-lang-d mw-content-ltr" dir="ltr"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="n">stdio</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="n">array</span><span class="p">;</span><span class="w"></span>

<span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">quickSort</span><span class="p">(</span><span class="n">T</span><span class="p">)(</span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">items</span><span class="p">)</span><span class="w"> </span><span class="k">pure</span><span class="w"> </span><span class="k">nothrow</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">items</span><span class="p">.</span><span class="n">empty</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">items</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">less</span><span class="p">,</span><span class="w"> </span><span class="n">notLess</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="p">..</span><span class="w"> </span><span class="p">$])</span><span class="w"></span>
<span class="w">        </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">?</span><span class="w"> </span><span class="n">less</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">notLess</span><span class="p">)</span><span class="w"> </span><span class="p">~=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">less</span><span class="p">.</span><span class="n">quickSort</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">~</span><span class="w"> </span><span class="n">notLess</span><span class="p">.</span><span class="n">quickSort</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="p">-</span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">99</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="mi">782</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">].</span><span class="n">quickSort</span><span class="p">.</span><span class="n">writeln</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>Often short functional sieves are not a true implementations of the Sieve of Eratosthenes:
<a rel="nofollow" class="external free" href="https://web.archive.org/web/20230609112831/http://www.cs.hmc.edu/~oneill/papers/Sieve-JFP.pdf">http://www.cs.hmc.edu/~oneill/papers/Sieve-JFP.pdf</a>
</p><p>Similarly, one could argue that a true QuickSort is in-place, 
as this more efficient version (same output):
</p>
<div class="mw-highlight mw-highlight-lang-d mw-content-ltr" dir="ltr"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="n">stdio</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="n">algorithm</span><span class="p">;</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="n">quickSort</span><span class="p">(</span><span class="n">T</span><span class="p">)(</span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">items</span><span class="p">)</span><span class="w"> </span><span class="k">pure</span><span class="w"> </span><span class="k">nothrow</span><span class="w"> </span><span class="nd">@safe</span><span class="w"> </span><span class="nd">@nogc</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">items</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">parts</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">partition3</span><span class="p">(</span><span class="n">items</span><span class="p">,</span><span class="w"> </span><span class="n">items</span><span class="p">[$</span><span class="w"> </span><span class="p">/</span><span class="w"> </span><span class="mi">2</span><span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">quickSort</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">quickSort</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="p">-</span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">99</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="mi">782</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="n">items</span><span class="p">.</span><span class="n">quickSort</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">items</span><span class="p">.</span><span class="n">writeln</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="Delphi"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Delphi" title="Category:Delphi">Delphi</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=46" title="Edit section: Delphi">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/Delphi" class="mw-redirect" title="Delphi">Delphi</a> version 6.0</div>
<div class="examplemeta libheader"><b>Library:</b> <a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Category:SysUtils,StdCtrls&amp;action=edit&amp;redlink=1" class="new" title="Category:SysUtils,StdCtrls (page does not exist)">SysUtils,StdCtrls</a></div>
<p>This quick sort routine is infinitely versatile. It sorts an array of pointers. The advantage of this is that pointers can contain anything, ranging from integers, to strings, to floating point numbers to objects. The way each pointer is interpreted is through the compare routine, which is customized for the particular situation. The compare routine can interpret each pointer as a string, an integer, a float or an object and it can treat those items in different ways. For example, the order in which it compares strings controls whether the sort is alphabetical or reverse alphabetical. In this case, I show an integer sort, an alphabetic string sort, a reverse alphabetical string sort and a string sort by length. 
</p>
<div class="mw-highlight mw-highlight-lang-delphi mw-content-ltr" dir="ltr"><pre><span></span><span class="cm">{Dynamic array of pointers}</span>

<span class="k">type</span> <span class="n">TPointerArray</span> <span class="o">=</span> <span class="k">array</span> <span class="k">of</span> <span class="kt">Pointer</span><span class="o">;</span>

<span class="k">procedure</span> <span class="nf">QuickSort</span><span class="p">(</span><span class="n">SortList</span><span class="o">:</span> <span class="n">TPointerArray</span><span class="o">;</span> <span class="n">L</span><span class="o">,</span> <span class="n">R</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">SCompare</span><span class="o">:</span> <span class="n">TListSortCompare</span><span class="p">)</span><span class="o">;</span>
<span class="cm">{Do quick sort on items held in TPointerArray}</span>
<span class="cm">{SCompare controls how the pointers are interpreted}</span>
<span class="k">var</span> <span class="n">I</span><span class="o">,</span> <span class="n">J</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
<span class="k">var</span> <span class="n">P</span><span class="o">,</span><span class="n">T</span><span class="o">:</span> <span class="kt">Pointer</span><span class="o">;</span>
<span class="k">begin</span>
<span class="k">repeat</span>
	<span class="k">begin</span>
	<span class="n">I</span> <span class="o">:=</span> <span class="n">L</span><span class="o">;</span>
	<span class="n">J</span> <span class="o">:=</span> <span class="n">R</span><span class="o">;</span>
	<span class="n">P</span> <span class="o">:=</span> <span class="n">SortList</span><span class="p">[(</span><span class="n">L</span> <span class="o">+</span> <span class="n">R</span><span class="p">)</span> <span class="k">shr</span> <span class="mi">1</span><span class="p">]</span><span class="o">;</span>
	<span class="k">repeat</span>
		<span class="k">begin</span>
		<span class="k">while</span> <span class="n">SCompare</span><span class="p">(</span><span class="n">SortList</span><span class="p">[</span><span class="n">I</span><span class="p">]</span><span class="o">,</span> <span class="n">P</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">do</span> <span class="nb">Inc</span><span class="p">(</span><span class="n">I</span><span class="p">)</span><span class="o">;</span>
		<span class="k">while</span> <span class="n">SCompare</span><span class="p">(</span><span class="n">SortList</span><span class="p">[</span><span class="n">J</span><span class="p">]</span><span class="o">,</span> <span class="n">P</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">do</span> <span class="nb">Dec</span><span class="p">(</span><span class="n">J</span><span class="p">)</span><span class="o">;</span>
		<span class="k">if</span> <span class="n">I</span> <span class="o">&lt;=</span> <span class="n">J</span> <span class="k">then</span>
			<span class="k">begin</span>
			<span class="cm">{Exchange itesm}</span>
			<span class="n">T</span><span class="o">:=</span><span class="n">SortList</span><span class="p">[</span><span class="n">I</span><span class="p">]</span><span class="o">;</span>
			<span class="n">SortList</span><span class="p">[</span><span class="n">I</span><span class="p">]</span><span class="o">:=</span><span class="n">SortList</span><span class="p">[</span><span class="n">J</span><span class="p">]</span><span class="o">;</span>
			<span class="n">SortList</span><span class="p">[</span><span class="n">J</span><span class="p">]</span><span class="o">:=</span><span class="n">T</span><span class="o">;</span>
			<span class="k">if</span> <span class="n">P</span> <span class="o">=</span> <span class="n">SortList</span><span class="p">[</span><span class="n">I</span><span class="p">]</span> <span class="k">then</span> <span class="n">P</span> <span class="o">:=</span> <span class="n">SortList</span><span class="p">[</span><span class="n">J</span><span class="p">]</span>
			<span class="k">else</span> <span class="k">if</span> <span class="n">P</span> <span class="o">=</span> <span class="n">SortList</span><span class="p">[</span><span class="n">J</span><span class="p">]</span> <span class="k">then</span> <span class="n">P</span> <span class="o">:=</span> <span class="n">SortList</span><span class="p">[</span><span class="n">I</span><span class="p">]</span><span class="o">;</span>
			<span class="nb">Inc</span><span class="p">(</span><span class="n">I</span><span class="p">)</span><span class="o">;</span>
			<span class="nb">Dec</span><span class="p">(</span><span class="n">J</span><span class="p">)</span><span class="o">;</span>
			<span class="k">end</span><span class="o">;</span>
		<span class="k">end</span>
	<span class="k">until</span> <span class="n">I</span> <span class="o">&gt;</span> <span class="n">J</span><span class="o">;</span>
	<span class="k">if</span> <span class="n">L</span> <span class="o">&lt;</span> <span class="n">J</span> <span class="k">then</span> <span class="n">QuickSort</span><span class="p">(</span><span class="n">SortList</span><span class="o">,</span> <span class="n">L</span><span class="o">,</span> <span class="n">J</span><span class="o">,</span> <span class="n">SCompare</span><span class="p">)</span><span class="o">;</span>
	<span class="n">L</span> <span class="o">:=</span> <span class="n">I</span><span class="o">;</span>
	<span class="k">end</span>
<span class="k">until</span> <span class="n">I</span> <span class="o">&gt;=</span> <span class="n">R</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>



<span class="k">procedure</span> <span class="nf">DisplayStrings</span><span class="p">(</span><span class="n">Memo</span><span class="o">:</span> <span class="n">TMemo</span><span class="o">;</span> <span class="n">PA</span><span class="o">:</span> <span class="n">TPointerArray</span><span class="p">)</span><span class="o">;</span>
<span class="cm">{Display pointers as strings}</span>
<span class="k">var</span> <span class="n">I</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
<span class="k">var</span> <span class="n">S</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
<span class="k">begin</span>
<span class="n">S</span><span class="o">:=</span><span class="s">&#39;[&#39;</span><span class="o">;</span>
<span class="k">for</span> <span class="n">I</span><span class="o">:=</span><span class="mi">0</span> <span class="k">to</span> <span class="nb">High</span><span class="p">(</span><span class="n">PA</span><span class="p">)</span> <span class="k">do</span>
	<span class="k">begin</span>
	<span class="k">if</span> <span class="n">I</span><span class="o">&gt;</span><span class="mi">0</span> <span class="k">then</span> <span class="n">S</span><span class="o">:=</span><span class="n">S</span><span class="o">+</span><span class="s">&#39; &#39;</span><span class="o">;</span>
	<span class="n">S</span><span class="o">:=</span><span class="n">S</span><span class="o">+</span><span class="k">string</span><span class="p">(</span><span class="n">PA</span><span class="p">[</span><span class="n">I</span><span class="p">]</span><span class="o">^</span><span class="p">)</span><span class="o">;</span>
	<span class="k">end</span><span class="o">;</span>
<span class="n">S</span><span class="o">:=</span><span class="n">S</span><span class="o">+</span><span class="s">&#39;]&#39;</span><span class="o">;</span>
<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>


<span class="k">procedure</span> <span class="nf">DisplayIntegers</span><span class="p">(</span><span class="n">Memo</span><span class="o">:</span> <span class="n">TMemo</span><span class="o">;</span> <span class="n">PA</span><span class="o">:</span> <span class="n">TPointerArray</span><span class="p">)</span><span class="o">;</span>
<span class="cm">{Display pointer array as integers}</span>
<span class="k">var</span> <span class="n">I</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
<span class="k">var</span> <span class="n">S</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
<span class="k">begin</span>
<span class="n">S</span><span class="o">:=</span><span class="s">&#39;[&#39;</span><span class="o">;</span>
<span class="k">for</span> <span class="n">I</span><span class="o">:=</span><span class="mi">0</span> <span class="k">to</span> <span class="nb">High</span><span class="p">(</span><span class="n">PA</span><span class="p">)</span> <span class="k">do</span>
	<span class="k">begin</span>
	<span class="k">if</span> <span class="n">I</span><span class="o">&gt;</span><span class="mi">0</span> <span class="k">then</span> <span class="n">S</span><span class="o">:=</span><span class="n">S</span><span class="o">+</span><span class="s">&#39; &#39;</span><span class="o">;</span>
	<span class="n">S</span><span class="o">:=</span><span class="n">S</span><span class="o">+</span><span class="nb">IntToStr</span><span class="p">(</span><span class="kt">Integer</span><span class="p">(</span><span class="n">PA</span><span class="p">[</span><span class="n">I</span><span class="p">]))</span><span class="o">;</span>
	<span class="k">end</span><span class="o">;</span>
<span class="n">S</span><span class="o">:=</span><span class="n">S</span><span class="o">+</span><span class="s">&#39;]&#39;</span><span class="o">;</span>
<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>


<span class="k">function</span> <span class="nf">IntCompare</span><span class="p">(</span><span class="n">Item1</span><span class="o">,</span> <span class="n">Item2</span><span class="o">:</span> <span class="kt">Pointer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
<span class="cm">{Compare for integer sort}</span>
<span class="k">begin</span>
<span class="bp">Result</span><span class="o">:=</span><span class="kt">Integer</span><span class="p">(</span><span class="n">Item1</span><span class="p">)</span><span class="o">-</span><span class="kt">Integer</span><span class="p">(</span><span class="n">Item2</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>



<span class="k">function</span> <span class="nf">StringCompare</span><span class="p">(</span><span class="n">Item1</span><span class="o">,</span> <span class="n">Item2</span><span class="o">:</span> <span class="kt">Pointer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
<span class="cm">{Compare for alphabetical string sort}</span>
<span class="k">begin</span>
<span class="bp">Result</span><span class="o">:=</span><span class="nb">AnsiCompareText</span><span class="p">(</span><span class="k">string</span><span class="p">(</span><span class="n">Item1</span><span class="o">^</span><span class="p">)</span><span class="o">,</span><span class="k">string</span><span class="p">(</span><span class="n">Item2</span><span class="o">^</span><span class="p">))</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="k">function</span> <span class="nf">StringRevCompare</span><span class="p">(</span><span class="n">Item1</span><span class="o">,</span> <span class="n">Item2</span><span class="o">:</span> <span class="kt">Pointer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
<span class="cm">{Compare for reverse alphabetical order}</span>
<span class="k">begin</span>
<span class="bp">Result</span><span class="o">:=</span><span class="nb">AnsiCompareText</span><span class="p">(</span><span class="k">string</span><span class="p">(</span><span class="n">Item2</span><span class="o">^</span><span class="p">)</span><span class="o">,</span><span class="k">string</span><span class="p">(</span><span class="n">Item1</span><span class="o">^</span><span class="p">))</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>


<span class="k">function</span> <span class="nf">StringLenCompare</span><span class="p">(</span><span class="n">Item1</span><span class="o">,</span> <span class="n">Item2</span><span class="o">:</span> <span class="kt">Pointer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
<span class="cm">{Compare for string length sort}</span>
<span class="k">begin</span>
<span class="bp">Result</span><span class="o">:=</span><span class="nb">Length</span><span class="p">(</span><span class="k">string</span><span class="p">(</span><span class="n">Item1</span><span class="o">^</span><span class="p">))</span><span class="o">-</span><span class="nb">Length</span><span class="p">(</span><span class="k">string</span><span class="p">(</span><span class="n">Item2</span><span class="o">^</span><span class="p">))</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="cm">{Arrays of strings and integers}</span>

<span class="k">var</span> <span class="n">IA</span><span class="o">:</span> <span class="k">array</span> <span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">9</span><span class="p">]</span> <span class="k">of</span> <span class="kt">integer</span> <span class="o">=</span> <span class="p">(</span><span class="mi">23</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span> <span class="mi">62</span><span class="o">,</span> <span class="mi">28</span><span class="o">,</span> <span class="mi">56</span><span class="o">,</span> <span class="mi">91</span><span class="o">,</span> <span class="mi">33</span><span class="o">,</span> <span class="mi">30</span><span class="o">,</span> <span class="mi">75</span><span class="o">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">;</span>
<span class="k">var</span> <span class="n">SA</span><span class="o">:</span> <span class="k">array</span> <span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">15</span><span class="p">]</span> <span class="k">of</span> <span class="k">string</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Now&#39;</span><span class="o">,</span><span class="s">&#39;is&#39;</span><span class="o">,</span><span class="s">&#39;the&#39;</span><span class="o">,</span><span class="s">&#39;time&#39;</span><span class="o">,</span><span class="s">&#39;for&#39;</span><span class="o">,</span><span class="s">&#39;all&#39;</span><span class="o">,</span><span class="s">&#39;good&#39;</span><span class="o">,</span><span class="s">&#39;men&#39;</span><span class="o">,</span><span class="s">&#39;to&#39;</span><span class="o">,</span><span class="s">&#39;come&#39;</span><span class="o">,</span><span class="s">&#39;to&#39;</span><span class="o">,</span><span class="s">&#39;the&#39;</span><span class="o">,</span><span class="s">&#39;aid&#39;</span><span class="o">,</span><span class="s">&#39;of&#39;</span><span class="o">,</span><span class="s">&#39;the&#39;</span><span class="o">,</span><span class="s">&#39;party.&#39;</span><span class="p">)</span><span class="o">;</span>

<span class="k">procedure</span> <span class="nf">ShowQuickSort</span><span class="p">(</span><span class="n">Memo</span><span class="o">:</span> <span class="n">TMemo</span><span class="p">)</span><span class="o">;</span>
<span class="k">var</span> <span class="n">L</span><span class="o">:</span> <span class="n">TStringList</span><span class="o">;</span>
<span class="k">var</span> <span class="n">PA</span><span class="o">:</span> <span class="n">TPointerArray</span><span class="o">;</span>
<span class="k">var</span> <span class="n">I</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
<span class="k">begin</span>
<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;Integer Sort&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="nb">SetLength</span><span class="p">(</span><span class="n">PA</span><span class="o">,</span><span class="nb">Length</span><span class="p">(</span><span class="n">IA</span><span class="p">))</span><span class="o">;</span>
<span class="k">for</span> <span class="n">I</span><span class="o">:=</span><span class="mi">0</span> <span class="k">to</span> <span class="nb">High</span><span class="p">(</span><span class="n">IA</span><span class="p">)</span> <span class="k">do</span> <span class="n">PA</span><span class="p">[</span><span class="n">I</span><span class="p">]</span><span class="o">:=</span><span class="kt">Pointer</span><span class="p">(</span><span class="n">IA</span><span class="p">[</span><span class="n">I</span><span class="p">])</span><span class="o">;</span>
<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;Before Sorting&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">DisplayIntegers</span><span class="p">(</span><span class="n">Memo</span><span class="o">,</span><span class="n">PA</span><span class="p">)</span><span class="o">;</span>
<span class="n">QuickSort</span><span class="p">(</span><span class="n">PA</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="nb">High</span><span class="p">(</span><span class="n">PA</span><span class="p">)</span><span class="o">,</span><span class="n">IntCompare</span><span class="p">)</span><span class="o">;</span>
<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;After Sorting&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">DisplayIntegers</span><span class="p">(</span><span class="n">Memo</span><span class="o">,</span><span class="n">PA</span><span class="p">)</span><span class="o">;</span>

<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;String Sort - Alphabetical&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="nb">SetLength</span><span class="p">(</span><span class="n">PA</span><span class="o">,</span><span class="nb">Length</span><span class="p">(</span><span class="n">SA</span><span class="p">))</span><span class="o">;</span>
<span class="k">for</span> <span class="n">I</span><span class="o">:=</span><span class="mi">0</span> <span class="k">to</span> <span class="nb">High</span><span class="p">(</span><span class="n">SA</span><span class="p">)</span> <span class="k">do</span> <span class="n">PA</span><span class="p">[</span><span class="n">I</span><span class="p">]</span><span class="o">:=</span><span class="kt">Pointer</span><span class="p">(</span><span class="o">@</span><span class="n">SA</span><span class="p">[</span><span class="n">I</span><span class="p">])</span><span class="o">;</span>
<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;Before Sorting&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">DisplayStrings</span><span class="p">(</span><span class="n">Memo</span><span class="o">,</span><span class="n">PA</span><span class="p">)</span><span class="o">;</span>
<span class="n">QuickSort</span><span class="p">(</span><span class="n">PA</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="nb">High</span><span class="p">(</span><span class="n">PA</span><span class="p">)</span><span class="o">,</span><span class="n">StringCompare</span><span class="p">)</span><span class="o">;</span>
<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;After Sorting&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">DisplayStrings</span><span class="p">(</span><span class="n">Memo</span><span class="o">,</span><span class="n">PA</span><span class="p">)</span><span class="o">;</span>

<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;String Sort - Reverse Alphabetical&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">QuickSort</span><span class="p">(</span><span class="n">PA</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="nb">High</span><span class="p">(</span><span class="n">PA</span><span class="p">)</span><span class="o">,</span><span class="n">StringRevCompare</span><span class="p">)</span><span class="o">;</span>
<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;After Sorting&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">DisplayStrings</span><span class="p">(</span><span class="n">Memo</span><span class="o">,</span><span class="n">PA</span><span class="p">)</span><span class="o">;</span>

<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;String Sort - By Length&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">QuickSort</span><span class="p">(</span><span class="n">PA</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="nb">High</span><span class="p">(</span><span class="n">PA</span><span class="p">)</span><span class="o">,</span><span class="n">StringLenCompare</span><span class="p">)</span><span class="o">;</span>
<span class="n">Memo</span><span class="o">.</span><span class="n">Lines</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&#39;After Sorting&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">DisplayStrings</span><span class="p">(</span><span class="n">Memo</span><span class="o">,</span><span class="n">PA</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>Integer Sort
Before Sorting
[23 14 62 28 56 91 33 30 75 5]
After Sorting
[5 14 23 28 30 33 56 62 75 91]

String Sort - Alphabetical
Before Sorting
[Now is the time for all good men to come to the aid of the party.]
After Sorting
[aid all come for good is men Now party. of the the the time to to]

String Sort - Reverse Alphabetical
After Sorting
[to to time the the the party. of Now men is good for come all aid]

String Sort - By Length
After Sorting
[of is to to men aid all for Now the the the time come good party.]
Elapsed Time: 16.478 ms.

</pre>
<h2><span class="mw-headline" id="Dart"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Dart" title="Category:Dart">Dart</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=47" title="Edit section: Dart">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-dart mw-content-ltr" dir="ltr"><pre><span></span><span class="n">quickSort</span><span class="p">(</span><span class="n">List</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">length</span> <span class="o">&lt;=</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="kd">var</span> <span class="n">pivot</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
  <span class="kd">var</span> <span class="n">less</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">var</span> <span class="n">more</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">var</span> <span class="n">pivotList</span> <span class="o">=</span> <span class="p">[];</span>
  
  <span class="c1">// Partition</span>
  <span class="n">a</span><span class="p">.</span><span class="n">forEach</span><span class="p">((</span><span class="kd">var</span> <span class="n">i</span><span class="p">){</span>    
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">compareTo</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span> <span class="o">&lt;</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">less</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">compareTo</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">more</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">pivotList</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
  
  <span class="c1">// Recursively sort sublists</span>
  <span class="n">less</span> <span class="o">=</span> <span class="n">quickSort</span><span class="p">(</span><span class="n">less</span><span class="p">);</span>
  <span class="n">more</span> <span class="o">=</span> <span class="n">quickSort</span><span class="p">(</span><span class="n">more</span><span class="p">);</span>
  
  <span class="c1">// Concatenate results</span>
  <span class="n">less</span><span class="p">.</span><span class="n">addAll</span><span class="p">(</span><span class="n">pivotList</span><span class="p">);</span>
  <span class="n">less</span><span class="p">.</span><span class="n">addAll</span><span class="p">(</span><span class="n">more</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">less</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">arr</span><span class="o">=</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">9</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">6</span><span class="p">,</span><span class="m">8</span><span class="p">];</span>
  <span class="n">print</span><span class="p">(</span><span class="s2">&quot;Before sort&quot;</span><span class="p">);</span>
  <span class="n">arr</span><span class="p">.</span><span class="n">forEach</span><span class="p">((</span><span class="kd">var</span> <span class="n">i</span><span class="p">)</span><span class="o">=&gt;</span><span class="n">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$</span><span class="n">i</span><span class="s2">&quot;</span><span class="p">));</span>
  <span class="n">arr</span> <span class="o">=</span> <span class="n">quickSort</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="s2">&quot;After sort&quot;</span><span class="p">);</span>
  <span class="n">arr</span><span class="p">.</span><span class="n">forEach</span><span class="p">((</span><span class="kd">var</span> <span class="n">i</span><span class="p">)</span><span class="o">=&gt;</span><span class="n">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$</span><span class="n">i</span><span class="s2">&quot;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="E"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:E" title="Category:E">E</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=48" title="Edit section: E">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>def quicksort&#160;:= {

    def swap(container, ixA, ixB) {
        def temp&#160;:= container[ixA]
        container[ixA]&#160;:= container[ixB]
        container[ixB]&#160;:= temp
    }

    def partition(array, var first :int, var last :int) {
        if (last &lt;= first) { return }
  
        # Choose a pivot
        def pivot&#160;:= array[def pivotIndex&#160;:= (first + last) // 2]
  
        # Move pivot to end temporarily
        swap(array, pivotIndex, last)
  
        var swapWith&#160;:= first
  
        # Scan array except for pivot, and...
        for i in first..!last {
            if (array[i] &lt;= pivot) {   # items  the pivot
                swap(array, i, swapWith) # are moved to consecutive positions on the left
                swapWith += 1
            }
        }
  
        # Swap pivot into between-partition position.
        # Because of the swapping we know that everything before swapWith is less
        # than or equal to the pivot, and the item at swapWith (since it was not
        # swapped) is greater than the pivot, so inserting the pivot at swapWith
        # will preserve the partition.
        swap(array, swapWith, last)
        return swapWith
    }

    def quicksortR(array, first :int, last :int) {
        if (last &lt;= first) { return }
        def pivot&#160;:= partition(array, first, last)
        quicksortR(array, first, pivot - 1)
        quicksortR(array, pivot + 1, last)
    }

    def quicksort(array) { # returned from block
        quicksortR(array, 0, array.size() - 1)
    }
}</pre></div>
<h2><span class="mw-headline" id="EasyLang"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:EasyLang" title="Category:EasyLang">EasyLang</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=49" title="Edit section: EasyLang">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-text mw-content-ltr" dir="ltr"><pre><span></span>proc qsort left right . d[] .
   while left &lt; right
      # partition 
      piv = d[left]
      mid = left
      for i = left + 1 to right
         if d[i] &lt; piv
            mid += 1
            swap d[i] d[mid]
         .
      .
      swap d[left] d[mid]
      # 
      if mid &lt; (right + left) / 2
         call qsort left mid - 1 d[]
         left = mid + 1
      else
         call qsort mid + 1 right d[]
         right = mid - 1
      .
   .
.
func sort . d[] .
   call qsort 1 len d[] d[]
.
d[] = [ 29 4 72 44 55 26 27 77 92 5 ]
call sort d[]
print d[]
</pre></div>
<h2><span class="mw-headline" id="EchoLisp"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:EchoLisp" title="Category:EchoLisp">EchoLisp</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=50" title="Edit section: EchoLisp">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-scheme mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nf">lib</span> <span class="ss">&#39;list</span><span class="p">)</span> <span class="c1">;; list-partition</span>

<span class="p">(</span><span class="k">define </span><span class="nv">compare</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">;; counter</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">quicksort</span> <span class="nv">L</span> <span class="nv">compare-predicate:</span> <span class="nv">proc</span> <span class="nv">aux:</span>  <span class="p">(</span><span class="nf">part</span> <span class="nv">null</span><span class="p">))</span>
<span class="p">(</span><span class="k">if </span> <span class="p">(</span><span class="nb">&lt;= </span><span class="p">(</span><span class="nb">length </span><span class="nv">L</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">L</span>
     <span class="p">(</span><span class="nf">begin</span>
     <span class="c1">;; counting the number of comparisons</span>
     <span class="p">(</span><span class="k">set! </span><span class="nv">compare</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">compare</span> <span class="p">(</span><span class="nb">length </span><span class="p">(</span><span class="nf">rest</span> <span class="nv">L</span><span class="p">))))</span>
      <span class="c1">;; pivot = first element of list</span>
     <span class="p">(</span><span class="k">set! </span><span class="nv">part</span> <span class="p">(</span><span class="nf">list-partition</span> <span class="p">(</span><span class="nf">rest</span> <span class="nv">L</span><span class="p">)</span> <span class="nv">proc</span> <span class="p">(</span><span class="nf">first</span> <span class="nv">L</span><span class="p">)))</span>
     <span class="p">(</span><span class="nb">append </span><span class="p">(</span><span class="nf">quicksort</span> <span class="p">(</span><span class="nf">first</span> <span class="nv">part</span><span class="p">)</span> <span class="nv">proc</span> <span class="p">)</span>
            <span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="nf">first</span> <span class="nv">L</span><span class="p">))</span> 
            <span class="p">(</span><span class="nf">quicksort</span> <span class="p">(</span><span class="nf">second</span> <span class="nv">part</span><span class="p">)</span> <span class="nv">proc</span><span class="p">)))))</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<div class="mw-highlight mw-highlight-lang-scheme mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nf">shuffle</span> <span class="p">(</span><span class="nf">iota</span> <span class="mi">15</span><span class="p">))</span>
    <span class="err"></span> <span class="p">(</span><span class="mi">10</span> <span class="mi">0</span> <span class="mi">14</span> <span class="mi">11</span> <span class="mi">13</span> <span class="mi">9</span> <span class="mi">2</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">8</span> <span class="mi">1</span> <span class="mi">7</span> <span class="mi">12</span> <span class="mi">3</span> <span class="mi">6</span><span class="p">)</span>
<span class="p">(</span><span class="nf">quicksort</span> <span class="p">(</span><span class="nf">shuffle</span> <span class="p">(</span><span class="nf">iota</span> <span class="mi">15</span><span class="p">))</span> <span class="nv">&lt;</span><span class="p">)</span>
    <span class="err"></span> <span class="p">(</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span><span class="p">)</span>

<span class="c1">;; random list of numbers in [0 .. n[</span>
<span class="c1">;; count number of comparisons</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">qtest</span> <span class="p">(</span><span class="nf">n</span> <span class="mi">10000</span><span class="p">))</span>
	<span class="p">(</span><span class="k">set! </span><span class="nv">compare</span> <span class="mi">0</span><span class="p">)</span>
	<span class="p">(</span><span class="nf">quicksort</span> <span class="p">(</span><span class="nf">shuffle</span> <span class="p">(</span><span class="nf">iota</span> <span class="nv">n</span><span class="p">))</span> <span class="nv">&gt;</span><span class="p">)</span>
	<span class="p">(</span><span class="nf">writeln</span> <span class="ss">&#39;n</span> <span class="nv">n</span> <span class="ss">&#39;compare</span><span class="o">#</span> <span class="nv">compare</span> <span class="p">))</span>
	
<span class="p">(</span><span class="nf">qtest</span> <span class="mi">1000</span><span class="p">)</span>
  <span class="nv">n</span>     <span class="mi">1000</span>       <span class="nv">compare</span><span class="o">#</span>     <span class="mi">12764</span>    
<span class="p">(</span><span class="nf">qtest</span> <span class="mi">10000</span><span class="p">)</span>
  <span class="nv">n</span>     <span class="mi">10000</span>      <span class="nv">compare</span><span class="o">#</span>     <span class="mi">277868</span>    
<span class="p">(</span><span class="nf">qtest</span> <span class="mi">100000</span><span class="p">)</span>
  <span class="nv">n</span>     <span class="mi">100000</span>     <span class="nv">compare</span><span class="o">#</span>     <span class="mi">6198601</span>
</pre></div>
<h2><span class="mw-headline" id="Eero"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Eero" title="Category:Eero">Eero</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=51" title="Edit section: Eero">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Translated from Objective-C example on this page.
</p>
<div class="mw-highlight mw-highlight-lang-objc mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>

<span class="kt">void</span><span class="w"> </span><span class="n">quicksortInPlace</span><span class="p">(</span><span class="n">MutableArray</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">last</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"></span>
<span class="w">  </span><span class="n">Value</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">[(</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="nl">left</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="n">first</span><span class="w"></span>
<span class="w">  </span><span class="nl">right</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="n">last</span><span class="w"></span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">right</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="n">left</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">pivot</span><span class="w"></span>
<span class="w">      </span><span class="n">left</span><span class="o">++</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="n">right</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">pivot</span><span class="w"></span>
<span class="w">      </span><span class="n">right</span><span class="o">--</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">right</span><span class="w"></span>
<span class="w">      </span><span class="n">array</span><span class="p">.</span><span class="n">exchangeObjectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="n">left</span><span class="o">++</span><span class="p">,</span><span class="w"> </span><span class="n">withObjectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="n">right</span><span class="o">--</span><span class="w"></span>

<span class="w">  </span><span class="n">quicksortInPlace</span><span class="p">(</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="n">quicksortInPlace</span><span class="p">(</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="w"></span>

<span class="n">Array</span><span class="w"> </span><span class="n">quicksort</span><span class="p">(</span><span class="n">Array</span><span class="w"> </span><span class="n">unsorted</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="nl">a</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">  </span><span class="n">a</span><span class="p">.</span><span class="n">addObjectsFromArray</span><span class="o">:</span><span class="w"> </span><span class="n">unsorted</span><span class="w"></span>
<span class="w">  </span><span class="n">quicksortInPlace</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"></span>


<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">argv</span><span class="p">[])</span><span class="w"></span>
<span class="w">  </span><span class="n">autoreleasepool</span><span class="w"></span>
<span class="w">    </span><span class="nl">a</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="n">Log</span><span class="p">(</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Unsorted</span><span class="o">:</span><span class="w"> </span><span class="o">%</span><span class="p">@</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">Log</span><span class="p">(</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Sorted</span><span class="o">:</span><span class="w"> </span><span class="o">%</span><span class="p">@</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">quicksort</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nl">b</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="err">&#39;</span><span class="n">Emil</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Peg</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Helen</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Juergen</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">David</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Rick</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Barb</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Mike</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Tom</span><span class="err">&#39;</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="n">Log</span><span class="p">(</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Unsorted</span><span class="o">:</span><span class="w"> </span><span class="o">%</span><span class="p">@</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">Log</span><span class="p">(</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Sorted</span><span class="o">:</span><span class="w"> </span><span class="o">%</span><span class="p">@</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">quicksort</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
</pre></div>
<p>Alternative implementation (not necessarily as efficient, but very readable)
</p>
<div class="mw-highlight mw-highlight-lang-objc mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>

<span class="n">implementation</span><span class="w"> </span><span class="n">Array</span><span class="w"> </span><span class="p">(</span><span class="n">Quicksort</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="nl">plus</span><span class="p">:</span><span class="w"> </span><span class="n">Array</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">Array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span><span class="nb">self</span><span class="p">.</span><span class="n">arrayByAddingObjectsFromArray</span><span class="o">:</span><span class="w"> </span><span class="n">array</span><span class="w"></span>

<span class="w">  </span><span class="nl">filter</span><span class="p">:</span><span class="w"> </span><span class="kt">BOOL</span><span class="w"> </span><span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="kt">id</span><span class="p">)</span><span class="w"> </span><span class="n">predicate</span><span class="p">,</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">Array</span><span class="w"></span>
<span class="w">    </span><span class="nl">array</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="kt">id</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">self</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="n">predicate</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">array</span><span class="p">.</span><span class="n">addObject</span><span class="o">:</span><span class="w"> </span><span class="n">item</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="k">copy</span><span class="w"></span>

<span class="w">  </span><span class="n">quicksort</span><span class="p">,</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">Array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w">      </span>
<span class="w">      </span><span class="kt">id</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="nl">lesser</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">filter</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="kt">id</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="nl">greater</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">filter</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="kt">id</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">lesser</span><span class="p">.</span><span class="n">quicksort</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">greater</span><span class="p">.</span><span class="n">quicksort</span><span class="w"></span>

<span class="n">end</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"></span>
<span class="w">  </span><span class="n">autoreleasepool</span><span class="w"></span>
<span class="w">    </span><span class="nl">a</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="n">Log</span><span class="p">(</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Unsorted</span><span class="o">:</span><span class="w"> </span><span class="o">%</span><span class="p">@</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">Log</span><span class="p">(</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Sorted</span><span class="o">:</span><span class="w"> </span><span class="o">%</span><span class="p">@</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">quicksort</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nl">b</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="err">&#39;</span><span class="n">Emil</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Peg</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Helen</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Juergen</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">David</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Rick</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Barb</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Mike</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Tom</span><span class="err">&#39;</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="n">Log</span><span class="p">(</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Unsorted</span><span class="o">:</span><span class="w"> </span><span class="o">%</span><span class="p">@</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">Log</span><span class="p">(</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Sorted</span><span class="o">:</span><span class="w"> </span><span class="o">%</span><span class="p">@</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">quicksort</span><span class="w"> </span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>2013-09-04 16:54:31.780 a.out[2201:507] Unsorted: (
    1,
    3,
    5,
    7,
    9,
    8,
    6,
    4,
    2
)
2013-09-04 16:54:31.781 a.out[2201:507] Sorted: (
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
)
2013-09-04 16:54:31.781 a.out[2201:507] Unsorted: (
    Emil,
    Peg,
    Helen,
    Juergen,
    David,
    Rick,
    Barb,
    Mike,
    Tom
)
2013-09-04 16:54:31.782 a.out[2201:507] Sorted: (
    Barb,
    David,
    Emil,
    Helen,
    Juergen,
    Mike,
    Peg,
    Rick,
    Tom
)
</pre>
<h2><span class="mw-headline" id="Eiffel"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Eiffel" title="Category:Eiffel">Eiffel</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=52" title="Edit section: Eiffel">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
The <div class="mw-highlight mw-highlight-lang-eiffel mw-content-ltr" dir="ltr"><pre><span></span><span class="nc">QUICKSORT</span><span class="w"></span>
</pre></div> class:
<div class="mw-highlight mw-highlight-lang-eiffel mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">class</span><span class="w"></span>
<span class="w">	</span><span class="nc">QUICKSORT</span><span class="w"> </span><span class="o">[</span><span class="nc">G</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">COMPARABLE</span><span class="o">]</span><span class="w"></span>

<span class="kr">create</span><span class="w"></span>
<span class="w">	</span><span class="n">make</span><span class="w"></span>

<span class="kr">feature</span><span class="w"> </span><span class="p">{</span><span class="kr">NONE</span><span class="p">}</span><span class="w"> </span><span class="c1">--Implementation</span><span class="w"></span>

<span class="w">	</span><span class="n">is_sorted</span><span class="w"> </span><span class="p">(</span><span class="n">list</span><span class="p">:</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">G</span><span class="o">]</span><span class="p">):</span><span class="w"> </span><span class="nc">BOOLEAN</span><span class="w"></span>
<span class="w">		</span><span class="kr">require</span><span class="w"></span>
<span class="w">			</span><span class="n">not_void</span><span class="p">:</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="kc">Void</span><span class="w"></span>
<span class="w">		</span><span class="kr">local</span><span class="w"></span>
<span class="w">			</span><span class="n">i</span><span class="p">:</span><span class="w"> </span><span class="nc">INTEGER</span><span class="w"></span>
<span class="w">		</span><span class="kr">do</span><span class="w"></span>
<span class="w">			</span><span class="kc">Result</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kc">True</span><span class="w"></span>
<span class="w">			</span><span class="kr">from</span><span class="w"></span>
<span class="w">				</span><span class="n">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="n">lower</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">			</span><span class="kr">invariant</span><span class="w"></span>
<span class="w">				</span><span class="n">i</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="n">lower</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="n">upper</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">			</span><span class="kr">until</span><span class="w"></span>
<span class="w">				</span><span class="n">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="n">upper</span><span class="w"></span>
<span class="w">			</span><span class="kr">loop</span><span class="w"></span>
<span class="w">				</span><span class="kc">Result</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kc">Result</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">[</span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"></span>
<span class="w">				</span><span class="n">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">			</span><span class="kr">variant</span><span class="w"></span>
<span class="w">				</span><span class="n">list</span><span class="p">.</span><span class="n">upper</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">i</span><span class="w"></span>
<span class="w">			</span><span class="kr">end</span><span class="w"></span>
<span class="w">		</span><span class="kr">end</span><span class="w"></span>

<span class="w">	</span><span class="n">concatenate_array</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">G</span><span class="o">]</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">G</span><span class="o">]</span><span class="p">):</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">G</span><span class="o">]</span><span class="w"></span>
<span class="w">		</span><span class="kr">require</span><span class="w"></span>
<span class="w">			</span><span class="n">not_void</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="kc">Void</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="kc">Void</span><span class="w"></span>
<span class="w">		</span><span class="kr">do</span><span class="w"></span>
<span class="w">			</span><span class="kr">create</span><span class="w"> </span><span class="kc">Result</span><span class="p">.</span><span class="n">make_from_array</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"></span>
<span class="w">			</span><span class="kr">across</span><span class="w"></span>
<span class="w">				</span><span class="n">b</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">t</span><span class="w"></span>
<span class="w">			</span><span class="kr">loop</span><span class="w"></span>
<span class="w">				</span><span class="kc">Result</span><span class="p">.</span><span class="n">force</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">item</span><span class="p">,</span><span class="w"> </span><span class="kc">Result</span><span class="p">.</span><span class="n">upper</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">			</span><span class="kr">end</span><span class="w"></span>
<span class="w">		</span><span class="kr">ensure</span><span class="w"></span>
<span class="w">			</span><span class="n">same_size</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">Result</span><span class="p">.</span><span class="n">count</span><span class="w"></span>
<span class="w">		</span><span class="kr">end</span><span class="w"></span>

<span class="w">	</span><span class="n">quicksort_array</span><span class="w"> </span><span class="p">(</span><span class="n">list</span><span class="p">:</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">G</span><span class="o">]</span><span class="p">):</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">G</span><span class="o">]</span><span class="w"></span>
<span class="w">		</span><span class="kr">require</span><span class="w"></span>
<span class="w">			</span><span class="n">not_void</span><span class="p">:</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="kc">Void</span><span class="w"></span>
<span class="w">		</span><span class="kr">local</span><span class="w"></span>
<span class="w">			</span><span class="n">less_a</span><span class="p">:</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">G</span><span class="o">]</span><span class="w"></span>
<span class="w">			</span><span class="n">equal_a</span><span class="p">:</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">G</span><span class="o">]</span><span class="w"></span>
<span class="w">			</span><span class="n">more_a</span><span class="p">:</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">G</span><span class="o">]</span><span class="w"></span>
<span class="w">			</span><span class="n">pivot</span><span class="p">:</span><span class="w"> </span><span class="nc">G</span><span class="w"></span>
<span class="w">		</span><span class="kr">do</span><span class="w"></span>
<span class="w">			</span><span class="kr">create</span><span class="w"> </span><span class="n">less_a</span><span class="p">.</span><span class="n">make_empty</span><span class="w"></span>
<span class="w">			</span><span class="kr">create</span><span class="w"> </span><span class="n">more_a</span><span class="p">.</span><span class="n">make_empty</span><span class="w"></span>
<span class="w">			</span><span class="kr">create</span><span class="w"> </span><span class="n">equal_a</span><span class="p">.</span><span class="n">make_empty</span><span class="w"></span>
<span class="w">			</span><span class="kr">create</span><span class="w"> </span><span class="kc">Result</span><span class="p">.</span><span class="n">make_empty</span><span class="w"></span>
<span class="w">			</span><span class="kr">if</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kr">then</span><span class="w"></span>
<span class="w">				</span><span class="kc">Result</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">list</span><span class="w"></span>
<span class="w">			</span><span class="kr">else</span><span class="w"></span>
<span class="w">				</span><span class="n">pivot</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">[</span><span class="n">list</span><span class="p">.</span><span class="n">lower</span><span class="o">]</span><span class="w"></span>
<span class="w">				</span><span class="kr">across</span><span class="w"></span>
<span class="w">					</span><span class="n">list</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">li</span><span class="w"></span>
<span class="w">				</span><span class="kr">invariant</span><span class="w"></span>
<span class="w">					</span><span class="n">less_a</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">equal_a</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">more_a</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="n">count</span><span class="w"></span>
<span class="w">				</span><span class="kr">loop</span><span class="w"></span>
<span class="w">					</span><span class="kr">if</span><span class="w"> </span><span class="n">li</span><span class="p">.</span><span class="n">item</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="kr">then</span><span class="w"></span>
<span class="w">						</span><span class="n">less_a</span><span class="p">.</span><span class="n">force</span><span class="w"> </span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">item</span><span class="p">,</span><span class="w"> </span><span class="n">less_a</span><span class="p">.</span><span class="n">upper</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">					</span><span class="kr">elseif</span><span class="w"> </span><span class="n">li</span><span class="p">.</span><span class="n">item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="kr">then</span><span class="w"></span>
<span class="w">						</span><span class="n">equal_a</span><span class="p">.</span><span class="n">force</span><span class="w"> </span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">item</span><span class="p">,</span><span class="w"> </span><span class="n">equal_a</span><span class="p">.</span><span class="n">upper</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">					</span><span class="kr">elseif</span><span class="w"> </span><span class="n">li</span><span class="p">.</span><span class="n">item</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="kr">then</span><span class="w"></span>
<span class="w">						</span><span class="n">more_a</span><span class="p">.</span><span class="n">force</span><span class="w"> </span><span class="p">(</span><span class="n">li</span><span class="p">.</span><span class="n">item</span><span class="p">,</span><span class="w"> </span><span class="n">more_a</span><span class="p">.</span><span class="n">upper</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">					</span><span class="kr">end</span><span class="w"></span>
<span class="w">				</span><span class="kr">end</span><span class="w"></span>
<span class="w">				</span><span class="kc">Result</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">concatenate_array</span><span class="w"> </span><span class="p">(</span><span class="kc">Result</span><span class="p">,</span><span class="w"> </span><span class="n">quicksort_array</span><span class="w"> </span><span class="p">(</span><span class="n">less_a</span><span class="p">))</span><span class="w"></span>
<span class="w">				</span><span class="kc">Result</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">concatenate_array</span><span class="w"> </span><span class="p">(</span><span class="kc">Result</span><span class="p">,</span><span class="w"> </span><span class="n">equal_a</span><span class="p">)</span><span class="w"></span>
<span class="w">				</span><span class="kc">Result</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">concatenate_array</span><span class="w"> </span><span class="p">(</span><span class="kc">Result</span><span class="p">,</span><span class="w"> </span><span class="n">quicksort_array</span><span class="w"> </span><span class="p">(</span><span class="n">more_a</span><span class="p">))</span><span class="w"></span>
<span class="w">			</span><span class="kr">end</span><span class="w"></span>
<span class="w">		</span><span class="kr">ensure</span><span class="w"></span>
<span class="w">			</span><span class="n">same_size</span><span class="p">:</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">Result</span><span class="p">.</span><span class="n">count</span><span class="w"></span>
<span class="w">			</span><span class="n">sorted</span><span class="p">:</span><span class="w"> </span><span class="n">is_sorted</span><span class="w"> </span><span class="p">(</span><span class="kc">Result</span><span class="p">)</span><span class="w"></span>
<span class="w">		</span><span class="kr">end</span><span class="w"></span>

<span class="kr">feature</span><span class="w"> </span><span class="c1">-- Initialization</span><span class="w"></span>

<span class="w">	</span><span class="n">make</span><span class="w"></span>
<span class="w">		</span><span class="kr">do</span><span class="w"></span>
<span class="w">		</span><span class="kr">end</span><span class="w"></span>

<span class="w">	</span><span class="n">quicksort</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">G</span><span class="o">]</span><span class="p">):</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">G</span><span class="o">]</span><span class="w"></span>
<span class="w">		</span><span class="kr">do</span><span class="w"></span>
<span class="w">			</span><span class="kc">Result</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">quicksort_array</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"></span>
<span class="w">		</span><span class="kr">end</span><span class="w"></span>

<span class="kr">end</span><span class="w"></span>
</pre></div>
<p>A test application:
</p>
<div class="mw-highlight mw-highlight-lang-eiffel mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">class</span><span class="w"></span>
<span class="w">	</span><span class="nc">APPLICATION</span><span class="w"></span>

<span class="kr">create</span><span class="w"></span>
<span class="w">	</span><span class="n">make</span><span class="w"></span>

<span class="kr">feature</span><span class="w"> </span><span class="p">{</span><span class="kr">NONE</span><span class="p">}</span><span class="w"> </span><span class="c1">-- Initialization</span><span class="w"></span>

<span class="w">	</span><span class="n">make</span><span class="w"></span>
<span class="w">			</span><span class="c1">-- Run application.</span><span class="w"></span>
<span class="w">		</span><span class="kr">local</span><span class="w"></span>
<span class="w">			</span><span class="n">test</span><span class="p">:</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">INTEGER</span><span class="o">]</span><span class="w"></span>
<span class="w">			</span><span class="n">sorted</span><span class="p">:</span><span class="w"> </span><span class="nc">ARRAY</span><span class="w"> </span><span class="o">[</span><span class="nc">INTEGER</span><span class="o">]</span><span class="w"></span>
<span class="w">			</span><span class="n">sorter</span><span class="p">:</span><span class="w"> </span><span class="nc">QUICKSORT</span><span class="w"> </span><span class="o">[</span><span class="nc">INTEGER</span><span class="o">]</span><span class="w"></span>
<span class="w">		</span><span class="kr">do</span><span class="w"></span>
<span class="w">			</span><span class="kr">create</span><span class="w"> </span><span class="n">sorter</span><span class="p">.</span><span class="n">make</span><span class="w"></span>
<span class="w">			</span><span class="n">test</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="o">&gt;&gt;</span><span class="w"></span>
<span class="w">			</span><span class="n">sorted</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">sorter</span><span class="p">.</span><span class="n">quicksort</span><span class="w"> </span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="w"></span>
<span class="w">			</span><span class="kr">across</span><span class="w"></span>
<span class="w">				</span><span class="n">sorted</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">s</span><span class="w"></span>
<span class="w">			</span><span class="kr">loop</span><span class="w"></span>
<span class="w">				</span><span class="n">print</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">item</span><span class="p">)</span><span class="w"></span>
<span class="w">				</span><span class="n">print</span><span class="w"> </span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">			</span><span class="kr">end</span><span class="w"></span>
<span class="w">			</span><span class="n">print</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;%N&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">		</span><span class="kr">end</span><span class="w"></span>

<span class="kr">end</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="Elena"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Elena" title="Category:Elena">Elena</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=53" title="Edit section: Elena">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>ELENA 5.0&#160;:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>import extensions;
import system'routines;
import system'collections;
 
extension op
{
    quickSort()
    {
        if (self.isEmpty()) { ^ self };
 
        var pivot&#160;:= self[0];
 
        auto less&#160;:= new ArrayList();
        auto pivotList&#160;:= new ArrayList();
        auto more&#160;:= new ArrayList();
 
        self.forEach:(item)
        {
            if (item &lt; pivot)
            {
                less.append(item)
            }
            else if (item &gt; pivot) 
            {
                more.append(item)
            }
            else
            {
                pivotList.append(item)
            }
        };
 
        less&#160;:= less.quickSort();
        more&#160;:= more.quickSort();
 
        less.appendRange(pivotList);
        less.appendRange(more);
 
        ^ less
    }
}
 
public program()
{
    var list&#160;:= new int[]{3, 14, 1, 5, 9, 2, 6, 3};
 
    console.printLine("before:", list.asEnumerable());
    console.printLine("after&#160;:", list.quickSort().asEnumerable());
}</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>before:3,14,1,5,9,2,6,3
after :1,2,3,3,5,6,9,14
</pre>
<h2><span class="mw-headline" id="Elixir"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Elixir" title="Category:Elixir">Elixir</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=54" title="Edit section: Elixir">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-elixir mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Sort</span><span class="w"> </span><span class="k">do</span><span class="w"></span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">qsort</span><span class="p">([]),</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">qsort</span><span class="p">([</span><span class="n">h</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">t</span><span class="p">])</span><span class="w"> </span><span class="k">do</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="n">lesser</span><span class="p">,</span><span class="w"> </span><span class="n">greater</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">split_with</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="ni">&amp;1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">h</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="n">qsort</span><span class="p">(</span><span class="n">lesser</span><span class="p">)</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p">[</span><span class="n">h</span><span class="p">]</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">qsort</span><span class="p">(</span><span class="n">greater</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">end</span><span class="w"></span>
<span class="k">end</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="Erlang"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Erlang" title="Category:Erlang">Erlang</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=55" title="Edit section: Erlang">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>like haskell.
Used by <a href="/web/20230609112831/https://rosettacode.org/wiki/Measure_relative_performance_of_sorting_algorithms_implementations" class="mw-redirect" title="Measure relative performance of sorting algorithms implementations">Measure_relative_performance_of_sorting_algorithms_implementations</a>. If changed keep the interface or change <a href="/web/20230609112831/https://rosettacode.org/wiki/Measure_relative_performance_of_sorting_algorithms_implementations" class="mw-redirect" title="Measure relative performance of sorting algorithms implementations">Measure_relative_performance_of_sorting_algorithms_implementations</a>
</p>
<div class="mw-highlight mw-highlight-lang-erlang mw-content-ltr" dir="ltr"><pre><span></span><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="w"> </span><span class="n">quicksort</span><span class="w"> </span><span class="p">).</span><span class="w"></span>

<span class="p">-</span><span class="ni">export</span><span class="p">(</span><span class="w"> </span><span class="p">[</span><span class="n">qsort</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">).</span><span class="w"></span>

<span class="nf">qsort</span><span class="p">([])</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">[];</span><span class="w"></span>
<span class="nf">qsort</span><span class="p">([</span><span class="nv">X</span><span class="p">|</span><span class="nv">Xs</span><span class="p">])</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">   </span><span class="n">qsort</span><span class="p">([</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nv">Xs</span><span class="p">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">X</span><span class="p">])</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p">[</span><span class="nv">X</span><span class="p">]</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">qsort</span><span class="p">([</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="p">||</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nv">Xs</span><span class="p">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nv">X</span><span class="p">]).</span><span class="w"></span>
</pre></div>
<p>multi-process implementation (number processes = number of processor cores):
</p>
<div class="mw-highlight mw-highlight-lang-erlang mw-content-ltr" dir="ltr"><pre><span></span><span class="nf">quick_sort</span><span class="p">(</span><span class="nv">L</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">qs</span><span class="p">(</span><span class="nv">L</span><span class="p">,</span><span class="w"> </span><span class="nb">trunc</span><span class="p">(</span><span class="nn">math</span><span class="p">:</span><span class="nf">log2</span><span class="p">(</span><span class="nn">erlang</span><span class="p">:</span><span class="nb">system_info</span><span class="p">(</span><span class="n">schedulers</span><span class="p">)))).</span><span class="w"></span>

<span class="nf">qs</span><span class="p">([],_)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">[];</span><span class="w"></span>
<span class="nf">qs</span><span class="p">([</span><span class="nv">H</span><span class="p">|</span><span class="nv">T</span><span class="p">],</span><span class="w"> </span><span class="nv">N</span><span class="p">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="o">-&gt;</span><span class="w"> </span>
<span class="w">    </span><span class="p">{</span><span class="nv">Parent</span><span class="p">,</span><span class="w"> </span><span class="nv">Ref</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="n">make_ref</span><span class="p">()},</span><span class="w"></span>
<span class="w">    </span><span class="nb">spawn</span><span class="p">(</span><span class="k">fun</span><span class="p">()</span><span class="o">-&gt;</span><span class="w"> </span><span class="nv">Parent</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="n">l1</span><span class="p">,</span><span class="w"> </span><span class="nv">Ref</span><span class="p">,</span><span class="w"> </span><span class="n">qs</span><span class="p">([</span><span class="nv">E</span><span class="p">||</span><span class="nv">E</span><span class="o">&lt;-</span><span class="nv">T</span><span class="p">,</span><span class="w"> </span><span class="nv">E</span><span class="o">&lt;</span><span class="nv">H</span><span class="p">],</span><span class="w"> </span><span class="nv">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)}</span><span class="w"> </span><span class="k">end</span><span class="p">),</span><span class="w"> </span>
<span class="w">    </span><span class="nb">spawn</span><span class="p">(</span><span class="k">fun</span><span class="p">()</span><span class="o">-&gt;</span><span class="w"> </span><span class="nv">Parent</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="n">l2</span><span class="p">,</span><span class="w"> </span><span class="nv">Ref</span><span class="p">,</span><span class="w"> </span><span class="n">qs</span><span class="p">([</span><span class="nv">E</span><span class="p">||</span><span class="nv">E</span><span class="o">&lt;-</span><span class="nv">T</span><span class="p">,</span><span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="o">=&lt;</span><span class="w"> </span><span class="nv">E</span><span class="p">],</span><span class="w"> </span><span class="nv">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)}</span><span class="w"> </span><span class="k">end</span><span class="p">),</span><span class="w"> </span>
<span class="w">    </span><span class="p">{</span><span class="nv">L1</span><span class="p">,</span><span class="w"> </span><span class="nv">L2</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">receive_results</span><span class="p">(</span><span class="nv">Ref</span><span class="p">,</span><span class="w"> </span><span class="n">undefined</span><span class="p">,</span><span class="w"> </span><span class="n">undefined</span><span class="p">),</span><span class="w"> </span>
<span class="w">    </span><span class="nv">L1</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p">[</span><span class="nv">H</span><span class="p">]</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="nv">L2</span><span class="p">;</span><span class="w"></span>
<span class="nf">qs</span><span class="p">([</span><span class="nv">H</span><span class="p">|</span><span class="nv">T</span><span class="p">],_)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">qs</span><span class="p">([</span><span class="nv">E</span><span class="p">||</span><span class="nv">E</span><span class="o">&lt;-</span><span class="nv">T</span><span class="p">,</span><span class="w"> </span><span class="nv">E</span><span class="o">&lt;</span><span class="nv">H</span><span class="p">],</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p">[</span><span class="nv">H</span><span class="p">]</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">qs</span><span class="p">([</span><span class="nv">E</span><span class="p">||</span><span class="nv">E</span><span class="o">&lt;-</span><span class="nv">T</span><span class="p">,</span><span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="o">=&lt;</span><span class="w"> </span><span class="nv">E</span><span class="p">],</span><span class="mi">0</span><span class="p">).</span><span class="w"></span>

<span class="nf">receive_results</span><span class="p">(</span><span class="nv">Ref</span><span class="p">,</span><span class="w"> </span><span class="nv">L1</span><span class="p">,</span><span class="w"> </span><span class="nv">L2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="n">l1</span><span class="p">,</span><span class="w"> </span><span class="nv">Ref</span><span class="p">,</span><span class="w"> </span><span class="nv">L1R</span><span class="p">}</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">receive_results</span><span class="p">(</span><span class="nv">Ref</span><span class="p">,</span><span class="w"> </span><span class="nv">L1R</span><span class="p">,</span><span class="w"> </span><span class="nv">L2</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="n">l2</span><span class="p">,</span><span class="w"> </span><span class="nv">Ref</span><span class="p">,</span><span class="w"> </span><span class="nv">L2R</span><span class="p">}</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">receive_results</span><span class="p">(</span><span class="nv">Ref</span><span class="p">,</span><span class="w"> </span><span class="nv">L1</span><span class="p">,</span><span class="w"> </span><span class="nv">L2R</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="n">l1</span><span class="p">,</span><span class="w"> </span><span class="nv">Ref</span><span class="p">,</span><span class="w"> </span><span class="nv">L1R</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="nv">L1R</span><span class="p">,</span><span class="w"> </span><span class="nv">L2</span><span class="p">};</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="n">l2</span><span class="p">,</span><span class="w"> </span><span class="nv">Ref</span><span class="p">,</span><span class="w"> </span><span class="nv">L2R</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="nv">L1</span><span class="p">,</span><span class="w"> </span><span class="nv">L2R</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">after</span><span class="w"> </span><span class="mi">5000</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">receive_results</span><span class="p">(</span><span class="nv">Ref</span><span class="p">,</span><span class="w"> </span><span class="nv">L1</span><span class="p">,</span><span class="w"> </span><span class="nv">L2</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">.</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="Emacs_Lisp"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Emacs_Lisp" title="Category:Emacs Lisp">Emacs Lisp</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=56" title="Edit section: Emacs Lisp">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>Unoptimized</b>
</p>
<div class="examplemeta libheader"><b>Library:</b> <a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Category:Seq.el&amp;action=edit&amp;redlink=1" class="new" title="Category:Seq.el (page does not exist)">seq.el</a></div>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;seq</span><span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">quicksort</span> <span class="p">(</span><span class="nv">xs</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">null</span> <span class="nv">xs</span><span class="p">)</span>
      <span class="p">()</span>
    <span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">head</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">xs</span><span class="p">))</span>
           <span class="p">(</span><span class="nv">tail</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">xs</span><span class="p">))</span>
           <span class="p">(</span><span class="nv">lower-part</span> <span class="p">(</span><span class="nv">quicksort</span> <span class="p">(</span><span class="nv">seq-filter</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt;=</span> <span class="nv">x</span> <span class="nv">head</span><span class="p">))</span> <span class="nv">tail</span><span class="p">)))</span>
           <span class="p">(</span><span class="nv">higher-part</span> <span class="p">(</span><span class="nv">quicksort</span> <span class="p">(</span><span class="nv">seq-filter</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="nv">x</span> <span class="nv">head</span><span class="p">))</span> <span class="nv">tail</span><span class="p">))))</span>
      <span class="p">(</span><span class="nb">append</span> <span class="nv">lower-part</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">head</span><span class="p">)</span> <span class="nv">higher-part</span><span class="p">))))</span>
</pre></div>
<h2><span class="mw-headline" id="ERRE"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ERRE" title="Category:ERRE">ERRE</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=57" title="Edit section: ERRE">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>PROGRAM QUICKSORT_DEMO

DIM ARRAY[21]

!$DYNAMIC
DIM QSTACK[0]

!$INCLUDE="PC.LIB"

PROCEDURE QSORT(ARRAY[],START,NUM)
  FIRST=START              &#160;! initialize work variables
  LAST=START+NUM-1
  LOOP
    REPEAT
      TEMP=ARRAY[(LAST+FIRST) DIV 2] &#160;! seek midpoint
      I=FIRST
      J=LAST
      REPEAT    &#160;! reverse both &lt; and &gt; below to sort descending
      WHILE ARRAY[I]&lt;TEMP DO
        I=I+1
        END WHILE
        WHILE ARRAY[J]&gt;TEMP DO
          J=J-1
        END WHILE
        EXIT IF I&gt;J
        IF I&lt;J THEN SWAP(ARRAY[I],ARRAY[J]) END IF
        I=I+1
        J=J-1
      UNTIL NOT(I&lt;=J)
      IF I&lt;LAST THEN            &#160;! Done
         QSTACK[SP]=I           &#160;! Push I
         QSTACK[SP+1]=LAST      &#160;! Push Last
         SP=SP+2
      END IF
      LAST=J
    UNTIL NOT(FIRST&lt;LAST)

    EXIT IF SP=0
    SP=SP-2
    FIRST=QSTACK[SP]           &#160;! Pop First
    LAST=QSTACK[SP+1]          &#160;! Pop Last
  END LOOP
END PROCEDURE

BEGIN
   RANDOMIZE(TIMER)             &#160;! generate a new series each run

                                &#160;! create an array
   FOR X=1 TO 21 DO             &#160;! fill with random numbers
       ARRAY[X]=RND(1)*500      &#160;! between 0 and 500
   END FOR
   PRIMO=6                      &#160;! sort starting here
   NUM=10                       &#160;! sort this many elements
   CLS
   PRINT("Before Sorting:";TAB(31);"After sorting:")
   PRINT("===============";TAB(31);"==============")
   FOR X=1 TO 21 DO             &#160;! show them before sorting
      IF X&gt;=PRIMO AND X&lt;=PRIMO+NUM-1 THEN
         PRINT("==&gt;";)
      END IF
      PRINT(TAB(5);)
      WRITE("###.##";ARRAY[X])
   END FOR

! create a stack
!$DIM QSTACK[INT(NUM/5)+10]
   QSORT(ARRAY[],PRIMO,NUM)
!$ERASE QSTACK

   LOCATE(2,1)
   FOR X=1 TO 21 DO               &#160;! print them after sorting
      LOCATE(2+X,30)
      IF X&gt;=PRIMO AND X&lt;=PRIMO+NUM-1 THEN
         PRINT("==&gt;";)            &#160;! point to sorted items
      END IF
      LOCATE(2+X,35)
      WRITE("###.##";ARRAY[X])
   END FOR
END PROGRAM</pre></div>
<h2><span id="F.23"></span><span class="mw-headline" id="F#"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:F_Sharp" title="Category:F Sharp">F#</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=58" title="Edit section: F#">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-fsharp mw-content-ltr" dir="ltr"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="nv">rec</span><span class="w"> </span><span class="n">qsort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="w"></span>
<span class="w">    </span><span class="n">hd</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">tl</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="nv">less</span><span class="o">,</span><span class="w"> </span><span class="n">greater</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">List</span><span class="p">.</span><span class="n">partition</span><span class="w"> </span><span class="o">((&gt;=)</span><span class="w"> </span><span class="n">hd</span><span class="o">)</span><span class="w"> </span><span class="n">tl</span><span class="w"></span>
<span class="w">        </span><span class="nn">List</span><span class="p">.</span><span class="n">concat</span><span class="w"> </span><span class="o">[</span><span class="n">qsort</span><span class="w"> </span><span class="n">less</span><span class="o">;</span><span class="w"> </span><span class="o">[</span><span class="n">hd</span><span class="o">];</span><span class="w"> </span><span class="n">qsort</span><span class="w"> </span><span class="n">greater</span><span class="o">]</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="bp">[]</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="Factor"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Factor" title="Category:Factor">Factor</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=59" title="Edit section: Factor">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-factor mw-content-ltr" dir="ltr"><pre><span></span><span class="k">:</span><span class="w"> </span><span class="nf">qsort</span><span class="w"> </span><span class="nf">(</span><span class="w"> </span><span class="nv">seq</span><span class="w"> </span><span class="nf">--</span><span class="w"> </span><span class="nv">seq</span><span class="w"> </span><span class="nf">)</span><span class="w"></span>
<span class="w">    </span><span class="nb">dup</span><span class="w"> </span><span class="nb">empty?</span><span class="w"> </span>[<span class="w"> </span>
<span class="w">      </span><span class="nb">unclip</span><span class="w"> </span>[<span class="w"> </span>[<span class="w"> </span><span class="nb">&lt;</span><span class="w"> </span>]<span class="w"> </span><span class="nb">curry</span><span class="w"> </span><span class="nb">partition</span><span class="w"> </span>[<span class="w"> </span>qsort<span class="w"> </span>]<span class="w"> </span><span class="nb">bi@</span><span class="w"> </span>]<span class="w"> </span><span class="nb">keep</span><span class="w"></span>
<span class="w">      </span><span class="nb">prefix</span><span class="w"> </span><span class="nb">append</span><span class="w"></span>
<span class="w">    </span>]<span class="w"> </span><span class="nb">unless</span><span class="w"> </span><span class="k">;</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="Fe"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Fe" title="Category:Fe">Fe</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=60" title="Edit section: Fe">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-clojure mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">; utility for list joining</span>
<span class="p">(</span><span class="nb">= join </span><span class="p">(</span><span class="k">fn </span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">is</span> <span class="nv">a</span> <span class="nv">nil</span><span class="p">)</span> <span class="nv">b</span> <span class="p">(</span><span class="nf">is</span> <span class="nv">b</span> <span class="nv">nil</span><span class="p">)</span> <span class="nv">a</span> <span class="p">(</span><span class="nf">do</span>
    <span class="p">(</span><span class="k">let </span><span class="nv">res</span> <span class="nv">a</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">while</span> <span class="p">(</span><span class="nf">cdr</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nb">= </span><span class="nv">a</span> <span class="p">(</span><span class="nf">cdr</span> <span class="nv">a</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">setcdr</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span>
    <span class="nv">res</span><span class="p">))))</span>

<span class="p">(</span><span class="nb">= </span><span class="nv">quicksort</span> <span class="p">(</span><span class="k">fn </span><span class="p">(</span><span class="nf">lst</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nf">cdr</span> <span class="nv">lst</span><span class="p">))</span> <span class="nv">lst</span> <span class="p">(</span><span class="nf">do</span>
    <span class="p">(</span><span class="k">let </span><span class="nv">pivot</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">lst</span><span class="p">))</span>
    <span class="p">(</span><span class="k">let </span><span class="nv">less</span> <span class="nv">nil</span><span class="p">)</span>
    <span class="p">(</span><span class="k">let </span><span class="nv">equal</span> <span class="nv">nil</span><span class="p">)</span>
    <span class="p">(</span><span class="k">let </span><span class="nv">greater</span> <span class="nv">nil</span><span class="p">)</span>
    <span class="c1">; filter list for less than pivot, equal to pivot and greater than pivot</span>
    <span class="p">(</span><span class="nf">while</span> <span class="nv">lst</span>
      <span class="p">(</span><span class="k">let </span><span class="nv">x</span> <span class="p">(</span><span class="nf">car</span> <span class="nv">lst</span><span class="p">))</span>
      <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&lt; </span><span class="nv">x</span> <span class="nv">pivot</span><span class="p">)</span> <span class="p">(</span><span class="nb">= </span><span class="nv">less</span> <span class="p">(</span><span class="nb">cons </span><span class="nv">x</span> <span class="nv">less</span><span class="p">))</span>
          <span class="p">(</span><span class="nb">&lt; </span><span class="nv">pivot</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">= </span><span class="nv">greater</span> <span class="p">(</span><span class="nb">cons </span><span class="nv">x</span> <span class="nv">greater</span><span class="p">))</span>
          <span class="p">(</span><span class="nb">= </span><span class="nv">equal</span> <span class="p">(</span><span class="nb">cons </span><span class="nv">x</span> <span class="nv">equal</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">= </span><span class="nv">lst</span> <span class="p">(</span><span class="nf">cdr</span> <span class="nv">lst</span><span class="p">)))</span>
    <span class="c1">; sort &#39;less&#39; and &#39;greater&#39; partitions (&#39;equal&#39; partition is always sorted)</span>
    <span class="p">(</span><span class="nb">= </span><span class="nv">less</span> <span class="p">(</span><span class="nf">quicksort</span> <span class="nv">less</span><span class="p">))</span>
    <span class="p">(</span><span class="nb">= </span><span class="nv">greater</span> <span class="p">(</span><span class="nf">quicksort</span> <span class="nv">greater</span><span class="p">))</span>
    <span class="c1">; join partitions to one</span>
    <span class="p">(</span><span class="nb">join </span><span class="nv">less</span> <span class="p">(</span><span class="nb">join </span><span class="nv">equal</span> <span class="nv">greater</span><span class="p">))))))</span>

<span class="p">(</span><span class="nb">print </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">4</span> <span class="mi">65</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">-31</span> <span class="mi">99</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">83</span> <span class="mi">782</span> <span class="mi">1</span><span class="p">))</span>
<span class="p">(</span><span class="nb">print </span><span class="p">(</span><span class="nf">quicksort</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">4</span> <span class="mi">65</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">-31</span> <span class="mi">99</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">83</span> <span class="mi">782</span> <span class="mi">1</span><span class="p">)))</span>
</pre></div>
<p>Outputs:
</p>
<div class="mw-highlight mw-highlight-lang-clojure mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="mi">4</span> <span class="mi">65</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">-31</span> <span class="mi">99</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">83</span> <span class="mi">782</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="mi">-31</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">65</span> <span class="mi">83</span> <span class="mi">99</span> <span class="mi">782</span><span class="p">)</span>
</pre></div>
<h2><span class="mw-headline" id="Fexl"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Fexl" title="Category:Fexl">Fexl</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=61" title="Edit section: Fexl">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre># (sort xs) is the ordered list of all elements in list xs.
# This version preserves duplicates.
\sort== 
    (\xs
    xs [] \x\xs
    append (sort; filter (gt x) xs);   # all the items less than x
    cons x; append (filter (eq x) xs); # all the items equal to x
    sort; filter (lt x) xs             # all the items greater than x
    )

# (unique xs) is the ordered list of unique elements in list xs.
\unique==
    (\xs
    xs [] \x\xs
    append (unique; filter (gt x) xs); # all the items less than x
    cons x;                            # x itself
    unique; filter (lt x) xs           # all the items greater than x
    )</pre></div>
<h2><span class="mw-headline" id="Forth"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Forth" title="Category:Forth">Forth</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=62" title="Edit section: Forth">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-forth mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">:</span><span class="w"> </span><span class="nc">mid</span><span class="w"> </span><span class="c1">( l r -- mid )</span><span class="w"> </span><span class="k">over</span><span class="w"> </span><span class="k">-</span><span class="w"> </span><span class="k">2/</span><span class="w"> </span><span class="nf">-cell</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">+</span><span class="w"> </span><span class="k">;</span><span class="w"></span>

<span class="kn">:</span><span class="w"> </span><span class="nc">exch</span><span class="w"> </span><span class="c1">( addr1 addr2 -- )</span><span class="w"> </span><span class="k">dup</span><span class="w"> </span><span class="k">@</span><span class="w"> </span><span class="k">&gt;r</span><span class="w"> </span><span class="k">over</span><span class="w"> </span><span class="k">@</span><span class="w"> </span><span class="k">swap</span><span class="w"> </span><span class="k">!</span><span class="w"> </span><span class="k">r&gt;</span><span class="w"> </span><span class="k">swap</span><span class="w"> </span><span class="k">!</span><span class="w"> </span><span class="k">;</span><span class="w"></span>

<span class="kn">:</span><span class="w"> </span><span class="nc">partition</span><span class="w"> </span><span class="c1">( l r -- l r r2 l2 )</span><span class="w"></span>
<span class="w">  </span><span class="k">2dup</span><span class="w"> </span><span class="nf">mid</span><span class="w"> </span><span class="k">@</span><span class="w"> </span><span class="k">&gt;r</span><span class="w"> </span><span class="c1">( r: pivot )</span><span class="w"></span>
<span class="w">  </span><span class="k">2dup</span><span class="w"> </span><span class="k">begin</span><span class="w"></span>
<span class="w">    </span><span class="k">swap</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span><span class="k">dup</span><span class="w"> </span><span class="k">@</span><span class="w">  </span><span class="k">r@</span><span class="w"> </span><span class="k">&lt;</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="k">cell+</span><span class="w"> </span><span class="k">repeat</span><span class="w"></span>
<span class="w">    </span><span class="k">swap</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span><span class="k">r@</span><span class="w"> </span><span class="k">over</span><span class="w"> </span><span class="k">@</span><span class="w"> </span><span class="k">&lt;</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nf">cell-</span><span class="w"> </span><span class="k">repeat</span><span class="w"></span>
<span class="w">    </span><span class="k">2dup</span><span class="w"> </span><span class="nf">&lt;=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">2dup</span><span class="w"> </span><span class="nf">exch</span><span class="w"> </span><span class="k">&gt;r</span><span class="w"> </span><span class="k">cell+</span><span class="w"> </span><span class="k">r&gt;</span><span class="w"> </span><span class="nf">cell-</span><span class="w"> </span><span class="k">then</span><span class="w"></span>
<span class="w">  </span><span class="k">2dup</span><span class="w"> </span><span class="k">&gt;</span><span class="w"> </span><span class="k">until</span><span class="w">  </span><span class="k">r&gt;</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">;</span><span class="w"></span>

<span class="kn">:</span><span class="w"> </span><span class="nc">qsort</span><span class="w"> </span><span class="c1">( l r -- )</span><span class="w"></span>
<span class="w">  </span><span class="nf">partition</span><span class="w">  </span><span class="k">swap</span><span class="w"> </span><span class="k">rot</span><span class="w"></span>
<span class="w">  </span><span class="c1">\ 2over 2over - + &lt; if 2swap then</span><span class="w"></span>
<span class="w">  </span><span class="k">2dup</span><span class="w"> </span><span class="k">&lt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">recurse</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">2drop</span><span class="w"> </span><span class="k">then</span><span class="w"></span>
<span class="w">  </span><span class="k">2dup</span><span class="w"> </span><span class="k">&lt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">recurse</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">2drop</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">;</span><span class="w"></span>

<span class="kn">:</span><span class="w"> </span><span class="nc">sort</span><span class="w"> </span><span class="c1">( array len -- )</span><span class="w"></span>
<span class="w">  </span><span class="k">dup</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">&lt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">2drop</span><span class="w"> </span><span class="k">exit</span><span class="w"> </span><span class="k">then</span><span class="w"></span>
<span class="w">  </span><span class="k">1-</span><span class="w"> </span><span class="k">cells</span><span class="w"> </span><span class="k">over</span><span class="w"> </span><span class="k">+</span><span class="w"> </span><span class="nf">qsort</span><span class="w"> </span><span class="k">;</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="Fortran"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Fortran" title="Category:Fortran">Fortran</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=63" title="Edit section: Fortran">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/Fortran" class="mw-redirect" title="Fortran">Fortran</a> version 90 and later</div>
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="k">MODULE </span><span class="n">qsort_mod</span><span class="w"></span>

<span class="w">  </span><span class="k">IMPLICIT NONE</span>

<span class="k">  TYPE </span><span class="n">group</span><span class="w"></span>
<span class="w">     </span><span class="kt">INTEGER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">order</span><span class="w">    </span><span class="c">! original order of unsorted data</span>
<span class="w">     </span><span class="kt">REAL</span><span class="w">    </span><span class="kd">::</span><span class="w"> </span><span class="k">VALUE</span><span class="w">    </span><span class="c">! values to be sorted by</span>
<span class="w">  </span><span class="k">END TYPE </span><span class="n">group</span><span class="w"></span>

<span class="k">CONTAINS</span>

<span class="k">  RECURSIVE SUBROUTINE </span><span class="n">QSort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">na</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="c">! DUMMY ARGUMENTS</span>
<span class="w">    </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">nA</span><span class="w"></span>
<span class="w">    </span><span class="k">TYPE</span><span class="w"> </span><span class="p">(</span><span class="n">group</span><span class="p">),</span><span class="w"> </span><span class="k">DIMENSION</span><span class="p">(</span><span class="n">nA</span><span class="p">),</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="n">out</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">A</span><span class="w"></span>

<span class="w">    </span><span class="c">! LOCAL VARIABLES</span>
<span class="w">    </span><span class="kt">INTEGER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="w"></span>
<span class="w">    </span><span class="kt">REAL</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">random</span><span class="w"></span>
<span class="w">    </span><span class="kt">REAL</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">pivot</span><span class="w"></span>
<span class="w">    </span><span class="k">TYPE</span><span class="w"> </span><span class="p">(</span><span class="n">group</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">temp</span><span class="w"></span>
<span class="w">    </span><span class="kt">INTEGER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">marker</span><span class="w"></span>

<span class="w">    </span><span class="k">IF</span><span class="w"> </span><span class="p">(</span><span class="n">nA</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">THEN</span>

<span class="k">       CALL </span><span class="nb">random_NUMBER</span><span class="p">(</span><span class="n">random</span><span class="p">)</span><span class="w"></span>
<span class="w">       </span><span class="n">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">(</span><span class="nb">INT</span><span class="p">(</span><span class="n">random</span><span class="o">*</span><span class="kt">REAL</span><span class="p">(</span><span class="n">nA</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">+</span><span class="mi">1</span><span class="p">)%</span><span class="k">VALUE</span><span class="w">   </span><span class="c">! Choice a random pivot (not best performance, but avoids worst-case)</span>
<span class="w">       </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">       </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nA</span><span class="w"></span>
<span class="w">       </span><span class="c">! Partition loop</span>
<span class="w">       </span><span class="k">DO</span>
<span class="k">          IF</span><span class="w"> </span><span class="p">(</span><span class="n">left</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="k">EXIT</span>
<span class="k">          DO</span>
<span class="k">             IF</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="p">(</span><span class="n">right</span><span class="p">)%</span><span class="k">VALUE</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">pivot</span><span class="p">)</span><span class="w"> </span><span class="k">EXIT</span>
<span class="k">             </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">          </span><span class="k">END DO</span>
<span class="k">          DO</span>
<span class="k">             IF</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="p">(</span><span class="n">left</span><span class="p">)%</span><span class="k">VALUE</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">pivot</span><span class="p">)</span><span class="w"> </span><span class="k">EXIT</span>
<span class="k">             </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">          </span><span class="k">END DO</span>
<span class="k">          IF</span><span class="w"> </span><span class="p">(</span><span class="n">left</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="k">THEN</span>
<span class="k">             </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">(</span><span class="n">left</span><span class="p">)</span><span class="w"></span>
<span class="w">             </span><span class="n">A</span><span class="p">(</span><span class="n">left</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">(</span><span class="n">right</span><span class="p">)</span><span class="w"></span>
<span class="w">             </span><span class="n">A</span><span class="p">(</span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="w"></span>
<span class="w">          </span><span class="k">END IF</span>
<span class="k">       END DO</span>

<span class="k">       IF</span><span class="w"> </span><span class="p">(</span><span class="n">left</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="k">THEN</span>
<span class="k">          </span><span class="n">marker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">       </span><span class="k">ELSE</span>
<span class="k">          </span><span class="n">marker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">left</span><span class="w"></span>
<span class="w">       </span><span class="k">END IF</span>

<span class="k">       CALL </span><span class="n">QSort</span><span class="p">(</span><span class="n">A</span><span class="p">(:</span><span class="n">marker</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="n">marker</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">       </span><span class="k">CALL </span><span class="n">QSort</span><span class="p">(</span><span class="n">A</span><span class="p">(</span><span class="n">marker</span><span class="p">:),</span><span class="n">nA</span><span class="o">-</span><span class="n">marker</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="k">END IF</span>

<span class="k">  END SUBROUTINE </span><span class="n">QSort</span><span class="w"></span>

<span class="k">END MODULE </span><span class="n">qsort_mod</span><span class="w"></span>
<span class="w">     </span>
<span class="c">! Test Qsort Module</span>
<span class="k">PROGRAM </span><span class="n">qsort_test</span><span class="w"></span>
<span class="w">  </span><span class="k">USE </span><span class="n">qsort_mod</span><span class="w"></span>
<span class="w">  </span><span class="k">IMPLICIT NONE</span>

<span class="k">  </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">PARAMETER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">nl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">nc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nc</span><span class="o">*</span><span class="n">nl</span><span class="p">,</span><span class="w"> </span><span class="n">ns</span><span class="o">=</span><span class="mi">33</span><span class="w"></span>
<span class="w">  </span><span class="k">TYPE</span><span class="w"> </span><span class="p">(</span><span class="n">group</span><span class="p">),</span><span class="w"> </span><span class="k">DIMENSION</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">A</span><span class="w"></span>
<span class="w">  </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">DIMENSION</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">seed</span><span class="w"></span>
<span class="w">  </span><span class="kt">INTEGER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">i</span><span class="w"></span>
<span class="w">  </span><span class="kt">REAL</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">random</span><span class="w"></span>
<span class="w">  </span><span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">LEN</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">fmt1</span><span class="p">,</span><span class="w"> </span><span class="n">fmt2</span><span class="w"></span>
<span class="w">  </span><span class="c">! Using the Fibonacci sequence to initialize seed:</span>
<span class="w">  </span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">seed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">  </span><span class="k">DO </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="n">ns</span><span class="w"></span>
<span class="w">     </span><span class="n">seed</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seed</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="n">seed</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">END DO</span><span class="w"></span>
<span class="w">  </span><span class="c">! Formats of the outputs</span>
<span class="w">  </span><span class="k">WRITE</span><span class="p">(</span><span class="n">fmt1</span><span class="p">,</span><span class="s1">&#39;(A,I2,A)&#39;</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;(&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">nc</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;(I5,2X,F6.2))&#39;</span><span class="w"></span>
<span class="w">  </span><span class="k">WRITE</span><span class="p">(</span><span class="n">fmt2</span><span class="p">,</span><span class="s1">&#39;(A,I2,A)&#39;</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;(3x&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">nc</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;(&quot;Ord.  Num.&quot;,3x))&#39;</span><span class="w"> </span>
<span class="w">  </span><span class="k">PRINT</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Unsorted Values:&quot;</span><span class="w"></span>
<span class="w">  </span><span class="k">PRINT </span><span class="n">fmt2</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">CALL </span><span class="nb">random_SEED</span><span class="p">(</span><span class="n">put</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seed</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">DO </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="w"></span>
<span class="w">     </span><span class="k">CALL </span><span class="nb">random_NUMBER</span><span class="p">(</span><span class="n">random</span><span class="p">)</span><span class="w"></span>
<span class="w">     </span><span class="n">A</span><span class="p">(</span><span class="n">i</span><span class="p">)%</span><span class="k">VALUE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NINT</span><span class="p">(</span><span class="mi">1000</span><span class="o">*</span><span class="n">random</span><span class="p">)</span><span class="o">/</span><span class="mi">1</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">     </span><span class="n">A</span><span class="p">(</span><span class="n">i</span><span class="p">)%</span><span class="n">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"></span>
<span class="w">     </span><span class="k">IF</span><span class="w"> </span><span class="p">(</span><span class="nb">MOD</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">nc</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">WRITE</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="n">fmt1</span><span class="p">)</span><span class="w"> </span><span class="n">A</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="n">nc</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">END DO</span>
<span class="k">  PRINT</span><span class="w"> </span><span class="o">*</span><span class="w"></span>
<span class="w">  </span><span class="k">CALL </span><span class="n">QSort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">l</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">PRINT</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Sorted Values:&quot;</span><span class="w"></span>
<span class="w">  </span><span class="k">PRINT </span><span class="n">fmt2</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">DO </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nc</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">nc</span><span class="w"></span>
<span class="w">     </span><span class="k">IF</span><span class="w"> </span><span class="p">(</span><span class="nb">MOD</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">nc</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">WRITE</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="n">fmt1</span><span class="p">)</span><span class="w"> </span><span class="n">A</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="n">nc</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">END DO</span>
<span class="k">  STOP</span>
<span class="k">END PROGRAM </span><span class="n">qsort_test</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>Compiled with GNU Fortran 9.3.0 
 Unsorted Values:
   Ord.  Num.   Ord.  Num.   Ord.  Num.   Ord.  Num.   Ord.  Num.
    1   47.10    2   11.70    3   35.80    4   35.20    5   55.30
    6   74.60    7   28.40    8   30.10    9   70.60   10   66.90
   11   15.90   12   71.70   13   49.80   14    2.60   15   12.80
   16   93.00   17   45.20   18   21.50   19   20.70   20   39.50
   21    9.20   22   21.60   23   18.60   24   22.80   25   98.50
   26   97.50   27   43.90   28    8.30   29   84.10   30   88.80
   31   10.30   32   30.50   33   79.30   34   24.40   35   45.00
   36   48.30   37   69.80   38   86.00   39   68.40   40   22.90
   41    7.50   42   18.50   43   80.40   44   29.60   45   43.60
   46   11.20   47   36.20   48   23.20   49   45.30   50   12.30

 Sorted Values:
   Ord.  Num.   Ord.  Num.   Ord.  Num.   Ord.  Num.   Ord.  Num.
   14    2.60   41    7.50   28    8.30   21    9.20   31   10.30
   46   11.20    2   11.70   50   12.30   15   12.80   11   15.90
   42   18.50   23   18.60   19   20.70   18   21.50   22   21.60
   24   22.80   40   22.90   48   23.20   34   24.40    7   28.40
   44   29.60    8   30.10   32   30.50    4   35.20    3   35.80
   47   36.20   20   39.50   45   43.60   27   43.90   35   45.00
   17   45.20   49   45.30    1   47.10   36   48.30   13   49.80
    5   55.30   10   66.90   39   68.40   37   69.80    9   70.60
   12   71.70    6   74.60   33   79.30   43   80.40   29   84.10
   38   86.00   30   88.80   16   93.00   26   97.50   25   98.50
</pre>
<p>A discussion about Quicksort pivot options, free source code for an optimized quicksort using insertion sort as a finisher, and an OpenMP multi-threaded quicksort is found at <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/http://balfortran.org/">balfortran.org</a>
</p>
<h2><span class="mw-headline" id="FreeBASIC"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:FreeBASIC" title="Category:FreeBASIC">FreeBASIC</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=64" title="Edit section: FreeBASIC">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-basic mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">&#39; version 23-10-2016</span>
<span class="c1">&#39; compile with: fbc -s console</span>

<span class="c1">&#39; sort from lower bound to the highter bound</span>
<span class="c1">&#39; array&#39;s can have subscript range from -2147483648 to +2147483647</span>

<span class="vg">Sub</span><span class="w"> </span><span class="vg">quicksort</span><span class="p">(</span><span class="vg">qs</span><span class="p">()</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">Long</span><span class="p">,</span><span class="w"> </span><span class="vg">l</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">Long</span><span class="p">,</span><span class="w"> </span><span class="vg">r</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">Long</span><span class="p">)</span>

<span class="w">    </span><span class="vg">Dim</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">ULong</span><span class="w"> </span><span class="vg">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">r</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">l</span><span class="w"> </span><span class="o">+</span><span class="il">1</span>
<span class="w">    </span><span class="vg">If</span><span class="w"> </span><span class="vg">size</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="vg">Then</span><span class="w"> </span><span class="vg">Exit</span><span class="w"> </span><span class="vg">Sub</span>

<span class="w">    </span><span class="vg">Dim</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">Long</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">l</span><span class="p">,</span><span class="w"> </span><span class="vg">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">r</span>
<span class="w">    </span><span class="vg">Dim</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">Long</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">qs</span><span class="p">(</span><span class="vg">l</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">size</span><span class="w"> </span><span class="o">\</span><span class="w"> </span><span class="il">2</span><span class="p">)</span>

<span class="w">    </span><span class="vg">Do</span>
<span class="w">        </span><span class="vg">While</span><span class="w"> </span><span class="vg">qs</span><span class="p">(</span><span class="vg">i</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">pivot</span>
<span class="w">            </span><span class="vg">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="il">1</span>
<span class="w">        </span><span class="vg">Wend</span>
<span class="w">        </span><span class="vg">While</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">qs</span><span class="p">(</span><span class="vg">j</span><span class="p">)</span>
<span class="w">            </span><span class="vg">j</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="il">1</span>
<span class="w">        </span><span class="vg">Wend</span>
<span class="w">        </span><span class="vg">If</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="vg">j</span><span class="w"> </span><span class="vg">Then</span>
<span class="w">            </span><span class="vg">Swap</span><span class="w"> </span><span class="vg">qs</span><span class="p">(</span><span class="vg">i</span><span class="p">),</span><span class="w"> </span><span class="vg">qs</span><span class="p">(</span><span class="vg">j</span><span class="p">)</span>
<span class="w">            </span><span class="vg">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="il">1</span>
<span class="w">            </span><span class="vg">j</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="il">1</span>
<span class="w">        </span><span class="vg">End</span><span class="w"> </span><span class="vg">If</span>
<span class="w">    </span><span class="vg">Loop</span><span class="w"> </span><span class="vg">Until</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">j</span>

<span class="w">    </span><span class="vg">If</span><span class="w"> </span><span class="vg">l</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">j</span><span class="w"> </span><span class="vg">Then</span><span class="w"> </span><span class="vg">quicksort</span><span class="p">(</span><span class="vg">qs</span><span class="p">(),</span><span class="w"> </span><span class="vg">l</span><span class="p">,</span><span class="w"> </span><span class="vg">j</span><span class="p">)</span>
<span class="w">    </span><span class="vg">If</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">r</span><span class="w"> </span><span class="vg">Then</span><span class="w"> </span><span class="vg">quicksort</span><span class="p">(</span><span class="vg">qs</span><span class="p">(),</span><span class="w"> </span><span class="vg">i</span><span class="p">,</span><span class="w"> </span><span class="vg">r</span><span class="p">)</span>

<span class="vg">End</span><span class="w"> </span><span class="vg">Sub</span>

<span class="c1">&#39; ------=&lt; MAIN &gt;=------</span>

<span class="vg">Dim</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">Long</span><span class="w"> </span><span class="vg">i</span><span class="p">,</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="il">-7</span><span class="w"> </span><span class="vg">To</span><span class="w"> </span><span class="il">7</span><span class="p">)</span>
<span class="vg">Dim</span><span class="w"> </span><span class="vg">As</span><span class="w"> </span><span class="vg">Long</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">LBound</span><span class="p">(</span><span class="vg">array</span><span class="p">),</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">UBound</span><span class="p">(</span><span class="vg">array</span><span class="p">)</span>

<span class="vg">Randomize</span><span class="w"> </span><span class="vg">Timer</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">To</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="vg">i</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">i</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="vg">Next</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">To</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="c1">&#39; little shuffle</span>
<span class="w">    </span><span class="vg">Swap</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="vg">i</span><span class="p">),</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="vg">Int</span><span class="p">(</span><span class="vg">Rnd</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="vg">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="o">+</span><span class="il">1</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">a</span><span class="p">)</span>
<span class="vg">Next</span>

<span class="vg">Print</span><span class="w"> </span><span class="s2">&quot;unsorted &quot;</span><span class="p">;</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">To</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="vg">Print</span><span class="w"> </span><span class="vg">Using</span><span class="w"> </span><span class="s2">&quot;####&quot;</span><span class="p">;</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="vg">i</span><span class="p">);</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="vg">Next</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="vg">Print</span>

<span class="vg">quicksort</span><span class="p">(</span><span class="vg">array</span><span class="p">(),</span><span class="w"> </span><span class="vg">LBound</span><span class="p">(</span><span class="vg">array</span><span class="p">),</span><span class="w"> </span><span class="vg">UBound</span><span class="p">(</span><span class="vg">array</span><span class="p">))</span>

<span class="vg">Print</span><span class="w"> </span><span class="s2">&quot;  sorted &quot;</span><span class="p">;</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">To</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="vg">Print</span><span class="w"> </span><span class="vg">Using</span><span class="w"> </span><span class="s2">&quot;####&quot;</span><span class="p">;</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="vg">i</span><span class="p">);</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="vg">Next</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="vg">Print</span>

<span class="c1">&#39; empty keyboard buffer</span>
<span class="vg">While</span><span class="w"> </span><span class="vg">Inkey</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="vg">Wend</span>
<span class="vg">Print</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="vg">Print</span><span class="w"> </span><span class="s2">&quot;hit any key to end program&quot;</span>
<span class="vg">Sleep</span>
<span class="vg">End</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>unsorted   -5  -6  -1   0   2  -4  -7   6  -2  -3   4   7   5   1   3
  sorted   -7  -6  -5  -4  -3  -2  -1   0   1   2   3   4   5   6   7</pre>
<h2><span class="mw-headline" id="FunL"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:FunL" title="Category:FunL">FunL</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=65" title="Edit section: FunL">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>def
  qsort( [] )    =  []
  qsort( p:xs )  =  qsort( xs.filter((&lt; p)) ) + [p] + qsort( xs.filter((&gt;= p)) )</pre></div>
<p>Here is a more efficient version using the <code>partition</code> function.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>def
  qsort( [] )    =  []
  qsort( x:xs )  =
    val (ys, zs) = xs.partition( (&lt; x) )
    qsort( ys ) + (x&#160;: qsort( zs ))

println( qsort([4, 2, 1, 3, 0, 2]) )
println( qsort(["Juan", "Daniel", "Miguel", "William", "Liam", "Ethan", "Jacob"]) )</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>[0, 1, 2, 2, 3, 4]
[Daniel, Ethan, Jacob, Juan, Liam, Miguel, William]
</pre>
<p><br/>
</p>
<h2><span class="mw-headline" id="FutureBasic"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:FutureBasic" title="Category:FutureBasic">FutureBasic</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=66" title="Edit section: FutureBasic">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>include "NSLog.incl"

local fn Quicksort( qs as CFMutableArrayRef, l as NSInteger, r as NSInteger )
  UInt64 size = r - l + 1
  
  if size &lt; 2 then exit fn
  
  NSinteger i = l, j = r
  NSinteger pivot = fn NumberIntegerValue( qs[l+size / 2] )
  
  do
    while fn NumberIntegerValue( qs[i] ) &lt; pivot
      i++
    wend
    while pivot &lt; fn NumberIntegerValue( qs[j] )
      j--
    wend
    if ( i &lt;= j )
      MutableArrayExchangeObjects( qs, i, j )
      i++
      j--
    end if
  until i &gt; j
  
  if l &lt; j then fn Quicksort( qs, l, j )
  if i &lt; r then fn Quicksort( qs, i, r )
end fn

CFMutableArrayRef qs
CFArrayRef        unsorted
NSUInteger        i, amount

qs = fn MutableArrayWithCapacity(0)

for i = 0 to 25
  if i mod 2 == 0 then amount = 100 else amount = 10000
  MutableArrayInsertObjectAtIndex( qs, fn NumberWithInteger( rnd(amount) ), i )
next

unsorted = fn ArrayWithArray( qs )

fn QuickSort( qs, 0, len(qs) - 1  )

NSLog( @"\n-----------------\nUnsorted&#160;: Sorted\n-----------------" )
for i = 0 to 25
  NSLog( @"%8ld&#160;:&#160;%-8ld", fn NumberIntegerValue( unsorted[i] ), fn NumberIntegerValue( qs[i] ) )
next

randomize

HandleEvents</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>-----------------
Unsorted&#160;: Sorted
-----------------
      97&#160;: 5       
    6168&#160;: 30      
      61&#160;: 34      
    8847&#160;: 40      
      55&#160;: 46      
    2570&#160;: 49      
      40&#160;: 55      
    4676&#160;: 61      
      94&#160;: 62      
     693&#160;: 67      
      62&#160;: 79      
    3419&#160;: 94      
      30&#160;: 97      
     936&#160;: 693     
       5&#160;: 733     
    9910&#160;: 936     
      67&#160;: 1395    
    8460&#160;: 1796    
      79&#160;: 2570    
    9352&#160;: 3419    
      49&#160;: 4676    
    1395&#160;: 6168    
      34&#160;: 8460    
     733&#160;: 8847    
      46&#160;: 9352    
    1796&#160;: 9910    
</pre>
<h2><span class="mw-headline" id="Go"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Go" title="Category:Go">Go</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=67" title="Edit section: Go">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Note that Go's <code>sort.Sort</code> function is a Quicksort so in practice it would be just be used.
It's actually a combination of quick sort, heap sort, and insertion sort.
It starts with a quick sort, after a depth of 2*ceil(lg(n+1)) it switches to heap sort, or once a partition becomes small (less than eight items) it switches to insertion sort.
</p><p><br/>
Old school, following <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/http://comjnl.oxfordjournals.org/cgi/content/short/5/1/10">Hoare's 1962 paper</a>.
</p><p>As a nod to the task request to work for all types with weak strict ordering, code below uses the &lt; operator when comparing key values.  The three points are noted in the code below.
</p><p>Actually supporting arbitrary types would then require at a minimum a user supplied less-than function, and values referenced from an array of interface{} types.  More efficient and flexible though is the <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/http://golang.org/pkg/sort/#Interface">sort interface</a> of the Go sort package.  Replicating that here seemed beyond the scope of the task so code was left written to sort an array of ints.
</p><p>Go has no language support for indexing with discrete types other than integer types, so this was not coded.
</p><p>Finally, the choice of a recursive closure over passing slices to a recursive function is really just a very small optimization.  Slices are cheap because they do not copy the underlying array, but there's still a tiny bit of overhead in constructing the slice object.  Passing just the two numbers is in the interest of avoiding that overhead.
</p>
<div class="mw-highlight mw-highlight-lang-go mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span><span class="w"></span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">list</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="mi">41</span><span class="p">,</span><span class="w"> </span><span class="mi">59</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">53</span><span class="p">,</span><span class="w"> </span><span class="mi">58</span><span class="p">,</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w"> </span><span class="mi">93</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="mi">84</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;unsorted:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">list</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="nx">quicksort</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;sorted!  &quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">list</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">func</span><span class="w"> </span><span class="nx">quicksort</span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="p">[]</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">pex</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">pex</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">lower</span><span class="p">,</span><span class="w"> </span><span class="nx">upper</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">switch</span><span class="w"> </span><span class="nx">upper</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">lower</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="c1">// 0 or 1 item in segment.  nothing to do here!</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"></span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="c1">// 2 items in segment</span><span class="w"></span>
<span class="w">                </span><span class="c1">// &lt; operator respects strict weak order</span><span class="w"></span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">upper</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">lower</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="c1">// a quick exchange and we&#39;re done.</span><span class="w"></span>
<span class="w">                    </span><span class="nx">a</span><span class="p">[</span><span class="nx">upper</span><span class="p">],</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">lower</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">lower</span><span class="p">],</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">upper</span><span class="p">]</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"></span>
<span class="w">            </span><span class="c1">// Hoare suggests optimized sort-3 or sort-4 algorithms here,</span><span class="w"></span>
<span class="w">            </span><span class="c1">// but does not provide an algorithm.</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="c1">// Hoare stresses picking a bound in a way to avoid worst case</span><span class="w"></span>
<span class="w">            </span><span class="c1">// behavior, but offers no suggestions other than picking a</span><span class="w"></span>
<span class="w">            </span><span class="c1">// random element.  A function call to get a random number is</span><span class="w"></span>
<span class="w">            </span><span class="c1">// relatively expensive, so the method used here is to simply</span><span class="w"></span>
<span class="w">            </span><span class="c1">// choose the middle element.  This at least avoids worst case</span><span class="w"></span>
<span class="w">            </span><span class="c1">// behavior for the obvious common case of an already sorted list.</span><span class="w"></span>
<span class="w">            </span><span class="nx">bx</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="nx">upper</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">lower</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w">            </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">bx</span><span class="p">]</span><span class="w">  </span><span class="c1">// b = Hoare&#39;s &quot;bound&quot; (aka &quot;pivot&quot;)</span><span class="w"></span>
<span class="w">            </span><span class="nx">lp</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">lower</span><span class="w"> </span><span class="c1">// lp = Hoare&#39;s &quot;lower pointer&quot;</span><span class="w"></span>
<span class="w">            </span><span class="nx">up</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">upper</span><span class="w"> </span><span class="c1">// up = Hoare&#39;s &quot;upper pointer&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nx">outer</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="c1">// use &lt; operator to respect strict weak order</span><span class="w"></span>
<span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="nx">lp</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">upper</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">!(</span><span class="nx">b</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">lp</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nx">lp</span><span class="o">++</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="nx">lp</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="nx">up</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="c1">// &quot;pointers crossed!&quot;</span><span class="w"></span>
<span class="w">                        </span><span class="k">break</span><span class="w"> </span><span class="nx">outer</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="c1">// &lt; operator for strict weak order</span><span class="w"></span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">up</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="k">break</span><span class="w"> </span><span class="c1">// inner</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="nx">up</span><span class="o">--</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="c1">// exchange</span><span class="w"></span>
<span class="w">                </span><span class="nx">a</span><span class="p">[</span><span class="nx">lp</span><span class="p">],</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">up</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">up</span><span class="p">],</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">lp</span><span class="p">]</span><span class="w"></span>
<span class="w">                </span><span class="nx">lp</span><span class="o">++</span><span class="w"></span>
<span class="w">                </span><span class="nx">up</span><span class="o">--</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="c1">// segment boundary is between up and lp, but lp-up might be</span><span class="w"></span>
<span class="w">            </span><span class="c1">// 1 or 2, so just call segment boundary between lp-1 and lp.</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">bx</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">lp</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="c1">// bound was in lower segment</span><span class="w"></span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="nx">bx</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">lp</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="c1">// exchange bx with lp-1</span><span class="w"></span>
<span class="w">                    </span><span class="nx">a</span><span class="p">[</span><span class="nx">bx</span><span class="p">],</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">lp</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">lp</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="nx">b</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="nx">up</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">lp</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="c1">// bound was in upper segment</span><span class="w"></span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="nx">bx</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="nx">lp</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="c1">// exchange</span><span class="w"></span>
<span class="w">                    </span><span class="nx">a</span><span class="p">[</span><span class="nx">bx</span><span class="p">],</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">lp</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">a</span><span class="p">[</span><span class="nx">lp</span><span class="p">],</span><span class="w"> </span><span class="nx">b</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="nx">up</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">lp</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">                </span><span class="nx">lp</span><span class="o">++</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="c1">// &quot;postpone the larger of the two segments&quot; = recurse on</span><span class="w"></span>
<span class="w">            </span><span class="c1">// the smaller segment, then iterate on the remaining one.</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">up</span><span class="o">-</span><span class="nx">lower</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">upper</span><span class="o">-</span><span class="nx">lp</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nx">pex</span><span class="p">(</span><span class="nx">lower</span><span class="p">,</span><span class="w"> </span><span class="nx">up</span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="nx">lower</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">lp</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nx">pex</span><span class="p">(</span><span class="nx">lp</span><span class="p">,</span><span class="w"> </span><span class="nx">upper</span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="nx">upper</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">up</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">pex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>unsorted: [31 41 59 26 53 58 97 93 23 84]
sorted!   [23 26 31 41 53 58 59 84 93 97]
</pre>
<p>More traditional version of quicksort. It work generically with any container that conforms to <code>sort.Interface</code>.
</p>
<div class="mw-highlight mw-highlight-lang-go mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;sort&quot;</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;math/rand&quot;</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>

<span class="kd">func</span><span class="w"> </span><span class="nx">partition</span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="nx">sort</span><span class="p">.</span><span class="nx">Interface</span><span class="p">,</span><span class="w"> </span><span class="nx">first</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">last</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">pivotIndex</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">a</span><span class="p">.</span><span class="nx">Swap</span><span class="p">(</span><span class="nx">first</span><span class="p">,</span><span class="w"> </span><span class="nx">pivotIndex</span><span class="p">)</span><span class="w"> </span><span class="c1">// move it to beginning</span><span class="w"></span>
<span class="w">    </span><span class="nx">left</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">first</span><span class="o">+</span><span class="mi">1</span><span class="w"></span>
<span class="w">    </span><span class="nx">right</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">last</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">left</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">right</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nx">left</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">last</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">Less</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span><span class="w"> </span><span class="nx">first</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">left</span><span class="o">++</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nx">right</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">first</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">Less</span><span class="p">(</span><span class="nx">first</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">right</span><span class="o">--</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">left</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">right</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">a</span><span class="p">.</span><span class="nx">Swap</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="nx">left</span><span class="o">++</span><span class="w"></span>
<span class="w">            </span><span class="nx">right</span><span class="o">--</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">a</span><span class="p">.</span><span class="nx">Swap</span><span class="p">(</span><span class="nx">first</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="p">)</span><span class="w"> </span><span class="c1">// swap into right place</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">right</span><span class="w">    </span>
<span class="p">}</span><span class="w"></span>

<span class="kd">func</span><span class="w"> </span><span class="nx">quicksortHelper</span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="nx">sort</span><span class="p">.</span><span class="nx">Interface</span><span class="p">,</span><span class="w"> </span><span class="nx">first</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">last</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">first</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">last</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">pivotIndex</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">partition</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">first</span><span class="p">,</span><span class="w"> </span><span class="nx">last</span><span class="p">,</span><span class="w"> </span><span class="nx">rand</span><span class="p">.</span><span class="nx">Intn</span><span class="p">(</span><span class="nx">last</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">first</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">quicksortHelper</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">first</span><span class="p">,</span><span class="w"> </span><span class="nx">pivotIndex</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">quicksortHelper</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">pivotIndex</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nx">last</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">func</span><span class="w"> </span><span class="nx">quicksort</span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="nx">sort</span><span class="p">.</span><span class="nx">Interface</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">quicksortHelper</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">Len</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">a</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Unsorted: %v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">quicksort</span><span class="p">(</span><span class="nx">sort</span><span class="p">.</span><span class="nx">IntSlice</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Sorted: %v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;Emil&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Peg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Helen&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Juergen&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;David&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Rick&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Barb&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Mike&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Tom&quot;</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Unsorted: %v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nx">quicksort</span><span class="p">(</span><span class="nx">sort</span><span class="p">.</span><span class="nx">StringSlice</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Sorted: %v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>Unsorted: [1 3 5 7 9 8 6 4 2]
Sorted: [1 2 3 4 5 6 7 8 9]
Unsorted: [Emil Peg Helen Juergen David Rick Barb Mike Tom]
Sorted: [Barb David Emil Helen Juergen Mike Peg Rick Tom]
</pre>
<h2><span class="mw-headline" id="Haskell"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Haskell" title="Category:Haskell">Haskell</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=68" title="Edit section: Haskell">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The famous two-liner, reflecting the underlying algorithm directly:
</p>
<div class="mw-highlight mw-highlight-lang-haskell mw-content-ltr" dir="ltr"><pre><span></span><span class="nf">qsort</span><span class="w"> </span><span class="kt">[]</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">[]</span><span class="w"></span>
<span class="nf">qsort</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="kt">:</span><span class="n">xs</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">qsort</span><span class="w"> </span><span class="p">[</span><span class="n">y</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">xs</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">qsort</span><span class="w"> </span><span class="p">[</span><span class="n">y</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">xs</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">x</span><span class="p">]</span><span class="w"></span>
</pre></div>
<p>A more efficient version, doing only one comparison per element:
</p>
<div class="mw-highlight mw-highlight-lang-haskell mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">import</span><span class="w"> </span><span class="nn">Data.List</span><span class="w"> </span><span class="p">(</span><span class="nf">partition</span><span class="p">)</span><span class="w"></span>

<span class="nf">qsort</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Ord</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="w"></span>
<span class="nf">qsort</span><span class="w"> </span><span class="kt">[]</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">[]</span><span class="w"></span>
<span class="nf">qsort</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="kt">:</span><span class="n">xs</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">qsort</span><span class="w"> </span><span class="n">ys</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">qsort</span><span class="w"> </span><span class="n">zs</span><span class="w"> </span><span class="kr">where</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">ys</span><span class="p">,</span><span class="w"> </span><span class="n">zs</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">partition</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">xs</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="Icon_and_Unicon"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Icon" title="Category:Icon">Icon</a> and <a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Unicon" title="Category:Unicon">Unicon</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=69" title="Edit section: Icon and Unicon">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-icon mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">procedure</span> <span class="nf">main</span><span class="p">()</span>                     <span class="c1">#: demonstrate various ways to sort a list and string </span>
   <span class="n">demosort</span><span class="p">(</span><span class="n">quicksort</span><span class="p">,[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span><span class="s">&quot;qwerty&quot;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="kd">procedure</span> <span class="nf">quicksort</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span><span class="nv">op</span><span class="p">,</span><span class="nv">lower</span><span class="p">,</span><span class="nv">upper</span><span class="p">)</span>                      <span class="c1">#: return sorted list</span>
<span class="kr">local</span> <span class="n">pivot</span><span class="p">,</span><span class="n">x</span> 

   <span class="kr">if</span> <span class="o">/</span><span class="n">lower</span> <span class="o">:=</span> <span class="mi">1</span> <span class="kr">then</span> <span class="p">{</span>                                   <span class="c1"># top level call setup</span>
      <span class="n">upper</span> <span class="o">:=</span> <span class="o">*</span><span class="n">X</span>   
      <span class="n">op</span> <span class="o">:=</span> <span class="n">sortop</span><span class="p">(</span><span class="n">op</span><span class="p">,</span><span class="n">X</span><span class="p">)</span>                                   <span class="c1"># select how and what we sort</span>
      <span class="p">}</span>

   <span class="kr">if</span> <span class="n">upper</span> <span class="o">-</span> <span class="n">lower</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">then</span> <span class="p">{</span>
      <span class="kr">every</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">quickpartition</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">op</span><span class="p">,</span><span class="n">lower</span><span class="p">,</span><span class="n">upper</span><span class="p">)</span> <span class="kr">do</span>       <span class="c1"># find a pivot and sort ...</span>
          <span class="o">/</span><span class="n">pivot</span> <span class="o">|</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">x</span>                                  <span class="c1"># ... how to return 2 values w/o a structure</span>
      <span class="n">X</span> <span class="o">:=</span> <span class="n">quicksort</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">op</span><span class="p">,</span><span class="n">lower</span><span class="p">,</span><span class="n">pivot</span><span class="mi">-1</span><span class="p">)</span>                   <span class="c1"># ... left            </span>
      <span class="n">X</span> <span class="o">:=</span> <span class="n">quicksort</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">op</span><span class="p">,</span><span class="n">pivot</span><span class="p">,</span><span class="n">upper</span><span class="p">)</span>                     <span class="c1"># ... right</span>
      <span class="p">}</span>

   <span class="kr">return</span> <span class="n">X</span>                                             
<span class="kr">end</span>

<span class="kd">procedure</span> <span class="nf">quickpartition</span><span class="p">(</span><span class="nv">X</span><span class="p">,</span><span class="nv">op</span><span class="p">,</span><span class="nv">lower</span><span class="p">,</span><span class="nv">upper</span><span class="p">)</span>                 <span class="c1">#: quicksort partitioner helper</span>
<span class="kr">local</span>   <span class="n">pivot</span>
<span class="kr">static</span>  <span class="n">pivotL</span>
<span class="kr">initial</span> <span class="n">pivotL</span> <span class="o">:=</span> <span class="nf">list</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

   <span class="n">pivotL</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">X</span><span class="p">[</span><span class="n">lower</span><span class="p">]</span>                                   <span class="c1"># endpoints</span>
   <span class="n">pivotL</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">:=</span> <span class="n">X</span><span class="p">[</span><span class="n">upper</span><span class="p">]</span>                                   <span class="c1"># ... and</span>
   <span class="n">pivotL</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">:=</span> <span class="n">X</span><span class="p">[</span><span class="n">lower</span><span class="o">+?</span><span class="p">(</span><span class="n">upper</span><span class="o">-</span><span class="n">lower</span><span class="p">)]</span>                    <span class="c1"># ... random midpoint</span>
   <span class="kr">if</span> <span class="n">op</span><span class="p">(</span><span class="n">pivotL</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">pivotL</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="kr">then</span> <span class="n">pivotL</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">:=:</span> <span class="n">pivotL</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># mini-</span>
   <span class="kr">if</span> <span class="n">op</span><span class="p">(</span><span class="n">pivotL</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">pivotL</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="kr">then</span> <span class="n">pivotL</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">:=:</span> <span class="n">pivotL</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># ... sort</span>
   <span class="n">pivot</span> <span class="o">:=</span> <span class="n">pivotL</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>                                      <span class="c1"># median is pivot</span>

   <span class="n">lower</span> <span class="o">-:=</span> <span class="mi">1</span>
   <span class="n">upper</span> <span class="o">+:=</span> <span class="mi">1</span>
   <span class="kr">while</span> <span class="n">lower</span> <span class="o">&lt;</span> <span class="n">upper</span> <span class="kr">do</span> <span class="p">{</span>                                <span class="c1"># find values on wrong side of pivot ...</span>
      <span class="kr">while</span> <span class="n">op</span><span class="p">(</span><span class="n">pivot</span><span class="p">,</span><span class="n">X</span><span class="p">[</span><span class="n">upper</span> <span class="o">-:=</span> <span class="mi">1</span><span class="p">])</span>                       <span class="c1"># ... rightmost </span>
      <span class="kr">while</span> <span class="n">op</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">lower</span> <span class="o">+:=</span><span class="mi">1</span><span class="p">],</span><span class="n">pivot</span><span class="p">)</span>                        <span class="c1"># ... leftmost</span>
      <span class="kr">if</span> <span class="n">lower</span> <span class="o">&lt;</span> <span class="n">upper</span> <span class="kr">then</span>                                <span class="c1"># not crossed yet</span>
         <span class="n">X</span><span class="p">[</span><span class="n">lower</span><span class="p">]</span> <span class="o">:=:</span> <span class="n">X</span><span class="p">[</span><span class="n">upper</span><span class="p">]</span>                             <span class="c1"># ... swap </span>
      <span class="p">}</span>

   <span class="kr">suspend</span> <span class="n">lower</span>                                           <span class="c1"># 1st return pivot point</span>
   <span class="kr">suspend</span> <span class="n">X</span>                                               <span class="c1"># 2nd return modified X (in case immutable)</span>
<span class="kr">end</span>
</pre></div>
<p>Implementation notes:
</p>
<ul><li>Since this transparently sorts both string and list arguments the result must 'return' to bypass call by value (strings)</li>
<li>The partition procedure must "return" two values - 'suspend' is used to accomplish this</li></ul>
<p>Algorithm notes:
</p>
<ul><li>The use of a type specific sorting operator meant that a general pivot choice need to be made. The median of the ends and random middle seemed reasonable.  It turns out to have been suggested by Sedgewick.</li>
<li>Sedgewick's suggestions for tail calling to recurse into the larger side and using insertion sort below a certain size were not implemented.  (Q: does Icon/Unicon has tail calling optimizations?)</li></ul>
<p><br/>Note: This example relies on <a href="/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Bubble_sort#Icon" title="Sorting algorithms/Bubble sort"> the supporting procedures 'sortop', and 'demosort' in Bubble Sort</a>. The full demosort exercises the named sort of a list with op = "numeric", "string", "&gt;&gt;" (lexically gt, descending),"&gt;" (numerically gt, descending), a custom comparator, and also a string.
</p>
<div>
<dl><dt>Output:</dt></dl></div> Abbreviated
<pre>Sorting Demo using procedure quicksort
  on list&#160;: [ 3 14 1 5 9 2 6 3 ]
    with op = &amp;null:         [ 1 2 3 3 5 6 9 14 ]   (0 ms)
  ...
  on string&#160;: "qwerty"
    with op = &amp;null:         "eqrtwy"   (0 ms)</pre>
<h2><span class="mw-headline" id="IDL"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:IDL" title="Category:IDL">IDL</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=70" title="Edit section: IDL">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>IDL has a powerful optimized <tt>sort()</tt> built-in. The following is thus merely for demonstration.
</p>
<div class="mw-highlight mw-highlight-lang-idl mw-content-ltr" dir="ltr"><pre><span></span><span class="k">function</span> qs, arr
  <span class="k">if</span> (count <span class="o">=</span> <span class="nb">n_elements</span>(arr)) <span class="k">lt</span> <span class="mi">2</span> <span class="k">then</span> <span class="nb">return</span>,arr
  pivot <span class="o">=</span> <span class="nb">total</span>(arr) <span class="o">/</span> count&#160;; use the average <span class="k">for</span> want <span class="k">of</span> a better choice
  <span class="nb">return</span>,[qs(arr[<span class="nb">where</span>(arr <span class="k">le</span> pivot)]),qs(arr[<span class="nb">where</span>(arr <span class="k">gt</span> pivot)])]
 <span class="k">end</span>
</pre></div>
<p>Example:
</p>
<pre>IDL&gt; print,qs([3,17,-5,12,99])
     -5       3      12      17      99
</pre>
<h2><span class="mw-headline" id="Idris"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Idris" title="Category:Idris">Idris</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=71" title="Edit section: Idris">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-idris mw-content-ltr" dir="ltr"><pre><span></span><span class="nf">quicksort</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="kt">Ord</span><span class="w"> </span>elem<span class="w"> </span><span class="ow">=&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span>elem<span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span>elem<span class="w"></span>
quicksort<span class="w"> </span><span class="ow">[]</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="ow">[]</span><span class="w"></span>
quicksort<span class="w"> </span><span class="ow">(</span>x<span class="w"> </span><span class="ow">::</span><span class="w"> </span>xs<span class="ow">)</span><span class="w"> </span><span class="ow">=</span><span class="w"></span>
<span class="w">  </span><span class="kr">let</span><span class="w"> </span>lesser<span class="w"> </span><span class="ow">=</span><span class="w"> </span>filter<span class="w"> </span><span class="ow">(&lt;</span><span class="w"> </span>x<span class="ow">)</span><span class="w"> </span>xs<span class="w"></span>
<span class="w">      </span>greater<span class="w"> </span><span class="ow">=</span><span class="w"> </span>filter<span class="ow">(&gt;=</span><span class="w"> </span>x<span class="ow">)</span><span class="w"> </span>xs<span class="w"> </span><span class="kr">in</span><span class="w"></span>
<span class="w">        </span><span class="ow">(</span>quicksort<span class="w"> </span>lesser<span class="ow">)</span><span class="w"> </span><span class="ow">++</span><span class="w"> </span><span class="ow">[</span>x<span class="ow">]</span><span class="w"> </span><span class="ow">++</span><span class="w"> </span><span class="ow">(</span>quicksort<span class="w"> </span>greater<span class="ow">)</span><span class="w"></span>
</pre></div>
<p>Example:
</p>
<pre>*quicksort&gt; quicksort [1, 3, 7, 2, 5, 4, 9, 6, 8, 0]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]&#160;: List Integer
</pre>
<h2><span class="mw-headline" id="Io"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Io" title="Category:Io">Io</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=72" title="Edit section: Io">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-io mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">List</span> <span class="k">do</span><span class="o">(</span>
    <span class="n">quickSort</span> <span class="o">:=</span> <span class="k">method</span><span class="o">(</span>
        <span class="k">if</span><span class="o">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mf">1</span><span class="o">)</span> <span class="k">then</span><span class="o">(</span>
            <span class="n">pivot</span> <span class="o">:=</span> <span class="n">at</span><span class="o">(</span><span class="n">size</span> <span class="o">/</span> <span class="mf">2</span> <span class="n">floor</span><span class="o">)</span>
            <span class="n">return</span> <span class="n">select</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">pivot</span><span class="o">)</span> <span class="n">quickSort</span> <span class="n">appendSeq</span><span class="o">(</span>
                <span class="n">select</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="o">==</span> <span class="n">pivot</span><span class="o">)</span> <span class="n">appendSeq</span><span class="o">(</span><span class="n">select</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">pivot</span><span class="o">)</span> <span class="n">quickSort</span><span class="o">)</span>
            <span class="o">)</span>
        <span class="o">)</span> <span class="k">else</span><span class="o">(</span><span class="n">return</span> <span class="n">self</span><span class="o">)</span>
    <span class="o">)</span>

    <span class="n">quickSortInPlace</span> <span class="o">:=</span> <span class="k">method</span><span class="o">(</span>
        <span class="n">copy</span><span class="o">(</span><span class="n">quickSort</span><span class="o">)</span>
    <span class="o">)</span>
<span class="o">)</span>

<span class="n">lst</span> <span class="o">:=</span> <span class="nb">list</span><span class="o">(</span><span class="mf">5</span><span class="o">,</span> <span class="o">-</span><span class="mf">1</span><span class="o">,</span> <span class="o">-</span><span class="mf">4</span><span class="o">,</span> <span class="mf">2</span><span class="o">,</span> <span class="mf">9</span><span class="o">)</span>
<span class="n">lst</span> <span class="n">quickSort</span> <span class="n">println</span> <span class="c1"># ==&gt; list(-4, -1, 2, 5, 9)</span>
<span class="n">lst</span> <span class="n">quickSortInPlace</span> <span class="n">println</span> <span class="c1"># ==&gt; list(-4, -1, 2, 5, 9)</span>
</pre></div>
<p>Another more low-level Quicksort implementation can be found in Io's [<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/http://github.com/stevedekorte/io/blob/master/samples/misc/qsort.io">github </a>] repository.
</p>
<h2><span class="mw-headline" id="Isabelle"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Isabelle" title="Category:Isabelle">Isabelle</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=73" title="Edit section: Isabelle">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-isabelle mw-content-ltr" dir="ltr"><pre><span></span><span class="k">theory</span> <span class="n">Quicksort</span>
<span class="kp">imports</span> <span class="n">Main</span>
<span class="k">begin</span>

<span class="k">fun</span> <span class="n">quicksort</span> <span class="o">::</span> <span class="s">&quot;(&#39;a&#160;:: linorder) list  &#39;a list&quot;</span> <span class="kp">where</span>
  <span class="s">&quot;quicksort [] = []&quot;</span>
<span class="o">|</span> <span class="s">&quot;quicksort (x#xs) = (quicksort [yxs. y&lt;x]) @ [x] @ (quicksort [yxs. y&gt;x])&quot;</span>

<span class="kn">lemma</span> <span class="s">&quot;quicksort [4::int, 2, 7, 1] = [1, 2, 4, 7]&quot;</span>
  <span class="k">by</span><span class="o">(</span><span class="n">code_simp</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">set_first_second_partition</span><span class="o">:</span>
  <span class="kp">fixes</span> <span class="n">x</span> <span class="o">::</span> <span class="s">&quot;&#39;a&#160;:: linorder&quot;</span>
  <span class="kp">shows</span> <span class="s">&quot;{y  ys. y &lt; x}  {x}  {y  ys. x &lt; y} =</span>
<span class="s">         insert x ys&quot;</span>
  <span class="k">by</span> <span class="n">fastforce</span>

<span class="kn">lemma</span> <span class="n">set_quicksort</span><span class="o">:</span> <span class="s">&quot;set (quicksort xs) = set xs&quot;</span>
  <span class="k">by</span><span class="o">(</span><span class="n">induction</span> <span class="n">xs</span> <span class="n">rule</span><span class="o">:</span> <span class="n">quicksort.induct</span><span class="o">)</span>
    <span class="o">(</span><span class="n">simp</span> <span class="n">add</span><span class="o">:</span> <span class="n">set_first_second_partition</span><span class="o">[</span><span class="n">simplified</span><span class="o">])+</span>


<span class="kn">theorem</span> <span class="s">&quot;sorted (quicksort xs)&quot;</span> 
<span class="k">proof</span><span class="o">(</span><span class="n">induction</span> <span class="n">xs</span> <span class="n">rule</span><span class="o">:</span> <span class="n">quicksort.induct</span><span class="o">)</span>
  <span class="k">case</span> <span class="n">1</span>
  <span class="k">show</span> <span class="s">&quot;sorted (quicksort [])&quot;</span> <span class="k">by</span> <span class="n">simp</span>
<span class="k">next</span>
  <span class="k">case</span> <span class="o">(</span><span class="n">2</span> <span class="n">x</span> <span class="n">xs</span><span class="o">)</span>
  <span class="k">assume</span> <span class="n">IH_less</span><span class="o">:</span>    <span class="s">&quot;sorted (quicksort [yxs. y&lt;x])&quot;</span>
  <span class="k">assume</span> <span class="n">IH_greater</span><span class="o">:</span> <span class="s">&quot;sorted (quicksort [yxs. y&gt;x])&quot;</span>
  <span class="k">have</span> <span class="n">pivot_geq_first_partition</span><span class="o">:</span>
    <span class="s">&quot;zset (quicksort [yxs. y&lt;x]). z  x&quot;</span>
    <span class="k">by</span> <span class="o">(</span><span class="n">simp</span> <span class="n">add</span><span class="o">:</span> <span class="n">set_quicksort</span> <span class="n">less_imp_le</span><span class="o">)</span>
  <span class="k">have</span> <span class="n">pivot_leq_second_partition</span><span class="o">:</span>
    <span class="s">&quot;z  (set (quicksort [yxs. y&gt;x])). (x  z)&quot;</span>
    <span class="k">by</span> <span class="o">(</span><span class="n">simp</span> <span class="n">add</span><span class="o">:</span> <span class="n">set_quicksort</span> <span class="n">less_imp_le</span><span class="o">)</span>
  <span class="k">have</span> <span class="n">first_partition_leq_second_partition</span><span class="o">:</span>
    <span class="s">&quot;pset (quicksort [yxs. y&lt;x]).</span>
<span class="s">        z  (set (quicksort [yxs. y&gt;x])). (p  z)&quot;</span>
    <span class="k">by</span> <span class="o">(</span><span class="n">auto</span> <span class="n">simp</span> <span class="n">add</span><span class="o">:</span> <span class="n">set_quicksort</span><span class="o">)</span>
    
  <span class="k">from</span> <span class="n">IH_less</span> <span class="n">IH_greater</span>
       <span class="n">pivot_geq_first_partition</span> <span class="n">pivot_leq_second_partition</span>
       <span class="n">first_partition_leq_second_partition</span>
  <span class="k">show</span> <span class="s">&quot;sorted (quicksort (x # xs))&quot;</span>  <span class="k">by</span><span class="o">(</span><span class="n">simp</span> <span class="n">add</span><span class="o">:</span> <span class="n">sorted_append</span><span class="o">)</span>
<span class="k">qed</span>


<span class="k">text</span><span class="err"></span>
<span class="n">The</span> <span class="kn">specification</span> <span class="n">on</span> <span class="n">rosettacode</span> <span class="n">says</span>
 <span class="err"></span> <span class="n">All</span> <span class="n">elements</span> <span class="n">less</span> <span class="n">than</span> <span class="n">the</span> <span class="n">pivot</span> <span class="n">must</span> <span class="n">be</span> <span class="kp">in</span> <span class="n">the</span> <span class="n">first</span> <span class="n">partition.</span>
 <span class="err"></span> <span class="n">All</span> <span class="n">elements</span> <span class="n">greater</span> <span class="n">than</span> <span class="n">the</span> <span class="n">pivot</span> <span class="n">must</span> <span class="n">be</span> <span class="kp">in</span> <span class="n">the</span> <span class="n">second</span> <span class="n">partition.</span>
<span class="n">Since</span> <span class="n">this</span> <span class="kn">specification</span> <span class="n">neither</span> <span class="n">says</span> <span class="s">&quot;less than or equal&quot;</span> <span class="n">nor</span>
<span class="s">&quot;greater or equal&quot;</span><span class="o">,</span> <span class="n">this</span> <span class="n">quicksort</span> <span class="n">implementation</span> <span class="n">removes</span> <span class="n">duplicate</span> <span class="n">elements.</span>
<span class="err"></span>
<span class="kn">lemma</span> <span class="s">&quot;quicksort [1::int, 1, 1, 2, 2, 3] = [1, 2, 3]&quot;</span>
  <span class="k">by</span><span class="o">(</span><span class="n">code_simp</span><span class="o">)</span>

<span class="k">text</span><span class="err"></span><span class="n">If</span> <span class="n">we</span> <span class="kt">try</span> <span class="n">the</span> <span class="n">following</span><span class="o">,</span> <span class="n">we</span> <span class="n">automatically</span> <span class="n">get</span> <span class="n">a</span> <span class="n">counterexample</span><span class="err"></span>
<span class="kn">lemma</span> <span class="s">&quot;length (quicksort xs) = length xs&quot;</span>
<span class="c">(*</span>
<span class="c">  Auto Quickcheck found a counterexample:</span>
<span class="c">    xs = [a1, a1]</span>
<span class="c">  Evaluated terms:</span>
<span class="c">    length (quicksort xs) = 1</span>
<span class="c">    length xs = 2</span>
<span class="c">*)</span>
  <span class="gr">oops</span>
<span class="k">end</span>
</pre></div>
<h2><span class="mw-headline" id="J"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:J" title="Category:J">J</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=74" title="Edit section: J">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="messagebox" style="text-align:center"><small>Generally, this task should be accomplished in J using <code>/:~</code>. Here we take an approach that's more comparable with the other examples on this page.</small></div>
<div class="mw-highlight mw-highlight-lang-j mw-content-ltr" dir="ltr"><pre><span></span><span class="nv">sel</span><span class="o">=:</span> <span class="mi">1</span> <span class="o">:</span> <span class="s">&#39;u # [&#39;</span>

<span class="nv">quicksort</span><span class="o">=:</span> <span class="nf">3&#160;: 0</span>
 <span class="nl">if.</span>
  <span class="mi">1</span> <span class="o">&gt;:</span> <span class="o">#</span><span class="nd">y</span>
 <span class="nl">do.</span>
  <span class="nd">y</span>
 <span class="nl">else.</span>
  <span class="nv">e</span><span class="o">=.</span> <span class="nd">y</span><span class="o">{~?#</span><span class="nd">y</span>
  <span class="p">(</span><span class="nv">quicksort</span> <span class="nd">y</span> <span class="o">&lt;</span><span class="nv">sel</span> <span class="nv">e</span><span class="p">)</span><span class="o">,</span><span class="p">(</span><span class="nd">y</span> <span class="o">=</span><span class="nv">sel</span> <span class="nv">e</span><span class="p">)</span><span class="o">,</span><span class="nv">quicksort</span> <span class="nd">y</span> <span class="o">&gt;</span><span class="nv">sel</span> <span class="nv">e</span>
 <span class="nl">end.</span>
<span class="nl">)</span>
</pre></div>
<p>See the <a href="https://web.archive.org/web/20230609112831/https://code.jsoftware.com/wiki/Essays/Quicksort" class="extiw" title="j:Essays/Quicksort">Quicksort essay</a> in the J Wiki
for additional explanations and examples.
</p>
<h2><span class="mw-headline" id="Java"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Java" title="Category:Java">Java</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=75" title="Edit section: Java">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Imperative">Imperative</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=76" title="Edit section: Imperative">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/Java" class="mw-redirect" title="Java">Java</a> version 1.5+</div><br/>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#Python">Python</a></div>
<div class="mw-highlight mw-highlight-lang-java mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">E</span> <span class="kd">extends</span> <span class="n">Comparable</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">E</span><span class="o">&gt;&gt;</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="nf">quickSort</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">arr</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">arr</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">arr</span><span class="p">;</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">E</span> <span class="n">pivot</span> <span class="o">=</span> <span class="n">arr</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">less</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">pivotList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">more</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="p">();</span>

        <span class="c1">// Partition</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">E</span> <span class="n">i</span><span class="p">:</span> <span class="n">arr</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">less</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">more</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="k">else</span>
                <span class="n">pivotList</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Recursively sort sublists</span>
        <span class="n">less</span> <span class="o">=</span> <span class="n">quickSort</span><span class="p">(</span><span class="n">less</span><span class="p">);</span>
        <span class="n">more</span> <span class="o">=</span> <span class="n">quickSort</span><span class="p">(</span><span class="n">more</span><span class="p">);</span>

        <span class="c1">// Concatenate results</span>
        <span class="n">less</span><span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="n">pivotList</span><span class="p">);</span>
        <span class="n">less</span><span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="n">more</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">less</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Functional_2">Functional</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=77" title="Edit section: Functional">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/Java" class="mw-redirect" title="Java">Java</a> version 1.8</div>
<div class="mw-highlight mw-highlight-lang-java mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">E</span> <span class="kd">extends</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;&gt;</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="nf">sort</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">col</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">col</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">Collections</span><span class="p">.</span><span class="na">emptyList</span><span class="p">();</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">E</span> <span class="n">pivot</span> <span class="o">=</span> <span class="n">col</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;&gt;</span> <span class="n">grouped</span> <span class="o">=</span> <span class="n">col</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
                <span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">groupingBy</span><span class="p">(</span><span class="n">pivot</span><span class="p">::</span><span class="n">compareTo</span><span class="p">));</span>
        <span class="k">return</span> <span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">sort</span><span class="p">(</span><span class="n">grouped</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="n">grouped</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">sort</span><span class="p">(</span><span class="n">grouped</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>
                <span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">Collection</span><span class="p">::</span><span class="n">stream</span><span class="p">).</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="JavaScript"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:JavaScript" title="Category:JavaScript">JavaScript</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=78" title="Edit section: JavaScript">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Imperative_2">Imperative</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=79" title="Edit section: Imperative">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">function</span> <span class="nx">sort</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">less</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">function</span> <span class="nx">swap</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
    <span class="nx">array</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nx">t</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">quicksort</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">left</span> <span class="o">&lt;</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">pivot</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">left</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nx">right</span> <span class="o">-</span> <span class="nx">left</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2</span><span class="p">)],</span>
          <span class="nx">left_new</span> <span class="o">=</span> <span class="nx">left</span><span class="p">,</span>
          <span class="nx">right_new</span> <span class="o">=</span> <span class="nx">right</span><span class="p">;</span>

      <span class="k">do</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">less</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">left_new</span><span class="p">],</span> <span class="nx">pivot</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">left_new</span> <span class="o">+=</span> <span class="mf">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">less</span><span class="p">(</span><span class="nx">pivot</span><span class="p">,</span> <span class="nx">array</span><span class="p">[</span><span class="nx">right_new</span><span class="p">]))</span> <span class="p">{</span>
          <span class="nx">right_new</span> <span class="o">-=</span> <span class="mf">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">left_new</span> <span class="o">&lt;=</span> <span class="nx">right_new</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">swap</span><span class="p">(</span><span class="nx">left_new</span><span class="p">,</span> <span class="nx">right_new</span><span class="p">);</span>
          <span class="nx">left_new</span> <span class="o">+=</span> <span class="mf">1</span><span class="p">;</span>
          <span class="nx">right_new</span> <span class="o">-=</span> <span class="mf">1</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">left_new</span> <span class="o">&lt;=</span> <span class="nx">right_new</span><span class="p">);</span>

      <span class="nx">quicksort</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span> <span class="nx">right_new</span><span class="p">);</span>
      <span class="nx">quicksort</span><span class="p">(</span><span class="nx">left_new</span><span class="p">,</span> <span class="nx">right</span><span class="p">);</span>

    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">quicksort</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mf">1</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">array</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
Example:<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">var</span> <span class="nx">test_array</span> <span class="o">=</span> <span class="p">[</span><span class="mf">10</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">11</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">19</span><span class="p">,</span> <span class="mf">1</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">sorted_array</span> <span class="o">=</span> <span class="nx">sort</span><span class="p">(</span><span class="nx">test_array</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">a</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">;</span> <span class="p">});</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div><div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">[</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="mf">11</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">19</span> <span class="p">]</span>
</pre></div>
<h3><span class="mw-headline" id="Functional_3">Functional</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=80" title="Edit section: Functional">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="ES6">ES6</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=81" title="Edit section: ES6">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Using <b>destructuring</b> and <b>satisfying immutability</b> we can propose a single expresion solution (from <a rel="nofollow" class="external free" href="https://web.archive.org/web/20230609112831/https://github.com/ddcovery/expressive_sort">https://github.com/ddcovery/expressive_sort</a>) 
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">const</span> <span class="nx">qsort</span> <span class="o">=</span> <span class="p">([</span><span class="nx">pivot</span><span class="p">,</span> <span class="p">...</span><span class="nx">others</span><span class="p">])</span> <span class="p">=&gt;</span> 
  <span class="nx">pivot</span> <span class="o">===</span> <span class="ow">void</span> <span class="mf">0</span> <span class="o">?</span> <span class="p">[]</span> <span class="o">:</span> <span class="p">[</span>
    <span class="p">...</span><span class="nx">qsort</span><span class="p">(</span><span class="nx">others</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">n</span> <span class="p">=&gt;</span> <span class="nx">n</span> <span class="o">&lt;</span> <span class="nx">pivot</span><span class="p">)),</span>
    <span class="nx">pivot</span><span class="p">,</span>
    <span class="p">...</span><span class="nx">qsort</span><span class="p">(</span><span class="nx">others</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">n</span> <span class="p">=&gt;</span> <span class="nx">n</span> <span class="o">&gt;=</span> <span class="nx">pivot</span><span class="p">))</span>
  <span class="p">];</span>

<span class="nx">qsort</span><span class="p">(</span> <span class="p">[</span> <span class="mf">11.8</span><span class="p">,</span> <span class="mf">14.1</span><span class="p">,</span> <span class="mf">21.3</span><span class="p">,</span> <span class="mf">8.5</span><span class="p">,</span> <span class="mf">16.7</span><span class="p">,</span> <span class="mf">5.7</span> <span class="p">]</span> <span class="p">)</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>[ 5.7, 8.5, 11.8, 14.1, 16.7, 21.3 ]
</pre>
<h4><span class="mw-headline" id="ES5">ES5</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=82" title="Edit section: ES5">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Unlike what happens with ES6, there are no destructuring nor lambdas, but we can <b>ensure immutability</b> and propose a <b>single expression</b> solution with standard anonymous functions
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">function</span> <span class="nx">qsort</span><span class="p">(</span> <span class="nx">xs</span> <span class="p">){</span>
  <span class="k">return</span> <span class="nx">xs</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mf">0</span> <span class="o">?</span> <span class="p">[]</span> <span class="o">:</span> <span class="p">[].</span><span class="nx">concat</span><span class="p">(</span>
    <span class="nx">qsort</span><span class="p">(</span> <span class="nx">xs</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">1</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">){</span> <span class="k">return</span> <span class="nx">x</span><span class="o">&lt;</span> <span class="nx">xs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="p">})),</span>
    <span class="nx">xs</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span>
    <span class="nx">qsort</span><span class="p">(</span> <span class="nx">xs</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">1</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">){</span> <span class="k">return</span> <span class="nx">x</span><span class="o">&gt;=</span> <span class="nx">xs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="p">}))</span>
  <span class="p">)</span>
<span class="p">}</span>
<span class="nx">qsort</span><span class="p">(</span> <span class="p">[</span> <span class="mf">11.8</span><span class="p">,</span> <span class="mf">14.1</span><span class="p">,</span> <span class="mf">21.3</span><span class="p">,</span> <span class="mf">8.5</span><span class="p">,</span> <span class="mf">16.7</span><span class="p">,</span> <span class="mf">5.7</span> <span class="p">]</span> <span class="p">)</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>[5.7, 8.5, 11.8, 14.1, 16.7, 21.3]</pre>
<h2><span class="mw-headline" id="Joy"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Joy" title="Category:Joy">Joy</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=83" title="Edit section: Joy">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>DEFINE qsort ==
  [small]            # termination condition: 0 or 1 element
  []                 # do nothing
  [uncons [&gt;] split] # pivot and two lists
  [enconcat]         # insert the pivot after the recursion
  binrec.            # recursion on the two lists</pre></div>
<h2><span class="mw-headline" id="jq"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Jq" title="Category:Jq">jq</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=84" title="Edit section: jq">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>jq's built-in <tt>sort</tt> currently (version 1.4) uses the standard C qsort, a quicksort.  <tt>sort</tt> can be used on any valid JSON array.
</p>
Example:<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>[1, 1.1, [1,2], true, false, null, {"a":1}, null] | sort</pre></div><div>
<dl><dt>Output:</dt></dl></div><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>[null,null,false,true,1,1.1,[1,2],{"a":1}]</pre></div>
Here is an implementation in jq of the pseudo-code (and comments&#160;:-) given at the head of this article:<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>def quicksort:
  if length &lt; 2 then .                            # it is already sorted
  else .[0] as $pivot
       | reduce .[] as $x
         # state: [less, equal, greater]
           ( [ [], [], [] ];                      # three empty arrays:
             if   $x  &lt; $pivot then .[0] += [$x]  # add x to less
             elif $x == $pivot then .[1] += [$x]  # add x to equal
             else                   .[2] += [$x]  # add x to greater
             end
         )
       | (.[0] | quicksort ) + .[1] + (.[2] | quicksort )
  end&#160;;</pre></div>Fortunately, the example input used above produces the same output, 
<p>and so both are omitted here.
</p>
<h2><span class="mw-headline" id="Julia"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Julia" title="Category:Julia">Julia</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=85" title="Edit section: Julia">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Built-in function for in-place sorting via quicksort (the <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://github.com/JuliaLang/julia/blob/2364748377f2a79c0485fdd5155ec2116c9f0d37/base/sort.jl#L259-L296">code from the standard library is quite readable</a>):
</p>
<div class="mw-highlight mw-highlight-lang-julia mw-content-ltr" dir="ltr"><pre><span></span><span class="n">sort!</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">alg</span><span class="o">=</span><span class="nb">QuickSort</span><span class="p">)</span>
</pre></div>
<p>A simple polymorphic implementation of an in-place recursive quicksort (based on the pseudocode above):
</p>
<div class="mw-highlight mw-highlight-lang-julia mw-content-ltr" dir="ltr"><pre><span></span><span class="k">function</span> <span class="n">quicksort!</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="n">length</span><span class="p">(</span><span class="n">A</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">j</span> <span class="o">&gt;</span> <span class="n">i</span>
        <span class="n">pivot</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">rand</span><span class="p">(</span><span class="n">i</span><span class="o">:</span><span class="n">j</span><span class="p">)]</span> <span class="c"># random element of A</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span>
        <span class="k">while</span> <span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span>
            <span class="k">while</span> <span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">pivot</span>
                <span class="n">left</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">end</span>
            <span class="k">while</span> <span class="n">A</span><span class="p">[</span><span class="n">right</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">pivot</span>
                <span class="n">right</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">end</span>
            <span class="k">if</span> <span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span>
                <span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">right</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">right</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="p">]</span>
                <span class="n">left</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">right</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">end</span>
        <span class="k">end</span>
        <span class="n">quicksort!</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">right</span><span class="p">)</span>
        <span class="n">quicksort!</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">left</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="k">return</span> <span class="n">A</span>
<span class="k">end</span>
</pre></div>
<p>A one-line (but rather inefficient) implementation based on the Haskell version, which operates out-of-place and allocates temporary arrays:
</p>
<div class="mw-highlight mw-highlight-lang-julia mw-content-ltr" dir="ltr"><pre><span></span><span class="n">qsort</span><span class="p">(</span><span class="n">L</span><span class="p">)</span> <span class="o">=</span> <span class="n">isempty</span><span class="p">(</span><span class="n">L</span><span class="p">)</span> <span class="o">?</span> <span class="n">L</span> <span class="o">:</span> <span class="n">vcat</span><span class="p">(</span><span class="n">qsort</span><span class="p">(</span><span class="n">filter</span><span class="p">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">L</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="k">end</span><span class="p">])),</span> <span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="o">:</span><span class="mi">1</span><span class="p">],</span> <span class="n">qsort</span><span class="p">(</span><span class="n">filter</span><span class="p">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">L</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="k">end</span><span class="p">])))</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>julia&gt; A = [84,77,20,60,47,20,18,97,41,49,31,39,73,68,65,52,1,92,15,9]

julia&gt; qsort(A)
[1,9,15,18,20,20,31,39,41,47,49,52,60,65,68,73,77,84,92,97]

julia&gt; quicksort!(copy(A))
[1,9,15,18,20,20,31,39,41,47,49,52,60,65,68,73,77,84,92,97]

julia&gt; qsort(A) == quicksort!(copy(A)) == sort(A) == sort(A, alg=QuickSort)
true</pre>
<h2><span class="mw-headline" id="K"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:K" title="Category:K">K</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=86" title="Edit section: K">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>quicksort:{f:*x@1?#x;:[0=#x;x;,/(_f x@&amp;x&lt;f;x@&amp;x=f;_f x@&amp;x&gt;f)]}</pre></div>
<p>Example:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>    quicksort 1 3 5 7 9 8 6 4 2</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>1 2 3 4 5 6 7 8 9
</pre>
<p><br/>
Explanation:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>  _f()</pre></div>
<p>is the current function called recursively.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>  &#160;:[....]</pre></div>
<p>generally means&#160;:[condition1;then1;condition2;then2;....;else]. Though
here it is used as&#160;:[if;then;else].
</p><p>This construct
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>   f:*x@1?#x</pre></div>
<p>assigns a random element in x (the argument) to f, as the pivot value.
</p><p>And here is the full if/then/else clause:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>   &#160;:[
        0=#x;           / if length of x is zero 
        x;              / then return x
                        / else
        ,/(             / join the results of: 
          _f x@&amp;x&lt;f         / sort (recursively) elements less than f (pivot)
          x@&amp;x=f            / element equal to f 
          _f x@&amp;x&gt;f)        / sort (recursively) elements greater than f 
     ]</pre></div>
<p>Though - as with APL and J - for larger arrays it's much faster to 
sort using "&lt;" (grade up) which gives the indices of the 
list sorted ascending, i.e.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>   t@&lt;t:1 3 5 7 9 8 6 4 2</pre></div>
<h2><span class="mw-headline" id="Koka"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Koka" title="Category:Koka">Koka</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=87" title="Edit section: Koka">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Haskell-like solution
</p>
<div class="mw-highlight mw-highlight-lang-koka mw-content-ltr" dir="ltr"><pre><span></span><span class="k">fun</span><span class="w"> </span><span class="nf">qsort</span><span class="p">(</span><span class="w"> </span><span class="n">xs</span><span class="w"> </span><span class="na">:</span><span class="w"> </span><span class="na">list&lt;int&gt;</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="na">:</span><span class="w"> </span><span class="na">div</span><span class="w"> </span><span class="na">list&lt;int&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">match</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="ge">Cons</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">xx</span><span class="p">)</span><span class="w"> </span><span class="k">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">val</span><span class="w"> </span><span class="n">ys</span><span class="w"> </span><span class="k">=</span><span class="w"> </span><span class="n">xx</span><span class="k">.</span><span class="n">filter</span><span class="w"> </span><span class="n">fn</span><span class="p">(</span><span class="n">el</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="k">val</span><span class="w"> </span><span class="n">zs</span><span class="w"> </span><span class="k">=</span><span class="w"> </span><span class="n">xx</span><span class="k">.</span><span class="n">filter</span><span class="w"> </span><span class="n">fn</span><span class="p">(</span><span class="n">el</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="n">qsort</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">qsort</span><span class="p">(</span><span class="n">zs</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="ge">Nil</span><span class="w"> </span><span class="k">-&gt;</span><span class="w"> </span><span class="ge">Nil</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>or using standard <code>partition</code> function
</p>
<div class="mw-highlight mw-highlight-lang-koka mw-content-ltr" dir="ltr"><pre><span></span><span class="k">fun</span><span class="w"> </span><span class="nf">qsort</span><span class="p">(</span><span class="w"> </span><span class="n">xs</span><span class="w"> </span><span class="na">:</span><span class="w"> </span><span class="na">list&lt;int&gt;</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="na">:</span><span class="w"> </span><span class="na">div</span><span class="w"> </span><span class="na">list&lt;int&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">match</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="ge">Cons</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">xx</span><span class="p">)</span><span class="w"> </span><span class="k">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">val</span><span class="w"> </span><span class="p">(</span><span class="n">ys</span><span class="p">,</span><span class="w"> </span><span class="n">zs</span><span class="p">)</span><span class="w"> </span><span class="k">=</span><span class="w"> </span><span class="n">xx</span><span class="k">.</span><span class="n">partition</span><span class="w"> </span><span class="n">fn</span><span class="p">(</span><span class="n">el</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="n">qsort</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">qsort</span><span class="p">(</span><span class="n">zs</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="ge">Nil</span><span class="w"> </span><span class="k">-&gt;</span><span class="w"> </span><span class="ge">Nil</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>Example:
</p>
<div class="mw-highlight mw-highlight-lang-koka mw-content-ltr" dir="ltr"><pre><span></span><span class="k">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">val</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="k">=</span><span class="w"> </span><span class="p">[</span><span class="mi">24</span><span class="p">,</span><span class="mi">63</span><span class="p">,</span><span class="mi">77</span><span class="p">,</span><span class="mi">26</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="mi">56</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mi">17</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="n">println</span><span class="p">(</span><span class="n">arr</span><span class="k">.</span><span class="n">qsort</span><span class="k">.</span><span class="n">show</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>[17,24,26,56,63,64,77,80,84,85]</pre>
<h2><span class="mw-headline" id="Kotlin"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Kotlin" title="Category:Kotlin">Kotlin</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=88" title="Edit section: Kotlin">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A version that reflects the algorithm directly:
</p>
<div class="mw-highlight mw-highlight-lang-scala mw-content-ltr" dir="ltr"><pre><span></span><span class="n">fun</span> <span class="o">&lt;</span><span class="nc">E</span> <span class="p">:</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="nc">E</span><span class="o">&gt;&gt;</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">E</span><span class="o">&gt;</span><span class="p">.</span><span class="n">qsort</span><span class="p">():</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">E</span><span class="o">&gt;</span> <span class="o">=</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">size</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="bp">this</span>
        <span class="k">else</span> <span class="n">filter</span> <span class="p">{</span> <span class="n">it</span> <span class="o">&lt;</span> <span class="n">first</span><span class="p">()</span> <span class="p">}.</span><span class="n">qsort</span><span class="p">()</span> <span class="o">+</span>
                <span class="n">filter</span> <span class="p">{</span> <span class="n">it</span> <span class="o">==</span> <span class="n">first</span><span class="p">()</span> <span class="p">}</span> <span class="o">+</span>
                <span class="n">filter</span> <span class="p">{</span> <span class="n">it</span> <span class="o">&gt;</span> <span class="n">first</span><span class="p">()</span> <span class="p">}.</span><span class="n">qsort</span><span class="p">()</span>
</pre></div>
<p>A more efficient version that does only one comparison per element:
</p>
<div class="mw-highlight mw-highlight-lang-scala mw-content-ltr" dir="ltr"><pre><span></span><span class="n">fun</span> <span class="o">&lt;</span><span class="nc">E</span> <span class="p">:</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="nc">E</span><span class="o">&gt;&gt;</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">E</span><span class="o">&gt;</span><span class="p">.</span><span class="n">qsort</span><span class="p">():</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">E</span><span class="o">&gt;</span> <span class="o">=</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">size</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="bp">this</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="p">(</span><span class="n">less</span><span class="p">,</span> <span class="n">high</span><span class="p">)</span> <span class="o">=</span> <span class="n">subList</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="p">).</span><span class="n">partition</span> <span class="p">{</span> <span class="n">it</span> <span class="o">&lt;</span> <span class="n">first</span><span class="p">()</span> <span class="p">}</span>
            <span class="n">less</span><span class="p">.</span><span class="n">qsort</span><span class="p">()</span> <span class="o">+</span> <span class="n">first</span><span class="p">()</span> <span class="o">+</span> <span class="n">high</span><span class="p">.</span><span class="n">qsort</span><span class="p">()</span>
        <span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="Lambdatalk"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Lambdatalk" title="Category:Lambdatalk">Lambdatalk</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=89" title="Edit section: Lambdatalk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="nv">We</span> <span class="nv">create</span> <span class="nv">a</span> <span class="nv">binary</span> <span class="nv">tree</span> <span class="nv">from</span> <span class="nv">a</span> <span class="nb">random</span> <span class="nv">array,</span> <span class="nv">then</span> <span class="nv">we</span> <span class="nv">walk</span> <span class="k">the</span> <span class="nv">canopy.</span>

<span class="mi">1</span><span class="p">)</span> <span class="nv">three</span> <span class="nv">functions</span> <span class="nv">for</span> <span class="nv">readability:</span>         
 
<span class="nv">{def</span> <span class="nv">BT.data</span>  <span class="nv">{lambda</span> <span class="nv">{:t}</span> <span class="nv">{A.get</span> <span class="mi">0</span> <span class="ss">:t}}}</span> <span class="nv">-&gt;</span> <span class="nv">BT.data</span>
<span class="nv">{def</span> <span class="nv">BT.left</span>  <span class="nv">{lambda</span> <span class="nv">{:t}</span> <span class="nv">{A.get</span> <span class="mi">1</span> <span class="ss">:t}}}</span> <span class="nv">-&gt;</span> <span class="nv">BT.left</span>
<span class="nv">{def</span> <span class="nv">BT.right</span> <span class="nv">{lambda</span> <span class="nv">{:t}</span> <span class="nv">{A.get</span> <span class="mi">2</span> <span class="ss">:t}}}</span> <span class="nv">-&gt;</span> <span class="nv">BT.right</span>

<span class="mi">2</span><span class="p">)</span> <span class="nv">adding</span> <span class="nv">a</span> <span class="nv">leaf</span> <span class="nv">to</span> <span class="k">the</span> <span class="nv">tree:</span> 

<span class="nv">{def</span> <span class="nv">BT.add</span> <span class="nv">{lambda</span> <span class="nv">{:x</span> <span class="ss">:t}</span>
 <span class="nv">{if</span> <span class="nv">{A.empty?</span> <span class="ss">:t}</span>
  <span class="nv">then</span> <span class="nv">{A.new</span> <span class="ss">:x</span> <span class="nv">{A.new}</span> <span class="nv">{A.new}}</span>
  <span class="nv">else</span> <span class="nv">{if</span>   <span class="nv">{=</span> <span class="ss">:x</span> <span class="nv">{BT.data</span> <span class="ss">:t}}</span>
        <span class="nv">then</span> <span class="ss">:t</span>
        <span class="nv">else</span> <span class="nv">{if</span> <span class="nv">{&lt;</span> <span class="ss">:x</span> <span class="nv">{BT.data</span> <span class="ss">:t}}</span>
              <span class="nv">then</span> <span class="nv">{A.new</span> <span class="nv">{BT.data</span> <span class="ss">:t}</span> 
                          <span class="nv">{BT.add</span> <span class="ss">:x</span> <span class="nv">{BT.left</span> <span class="ss">:t}}</span>
                          <span class="nv">{BT.right</span> <span class="ss">:t}}</span>
              <span class="nv">else</span> <span class="nv">{A.new</span> <span class="nv">{BT.data</span> <span class="ss">:t}</span> 
                          <span class="nv">{BT.left</span> <span class="ss">:t}</span>
                          <span class="nv">{BT.add</span> <span class="ss">:x</span> <span class="nv">{BT.right</span> <span class="ss">:t}}</span> <span class="nv">}}}}}}</span>
<span class="nv">-&gt;</span> <span class="nv">BT.add</span>

<span class="mi">3</span><span class="p">)</span> <span class="nv">creating</span> <span class="k">the</span> <span class="nv">tree</span> <span class="nv">from</span> <span class="nv">an</span> <span class="nc">array</span> <span class="nv">of</span> <span class="nv">numbers:</span>

<span class="nv">{def</span> <span class="nv">BT.create</span>           
 <span class="nv">{def</span> <span class="nv">BT.create.rec</span>
  <span class="nv">{lambda</span> <span class="nv">{:l</span> <span class="ss">:t}</span>
   <span class="nv">{if</span> <span class="nv">{A.empty?</span> <span class="ss">:l}</span>
    <span class="nv">then</span> <span class="ss">:t</span>
    <span class="nv">else</span> <span class="nv">{BT.create.rec</span> <span class="nv">{A.rest</span> <span class="ss">:l}</span>
                        <span class="nv">{BT.add</span> <span class="nv">{A.first</span> <span class="ss">:l}</span> <span class="ss">:t}}</span> <span class="nv">}}}</span>
 <span class="nv">{lambda</span> <span class="nv">{:l}</span>
  <span class="nv">{BT.create.rec</span> <span class="ss">:l</span> <span class="nv">{A.new}}</span> <span class="nv">}}</span>
<span class="nv">-&gt;</span> <span class="nv">BT.create</span>

<span class="mi">4</span><span class="p">)</span> <span class="nv">walking</span> <span class="k">the</span> <span class="nv">canopy</span> <span class="nv">-&gt;</span> <span class="nv">sorting</span> <span class="nv">in</span> <span class="nv">increasing</span> <span class="nv">order:</span>

<span class="nv">{def</span> <span class="nv">BT.sort</span>
 <span class="nv">{lambda</span> <span class="nv">{:t}</span>
  <span class="nv">{if</span> <span class="nv">{A.empty?</span> <span class="ss">:t}</span>
   <span class="nv">then</span> <span class="nv">else</span> <span class="nv">{BT.sort</span> <span class="nv">{BT.left</span> <span class="ss">:t}}</span>
             <span class="nv">{BT.data</span> <span class="ss">:t}</span>
             <span class="nv">{BT.sort</span> <span class="nv">{BT.right</span> <span class="ss">:t}}</span> <span class="nv">}}}</span>   
<span class="nv">-&gt;</span> <span class="nv">BT.sort</span>

<span class="nv">Testing</span>

<span class="mi">1</span><span class="p">)</span> <span class="nv">generating</span> <span class="nb">random</span> <span class="nv">numbers:</span>

<span class="nv">{def</span> <span class="nv">L</span> <span class="nv">{A.new</span> 
 <span class="nv">{S.map</span> <span class="nv">{lambda</span> <span class="nv">{:n}</span> <span class="nv">{floor</span> <span class="nv">{*</span> <span class="nv">{random}</span> <span class="nv">100000}}}</span> <span class="nv">{S.serie</span> <span class="mi">1</span> <span class="nv">100}}}}</span> 
<span class="nv">-&gt;</span> <span class="nv">L</span> <span class="nb">=</span>  <span class="nv">[1850,7963,50540,92667,72892,47361,19018,40640,10126,80235,48407,51623,63597,71675,27814,63478,18985,88032,46585,85209,</span>
<span class="mi">74053</span><span class="o">,</span><span class="mi">95005</span><span class="o">,</span><span class="mi">27592</span><span class="o">,</span><span class="mi">9575</span><span class="o">,</span><span class="mi">22162</span><span class="o">,</span><span class="mi">35904</span><span class="o">,</span><span class="mi">70467</span><span class="o">,</span><span class="mi">38527</span><span class="o">,</span><span class="mi">89715</span><span class="o">,</span><span class="mi">36594</span><span class="o">,</span><span class="mi">54309</span><span class="o">,</span><span class="mi">39950</span><span class="o">,</span><span class="mi">89345</span><span class="o">,</span><span class="mi">72224</span><span class="o">,</span><span class="mi">7772</span><span class="o">,</span><span class="mi">65756</span><span class="o">,</span><span class="mi">68766</span><span class="o">,</span><span class="mi">43942</span><span class="o">,</span><span class="mi">52422</span><span class="o">,</span><span class="mi">85144</span><span class="o">,</span>
<span class="mi">66010</span><span class="o">,</span><span class="mi">38961</span><span class="o">,</span><span class="mi">21647</span><span class="o">,</span><span class="mi">53194</span><span class="o">,</span><span class="mi">72166</span><span class="o">,</span><span class="mi">33545</span><span class="o">,</span><span class="mi">49037</span><span class="o">,</span><span class="mi">23218</span><span class="o">,</span><span class="mi">27969</span><span class="o">,</span><span class="mi">83566</span><span class="o">,</span><span class="mi">19382</span><span class="o">,</span><span class="mi">53120</span><span class="o">,</span><span class="mi">55291</span><span class="o">,</span><span class="mi">77374</span><span class="o">,</span><span class="mi">27502</span><span class="o">,</span><span class="mi">66648</span><span class="o">,</span><span class="mi">99637</span><span class="o">,</span><span class="mi">37322</span><span class="o">,</span><span class="mi">9815</span><span class="o">,</span><span class="mi">432</span><span class="o">,</span><span class="mi">90565</span><span class="o">,</span>
<span class="mi">37831</span><span class="o">,</span><span class="mi">26503</span><span class="o">,</span><span class="mi">99232</span><span class="o">,</span><span class="mi">87024</span><span class="o">,</span><span class="mi">65625</span><span class="o">,</span><span class="mi">75155</span><span class="o">,</span><span class="mi">55382</span><span class="o">,</span><span class="mi">30120</span><span class="o">,</span><span class="mi">58117</span><span class="o">,</span><span class="mi">70031</span><span class="o">,</span><span class="mi">13011</span><span class="o">,</span><span class="mi">81375</span><span class="o">,</span><span class="mi">10490</span><span class="o">,</span><span class="mi">39786</span><span class="o">,</span><span class="mi">1926</span><span class="o">,</span><span class="mi">71311</span><span class="o">,</span><span class="mi">4213</span><span class="o">,</span><span class="mi">55183</span><span class="o">,</span><span class="mi">2583</span><span class="o">,</span><span class="mi">22075</span><span class="o">,</span><span class="mi">90411</span><span class="o">,</span>
<span class="mi">92928</span><span class="o">,</span><span class="mi">61120</span><span class="o">,</span><span class="mi">94259</span><span class="o">,</span><span class="mi">433</span><span class="o">,</span><span class="mi">93332</span><span class="o">,</span><span class="mi">88423</span><span class="o">,</span><span class="mi">64119</span><span class="o">,</span><span class="mi">40850</span><span class="o">,</span><span class="mi">94318</span><span class="o">,</span><span class="mi">27816</span><span class="o">,</span><span class="mi">84818</span><span class="o">,</span><span class="mi">90632</span><span class="o">,</span><span class="mi">5094</span><span class="o">,</span><span class="mi">36696</span><span class="o">,</span><span class="mi">94705</span><span class="o">,</span><span class="mi">50602</span><span class="o">,</span><span class="mi">45818</span><span class="o">,</span><span class="nv">61365]</span>

<span class="mi">2</span><span class="p">)</span> <span class="nv">creating</span> <span class="k">the</span> <span class="nv">tree</span> <span class="nv">is</span> <span class="k">the</span> <span class="nv">main</span> <span class="nv">work:</span>

<span class="nv">{def</span> <span class="no">T</span> <span class="nv">{BT.create</span> <span class="nv">{L}}}</span> 
<span class="nv">-&gt;</span> <span class="no">T</span> <span class="nb">=</span> <span class="nv">[1850,[432,],[433,],]]],[7963,[7772,[1926,],[4213,[2583,],]],[5094,],]]]],]],[50540,[47361,[19018,[10126,[9575,],</span>
<span class="nv">[9815,],]]],[18985,[13011,[10490,],]],]],]]],[40640,[27814,[27592,[22162,[21647,[19382,],]],[22075,],]]],[23218,],</span>
<span class="nv">[27502,[26503,],]],]]]],]],[35904,[33545,[27969,[27816,],]],[30120,],]]],]],[38527,[36594,],[37322,[36696,],]],[37831,],]]]],</span>
<span class="nv">[39950,[38961,],[39786,],]]],]]]]],[46585,[43942,[40850,],]],[45818,],]]],]]]],[48407,],[49037,],]]]],[92667,[72892,</span>
<span class="nv">[51623,[50602,],]],[63597,[63478,[54309,[52422,],[53194,[53120,],]],]]],[55291,[55183,],]],[55382,],[58117,],[61120,],[61365,],]]]]]]],]],[71675,[70467,[65756,[65625,[64119,],]],]],[68766,[66010,],[66648,],]]],[70031,],]]]],[71311,],]]],</span>
<span class="nv">[72224,[72166,],]],]]]]],[80235,[74053,],[77374,[75155,],]],]]],[88032,[85209,[85144,[83566,[81375,],]],[84818,],]]],]],</span>
<span class="nv">[87024,],]]],[89715,[89345,[88423,],]],]],[90565,[90411,],]],[90632,],]]]]]]],[95005,[92928,],[94259,[93332,],]],[94318,],</span>
<span class="nv">[94705,],]]]]],[99637,[99232,],]],]]]]]]]</span>

<span class="mi">3</span><span class="p">)</span> <span class="nv">walking</span> <span class="k">the</span> <span class="nv">canopy</span> <span class="nv">is</span> <span class="nv">fast:</span>   

<span class="nv">{BT.sort</span> <span class="nv">{T}}</span>
<span class="nv">-&gt;</span>  <span class="mi">432</span> <span class="mi">433</span> <span class="mi">1850</span> <span class="mi">1926</span> <span class="mi">2583</span> <span class="mi">4213</span> <span class="mi">5094</span> <span class="mi">7772</span> <span class="mi">7963</span> <span class="mi">9575</span> <span class="mi">9815</span> <span class="mi">10126</span> <span class="mi">10490</span> <span class="mi">13011</span> <span class="mi">18985</span> <span class="mi">19018</span> <span class="mi">19382</span> <span class="mi">21647</span> <span class="mi">22075</span> <span class="mi">22162</span> <span class="mi">23218</span> <span class="mi">26503</span>
 <span class="mi">27502</span> <span class="mi">27592</span> <span class="mi">27814</span> <span class="mi">27816</span> <span class="mi">27969</span> <span class="mi">30120</span> <span class="mi">33545</span> <span class="mi">35904</span> <span class="mi">36594</span> <span class="mi">36696</span> <span class="mi">37322</span> <span class="mi">37831</span> <span class="mi">38527</span> <span class="mi">38961</span> <span class="mi">39786</span> <span class="mi">39950</span> <span class="mi">40640</span> <span class="mi">40850</span> <span class="mi">43942</span> <span class="mi">45818</span>
 <span class="mi">46585</span> <span class="mi">47361</span> <span class="mi">48407</span> <span class="mi">49037</span> <span class="mi">50540</span> <span class="mi">50602</span> <span class="mi">51623</span> <span class="mi">52422</span> <span class="mi">53120</span> <span class="mi">53194</span> <span class="mi">54309</span> <span class="mi">55183</span> <span class="mi">55291</span> <span class="mi">55382</span> <span class="mi">58117</span> <span class="mi">61120</span> <span class="mi">61365</span> <span class="mi">63478</span> <span class="mi">63597</span> <span class="mi">64119</span>
 <span class="mi">65625</span> <span class="mi">65756</span> <span class="mi">66010</span> <span class="mi">66648</span> <span class="mi">68766</span> <span class="mi">70031</span> <span class="mi">70467</span> <span class="mi">71311</span> <span class="mi">71675</span> <span class="mi">72166</span> <span class="mi">72224</span> <span class="mi">72892</span> <span class="mi">74053</span> <span class="mi">75155</span> <span class="mi">77374</span> <span class="mi">80235</span> <span class="mi">81375</span> <span class="mi">83566</span> <span class="mi">84818</span> <span class="mi">85144</span>
 <span class="mi">85209</span> <span class="mi">87024</span> <span class="mi">88032</span> <span class="mi">88423</span> <span class="mi">89345</span> <span class="mi">89715</span> <span class="mi">90411</span> <span class="mi">90565</span> <span class="mi">90632</span> <span class="mi">92667</span> <span class="mi">92928</span> <span class="mi">93332</span> <span class="mi">94259</span> <span class="mi">94318</span> <span class="mi">94705</span> <span class="mi">95005</span> <span class="mi">99232</span> <span class="mi">99637</span>     

<span class="mi">4</span><span class="p">)</span> <span class="nv">walking</span> <span class="nv">with</span> <span class="nv">new</span> <span class="nv">leaves</span> <span class="nv">is</span> <span class="nv">fast:</span>

<span class="nv">{BT.sort</span> <span class="nv">{BT.add</span> <span class="mi">-1</span> <span class="nv">{T}}}</span>
<span class="nv">-&gt;</span>  <span class="mi">-1</span> <span class="mi">432</span> <span class="mi">433</span> <span class="mi">1850</span> <span class="mi">1926</span> <span class="mi">2583</span> <span class="mi">4213</span> <span class="mi">5094</span> <span class="mi">7772</span> <span class="mi">7963</span> <span class="mi">9575</span> <span class="mi">9815</span> <span class="mi">10126</span> <span class="mi">10490</span> <span class="mi">13011</span> <span class="mi">18985</span> <span class="mi">19018</span> <span class="mi">19382</span> <span class="mi">21647</span> <span class="mi">22075</span> <span class="mi">22162</span> <span class="mi">23218</span> <span class="mi">26503</span>
 <span class="mi">27502</span> <span class="mi">27592</span> <span class="mi">27814</span> <span class="mi">27816</span> <span class="mi">27969</span> <span class="mi">30120</span> <span class="mi">33545</span> <span class="mi">35904</span> <span class="mi">36594</span> <span class="mi">36696</span> <span class="mi">37322</span> <span class="mi">37831</span> <span class="mi">38527</span> <span class="mi">38961</span> <span class="mi">39786</span> <span class="mi">39950</span> <span class="mi">40640</span> <span class="mi">40850</span> <span class="mi">43942</span> <span class="mi">45818</span> <span class="mi">46585</span>
 <span class="mi">47361</span> <span class="mi">48407</span> <span class="mi">49037</span> <span class="mi">50540</span> <span class="mi">50602</span> <span class="mi">51623</span> <span class="mi">52422</span> <span class="mi">53120</span> <span class="mi">53194</span> <span class="mi">54309</span> <span class="mi">55183</span> <span class="mi">55291</span> <span class="mi">55382</span> <span class="mi">58117</span> <span class="mi">61120</span> <span class="mi">61365</span> <span class="mi">63478</span> <span class="mi">63597</span> <span class="mi">64119</span> <span class="mi">65625</span> <span class="mi">65756</span>
 <span class="mi">66010</span> <span class="mi">66648</span> <span class="mi">68766</span> <span class="mi">70031</span> <span class="mi">70467</span> <span class="mi">71311</span> <span class="mi">71675</span> <span class="mi">72166</span> <span class="mi">72224</span> <span class="mi">72892</span> <span class="mi">74053</span> <span class="mi">75155</span> <span class="mi">77374</span> <span class="mi">80235</span> <span class="mi">81375</span> <span class="mi">83566</span> <span class="mi">84818</span> <span class="mi">85144</span> <span class="mi">85209</span> <span class="mi">87024</span> <span class="mi">88032</span>
 <span class="mi">88423</span> <span class="mi">89345</span> <span class="mi">89715</span> <span class="mi">90411</span> <span class="mi">90565</span> <span class="mi">90632</span> <span class="mi">92667</span> <span class="mi">92928</span> <span class="mi">93332</span> <span class="mi">94259</span> <span class="mi">94318</span> <span class="mi">94705</span> <span class="mi">95005</span> <span class="mi">99232</span> <span class="mi">99637</span>

<span class="nv">{BT.sort</span> <span class="nv">{BT.add</span> <span class="mi">50000</span> <span class="nv">{T}}}</span>
<span class="nv">-&gt;</span>  <span class="mi">432</span> <span class="mi">433</span> <span class="mi">1850</span> <span class="mi">1926</span> <span class="mi">2583</span> <span class="mi">4213</span> <span class="mi">5094</span> <span class="mi">7772</span> <span class="mi">7963</span> <span class="mi">9575</span> <span class="mi">9815</span> <span class="mi">10126</span> <span class="mi">10490</span> <span class="mi">13011</span> <span class="mi">18985</span> <span class="mi">19018</span> <span class="mi">19382</span> <span class="mi">21647</span> <span class="mi">22075</span> <span class="mi">22162</span> <span class="mi">23218</span> <span class="mi">26503</span>
 <span class="mi">27502</span> <span class="mi">27592</span> <span class="mi">27814</span> <span class="mi">27816</span> <span class="mi">27969</span> <span class="mi">30120</span> <span class="mi">33545</span> <span class="mi">35904</span> <span class="mi">36594</span> <span class="mi">36696</span> <span class="mi">37322</span> <span class="mi">37831</span> <span class="mi">38527</span> <span class="mi">38961</span> <span class="mi">39786</span> <span class="mi">39950</span> <span class="mi">40640</span> <span class="mi">40850</span> <span class="mi">43942</span> <span class="mi">45818</span> <span class="mi">46585</span>
 <span class="mi">47361</span> <span class="mi">48407</span> <span class="mi">49037</span> <span class="mi">50000</span> <span class="mi">50540</span> <span class="mi">50602</span> <span class="mi">51623</span> <span class="mi">52422</span> <span class="mi">53120</span> <span class="mi">53194</span> <span class="mi">54309</span> <span class="mi">55183</span> <span class="mi">55291</span> <span class="mi">55382</span> <span class="mi">58117</span> <span class="mi">61120</span> <span class="mi">61365</span> <span class="mi">63478</span> <span class="mi">63597</span> <span class="mi">64119</span> <span class="mi">65625</span>
 <span class="mi">65756</span> <span class="mi">66010</span> <span class="mi">66648</span> <span class="mi">68766</span> <span class="mi">70031</span> <span class="mi">70467</span> <span class="mi">71311</span> <span class="mi">71675</span> <span class="mi">72166</span> <span class="mi">72224</span> <span class="mi">72892</span> <span class="mi">74053</span> <span class="mi">75155</span> <span class="mi">77374</span> <span class="mi">80235</span> <span class="mi">81375</span> <span class="mi">83566</span> <span class="mi">84818</span> <span class="mi">85144</span> <span class="mi">85209</span> <span class="mi">87024</span>
 <span class="mi">88032</span> <span class="mi">88423</span> <span class="mi">89345</span> <span class="mi">89715</span> <span class="mi">90411</span> <span class="mi">90565</span> <span class="mi">90632</span> <span class="mi">92667</span> <span class="mi">92928</span> <span class="mi">93332</span> <span class="mi">94259</span> <span class="mi">94318</span> <span class="mi">94705</span> <span class="mi">95005</span> <span class="mi">99232</span> <span class="mi">99637</span>

<span class="nv">{BT.sort</span> <span class="nv">{BT.add</span> <span class="mi">100000</span> <span class="nv">{T}}}</span>
<span class="nv">-&gt;</span>  <span class="mi">432</span> <span class="mi">433</span> <span class="mi">1850</span> <span class="mi">1926</span> <span class="mi">2583</span> <span class="mi">4213</span> <span class="mi">5094</span> <span class="mi">7772</span> <span class="mi">7963</span> <span class="mi">9575</span> <span class="mi">9815</span> <span class="mi">10126</span> <span class="mi">10490</span> <span class="mi">13011</span> <span class="mi">18985</span> <span class="mi">19018</span> <span class="mi">19382</span> <span class="mi">21647</span> <span class="mi">22075</span> <span class="mi">22162</span> <span class="mi">23218</span> <span class="mi">26503</span>
 <span class="mi">27502</span> <span class="mi">27592</span> <span class="mi">27814</span> <span class="mi">27816</span> <span class="mi">27969</span> <span class="mi">30120</span> <span class="mi">33545</span> <span class="mi">35904</span> <span class="mi">36594</span> <span class="mi">36696</span> <span class="mi">37322</span> <span class="mi">37831</span> <span class="mi">38527</span> <span class="mi">38961</span> <span class="mi">39786</span> <span class="mi">39950</span> <span class="mi">40640</span> <span class="mi">40850</span> <span class="mi">43942</span> <span class="mi">45818</span> <span class="mi">46585</span>
 <span class="mi">47361</span> <span class="mi">48407</span> <span class="mi">49037</span> <span class="mi">50540</span> <span class="mi">50602</span> <span class="mi">51623</span> <span class="mi">52422</span> <span class="mi">53120</span> <span class="mi">53194</span> <span class="mi">54309</span> <span class="mi">55183</span> <span class="mi">55291</span> <span class="mi">55382</span> <span class="mi">58117</span> <span class="mi">61120</span> <span class="mi">61365</span> <span class="mi">63478</span> <span class="mi">63597</span> <span class="mi">64119</span> <span class="mi">65625</span> <span class="mi">65756</span>
 <span class="mi">66010</span> <span class="mi">66648</span> <span class="mi">68766</span> <span class="mi">70031</span> <span class="mi">70467</span> <span class="mi">71311</span> <span class="mi">71675</span> <span class="mi">72166</span> <span class="mi">72224</span> <span class="mi">72892</span> <span class="mi">74053</span> <span class="mi">75155</span> <span class="mi">77374</span> <span class="mi">80235</span> <span class="mi">81375</span> <span class="mi">83566</span> <span class="mi">84818</span> <span class="mi">85144</span> <span class="mi">85209</span> <span class="mi">87024</span> <span class="mi">88032</span>
 <span class="mi">88423</span> <span class="mi">89345</span> <span class="mi">89715</span> <span class="mi">90411</span> <span class="mi">90565</span> <span class="mi">90632</span> <span class="mi">92667</span> <span class="mi">92928</span> <span class="mi">93332</span> <span class="mi">94259</span> <span class="mi">94318</span> <span class="mi">94705</span> <span class="mi">95005</span> <span class="mi">99232</span> <span class="mi">99637</span> <span class="mi">100000</span>
</pre></div>
<p><br/>
</p>
<h2><span class="mw-headline" id="Lobster"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Lobster" title="Category:Lobster">Lobster</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=90" title="Edit section: Lobster">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>include "std.lobster"

def quicksort(xs, lt):
    if xs.length &lt;= 1:
        xs
    else:
        pivot&#160;:= xs[0]
        tail&#160;:= xs.slice(1, -1)
        f1&#160;:= filter tail:  lt(_, pivot)
        f2&#160;:= filter tail: !lt(_, pivot)
        append(append(quicksort(f1, lt), [ pivot ]),
                      quicksort(f2, lt))

sorted&#160;:= [ 3, 9, 5, 4, 1, 3, 9, 5, 4, 1 ].quicksort(): _a &lt; _b
print sorted</pre></div>
<h2><span class="mw-headline" id="Logo"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Logo" title="Category:Logo">Logo</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=91" title="Edit section: Logo">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>; quicksort (lists, functional)

to small? :list
  output or [empty? :list] [empty? butfirst :list]
end
to quicksort :list
  if small? :list [output :list]
  localmake "pivot first :list
  output (sentence
    quicksort filter [? &lt; :pivot] butfirst :list
              filter [? = :pivot]          :list
    quicksort filter [? &gt; :pivot] butfirst :list
  )
end

show quicksort [1 3 5 7 9 8 6 4 2]</pre></div>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>; quicksort (arrays, in-place)

to incr :name
  make :name (thing :name) + 1
end
to decr :name
  make :name (thing :name) - 1
end
to swap :i :j :a
  localmake "t item :i :a
  setitem :i :a item :j :a
  setitem :j :a :t
end

to quick :a :low :high
  if :high &lt;= :low [stop]
  localmake "l :low
  localmake "h :high
  localmake "pivot item ashift (:l + :h) -1  :a
  do.while [
    while [(item :l :a) &lt; :pivot] [incr "l]
    while [(item :h :a) &gt; :pivot] [decr "h]
    if :l &lt;= :h [swap :l :h :a  incr "l  decr "h]
  ] [:l &lt;= :h]
  quick :a :low :h
  quick :a :l :high
end
to sort :a
  quick :a first :a count :a
end

make "test {1 3 5 7 9 8 6 4 2}
sort :test
show :test</pre></div>
<h2><span class="mw-headline" id="Logtalk"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Logtalk" title="Category:Logtalk">Logtalk</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=92" title="Edit section: Logtalk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-logtalk mw-content-ltr" dir="ltr"><pre><span></span>quicksort(<span class="nv">List</span>, <span class="nv">Sorted</span>) <span class="o">:-</span>
    quicksort(<span class="nv">List</span>, [], <span class="nv">Sorted</span>).

quicksort([], <span class="nv">Sorted</span>, <span class="nv">Sorted</span>).
quicksort([<span class="nv">Pivot</span>| <span class="nv">Rest</span>], <span class="nv">Acc</span>, <span class="nv">Sorted</span>) <span class="o">:-</span> 
    partition(<span class="nv">Rest</span>, <span class="nv">Pivot</span>, <span class="nv">Smaller0</span>, <span class="nv">Bigger0</span>),
    quicksort(<span class="nv">Smaller0</span>, [<span class="nv">Pivot</span>| <span class="nv">Bigger</span>], <span class="nv">Sorted</span>),
    quicksort(<span class="nv">Bigger0</span>, <span class="nv">Acc</span>, <span class="nv">Bigger</span>).

partition([], <span class="nv">_</span>, [], []).
partition([<span class="nv">X</span>| <span class="nv">Xs</span>], <span class="nv">Pivot</span>, <span class="nv">Smalls</span>, <span class="nv">Bigs</span>) <span class="o">:-</span>
    (   <span class="nv">X</span> <span class="o">@&lt;</span> <span class="nv">Pivot</span> <span class="o">-&gt;</span>
        <span class="nv">Smalls</span> <span class="o">=</span> [<span class="nv">X</span>| <span class="nv">Rest</span>],
        partition(<span class="nv">Xs</span>, <span class="nv">Pivot</span>, <span class="nv">Rest</span>, <span class="nv">Bigs</span>)
    <span class="o">;</span>   <span class="nv">Bigs</span> <span class="o">=</span> [<span class="nv">X</span>| <span class="nv">Rest</span>],
        partition(<span class="nv">Xs</span>, <span class="nv">Pivot</span>, <span class="nv">Smalls</span>, <span class="nv">Rest</span>)
    ).
</pre></div>
<h2><span class="mw-headline" id="Lua"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Lua" title="Category:Lua">Lua</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=93" title="Edit section: Lua">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
NOTE: If you want to use quicksort in a Lua script, you don't need to implement it yourself. Just do: <pre>table.sort(tableName)</pre>
<h3><span class="mw-headline" id="in-place">in-place</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=94" title="Edit section: in-place">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-highlight-lang-lua mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">--in-place quicksort</span>
<span class="kr">function</span> <span class="nf">quicksort</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">endi</span><span class="p">)</span>
  <span class="n">start</span><span class="p">,</span> <span class="n">endi</span> <span class="o">=</span> <span class="n">start</span> <span class="ow">or</span> <span class="mi">1</span><span class="p">,</span> <span class="n">endi</span> <span class="ow">or</span> <span class="o">#</span><span class="n">t</span>
  <span class="c1">--partition w.r.t. first element</span>
  <span class="kr">if</span><span class="p">(</span><span class="n">endi</span> <span class="o">-</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="kr">then</span> <span class="kr">return</span> <span class="n">t</span> <span class="kr">end</span>
  <span class="kd">local</span> <span class="n">pivot</span> <span class="o">=</span> <span class="n">start</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">endi</span> <span class="kr">do</span>
    <span class="kr">if</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">t</span><span class="p">[</span><span class="n">pivot</span><span class="p">]</span> <span class="kr">then</span>
      <span class="kr">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">pivot</span> <span class="o">+</span> <span class="mi">1</span> <span class="kr">then</span>
        <span class="n">t</span><span class="p">[</span><span class="n">pivot</span><span class="p">],</span><span class="n">t</span><span class="p">[</span><span class="n">pivot</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="n">pivot</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="n">t</span><span class="p">[</span><span class="n">pivot</span><span class="p">]</span>
      <span class="kr">else</span>
        <span class="n">t</span><span class="p">[</span><span class="n">pivot</span><span class="p">],</span><span class="n">t</span><span class="p">[</span><span class="n">pivot</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">t</span><span class="p">[</span><span class="n">pivot</span><span class="p">],</span><span class="n">t</span><span class="p">[</span><span class="n">pivot</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
      <span class="kr">end</span>
      <span class="n">pivot</span> <span class="o">=</span> <span class="n">pivot</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="kr">end</span>
  <span class="kr">end</span>
  <span class="n">t</span> <span class="o">=</span> <span class="n">quicksort</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">pivot</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">quicksort</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">pivot</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">endi</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">--example</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unpack</span><span class="p">(</span><span class="n">quicksort</span><span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">}))</span>
</pre></div>
<h3><span class="mw-headline" id="non_in-place">non in-place</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=95" title="Edit section: non in-place">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-highlight-lang-lua mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">function</span> <span class="nf">quicksort</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
  <span class="kr">if</span> <span class="o">#</span><span class="n">t</span><span class="o">&lt;</span><span class="mi">2</span> <span class="kr">then</span> <span class="kr">return</span> <span class="n">t</span> <span class="kr">end</span>
  <span class="kd">local</span> <span class="n">pivot</span><span class="o">=</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="kd">local</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="p">{},{},{}</span>
  <span class="kr">for</span> <span class="n">_</span><span class="p">,</span><span class="n">v</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="kr">do</span>
    <span class="kr">if</span>     <span class="n">v</span><span class="o">&lt;</span><span class="n">pivot</span> <span class="kr">then</span> <span class="n">a</span><span class="p">[</span><span class="o">#</span><span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">v</span>
    <span class="kr">elseif</span> <span class="n">v</span><span class="o">&gt;</span><span class="n">pivot</span> <span class="kr">then</span> <span class="n">c</span><span class="p">[</span><span class="o">#</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">v</span>
    <span class="kr">else</span>                <span class="n">b</span><span class="p">[</span><span class="o">#</span><span class="n">b</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">v</span>
    <span class="kr">end</span>
  <span class="kr">end</span>
  <span class="n">a</span><span class="o">=</span><span class="n">quicksort</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
  <span class="n">c</span><span class="o">=</span><span class="n">quicksort</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
  <span class="kr">for</span> <span class="n">_</span><span class="p">,</span><span class="n">v</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="kr">do</span> <span class="n">a</span><span class="p">[</span><span class="o">#</span><span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">v</span> <span class="kr">end</span>
  <span class="kr">for</span> <span class="n">_</span><span class="p">,</span><span class="n">v</span> <span class="kr">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="kr">do</span> <span class="n">a</span><span class="p">[</span><span class="o">#</span><span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">v</span> <span class="kr">end</span>
  <span class="kr">return</span> <span class="n">a</span>
<span class="kr">end</span>
</pre></div>
<h2><span class="mw-headline" id="Lucid"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Lucid" title="Category:Lucid">Lucid</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=96" title="Edit section: Lucid">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20230609112831/http://i.csc.uvic.ca/home/hei/lup/06.html">[1]</a>
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>qsort(a) = if eof(first a) then a else follow(qsort(b0),qsort(b1)) fi
 where
    p = first a &lt; a;
    b0 = a whenever p;
    b1 = a whenever not p;
    follow(x,y) = if xdone then y upon xdone else x fi
                    where
                       xdone = iseod x fby xdone or iseod x; 
                    end;
 end</pre></div>
<h2><span class="mw-headline" id="M2000_Interpreter"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:M2000_Interpreter" title="Category:M2000 Interpreter">M2000 Interpreter</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=97" title="Edit section: M2000 Interpreter">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Recursive_calling_Functions">Recursive calling Functions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=98" title="Edit section: Recursive calling Functions">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>Module Checkit1 {
      Group Quick {
      Private:
            Function partition {
                     Read &amp;A(), p, r
                     x = A(r)
                     i = p-1
                     For j=p to r-1 {
                         If .LE(A(j), x) Then {
                                i++
                                Swap A(i),A(j)
                             }
                      }
                      Swap A(i+1),A(r)
                     = i+1
                  }
      Public:
            LE=Lambda-&gt;Number&lt;=Number
            Function quicksort {
                 Read &amp;A(), p, r
                 If p &lt; r Then {
                   q = .partition(&amp;A(), p, r)
                   Call .quicksort(&amp;A(), p, q - 1)
                   Call .quicksort(&amp;A(), q + 1, r)
                }
            }
      }
      Dim A(10)&lt;&lt;Random(50, 100)
      Print A()
      Call Quick.quicksort(&amp;A(), 0, Len(A())-1)
      Print A()
}
Checkit1</pre></div>
<h3><span class="mw-headline" id="Recursive_calling_Subs">Recursive calling Subs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=99" title="Edit section: Recursive calling Subs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Variables p, r, q removed from quicksort function. we use stack for values. Also Partition push to stack now. Works for string arrays too.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>Module Checkit2 {
      Class Quick {
      Private:
            partition=lambda-&gt; {
                  Read &amp;A(), p, r&#160;: i = p-1&#160;: x=A(r)
                  For j=p to r-1 {If .LE(A(j), x) Then i++:Swap A(i),A(j)
                  }&#160;: Swap A(i+1), A(r)&#160;:  Push i+1
            }
      Public:
            LE=Lambda-&gt;Number&lt;=Number
            Module ForStrings {
                  .partition&lt;=lambda-&gt; {
                        Read &amp;A$(), p, r&#160;: i = p-1&#160;: x$=A$(r)
                        For j=p to r-1 {If A$(j)&lt;= x$ Then i++:Swap A$(i),A$(j)
                        }&#160;: Swap A$(i+1), A$(r)&#160;: Push i+1
                  }
            }
            Function quicksort (ref$) {
                  myQuick()
                  sub myQuick()
                        If Stackitem() &gt;= stackitem(2) Then drop 2&#160;: Exit Sub
                        Over 2, 2&#160;: Call .partition(ref$)&#160;: Over&#160;: Shiftback  3, 2
                        myQuick(number,  number - 1)
                        myQuick( number + 1, number)
                  End Sub
             } 
      }
      Quick=Quick()
      Dim A(10)
      A(0):=57, 83, 74, 98, 51, 73, 85, 76, 65, 92
      Print A()
      Call Quick.quicksort(&amp;A(), 0, Len(A())-1)
      Print A()
      Quick=Quick()
      Quick.ForStrings
      Dim A$()
      A$()=("one","two", "three","four", "five")
      Print A$()
      Call Quick.quicksort(&amp;A$(), 0, Len(A$())-1)
      Print A$()
}
Checkit2</pre></div>
<h3><span class="mw-headline" id="Non_Recursive">Non Recursive</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=100" title="Edit section: Non Recursive">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Partition function return two values (where we want q, and use it as q-1 an q+1 now Partition() return final q-1 and q+1_
Example include numeric array, array of arrays (we provide a lambda for comparison) and string array.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>Module Checkit3 {
      Class Quick {
      Private:
            partition=lambda-&gt; {
                  Read &amp;A(), p, r&#160;: i = p-1&#160;: x=A(r)
                  For j=p to r-1 {If .LE(A(j), x) Then i++:Swap A(i),A(j)
                  }&#160;: Swap A(i+1), A(r)&#160;:  Push  i+2, i 
            }
      Public:
            LE=Lambda-&gt;Number&lt;=Number
            Module ForStrings {
                  .partition&lt;=lambda-&gt; {
                        Read &amp;A$(), p, r&#160;: i = p-1&#160;: x$=A$(r)
                        For j=p to r-1 {If A$(j)&lt;= x$ Then i++:Swap A$(i),A$(j)
                        }&#160;: Swap A$(i+1), A$(r)&#160;: Push i+2, i
                  }
            }
            Function quicksort {
                 Read ref$
                 {
                         loop&#160;: If Stackitem() &gt;= Stackitem(2) Then Drop 2&#160;: if  empty then {Break} else continue
                         over 2,2&#160;: call .partition(ref$) :shift 3 
                 }
            }
      }
      Quick=Quick()
      Dim A(10)&lt;&lt;Random(50, 100)
      Print A()
      Call Quick.quicksort(&amp;A(), 0, Len(A())-1)
      Print A()
      Quick=Quick()
      Function join$(a$()) {
            n=each(a$(), 1, -2)
            k$=""
            while n {
                  overwrite k$, ".", n^:=array$(n)
            }
            =k$
      }
      Stack New {
                  Data "1.3.6.1.4.1.11.2.17.19.3.4.0.4" , "1.3.6.1.4.1.11.2.17.19.3.4.0.1", "1.3.6.1.4.1.11150.3.4.0.1"
                  Data "1.3.6.1.4.1.11.2.17.19.3.4.0.10", "1.3.6.1.4.1.11.2.17.5.2.0.79", "1.3.6.1.4.1.11150.3.4.0"
                  Dim Base 0, arr(Stack.Size)
                  Link arr() to arr$()
                  i=0&#160;: While not Empty {arr$(i)=piece$(letter$+".", ".")&#160;: i++ }
      }
      \\ change comparison function
      Quick.LE=lambda (a, b)-&gt;{
            Link a, b to a$(), b$()
             def i=-1
             do {
                   i++
             } until a$(i)="" or b$(i)="" or a$(i)&lt;&gt;b$(i)
             if b$(i)="" then =a$(i)="":exit
             if a$(i)="" then =true:exit
             =val(a$(i))&lt;=val(b$(i))
      }
      Call Quick.quicksort(&amp;arr(), 0, Len(arr())-1)
      For i=0 to len(arr())-1 {
            Print join$(arr(i))
      }
      \\ Fresh load
      Quick=Quick()
      Quick.ForStrings
      Dim A$()
      A$()=("one","two", "three","four", "five")
      Print A$()
      Call Quick.quicksort(&amp;A$(), 0, Len(A$())-1)
      Print A$()
}
Checkit3</pre></div>
<h2><span class="mw-headline" id="M4"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:M4" title="Category:M4">M4</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=101" title="Edit section: M4">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>dnl  return the first element of a list when called in the funny way seen below
define(`arg1', `$1')dnl
dnl
dnl  append lists 1 and 2
define(`append',
   `ifelse(`$1',`()',
      `$2',
      `ifelse(`$2',`()',
         `$1',
         `substr($1,0,decr(len($1))),substr($2,1)')')')dnl
dnl
dnl  separate list 2 based on pivot 1, appending to left 3 and right 4,
dnl  until 2 is empty, and then combine the sort of left with pivot with
dnl  sort of right
define(`sep',
   `ifelse(`$2', `()',
      `append(append(quicksort($3),($1)),quicksort($4))',
      `ifelse(eval(arg1$2&lt;=$1),1,
         `sep($1,(shift$2),append($3,(arg1$2)),$4)',
         `sep($1,(shift$2),$3,append($4,(arg1$2)))')')')dnl
dnl
dnl  pick first element of list 1 as pivot and separate based on that
define(`quicksort',
   `ifelse(`$1', `()',
      `()',
      `sep(arg1$1,(shift$1),`()',`()')')')dnl
dnl
quicksort((3,1,4,1,5,9))</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>(1,1,3,4,5,9)
</pre>
<h2><span class="mw-headline" id="Maclisp"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Maclisp" title="Category:Maclisp">Maclisp</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=102" title="Edit section: Maclisp">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">;; While not strictly required, it simplifies the</span>
<span class="c1">;; implementation considerably to use filter. MACLisp</span>
<span class="c1">;; Doesn&#39;t have one out of the box, so we bring our own</span>
<span class="p">(</span><span class="nv">DEFUN</span> <span class="nv">FILTER</span> <span class="p">(</span><span class="nv">F</span> <span class="nv">LIST</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">COND</span>
         <span class="p">((</span><span class="nv">EQ</span> <span class="nv">LIST</span> <span class="no">NIL</span><span class="p">)</span> <span class="no">NIL</span><span class="p">)</span>
         <span class="p">((</span><span class="nv">FUNCALL</span> <span class="nv">F</span> <span class="p">(</span><span class="nv">CAR</span> <span class="nv">LIST</span><span class="p">))</span>
          <span class="p">(</span><span class="nv">CONS</span> <span class="p">(</span><span class="nv">CAR</span> <span class="nv">LIST</span><span class="p">)</span> <span class="p">(</span><span class="nv">FILTER</span> <span class="nv">F</span> <span class="p">(</span><span class="nv">CDR</span> <span class="nv">LIST</span><span class="p">))))</span>
         <span class="p">(</span><span class="no">T</span>
          <span class="p">(</span><span class="nv">FILTER</span> <span class="nv">F</span> <span class="p">(</span><span class="nv">CDR</span> <span class="nv">LIST</span><span class="p">)))))</span>

<span class="c1">;; And then, quicksort.</span>
<span class="p">(</span><span class="nv">DEFUN</span> <span class="nv">QUICKSORT</span> <span class="p">(</span><span class="nv">LIST</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">COND</span>
     <span class="p">((</span><span class="nv">OR</span> <span class="p">(</span><span class="nv">EQ</span> <span class="nv">LIST</span> <span class="p">())</span>
          <span class="p">(</span><span class="nv">EQ</span> <span class="p">(</span><span class="nv">CDR</span> <span class="nv">LIST</span><span class="p">)</span> <span class="p">()))</span>
      <span class="nv">LIST</span><span class="p">)</span>
     <span class="p">(</span><span class="no">T</span>
      <span class="p">(</span><span class="nv">LET</span>
        <span class="p">((</span><span class="nv">PIVOT</span> <span class="p">(</span><span class="nv">CAR</span> <span class="nv">LIST</span><span class="p">))</span>
         <span class="p">(</span><span class="nv">REST</span> <span class="p">(</span><span class="nv">CDR</span> <span class="nv">LIST</span><span class="p">)))</span>
        <span class="p">(</span><span class="nv">APPEND</span>
            <span class="p">(</span><span class="nv">QUICKSORT</span> <span class="p">(</span><span class="nv">FILTER</span> <span class="nf">#&#39;</span><span class="p">(</span><span class="nv">LAMBDA</span> <span class="p">(</span><span class="nv">X</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt;=</span> <span class="nv">X</span> <span class="nv">PIVOT</span><span class="p">))</span> <span class="nv">REST</span><span class="p">))</span>
            <span class="p">(</span><span class="nv">LIST</span> <span class="nv">PIVOT</span><span class="p">)</span>
            <span class="p">(</span><span class="nv">QUICKSORT</span> <span class="p">(</span><span class="nv">FILTER</span> <span class="nf">#&#39;</span><span class="p">(</span><span class="nv">LAMBDA</span> <span class="p">(</span><span class="nv">X</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="nv">X</span> <span class="nv">PIVOT</span><span class="p">))</span> <span class="nv">REST</span><span class="p">)))))))</span>
</pre></div>
<h2><span class="mw-headline" id="Maple"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Maple" title="Category:Maple">Maple</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=103" title="Edit section: Maple">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>swap&#160;:= proc(arr, a, b)
	local temp&#160;:= arr[a]:
	arr[a]&#160;:= arr[b]:
	arr[b]&#160;:= temp:
end proc:
quicksort&#160;:= proc(arr, low, high)
	local pi:
	if (low &lt; high) then
		pi&#160;:= qpart(arr,low,high):
		quicksort(arr, low, pi-1):
		quicksort(arr, pi+1, high):
	end if:
end proc:
qpart&#160;:= proc(arr, low, high)
	local i,j,pivot;
	pivot&#160;:= arr[high]:
	i&#160;:= low-1:
	for j from low to high-1 by 1 do
		if (arr[j] &lt;= pivot) then
			i++:
			swap(arr, i, j):
		end if;
	end do;
	swap(arr, i+1, high):
	return (i+1):
end proc:
a:=Array([12,4,2,1,0]);
quicksort(a,1,5);
a;</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>[0, 1, 2, 4, 12]</pre>
<h2><span id="Mathematica.2FWolfram_Language"></span><span class="mw-headline" id="Mathematica/Wolfram_Language"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Mathematica" title="Category:Mathematica">Mathematica</a>/<a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Wolfram_Language" class="mw-redirect" title="Category:Wolfram Language">Wolfram Language</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=104" title="Edit section: Mathematica/Wolfram Language">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-mathematica mw-content-ltr" dir="ltr"><pre><span></span><span class="n">QuickSort</span><span class="p">[</span><span class="nv">x_List</span><span class="p">]</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Module</span><span class="p">[{</span><span class="n">pivot</span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="n">If</span><span class="p">[</span><span class="n">Length</span><span class="o">@</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Return</span><span class="p">[</span><span class="n">x</span><span class="p">]];</span><span class="w"></span>
<span class="w">  </span><span class="n">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RandomChoice</span><span class="o">@</span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">Flatten</span><span class="o">@</span><span class="p">{</span><span class="n">QuickSort</span><span class="p">[</span><span class="n">Cases</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nv">j_</span><span class="w"> </span><span class="o">/;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">pivot</span><span class="p">]],</span><span class="w"> </span><span class="n">Cases</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nv">j_</span><span class="w"> </span><span class="o">/;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">pivot</span><span class="p">],</span><span class="w"> </span><span class="n">QuickSort</span><span class="p">[</span><span class="n">Cases</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nv">j_</span><span class="w"> </span><span class="o">/;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">pivot</span><span class="p">]]}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
</pre></div>
<div class="mw-highlight mw-highlight-lang-mathematica mw-content-ltr" dir="ltr"><pre><span></span><span class="n">qsort</span><span class="p">[{}]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span><span class="w"></span>
<span class="n">qsort</span><span class="p">[{</span><span class="nv">x_</span><span class="p">,</span><span class="w"> </span><span class="nv">xs___</span><span class="p">}]</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Join</span><span class="p">[</span><span class="n">qsort</span><span class="o">@</span><span class="n">Select</span><span class="p">[{</span><span class="n">xs</span><span class="p">},</span><span class="w"> </span><span class="nv">#</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&amp;</span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="n">x</span><span class="p">},</span><span class="w"> </span><span class="n">qsort</span><span class="o">@</span><span class="n">Select</span><span class="p">[{</span><span class="n">xs</span><span class="p">},</span><span class="w"> </span><span class="nv">#</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&amp;</span><span class="p">]];</span><span class="w"></span>
</pre></div>
<div class="mw-highlight mw-highlight-lang-mathematica mw-content-ltr" dir="ltr"><pre><span></span><span class="n">QuickSort</span><span class="p">[{}]</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="n">QuickSort</span><span class="p">[</span><span class="n">list</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="nv">__</span><span class="p">}]</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">With</span><span class="p">[{</span><span class="n">pivot</span><span class="o">=</span><span class="n">RandomChoice</span><span class="p">[</span><span class="n">list</span><span class="p">]},</span><span class="w"></span>
<span class="w">	</span><span class="n">Join</span><span class="p">[</span><span class="w"> </span><span class="o">&lt;|</span><span class="mi">1</span><span class="o">-&gt;</span><span class="p">{},</span><span class="w"> </span><span class="mi">-1</span><span class="o">-&gt;</span><span class="p">{}</span><span class="o">|&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">GroupBy</span><span class="p">[</span><span class="n">list</span><span class="p">,</span><span class="n">Order</span><span class="p">[</span><span class="nv">#</span><span class="p">,</span><span class="n">pivot</span><span class="p">]</span><span class="o">&amp;</span><span class="p">]</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Catenate</span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="n">QuickSort</span><span class="o">@</span><span class="nv">#</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="nv">#</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">QuickSort</span><span class="o">@</span><span class="nv">#</span><span class="p">[</span><span class="mi">-1</span><span class="p">]}</span><span class="w"> </span><span class="p">]</span><span class="o">&amp;</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="MATLAB"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:MATLAB" title="Category:MATLAB">MATLAB</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=105" title="Edit section: MATLAB">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This implements the pseudo-code in the specification. The input can be either a row or column vector, but the returned vector will always be a row vector. This can be modified to operate on any built-in primitive or user defined class by replacing the "&lt;=" and "&gt;" comparisons with "le" and "gt" functions respectively. This is because operators can not be overloaded, but the functions that are equivalent to the operators can be overloaded in class definitions.
</p><p>This should be placed in a file named <i>quickSort.m</i>.
</p>
<div class="mw-highlight mw-highlight-lang-matlab mw-content-ltr" dir="ltr"><pre><span></span><span class="k">function</span><span class="w"> </span>sortedArray<span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nf">quickSort</span><span class="p">(</span>array<span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">numel</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c">%If the array has 1 element then it can&#39;t be sorted       </span><span class="w"></span>
<span class="w">        </span><span class="n">sortedArray</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">array</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="n">pivot</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="k">end</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">array</span><span class="p">(</span><span class="k">end</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[];</span><span class="w"></span>
<span class="w">        </span>
<span class="w">    </span><span class="c">%Create two new arrays which contain the elements that are less than or</span><span class="w"></span>
<span class="w">    </span><span class="c">%equal to the pivot called &quot;less&quot; and greater than the pivot called</span><span class="w"></span>
<span class="w">    </span><span class="c">%&quot;greater&quot;</span><span class="w"></span>
<span class="w">    </span><span class="n">less</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">greater</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="c">%The sorted array is the concatenation of the sorted &quot;less&quot; array, the</span><span class="w"></span>
<span class="w">    </span><span class="c">%pivot and the sorted &quot;greater&quot; array in that order</span><span class="w"></span>
<span class="w">    </span><span class="n">sortedArray</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">quickSort</span><span class="p">(</span><span class="n">less</span><span class="p">)</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="n">quickSort</span><span class="p">(</span><span class="n">greater</span><span class="p">)];</span><span class="w"></span>
<span class="w">    </span>
<span class="k">end</span><span class="w"></span>
</pre></div>
<p>A slightly more vectorized version of the above code that removes the need for the <i>less</i> and <i>greater</i> arrays:
</p>
<div class="mw-highlight mw-highlight-lang-matlab mw-content-ltr" dir="ltr"><pre><span></span><span class="k">function</span><span class="w"> </span>sortedArray<span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nf">quickSort</span><span class="p">(</span>array<span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">numel</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c">%If the array has 1 element then it can&#39;t be sorted       </span><span class="w"></span>
<span class="w">        </span><span class="n">sortedArray</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">array</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="n">pivot</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="k">end</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">array</span><span class="p">(</span><span class="k">end</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[];</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="n">sortedArray</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">quickSort</span><span class="p">(</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="n">array</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">pivot</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="n">quickSort</span><span class="p">(</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="n">array</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">pivot</span><span class="p">)</span><span class="w"> </span><span class="p">)];</span><span class="w"></span>
<span class="w">    </span>
<span class="k">end</span><span class="w"></span>
</pre></div>
<p>Sample usage:
</p>
<div class="mw-highlight mw-highlight-lang-matlab mw-content-ltr" dir="ltr"><pre><span></span><span class="n">quickSort</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span><span class="w"></span>

<span class="nb">ans</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">    </span><span class="o">-</span><span class="mi">2</span><span class="w">     </span><span class="mi">1</span><span class="w">     </span><span class="mi">3</span><span class="w">     </span><span class="mi">4</span><span class="w">     </span><span class="mi">7</span><span class="w">     </span><span class="mi">9</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="MAXScript"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:MAXScript" title="Category:MAXScript">MAXScript</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=106" title="Edit section: MAXScript">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>fn quickSort arr =
(
    less = #()
    pivotList = #()
    more = #()
    if arr.count &lt;= 1 then
    (
        arr
    )
    else
    (
        pivot = arr[arr.count/2]
        for i in arr do
        (
            case of
            (
                (i &lt; pivot):	(append less i)
                (i == pivot):	(append pivotList i)
                (i &gt; pivot):	(append more i)
            )
        )
        less = quickSort less
        more = quickSort more
        less + pivotList + more
    )
)
a = #(4, 89, -3, 42, 5, 0, 2, 889)
a = quickSort a</pre></div>
<h2><span class="mw-headline" id="Mercury"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Mercury" title="Category:Mercury">Mercury</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=107" title="Edit section: Mercury">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="A_quicksort_that_works_on_linked_lists">A quicksort that works on linked lists</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=108" title="Edit section: A quicksort that works on linked lists">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/Mercury" class="mw-redirect" title="Mercury">Mercury</a> version 22.01.1</div>
<p><br/>
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>%%%-------------------------------------------------------------------

:- module quicksort_task_for_lists.

:- interface.
:- import_module io.
:- pred main(io, io).
:- mode main(di, uo) is det.

:- implementation.
:- import_module int.
:- import_module list.

%%%-------------------------------------------------------------------
%%%
%%% Partitioning a list into three:
%%%
%%%    Left         elements less than the pivot
%%%    Middle       elements equal to the pivot
%%%    Right        elements greater than the pivot
%%%
%%% The implementation is tail-recursive.
%%%

:- pred partition(comparison_func(T), T, list(T),
                  list(T), list(T), list(T)).
:- mode partition(in, in, in, out, out, out) is det.
partition(Compare, Pivot, Lst, Left, Middle, Right)&#160;:-
  partition(Compare, Pivot, Lst, [], Left, [], Middle, [], Right).

:- pred partition(comparison_func(T), T, list(T),
                  list(T), list(T),
                  list(T), list(T),
                  list(T), list(T)).
:- mode partition(in, in, in,
                  in, out,
                  in, out,
                  in, out) is det.
partition(_, _, [], Left0, Left, Middle0, Middle, Right0, Right)&#160;:-
  Left = Left0,
  Middle = Middle0,
  Right = Right0.
partition(Compare, Pivot, [Head | Tail], Left0, Left,
          Middle0, Middle, Right0, Right)&#160;:-
  Compare(Head, Pivot) = Cmp,
  (if (Cmp = (&lt;))
   then partition(Compare, Pivot, Tail,
                  [Head | Left0], Left,
                  Middle0, Middle,
                  Right0, Right)
   else if (Cmp = (=))
   then partition(Compare, Pivot, Tail,
                  Left0, Left,
                  [Head | Middle0], Middle,
                  Right0, Right)
   else partition(Compare, Pivot, Tail,
                  Left0, Left,
                  Middle0, Middle,
                  [Head | Right0], Right)).

%%%-------------------------------------------------------------------
%%%
%%% Quicksort using the first element as pivot.
%%%
%%% This is not the world's best choice of pivot, but it is the
%%% easiest one to get from a linked list.
%%%
%%% This implementation is *not* tail-recursive--as most quicksort
%%% implementations also are not. (However, do an online search on
%%% "quicksort fortran 77" and you will find some "tail-recursive"
%%% implementations, with the tail recursions expressed as gotos.)
%%%

:- func quicksort(comparison_func(T), list(T)) = list(T).
quicksort(_, []) = [].
quicksort(Compare, [Pivot | Tail]) = Sorted_Lst&#160;:-
  partition(Compare, Pivot, Tail, Left, Middle, Right),
  quicksort(Compare, Left) = Sorted_Left,
  quicksort(Compare, Right) = Sorted_Right,
  Sorted_Left ++ [Pivot | Middle] ++ Sorted_Right = Sorted_Lst.

%%%-------------------------------------------------------------------

:- func example_numbers = list(int).
example_numbers = [1, 3, 9, 5, 8, 6, 5, 1, 7, 9, 8, 6, 4, 2].

:- func int_compare(int, int) = comparison_result.
int_compare(I, J) = Cmp&#160;:-
  if (I &lt; J) then (Cmp = (&lt;))
  else if (I = J) then (Cmp = (=))
  else (Cmp = (&gt;)).

main(!IO)&#160;:-
  quicksort(int_compare, example_numbers) = Sorted_Numbers,
  print("unsorted: ", !IO),
  print_line(example_numbers, !IO),
  print("sorted:   ", !IO),
  print_line(Sorted_Numbers, !IO).

%%%-------------------------------------------------------------------
%%% local variables:
%%% mode: mercury
%%% prolog-indent-width: 2
%%% end:</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>$ mmc quicksort_task_for_lists.m &amp;&amp; ./quicksort_task_for_lists
unsorted: [1, 3, 9, 5, 8, 6, 5, 1, 7, 9, 8, 6, 4, 2]
sorted:   [1, 1, 2, 3, 4, 5, 5, 6, 6, 7, 8, 8, 9, 9]</pre>
<h3><span class="mw-headline" id="A_quicksort_that_works_on_arrays">A quicksort that works on arrays</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=109" title="Edit section: A quicksort that works on arrays">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/Mercury" class="mw-redirect" title="Mercury">Mercury</a> version 22.01.1</div>
<p><br/>
The in-place partitioning algorithm here is similar to but not quite the same as that of the task pseudocode. I wrote it by referring to some Fortran code I wrote several months ago for a quickselect. (That quickselect had a random pivot, however.)
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>%%%-------------------------------------------------------------------

:- module quicksort_task_for_arrays.

:- interface.
:- import_module io.
:- pred main(io, io).
:- mode main(di, uo) is det.

:- implementation.
:- import_module array.
:- import_module int.
:- import_module list.

%%%-------------------------------------------------------------------
%%%
%%% Partitioning a subarray into two halves: one with elements less
%%% than or equal to a pivot, the other with elements greater than or
%%% equal to a pivot.
%%%
%%% The implementation is tail-recursive.
%%%

:- pred partition(pred(T, T), T, int, int, array(T), array(T), int).
:- mode partition(pred(in, in) is semidet, in, in, in,
                  array_di, array_uo, out).
partition(Less_than, Pivot, I_first, I_last, Arr0, Arr, I_pivot)&#160;:-
  I = I_first - 1,
  J = I_last + 1,
  partition_loop(Less_than, Pivot, I, J, Arr0, Arr, I_pivot).

:- pred partition_loop(pred(T, T), T, int, int,
                       array(T), array(T), int).
:- mode partition_loop(pred(in, in) is semidet, in, in, in,
                       array_di, array_uo, out).
partition_loop(Less_than, Pivot, I, J, Arr0, Arr, Pivot_index)&#160;:-
  if (I = J) then (Arr = Arr0,
                   Pivot_index = I)
  else (I1 = I + 1,
        I2 = search_right(Less_than, Pivot, I1, J, Arr0),
        (if (I2 = J) then (Arr = Arr0,
                           Pivot_index = J)
         else (J1 = J - 1,
               J2 = search_left(Less_than, Pivot, I2, J1, Arr0),
               swap(I2, J2, Arr0, Arr1),
               partition_loop(Less_than, Pivot, I2, J2, Arr1, Arr,
                              Pivot_index)))).

:- func search_right(pred(T, T), T, int, int, array(T)) = int.
:- mode search_right(pred(in, in) is semidet,
                     in, in, in, in) = out is det.
search_right(Less_than, Pivot, I, J, Arr0) = K&#160;:-
  if (I = J) then (I = K)
  else if Less_than(Pivot, Arr0^elem(I)) then (I = K)
  else (search_right(Less_than, Pivot, I + 1, J, Arr0) = K).

:- func search_left(pred(T, T), T, int, int, array(T)) = int.
:- mode search_left(pred(in, in) is semidet,
                    in, in, in, in) = out is det.
search_left(Less_than, Pivot, I, J, Arr0) = K&#160;:-
  if (I = J) then (J = K)
  else if Less_than(Arr0^elem(J), Pivot) then (J = K)
  else (search_left(Less_than, Pivot, I, J - 1, Arr0) = K).

%%%-------------------------------------------------------------------
%%%
%%% Quicksort with median of three as pivot.
%%%
%%% Like most quicksort implementations, this one is *not*
%%% tail-recursive.
%%%

%% quicksort/3 sorts an entire array.
:- pred quicksort(pred(T, T), array(T), array(T)).
:- mode quicksort(pred(in, in) is semidet, array_di, array_uo) is det.
quicksort(Less_than, Arr0, Arr)&#160;:-
  bounds(Arr0, I_first, I_last),
  quicksort(Less_than, I_first, I_last, Arr0, Arr).

%% quicksort/5 sorts a subarray.
:- pred quicksort(pred(T, T), int, int, array(T), array(T)).
:- mode quicksort(pred(in, in) is semidet, in, in,
                  array_di, array_uo) is det.
quicksort(Less_than, I_first, I_last, Arr0, Arr)&#160;:-
  if (I_last - I_first &gt;= 2)
  then (median_of_three(Less_than, I_first, I_last,
                        Arr0, Arr1, Pivot),

       &#160;%% Partition only from I_first to I_last - 1.
        partition(Less_than, Pivot, I_first, I_last - 1,
                  Arr1, Arr2, K),

       &#160;%% Now everything that is less than the pivot is to the
       &#160;%% left of K.

       &#160;%% Put the pivot at K, moving the element that had been there
       &#160;%% to the end. If K = I_last, then this element is actually
       &#160;%% garbage and will be overwritten with the pivot, which turns
       &#160;%% out to be the greatest element. Otherwise, the moved
       &#160;%% element is not less than the pivot and so the partitioning
       &#160;%% is preserved.
        Arr2^elem(K) = Elem_to_move,
        (Arr2^elem(I_last)&#160;:= Elem_to_move) = Arr3,
        (Arr3^elem(K)&#160;:= Pivot) = Arr4,

       &#160;%% Sort the subarray on either side of the pivot.
        quicksort(Less_than, I_first, K - 1, Arr4, Arr5),
        quicksort(Less_than, K + 1, I_last, Arr5, Arr))

  else if (I_last - I_first = 1)&#160;% Two elements.
  then (Elem_first = Arr0^elem(I_first),
        Elem_last = Arr0^elem(I_last),
        (if Less_than(Elem_first, Elem_last)
         then (Arr = Arr0)
         else ((Arr0^elem(I_first)&#160;:= Elem_last) = Arr1,
               (Arr1^elem(I_last)&#160;:= Elem_first) = Arr)))

  else (Arr = Arr0).           &#160;% Zero or one element.

%% median_of_three/6 both chooses a pivot and rearranges the array
%% elements so one may partition them from I_first to I_last - 1,
%% leaving the pivot element out of the array.
:- pred median_of_three(pred(T, T), int, int, array(T), array(T), T).
:- mode median_of_three(pred(in, in) is semidet, in, in,
                        array_di, array_uo, out) is det.
median_of_three(Less_than, I_first, I_last, Arr0, Arr, Pivot)&#160;:-
  I_middle = I_first + ((I_last - I_first) // 2),
  Elem_first = Arr0^elem(I_first),
  Elem_middle = Arr0^elem(I_middle),
  Elem_last = Arr0^elem(I_last),
  (if pred_xor(Less_than, Less_than,
               Elem_middle, Elem_first,
               Elem_last, Elem_first)
   then (Pivot = Elem_first,
         (if Less_than(Elem_middle, Elem_last)
          then (Arr1 = (Arr0^elem(I_first)&#160;:= Elem_middle),
                Arr = (Arr1^elem(I_middle)&#160;:= Elem_last))
          else (Arr = (Arr0^elem(I_first)&#160;:= Elem_last))))
   else if pred_xor(Less_than, Less_than,
                    Elem_middle, Elem_first,
                    Elem_middle, Elem_last)
   then (Pivot = Elem_middle,
         (if Less_than(Elem_first, Elem_last)
          then (Arr = (Arr0^elem(I_middle)&#160;:= Elem_last))
          else (Arr1 = (Arr0^elem(I_first)&#160;:= Elem_last),
                Arr = (Arr1^elem(I_middle)&#160;:= Elem_first))))
   else (Pivot = Elem_last,
         (if Less_than(Elem_first, Elem_middle)
          then (Arr = Arr0)
          else (Arr1 = (Arr0^elem(I_first)&#160;:= Elem_middle),
                Arr = (Arr1^elem(I_middle)&#160;:= Elem_first))))).

:- pred pred_xor(pred(T, T), pred(T, T), T, T, T, T).
:- mode pred_xor(pred(in, in) is semidet,
                 pred(in, in) is semidet,
                 in, in, in, in) is semidet.
pred_xor(P, Q, W, X, Y, Z)&#160;:-
  if P(W, X) then (not Q(Y, Z)) else Q(Y, Z).

%%%-------------------------------------------------------------------

:- func example_numbers = list(int).
example_numbers = [1, 3, 9, 5, 8, 6, 5, 0, 1, 7, 9, 8, 6, 4, 2, -28,
                   30, 31, 1, 3, 9, 5, 8, 6, 5, 1, 6, 4, 2, -28, 30,
                   -50, 500, -1234, 1234, 12].

main(!IO)&#160;:-
  (array.from_list(example_numbers, Arr0)),
  print_line("", !IO),
  print_line(Arr0, !IO),
  print_line("", !IO),
  print_line("                                               |", !IO),
  print_line("                                               V", !IO),
  print_line("", !IO),
  quicksort(&lt;, Arr0, Arr1),
  print_line(Arr1, !IO),
  print_line("", !IO).

%%%-------------------------------------------------------------------
%%% local variables:
%%% mode: mercury
%%% prolog-indent-width: 2
%%% end:</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>$ mmc quicksort_task_for_arrays.m &amp;&amp; ./quicksort_task_for_arrays

array([1, 3, 9, 5, 8, 6, 5, 0, 1, 7, 9, 8, 6, 4, 2, -28, 30, 31, 1, 3, 9, 5, 8, 6, 5, 1, 6, 4, 2, -28, 30, -50, 500, -1234, 1234, 12])

                                               |
                                               V

array([-1234, -50, -28, -28, 0, 1, 1, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 5, 5, 6, 6, 6, 6, 7, 8, 8, 8, 9, 9, 9, 12, 30, 30, 31, 500, 1234])
</pre>
<h2><span class="mw-headline" id="MiniScript"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:MiniScript" title="Category:MiniScript">MiniScript</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=110" title="Edit section: MiniScript">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Quick implementation for Miniscript, simply goes through the list reference and swaps the positions
</p>
<div class="mw-highlight mw-highlight-lang-miniscript mw-content-ltr" dir="ltr"><pre><span></span><span class="nv">Partition</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span> <span class="nv">low</span><span class="p">,</span> <span class="nv">high</span><span class="p">)</span>
    <span class="nv">pivot</span> <span class="o">=</span> <span class="nv">a</span><span class="p">[</span><span class="nv">low</span><span class="p">]</span>
    <span class="nv">leftwall</span> <span class="o">=</span> <span class="nv">low</span>

    <span class="k">for</span> <span class="nv">i</span> <span class="k">in</span> <span class="nb">range</span><span class="p">(</span><span class="nv">low</span> <span class="o">+</span> <span class="m">1</span><span class="p">,</span> <span class="nv">high</span><span class="p">)</span>
        <span class="k">if</span> <span class="nv">a</span><span class="p">[</span><span class="nv">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nv">pivot</span> <span class="k">then</span>
            <span class="nv">leftwall</span> <span class="o">=</span> <span class="nv">leftwall</span> <span class="o">+</span> <span class="m">1</span>
            <span class="nv">temp</span> <span class="o">=</span> <span class="nv">a</span><span class="p">[</span><span class="nv">leftwall</span><span class="p">]</span>
            <span class="nv">a</span><span class="p">[</span><span class="nv">leftwall</span><span class="p">]</span> <span class="o">=</span> <span class="nv">a</span><span class="p">[</span><span class="nv">i</span><span class="p">]</span>
            <span class="nv">a</span><span class="p">[</span><span class="nv">i</span><span class="p">]</span> <span class="o">=</span> <span class="nv">temp</span>
        <span class="k">end</span> <span class="k">if</span>
    <span class="k">end</span> <span class="k">for</span>

    <span class="nv">temp</span> <span class="o">=</span> <span class="nv">a</span><span class="p">[</span><span class="nv">leftwall</span><span class="p">]</span>
    <span class="nv">a</span><span class="p">[</span><span class="nv">leftwall</span><span class="p">]</span> <span class="o">=</span> <span class="nv">pivot</span>
    <span class="nv">a</span><span class="p">[</span><span class="nv">low</span><span class="p">]</span> <span class="o">=</span> <span class="nv">temp</span>

    <span class="k">return</span> <span class="nv">leftwall</span>
<span class="k">end</span> <span class="k">function</span>

<span class="nv">QuickSort</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span> <span class="nv">low</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span> <span class="nv">high</span><span class="o">=</span><span class="kc">null</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="nv">low</span> <span class="k">then</span> <span class="nv">low</span> <span class="o">=</span> <span class="m">0</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="nv">high</span> <span class="k">then</span> <span class="nv">high</span> <span class="o">=</span> <span class="nv">a</span><span class="o">.</span><span class="nb">len</span> <span class="o">-</span> <span class="m">1</span>
    <span class="k">if</span> <span class="nv">low</span> <span class="o">&lt;</span> <span class="nv">high</span> <span class="k">then</span>
        <span class="nv">pivot_location</span> <span class="o">=</span> <span class="nv">Partition</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span> <span class="nv">low</span><span class="p">,</span> <span class="nv">high</span><span class="p">)</span>
        <span class="nv">QuickSort</span> <span class="nv">a</span><span class="p">,</span> <span class="nv">low</span><span class="p">,</span> <span class="nv">pivot_location</span> <span class="o">-</span> <span class="m">1</span>
        <span class="nv">QuickSort</span> <span class="nv">a</span><span class="p">,</span> <span class="nv">pivot_location</span> <span class="o">+</span> <span class="m">1</span><span class="p">,</span> <span class="nv">high</span>
    <span class="k">end</span> <span class="k">if</span>

    <span class="k">return</span> <span class="nv">a</span>
<span class="k">end</span> <span class="k">function</span>

<span class="nb">print</span> <span class="nv">QuickSort</span><span class="p">([</span><span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">])</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>[1, 2, 3, 4, 5]</pre>
<h2><span class="mw-headline" id="Miranda"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Miranda" title="Category:Miranda">Miranda</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=111" title="Edit section: Miranda">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>main&#160;:: [sys_message]
main = [Stdout ("Before: " ++ show testlist ++ "\n"),
        Stdout ("After:  " ++ show (quicksort testlist) ++ "\n")]
       where testlist = [4,65,2,-31,0,99,2,83,782,1]

quicksort []  = []
quicksort [x] = [x]
quicksort xs  = (quicksort less) ++ equal ++ (quicksort more)
                where pivot = hd xs
                      less  = [x | x&lt;-xs; x&lt;pivot]
                      equal = [x | x&lt;-xs; x=pivot]
                      more  = [x | x&lt;-xs; x&gt;pivot]</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>Before: [4,65,2,-31,0,99,2,83,782,1]
After:  [-31,0,1,2,2,4,65,83,99,782]</pre>
<h2><span class="mw-headline" id="Modula-2"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Modula-2" title="Category:Modula-2">Modula-2</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=112" title="Edit section: Modula-2">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The definition module exposes the interface.
This one uses the procedure variable feature to pass a caller defined compare callback function so that it can sort various simple and structured record types.
</p><p>This Quicksort assumes that you are working with an an array of pointers to an arbitrary type and are not moving the record data itself but only the pointers. The M2 type "ADDRESS" is considered compatible with any pointer type.
</p><p>The use of type ADDRESS here to achieve genericity is something of a chink the the normal strongly typed flavor of Modula-2. Unlike the other language types, "system" types such as ADDRESS or WORD must be imported explicity from the SYSTEM MODULE.
The ISO standard for the "Generic Modula-2" language extension provides genericity without the chink, but most compilers have not implemented this extension.
</p>
<div class="mw-highlight mw-highlight-lang-modula2 mw-content-ltr" dir="ltr"><pre><span></span><span class="cm">(*#####################*)</span>
 <span class="kr">DEFINITION</span> <span class="kr">MODULE</span> <span class="n">QSORT</span><span class="p">;</span> 
<span class="cm">(*#####################*)</span>      

<span class="kr">FROM</span> <span class="bp">SYSTEM</span> <span class="kr">IMPORT</span> <span class="bp">ADDRESS</span><span class="p">;</span>

<span class="kr">TYPE</span> <span class="n">CmpFuncPtrs</span> <span class="o">=</span> <span class="kr">PROCEDURE</span><span class="p">(</span><span class="bp">ADDRESS</span><span class="p">,</span> <span class="bp">ADDRESS</span><span class="p">):</span><span class="nb">INTEGER</span><span class="p">;</span>

 <span class="kr">PROCEDURE</span> <span class="n">QuickSortPtrs</span><span class="p">(</span><span class="kr">VAR</span> <span class="n">Array</span><span class="p">:</span><span class="kr">ARRAY</span> <span class="kr">OF</span> <span class="bp">ADDRESS</span><span class="p">;</span> <span class="n">N</span><span class="p">:</span><span class="nb">CARDINAL</span><span class="p">;</span>
                         <span class="n">Compare</span><span class="p">:</span><span class="n">CmpFuncPtrs</span><span class="p">);</span>
<span class="kr">END</span> <span class="n">QSORT</span><span class="p">.</span>
</pre></div>
<p>The implementation module is not visible to clients, so it may be changed without worry so long as it still implements the definition.
</p><p>Sedgewick suggests that faster sorting will be achieved if you drop back to an insertion sort once the partitions get small.
</p>
<div class="mw-highlight mw-highlight-lang-modula2 mw-content-ltr" dir="ltr"><pre><span></span><span class="cm">(*##########################*)</span>
 <span class="kr">IMPLEMENTATION</span> <span class="kr">MODULE</span> <span class="n">QSORT</span><span class="p">;</span> 
<span class="cm">(*##########################*)</span>

<span class="kr">FROM</span> <span class="bp">SYSTEM</span>    <span class="kr">IMPORT</span> <span class="bp">ADDRESS</span><span class="p">;</span>

<span class="kr">CONST</span> <span class="n">SmallPartition</span>  <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>

<span class="cm">(*</span>
<span class="cm">NOTE</span>
<span class="cm">        1.Reference on QuickSort: &quot;Implementing Quicksort Programs&quot;, Robert</span>
<span class="cm">          Sedgewick, Communications of the ACM, Oct 78, v21 #10.</span>
<span class="cm">*)</span>

<span class="cm">(*==============================================================*)</span>
 <span class="kr">PROCEDURE</span> <span class="n">QuickSortPtrs</span><span class="p">(</span><span class="kr">VAR</span> <span class="n">Array</span><span class="p">:</span><span class="kr">ARRAY</span> <span class="kr">OF</span> <span class="bp">ADDRESS</span><span class="p">;</span> <span class="n">N</span><span class="p">:</span><span class="nb">CARDINAL</span><span class="p">;</span>
                         <span class="n">Compare</span><span class="p">:</span><span class="n">CmpFuncPtrs</span><span class="p">);</span>
<span class="cm">(*==============================================================*)</span>

         <span class="cm">(*-----------------------------*)</span>
          <span class="kr">PROCEDURE</span> <span class="n">Swap</span><span class="p">(</span><span class="kr">VAR</span> <span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">:</span><span class="bp">ADDRESS</span><span class="p">);</span>
         <span class="cm">(*-----------------------------*)</span>

         <span class="kr">VAR</span>  <span class="n">temp</span> <span class="p">:</span><span class="bp">ADDRESS</span><span class="p">;</span>

         <span class="kr">BEGIN</span>

         <span class="n">temp</span> <span class="o">:=</span> <span class="n">A</span><span class="p">;</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">B</span><span class="p">;</span> <span class="n">B</span> <span class="o">:=</span> <span class="n">temp</span><span class="p">;</span>

         <span class="kr">END</span> <span class="n">Swap</span><span class="p">;</span>

         <span class="cm">(*-------------------------------*)</span>
          <span class="kr">PROCEDURE</span> <span class="n">TstSwap</span><span class="p">(</span><span class="kr">VAR</span> <span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">:</span><span class="bp">ADDRESS</span><span class="p">);</span>
         <span class="cm">(*-------------------------------*)</span>

         <span class="kr">VAR</span>  <span class="n">temp</span>   <span class="p">:</span><span class="bp">ADDRESS</span><span class="p">;</span>

         <span class="kr">BEGIN</span>

         <span class="kr">IF</span> <span class="n">Compare</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">THEN</span>
            <span class="n">temp</span> <span class="o">:=</span> <span class="n">A</span><span class="p">;</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">B</span><span class="p">;</span> <span class="n">B</span> <span class="o">:=</span> <span class="n">temp</span><span class="p">;</span>
         <span class="kr">END</span><span class="p">;</span>

         <span class="kr">END</span> <span class="n">TstSwap</span><span class="p">;</span>

         <span class="cm">(*--------------*)</span>
          <span class="kr">PROCEDURE</span> <span class="n">Isort</span><span class="p">;</span>
         <span class="cm">(*--------------*)</span>
         <span class="cm">(*</span>
<span class="cm">                 Insertion sort.</span>
<span class="cm">         *)</span>

         <span class="kr">VAR</span>  <span class="n">i</span><span class="p">,</span><span class="n">j</span>    <span class="p">:</span><span class="nb">CARDINAL</span><span class="p">;</span>
              <span class="n">temp</span>   <span class="p">:</span><span class="bp">ADDRESS</span><span class="p">;</span>

         <span class="kr">BEGIN</span>

         <span class="kr">IF</span> <span class="n">N</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="kr">THEN</span> <span class="kr">RETURN</span> <span class="kr">END</span><span class="p">;</span>

         <span class="kr">FOR</span> <span class="n">i</span> <span class="o">:=</span> <span class="n">N</span><span class="o">-</span><span class="mi">2</span> <span class="kr">TO</span> <span class="mi">0</span> <span class="kr">BY</span> <span class="o">-</span><span class="mi">1</span> <span class="kr">DO</span>
            <span class="kr">IF</span> <span class="n">Compare</span><span class="p">(</span><span class="n">Array</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">Array</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">THEN</span>
               <span class="n">temp</span> <span class="o">:=</span> <span class="n">Array</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
               <span class="n">j</span> <span class="o">:=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
               <span class="kr">REPEAT</span>
                  <span class="n">Array</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">Array</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
                  <span class="nb">INC</span><span class="p">(</span><span class="n">j</span><span class="p">);</span>
               <span class="kr">UNTIL</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="n">N</span><span class="p">)</span> <span class="kr">OR</span> <span class="p">(</span><span class="n">Compare</span><span class="p">(</span><span class="n">Array</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="n">temp</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span>
               <span class="n">Array</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">temp</span><span class="p">;</span>
            <span class="kr">END</span><span class="p">;</span>
         <span class="kr">END</span><span class="p">;</span>

         <span class="kr">END</span> <span class="n">Isort</span><span class="p">;</span>

         <span class="cm">(*----------------------------------*)</span>
          <span class="kr">PROCEDURE</span> <span class="n">Quick</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="n">right</span><span class="p">:</span><span class="nb">CARDINAL</span><span class="p">);</span>
         <span class="cm">(*----------------------------------*)</span>

         <span class="kr">VAR</span>
              <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span>
              <span class="n">second</span>     <span class="p">:</span><span class="nb">CARDINAL</span><span class="p">;</span>
              <span class="n">Partition</span>  <span class="p">:</span><span class="bp">ADDRESS</span><span class="p">;</span>

         <span class="kr">BEGIN</span>

         <span class="kr">IF</span> <span class="n">right</span> <span class="o">&gt;</span> <span class="n">left</span> <span class="kr">THEN</span>
            <span class="n">i</span> <span class="o">:=</span> <span class="n">left</span><span class="p">;</span> <span class="n">j</span> <span class="o">:=</span> <span class="n">right</span><span class="p">;</span>

            <span class="n">Swap</span><span class="p">(</span><span class="n">Array</span><span class="p">[</span><span class="n">left</span><span class="p">],</span><span class="n">Array</span><span class="p">[(</span><span class="n">left</span><span class="o">+</span><span class="n">right</span><span class="p">)</span> <span class="kr">DIV</span> <span class="mi">2</span><span class="p">]);</span>

            <span class="n">second</span> <span class="o">:=</span> <span class="n">left</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>                          <span class="cm">(* insure 2nd element is in   *)</span>
            <span class="n">TstSwap</span><span class="p">(</span><span class="n">Array</span><span class="p">[</span><span class="n">second</span><span class="p">],</span> <span class="n">Array</span><span class="p">[</span><span class="n">right</span><span class="p">]);</span>      <span class="cm">(* the lower part, last elem  *)</span>
            <span class="n">TstSwap</span><span class="p">(</span><span class="n">Array</span><span class="p">[</span><span class="n">left</span><span class="p">],</span> <span class="n">Array</span><span class="p">[</span><span class="n">right</span><span class="p">]);</span>        <span class="cm">(* in the upper part          *)</span>
            <span class="n">TstSwap</span><span class="p">(</span><span class="n">Array</span><span class="p">[</span><span class="n">second</span><span class="p">],</span> <span class="n">Array</span><span class="p">[</span><span class="n">left</span><span class="p">]);</span>       <span class="cm">(* THUS, only one test is     *)</span>
                                                       <span class="cm">(* needed in repeat loops     *)</span>
            <span class="n">Partition</span> <span class="o">:=</span> <span class="n">Array</span><span class="p">[</span><span class="n">left</span><span class="p">];</span>

            <span class="kr">LOOP</span>
               <span class="kr">REPEAT</span> <span class="nb">INC</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="kr">UNTIL</span> <span class="n">Compare</span><span class="p">(</span><span class="n">Array</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">Partition</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
               <span class="kr">REPEAT</span> <span class="nb">DEC</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="kr">UNTIL</span> <span class="n">Compare</span><span class="p">(</span><span class="n">Array</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="n">Partition</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">;</span>
               <span class="kr">IF</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span> <span class="kr">THEN</span>
                  <span class="kr">EXIT</span>
               <span class="kr">END</span><span class="p">;</span>
               <span class="n">Swap</span><span class="p">(</span><span class="n">Array</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">Array</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
            <span class="kr">END</span><span class="p">;</span> <span class="cm">(*loop*)</span>
            <span class="n">Swap</span><span class="p">(</span><span class="n">Array</span><span class="p">[</span><span class="n">left</span><span class="p">],</span><span class="n">Array</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>

            <span class="kr">IF</span> <span class="p">(</span><span class="n">j</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="kr">AND</span> <span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">left</span> <span class="o">&gt;=</span> <span class="n">SmallPartition</span><span class="p">)</span> <span class="kr">THEN</span>
               <span class="n">Quick</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            <span class="kr">END</span><span class="p">;</span>
            <span class="kr">IF</span> <span class="n">right</span><span class="o">-</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">SmallPartition</span> <span class="kr">THEN</span>
               <span class="n">Quick</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">right</span><span class="p">);</span>
            <span class="kr">END</span><span class="p">;</span>
         <span class="kr">END</span><span class="p">;</span>

         <span class="kr">END</span> <span class="n">Quick</span><span class="p">;</span>

 <span class="kr">BEGIN</span> <span class="cm">(* QuickSortPtrs --------------------------------------------------*)</span>

<span class="kr">IF</span> <span class="n">N</span> <span class="o">&gt;</span> <span class="n">SmallPartition</span> <span class="kr">THEN</span>              <span class="cm">(* won&#39;t work for 2 elements *)</span>
   <span class="n">Quick</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="kr">END</span><span class="p">;</span>

<span class="n">Isort</span><span class="p">;</span>

<span class="kr">END</span> <span class="n">QuickSortPtrs</span><span class="p">;</span>

<span class="kr">END</span> <span class="n">QSORT</span><span class="p">.</span>
</pre></div>
<h2><span class="mw-headline" id="Modula-3"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Modula-3" title="Category:Modula-3">Modula-3</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=113" title="Edit section: Modula-3">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This code is taken from libm3, which is basically Modula-3's "standard library".  Note that this code uses Insertion sort when the array is less than 9 elements long.
</p>
<div class="mw-highlight mw-highlight-lang-modula2 mw-content-ltr" dir="ltr"><pre><span></span><span class="n">GENERIC</span> <span class="n">INTERFACE</span> <span class="n">ArraySort</span><span class="p">(</span><span class="n">Elem</span><span class="p">);</span>

<span class="kr">PROCEDURE</span> <span class="n">Sort</span><span class="p">(</span><span class="kr">VAR</span> <span class="n">a</span><span class="p">:</span> <span class="kr">ARRAY</span> <span class="kr">OF</span> <span class="n">Elem</span><span class="p">.</span><span class="n">T</span><span class="p">;</span> <span class="n">cmp</span> <span class="o">:=</span> <span class="n">Elem</span><span class="p">.</span><span class="n">Compare</span><span class="p">);</span>

<span class="kr">END</span> <span class="n">ArraySort</span><span class="p">.</span>
</pre></div>
<div class="mw-highlight mw-highlight-lang-modula2 mw-content-ltr" dir="ltr"><pre><span></span><span class="n">GENERIC</span> <span class="kr">MODULE</span> <span class="n">ArraySort</span> <span class="p">(</span><span class="n">Elem</span><span class="p">);</span>

<span class="kr">PROCEDURE</span> <span class="n">Sort</span> <span class="p">(</span><span class="kr">VAR</span> <span class="n">a</span><span class="p">:</span> <span class="kr">ARRAY</span> <span class="kr">OF</span> <span class="n">Elem</span><span class="p">.</span><span class="n">T</span><span class="p">;</span>  <span class="n">cmp</span> <span class="o">:=</span> <span class="n">Elem</span><span class="p">.</span><span class="n">Compare</span><span class="p">)</span> <span class="o">=</span>
  <span class="kr">BEGIN</span>
    <span class="n">QuickSort</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">NUMBER</span> <span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">cmp</span><span class="p">);</span>
    <span class="n">InsertionSort</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">NUMBER</span> <span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">cmp</span><span class="p">);</span>
  <span class="kr">END</span> <span class="n">Sort</span><span class="p">;</span>

<span class="kr">PROCEDURE</span> <span class="n">QuickSort</span> <span class="p">(</span><span class="kr">VAR</span> <span class="n">a</span><span class="p">:</span> <span class="kr">ARRAY</span> <span class="kr">OF</span> <span class="n">Elem</span><span class="p">.</span><span class="n">T</span><span class="p">;</span>  <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">:</span> <span class="nb">INTEGER</span><span class="p">;</span>
                     <span class="n">cmp</span> <span class="o">:=</span> <span class="n">Elem</span><span class="p">.</span><span class="n">Compare</span><span class="p">)</span> <span class="o">=</span>
  <span class="kr">CONST</span> <span class="n">CutOff</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
  <span class="kr">VAR</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">INTEGER</span><span class="p">;</span>  <span class="n">key</span><span class="p">,</span> <span class="n">tmp</span><span class="p">:</span> <span class="n">Elem</span><span class="p">.</span><span class="n">T</span><span class="p">;</span>
  <span class="kr">BEGIN</span>
    <span class="kr">WHILE</span> <span class="p">(</span><span class="n">hi</span> <span class="o">-</span> <span class="n">lo</span> <span class="o">&gt;</span> <span class="n">CutOff</span><span class="p">)</span> <span class="kr">DO</span> <span class="cm">(* sort a[lo..hi) *)</span>

      <span class="cm">(* use median-of-3 to select a key *)</span>
      <span class="n">i</span> <span class="o">:=</span> <span class="p">(</span><span class="n">hi</span> <span class="o">+</span> <span class="n">lo</span><span class="p">)</span> <span class="kr">DIV</span> <span class="mi">2</span><span class="p">;</span>
      <span class="kr">IF</span> <span class="n">cmp</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">lo</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="kr">THEN</span>
        <span class="kr">IF</span> <span class="n">cmp</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="kr">THEN</span>
          <span class="n">key</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="kr">ELSIF</span> <span class="n">cmp</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">lo</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="kr">THEN</span>
          <span class="n">key</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>  <span class="n">a</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>  <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:=</span> <span class="n">key</span><span class="p">;</span>
        <span class="kr">ELSE</span>
          <span class="n">key</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">lo</span><span class="p">];</span>  <span class="n">a</span><span class="p">[</span><span class="n">lo</span><span class="p">]</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>  <span class="n">a</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>  <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:=</span> <span class="n">key</span><span class="p">;</span>
        <span class="kr">END</span><span class="p">;</span>
      <span class="kr">ELSE</span> <span class="cm">(* a[lo] &gt;= a[i] *)</span>
        <span class="kr">IF</span> <span class="n">cmp</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="kr">THEN</span>
          <span class="n">key</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>  <span class="n">tmp</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>  <span class="n">a</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">lo</span><span class="p">];</span>  <span class="n">a</span><span class="p">[</span><span class="n">lo</span><span class="p">]</span> <span class="o">:=</span> <span class="n">tmp</span><span class="p">;</span>
        <span class="kr">ELSIF</span> <span class="n">cmp</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">lo</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="kr">THEN</span>
          <span class="n">key</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">lo</span><span class="p">];</span>  <span class="n">a</span><span class="p">[</span><span class="n">lo</span><span class="p">]</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>  <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:=</span> <span class="n">key</span><span class="p">;</span>
        <span class="kr">ELSE</span>
          <span class="n">key</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>  <span class="n">a</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">lo</span><span class="p">];</span>  <span class="n">a</span><span class="p">[</span><span class="n">lo</span><span class="p">]</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>  <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:=</span> <span class="n">key</span><span class="p">;</span>
        <span class="kr">END</span><span class="p">;</span>
      <span class="kr">END</span><span class="p">;</span>

      <span class="cm">(* partition the array *)</span>
      <span class="n">i</span> <span class="o">:=</span> <span class="n">lo</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>  <span class="n">j</span> <span class="o">:=</span> <span class="n">hi</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span>

      <span class="cm">(* find the first hole *)</span>
      <span class="kr">WHILE</span> <span class="n">cmp</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">DO</span> <span class="nb">DEC</span> <span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="kr">END</span><span class="p">;</span>
      <span class="n">tmp</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
      <span class="nb">DEC</span> <span class="p">(</span><span class="n">j</span><span class="p">);</span>

      <span class="kr">LOOP</span>
        <span class="kr">IF</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">j</span><span class="p">)</span> <span class="kr">THEN</span> <span class="kr">EXIT</span> <span class="kr">END</span><span class="p">;</span>

        <span class="kr">WHILE</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">hi</span> <span class="kr">AND</span> <span class="n">cmp</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">key</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="kr">DO</span> <span class="nb">INC</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="kr">END</span><span class="p">;</span>
        <span class="kr">IF</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">j</span><span class="p">)</span> <span class="kr">THEN</span> <span class="kr">EXIT</span> <span class="kr">END</span><span class="p">;</span>
        <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="nb">INC</span> <span class="p">(</span><span class="n">i</span><span class="p">);</span>

        <span class="kr">WHILE</span> <span class="n">j</span> <span class="o">&gt;</span> <span class="n">lo</span> <span class="kr">AND</span> <span class="n">cmp</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">DO</span> <span class="nb">DEC</span> <span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="kr">END</span><span class="p">;</span>
        <span class="kr">IF</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">j</span><span class="p">)</span> <span class="kr">THEN</span>  <span class="kr">IF</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="kr">THEN</span>  <span class="nb">DEC</span> <span class="p">(</span><span class="n">j</span><span class="p">)</span>  <span class="kr">END</span><span class="p">;</span>  <span class="kr">EXIT</span>  <span class="kr">END</span><span class="p">;</span>
        <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
        <span class="nb">DEC</span> <span class="p">(</span><span class="n">j</span><span class="p">);</span>
      <span class="kr">END</span><span class="p">;</span>

      <span class="cm">(* fill in the last hole *)</span>
      <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">tmp</span><span class="p">;</span>
      <span class="n">i</span> <span class="o">:=</span> <span class="n">j</span><span class="o">+</span><span class="mi">2</span><span class="p">;</span>

      <span class="cm">(* then, recursively sort the smaller subfile *)</span>
      <span class="kr">IF</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">lo</span> <span class="o">&lt;</span> <span class="n">hi</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span>
        <span class="kr">THEN</span>  <span class="n">QuickSort</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">cmp</span><span class="p">);</span>   <span class="n">lo</span> <span class="o">:=</span> <span class="n">i</span><span class="p">;</span>
        <span class="kr">ELSE</span>  <span class="n">QuickSort</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">cmp</span><span class="p">);</span>     <span class="n">hi</span> <span class="o">:=</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="kr">END</span><span class="p">;</span>

    <span class="kr">END</span><span class="p">;</span> <span class="cm">(* WHILE (hi-lo &gt; CutOff) *)</span>
  <span class="kr">END</span> <span class="n">QuickSort</span><span class="p">;</span>

<span class="kr">PROCEDURE</span> <span class="n">InsertionSort</span> <span class="p">(</span><span class="kr">VAR</span> <span class="n">a</span><span class="p">:</span> <span class="kr">ARRAY</span> <span class="kr">OF</span> <span class="n">Elem</span><span class="p">.</span><span class="n">T</span><span class="p">;</span>  <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">:</span> <span class="nb">INTEGER</span><span class="p">;</span>
                         <span class="n">cmp</span> <span class="o">:=</span> <span class="n">Elem</span><span class="p">.</span><span class="n">Compare</span><span class="p">)</span> <span class="o">=</span>
  <span class="kr">VAR</span> <span class="n">j</span><span class="p">:</span> <span class="nb">INTEGER</span><span class="p">;</span>  <span class="n">key</span><span class="p">:</span> <span class="n">Elem</span><span class="p">.</span><span class="n">T</span><span class="p">;</span>
  <span class="kr">BEGIN</span>
    <span class="kr">FOR</span> <span class="n">i</span> <span class="o">:=</span> <span class="n">lo</span><span class="o">+</span><span class="mi">1</span> <span class="kr">TO</span> <span class="n">hi</span><span class="o">-</span><span class="mi">1</span> <span class="kr">DO</span>
      <span class="n">key</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
      <span class="n">j</span> <span class="o">:=</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="kr">WHILE</span> <span class="p">(</span><span class="n">j</span> <span class="o">&gt;=</span> <span class="n">lo</span><span class="p">)</span> <span class="kr">AND</span> <span class="n">cmp</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="kr">DO</span>
        <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
        <span class="nb">DEC</span> <span class="p">(</span><span class="n">j</span><span class="p">);</span>
      <span class="kr">END</span><span class="p">;</span>
      <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">key</span><span class="p">;</span>
    <span class="kr">END</span><span class="p">;</span>
  <span class="kr">END</span> <span class="n">InsertionSort</span><span class="p">;</span>

<span class="kr">BEGIN</span>
<span class="kr">END</span> <span class="n">ArraySort</span><span class="p">.</span>
</pre></div>
<p>To use this generic code to sort an array of text, we create two files called TextSort.i3 and TextSort.m3, respectively.
</p>
<div class="mw-highlight mw-highlight-lang-modula2 mw-content-ltr" dir="ltr"><pre><span></span><span class="n">INTERFACE</span> <span class="n">TextSort</span> <span class="o">=</span> <span class="n">ArraySort</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span> <span class="kr">END</span> <span class="n">TextSort</span><span class="p">.</span>
</pre></div>
<div class="mw-highlight mw-highlight-lang-modula2 mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">MODULE</span> <span class="n">TextSort</span> <span class="o">=</span> <span class="n">ArraySort</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span> <span class="kr">END</span> <span class="n">TextSort</span><span class="p">.</span>
</pre></div>
<p>Then, as an example:
</p>
<div class="mw-highlight mw-highlight-lang-modula2 mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">MODULE</span> <span class="n">Main</span><span class="p">;</span>

<span class="kr">IMPORT</span> <span class="n">IO</span><span class="p">,</span> <span class="n">TextSort</span><span class="p">;</span>

<span class="kr">VAR</span> <span class="n">arr</span> <span class="o">:=</span> <span class="kr">ARRAY</span> <span class="p">[</span><span class="mi">1</span><span class="p">..</span><span class="mi">10</span><span class="p">]</span> <span class="kr">OF</span> <span class="n">TEXT</span> <span class="p">{</span><span class="s2">&quot;Foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;!ooF&quot;</span><span class="p">,</span> <span class="s2">&quot;Modula-3&quot;</span><span class="p">,</span> <span class="s2">&quot;hickup&quot;</span><span class="p">,</span> 
                                 <span class="s2">&quot;baz&quot;</span><span class="p">,</span> <span class="s2">&quot;quuz&quot;</span><span class="p">,</span> <span class="s2">&quot;Zeepf&quot;</span><span class="p">,</span> <span class="s2">&quot;woo&quot;</span><span class="p">,</span> <span class="s2">&quot;Rosetta Code&quot;</span><span class="p">};</span>

<span class="kr">BEGIN</span>
  <span class="n">TextSort</span><span class="p">.</span><span class="n">Sort</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
  <span class="kr">FOR</span> <span class="n">i</span> <span class="o">:=</span> <span class="n">FIRST</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="kr">TO</span> <span class="n">LAST</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="kr">DO</span>
    <span class="n">IO</span><span class="p">.</span><span class="n">Put</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;</span> <span class="s2">&quot;\n&quot;</span><span class="p">);</span>
  <span class="kr">END</span><span class="p">;</span>
<span class="kr">END</span> <span class="n">Main</span><span class="p">.</span>
</pre></div>
<h2><span class="mw-headline" id="Mond"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Mond" title="Category:Mond">Mond</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=114" title="Edit section: Mond">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Implements the simple quicksort algorithm.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>fun quicksort( arr, cmp )
{
    if( arr.length() &lt; 2 )
        return arr;
    
    if( !cmp )
        cmp = ( a, b ) -&gt; a - b;
    
    var a = [ ], b = [ ];
    var pivot = arr[0];
    var len = arr.length();
    
    for( var i = 1; i &lt; len; ++i )
    {
        var item = arr[i];
        
        if( cmp( item, pivot ) &lt; cmp( pivot, item ) )
            a.add( item );
        else
            b.add( item );
    }
    
    a = quicksort( a, cmp );
    b = quicksort( b, cmp );
    
    a.add( pivot );
    
    foreach( var item in b )
        a.add( item );
    
    return a;
}</pre></div>
<dl><dt>Usage</dt></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>var array = [ 532, 16, 153, 3, 63.60, 925, 0.214 ];
var sorted = quicksort( array );

printLn( sorted );</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>[
  0.214,
  3,
  16,
  63.6,
  153,
  532,
  925
]</pre>
<h2><span class="mw-headline" id="MUMPS"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:MUMPS" title="Category:MUMPS">MUMPS</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=115" title="Edit section: MUMPS">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Shows quicksort on a 16-element array.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>main 
 new collection,size
 set size=16
 set collection=size for i=0:1:size-1 set collection(i)=$random(size)
 write "Collection to sort:",!!
 zwrite collection&#160;; This will only work on Intersystem's flavor of MUMPS
 do quicksort(.collection,0,collection-1)
 write:$$isSorted(.collection)&#160;!,"Collection is sorted:",!!
 zwrite collection &#160;; This will only work on Intersystem's flavor of MUMPS
 q
quicksort(array,low,high)
 if low&lt;high do  
 . set pivot=$$partition(.array,low,high)
 . do quicksort(.array,low,pivot-1)
 . do quicksort(.array,pivot+1,high)
 q
partition(A,p,r)
 set pivot=A(r)
 set i=p-1
 for j=p:1:r-1 do  
 . i A(j)&lt;=pivot do  
 . . set i=i+1
 . . set helper=A(j)
 . . set A(j)=A(i)
 . . set A(i)=helper
 set helper=A(r)
 set A(r)=A(i+1)
 set A(i+1)=helper
 quit i+1
isSorted(array)
 set sorted=1
 for i=0:1:array-2 do  quit:sorted=0
 . for j=i+1:1:array-1 do  quit:sorted=0
 . . set:array(i)&gt;array(j) sorted=0
 quit sorted</pre></div>
<dl><dt>Usage</dt></dl>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre> do main()</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>Collection to sort:

collection=16
collection(0)=4
collection(1)=0
collection(2)=6
collection(3)=14
collection(4)=4
collection(5)=0
collection(6)=10
collection(7)=5
collection(8)=11
collection(9)=4
collection(10)=12
collection(11)=9
collection(12)=13
collection(13)=4
collection(14)=14
collection(15)=0

Collection is sorted:

collection=16
collection(0)=0
collection(1)=0
collection(2)=0
collection(3)=4
collection(4)=4
collection(5)=4
collection(6)=4
collection(7)=5
collection(8)=6
collection(9)=9
collection(10)=10
collection(11)=11
collection(12)=12
collection(13)=13
collection(14)=14
collection(15)=14

</pre>
<h2><span class="mw-headline" id="Nanoquery"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Nanoquery" title="Category:Nanoquery">Nanoquery</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=116" title="Edit section: Nanoquery">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#Python">Python</a></div>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>def quickSort(arr)
	less = {}
	pivotList = {}
	more = {}
	if len(arr) &lt;= 1
		return arr
	else
		pivot = arr[0]
		for i in arr
			if i &lt; pivot
				less.append(i)
			else if i &gt; pivot
				more.append(i)
			else
				pivotList.append(i)
			end
		end
		
		less = quickSort(less)
		more = quickSort(more)
		
		return less + pivotList + more
	end
end</pre></div>
<h2><span class="mw-headline" id="Nemerle"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Nemerle" title="Category:Nemerle">Nemerle</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=117" title="Edit section: Nemerle">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#Haskell">Haskell</a></div>
<p>A little less clean and concise than Haskell, but essentially the same.
</p>
<div class="mw-highlight mw-highlight-lang-nemerle mw-content-ltr" dir="ltr"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="n">System</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">;</span><span class="w"></span>
<span class="k">using</span><span class="w"> </span><span class="n">Nemerle</span><span class="p">.</span><span class="n">Collections</span><span class="p">.</span><span class="n">NList</span><span class="p">;</span><span class="w"></span>

<span class="k">module</span><span class="w"> </span><span class="n">Quicksort</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Qsort</span><span class="p">[</span><span class="n">T</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kt">list</span><span class="p">[</span><span class="n">T</span><span class="p">])</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kt">list</span><span class="p">[</span><span class="n">T</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="k">where</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IComparable</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="p">|[]</span><span class="w">    </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">        </span><span class="p">|</span><span class="n">x</span><span class="p">::</span><span class="n">xs</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">Qsort</span><span class="p">(</span><span class="err">$</span><span class="p">[</span><span class="n">y</span><span class="p">|</span><span class="n">y</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">xs</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)])</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">Qsort</span><span class="p">(</span><span class="err">$</span><span class="p">[</span><span class="n">y</span><span class="p">|</span><span class="n">y</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">xs</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">CompareTo</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)])</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="n">Main</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kt">void</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">def</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[];</span><span class="w"></span>
<span class="w">        </span><span class="k">def</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="m">2</span><span class="p">];</span><span class="w"></span>
<span class="w">        </span><span class="k">def</span><span class="w"> </span><span class="n">several</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">];</span><span class="w"></span>
<span class="w">        </span><span class="n">WriteLine</span><span class="p">(</span><span class="n">Qsort</span><span class="p">(</span><span class="n">empty</span><span class="p">));</span><span class="w"></span>
<span class="w">        </span><span class="n">WriteLine</span><span class="p">(</span><span class="n">Qsort</span><span class="p">(</span><span class="n">single</span><span class="p">));</span><span class="w"></span>
<span class="w">        </span><span class="n">WriteLine</span><span class="p">(</span><span class="n">Qsort</span><span class="p">(</span><span class="n">several</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="NetRexx"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:NetRexx" title="Category:NetRexx">NetRexx</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=118" title="Edit section: NetRexx">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This sample implements both the <b>simple</b> and <b>in place</b> algorithms as described in the task's description:
</p>
<div class="mw-highlight mw-highlight-lang-rexx mw-content-ltr" dir="ltr"><pre><span></span><span class="cm">/* NetRexx */</span><span class="w"></span>
<span class="kr">options</span><span class="w"> </span>replace<span class="w"> </span>format<span class="w"> </span>comments<span class="w"> </span>java<span class="w"> </span>crossref<span class="w"> </span>savelog<span class="w"> </span>symbols<span class="w"> </span>binary<span class="w"></span>

import<span class="w"> </span>java<span class="o">.</span>util<span class="o">.</span>List<span class="w"></span>

placesList<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[</span>String<span class="w"> </span><span class="o">-</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;UK  London&quot;</span><span class="o">,</span><span class="w">     </span><span class="s">&quot;US  New York&quot;</span><span class="o">,</span><span class="w">   </span><span class="s">&quot;US  Boston&quot;</span><span class="o">,</span><span class="w">     </span><span class="s">&quot;US  Washington&quot;</span><span class="w"> </span><span class="o">-</span><span class="w"></span>
<span class="w">  </span><span class="o">,</span><span class="w"> </span><span class="s">&quot;UK  Washington&quot;</span><span class="o">,</span><span class="w"> </span><span class="s">&quot;US  Birmingham&quot;</span><span class="o">,</span><span class="w"> </span><span class="s">&quot;UK  Birmingham&quot;</span><span class="o">,</span><span class="w"> </span><span class="s">&quot;UK  Boston&quot;</span><span class="w">     </span><span class="o">-</span><span class="w"></span>
<span class="err">]</span><span class="w"></span>
lists<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[</span><span class="w"> </span><span class="o">-</span><span class="w"></span>
<span class="w">    </span>placesList<span class="w"> </span><span class="o">-</span><span class="w"></span>
<span class="w">  </span><span class="o">,</span><span class="w"> </span>quickSortSimple<span class="o">(</span>String<span class="err">[]</span><span class="w"> </span>Arrays<span class="o">.</span>copyOf<span class="o">(</span>placesList<span class="o">,</span><span class="w"> </span>placesList<span class="o">.</span>length<span class="o">))</span><span class="w"> </span><span class="o">-</span><span class="w"></span>
<span class="w">  </span><span class="o">,</span><span class="w"> </span>quickSortInplace<span class="o">(</span>String<span class="err">[]</span><span class="w"> </span>Arrays<span class="o">.</span>copyOf<span class="o">(</span>placesList<span class="o">,</span><span class="w"> </span>placesList<span class="o">.</span>length<span class="o">))</span><span class="w"> </span><span class="o">-</span><span class="w"></span>
<span class="err">]</span><span class="w"></span>

loop<span class="w"> </span>ln<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>lists<span class="o">.</span>length<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span>cl<span class="w"> </span><span class="o">=</span><span class="w"> </span>lists<span class="err">[</span>ln<span class="err">]</span><span class="w"></span>
<span class="w">  </span>loop<span class="w"> </span>ct<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>cl<span class="o">.</span>length<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">    </span><span class="kr">say</span><span class="w"> </span>cl<span class="err">[</span>ct<span class="err">]</span><span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"> </span>ct<span class="w"></span>
<span class="w">    </span><span class="kr">say</span><span class="w"></span>
<span class="w">  </span><span class="kr">end</span><span class="w"> </span>ln<span class="w"></span>

<span class="kr">return</span><span class="w"></span>

method<span class="w"> </span>quickSortSimple<span class="o">(</span>array<span class="w"> </span><span class="o">=</span><span class="w"> </span>String<span class="err">[]</span><span class="o">)</span><span class="w"> </span>public<span class="w"> </span>constant<span class="w"> </span>binary<span class="w"> </span>returns<span class="w"> </span>String<span class="err">[]</span><span class="w"></span>

<span class="w">  </span>rl<span class="w"> </span><span class="o">=</span><span class="w"> </span>String<span class="err">[</span>array<span class="o">.</span>length<span class="err">]</span><span class="w"></span>
<span class="w">  </span>al<span class="w"> </span><span class="o">=</span><span class="w"> </span>List<span class="w"> </span>quickSortSimple<span class="o">(</span>Arrays<span class="o">.</span>asList<span class="o">(</span>array<span class="o">))</span><span class="w"></span>
<span class="w">  </span>al<span class="o">.</span>toArray<span class="o">(</span>rl<span class="o">)</span><span class="w"></span>

<span class="w">  </span><span class="kr">return</span><span class="w"> </span>rl<span class="w"></span>

method<span class="w"> </span>quickSortSimple<span class="o">(</span>array<span class="w"> </span><span class="o">=</span><span class="w"> </span>List<span class="o">)</span><span class="w"> </span>public<span class="w"> </span>constant<span class="w"> </span>binary<span class="w"> </span>returns<span class="w"> </span>ArrayList<span class="w"></span>

<span class="w">  </span><span class="kr">if</span><span class="w"> </span>array<span class="o">.</span>size<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">    </span>less<span class="w">    </span><span class="o">=</span><span class="w"> </span>ArrayList<span class="o">()</span><span class="w"></span>
<span class="w">    </span>equal<span class="w">   </span><span class="o">=</span><span class="w"> </span>ArrayList<span class="o">()</span><span class="w"></span>
<span class="w">    </span>greater<span class="w"> </span><span class="o">=</span><span class="w"> </span>ArrayList<span class="o">()</span><span class="w"></span>

<span class="w">    </span>pivot<span class="w"> </span><span class="o">=</span><span class="w"> </span>array<span class="o">.</span>get<span class="o">(</span><span class="nb">Random</span><span class="o">().</span>nextInt<span class="o">(</span>array<span class="o">.</span>size<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="o">))</span><span class="w"></span>
<span class="w">    </span>loop<span class="w"> </span>x_<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>array<span class="o">.</span>size<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">      </span><span class="kr">if</span><span class="w"> </span><span class="o">(</span>Comparable<span class="w"> </span>array<span class="o">.</span>get<span class="o">(</span>x_<span class="o">)).</span>compareTo<span class="o">(</span>Comparable<span class="w"> </span>pivot<span class="o">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span>less<span class="o">.</span>add<span class="o">(</span>array<span class="o">.</span>get<span class="o">(</span>x_<span class="o">))</span><span class="w"></span>
<span class="w">      </span><span class="kr">if</span><span class="w"> </span><span class="o">(</span>Comparable<span class="w"> </span>array<span class="o">.</span>get<span class="o">(</span>x_<span class="o">)).</span>compareTo<span class="o">(</span>Comparable<span class="w"> </span>pivot<span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span>equal<span class="o">.</span>add<span class="o">(</span>array<span class="o">.</span>get<span class="o">(</span>x_<span class="o">))</span><span class="w"></span>
<span class="w">      </span><span class="kr">if</span><span class="w"> </span><span class="o">(</span>Comparable<span class="w"> </span>array<span class="o">.</span>get<span class="o">(</span>x_<span class="o">)).</span>compareTo<span class="o">(</span>Comparable<span class="w"> </span>pivot<span class="o">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span>greater<span class="o">.</span>add<span class="o">(</span>array<span class="o">.</span>get<span class="o">(</span>x_<span class="o">))</span><span class="w"></span>
<span class="w">      </span><span class="kr">end</span><span class="w"> </span>x_<span class="w"></span>
<span class="w">    </span>less<span class="w">    </span><span class="o">=</span><span class="w"> </span>quickSortSimple<span class="o">(</span>less<span class="o">)</span><span class="w"></span>
<span class="w">    </span>greater<span class="w"> </span><span class="o">=</span><span class="w"> </span>quickSortSimple<span class="o">(</span>greater<span class="o">)</span><span class="w"></span>
<span class="w">    </span>out<span class="w"> </span><span class="o">=</span><span class="w"> </span>ArrayList<span class="o">(</span>array<span class="o">.</span>size<span class="o">)</span><span class="w"></span>
<span class="w">    </span>out<span class="o">.</span>addAll<span class="o">(</span>less<span class="o">)</span><span class="w"></span>
<span class="w">    </span>out<span class="o">.</span>addAll<span class="o">(</span>equal<span class="o">)</span><span class="w"></span>
<span class="w">    </span>out<span class="o">.</span>addAll<span class="o">(</span>greater<span class="o">)</span><span class="w"></span>

<span class="w">    </span>array<span class="w"> </span><span class="o">=</span><span class="w"> </span>out<span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>

<span class="w">  </span><span class="kr">return</span><span class="w"> </span>ArrayList<span class="w"> </span>array<span class="w"></span>

method<span class="w"> </span>quickSortInplace<span class="o">(</span>array<span class="w"> </span><span class="o">=</span><span class="w"> </span>String<span class="err">[]</span><span class="o">)</span><span class="w"> </span>public<span class="w"> </span>constant<span class="w"> </span>binary<span class="w"> </span>returns<span class="w"> </span>String<span class="err">[]</span><span class="w"></span>

<span class="w">  </span>rl<span class="w"> </span><span class="o">=</span><span class="w"> </span>String<span class="err">[</span>array<span class="o">.</span>length<span class="err">]</span><span class="w"></span>
<span class="w">  </span>al<span class="w"> </span><span class="o">=</span><span class="w"> </span>List<span class="w"> </span>quickSortInplace<span class="o">(</span>Arrays<span class="o">.</span>asList<span class="o">(</span>array<span class="o">))</span><span class="w"></span>
<span class="w">  </span>al<span class="o">.</span>toArray<span class="o">(</span>rl<span class="o">)</span><span class="w"></span>

<span class="w">  </span><span class="kr">return</span><span class="w"> </span>rl<span class="w"></span>

method<span class="w"> </span>quickSortInplace<span class="o">(</span>array<span class="w"> </span><span class="o">=</span><span class="w"> </span>List<span class="o">,</span><span class="w"> </span>ixL<span class="w"> </span><span class="o">=</span><span class="w"> </span>int<span class="w"> </span><span class="m">0</span><span class="o">,</span><span class="w"> </span>ixR<span class="w"> </span><span class="o">=</span><span class="w"> </span>int<span class="w"> </span>array<span class="o">.</span>size<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span>public<span class="w"> </span>constant<span class="w"> </span>binary<span class="w"> </span>returns<span class="w"> </span>ArrayList<span class="w"></span>

<span class="w">  </span><span class="kr">if</span><span class="w"> </span>ixL<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>ixR<span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">    </span>ixP<span class="w"> </span><span class="o">=</span><span class="w"> </span>int<span class="w"> </span>ixL<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">(</span>ixR<span class="w"> </span><span class="o">-</span><span class="w"> </span>ixL<span class="o">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="w">    </span>ixP<span class="w"> </span><span class="o">=</span><span class="w"> </span>quickSortInplacePartition<span class="o">(</span>array<span class="o">,</span><span class="w"> </span>ixL<span class="o">,</span><span class="w"> </span>ixR<span class="o">,</span><span class="w"> </span>ixP<span class="o">)</span><span class="w"></span>
<span class="w">    </span>quickSortInplace<span class="o">(</span>array<span class="o">,</span><span class="w"> </span>ixL<span class="o">,</span><span class="w"> </span>ixP<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"></span>
<span class="w">    </span>quickSortInplace<span class="o">(</span>array<span class="o">,</span><span class="w"> </span>ixP<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="o">,</span><span class="w"> </span>ixR<span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>

<span class="w">  </span>array<span class="w"> </span><span class="o">=</span><span class="w"> </span>ArrayList<span class="o">(</span>array<span class="o">)</span><span class="w"></span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span>ArrayList<span class="w"> </span>array<span class="w"></span>

method<span class="w"> </span>quickSortInplacePartition<span class="o">(</span>array<span class="w"> </span><span class="o">=</span><span class="w"> </span>List<span class="o">,</span><span class="w"> </span>ixL<span class="w"> </span><span class="o">=</span><span class="w"> </span>int<span class="o">,</span><span class="w"> </span>ixR<span class="w"> </span><span class="o">=</span><span class="w"> </span>int<span class="o">,</span><span class="w"> </span>ixP<span class="w"> </span><span class="o">=</span><span class="w"> </span>int<span class="o">)</span><span class="w"> </span>public<span class="w"> </span>constant<span class="w"> </span>binary<span class="w"> </span>returns<span class="w"> </span>int<span class="w"></span>

<span class="w">  </span>pivotValue<span class="w"> </span><span class="o">=</span><span class="w"> </span>array<span class="o">.</span>get<span class="o">(</span>ixP<span class="o">)</span><span class="w"></span>
<span class="w">  </span>rValue<span class="w">     </span><span class="o">=</span><span class="w"> </span>array<span class="o">.</span>get<span class="o">(</span>ixR<span class="o">)</span><span class="w"></span>
<span class="w">  </span>array<span class="o">.</span>set<span class="o">(</span>ixP<span class="o">,</span><span class="w"> </span>rValue<span class="o">)</span><span class="w"></span>
<span class="w">  </span>array<span class="o">.</span>set<span class="o">(</span>ixR<span class="o">,</span><span class="w"> </span>pivotValue<span class="o">)</span><span class="w"></span>
<span class="w">  </span>ixStore<span class="w"> </span><span class="o">=</span><span class="w"> </span>ixL<span class="w"></span>
<span class="w">  </span>loop<span class="w"> </span>i_<span class="w"> </span><span class="o">=</span><span class="w"> </span>ixL<span class="w"> </span><span class="kr">to</span><span class="w"> </span>ixR<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">    </span>iValue<span class="w"> </span><span class="o">=</span><span class="w"> </span>array<span class="o">.</span>get<span class="o">(</span>i_<span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="o">(</span>Comparable<span class="w"> </span>iValue<span class="o">).</span>compareTo<span class="o">(</span>Comparable<span class="w"> </span>pivotValue<span class="o">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">      </span>storeValue<span class="w"> </span><span class="o">=</span><span class="w"> </span>array<span class="o">.</span>get<span class="o">(</span>ixStore<span class="o">)</span><span class="w"></span>
<span class="w">      </span>array<span class="o">.</span>set<span class="o">(</span>i_<span class="o">,</span><span class="w"> </span>storeValue<span class="o">)</span><span class="w"></span>
<span class="w">      </span>array<span class="o">.</span>set<span class="o">(</span>ixStore<span class="o">,</span><span class="w"> </span>iValue<span class="o">)</span><span class="w"></span>
<span class="w">      </span>ixStore<span class="w"> </span><span class="o">=</span><span class="w"> </span>ixStore<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">      </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"> </span>i_<span class="w"></span>
<span class="w">  </span>storeValue<span class="w"> </span><span class="o">=</span><span class="w"> </span>array<span class="o">.</span>get<span class="o">(</span>ixStore<span class="o">)</span><span class="w"></span>
<span class="w">  </span>rValue<span class="w">     </span><span class="o">=</span><span class="w"> </span>array<span class="o">.</span>get<span class="o">(</span>ixR<span class="o">)</span><span class="w"></span>
<span class="w">  </span>array<span class="o">.</span>set<span class="o">(</span>ixStore<span class="o">,</span><span class="w"> </span>rValue<span class="o">)</span><span class="w"></span>
<span class="w">  </span>array<span class="o">.</span>set<span class="o">(</span>ixR<span class="o">,</span><span class="w"> </span>storeValue<span class="o">)</span><span class="w"></span>

<span class="w">  </span><span class="kr">return</span><span class="w"> </span>ixStore<span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>UK  London
US  New York
US  Boston
US  Washington
UK  Washington
US  Birmingham
UK  Birmingham
UK  Boston

UK  Birmingham
UK  Boston
UK  London
UK  Washington
US  Birmingham
US  Boston
US  New York
US  Washington

UK  Birmingham
UK  Boston
UK  London
UK  Washington
US  Birmingham
US  Boston
US  New York
US  Washington
</pre>
<h2><span class="mw-headline" id="Nial"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Nial" title="Category:Nial">Nial</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=119" title="Edit section: Nial">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>quicksort is fork [ &gt;= [1 first,tally],
  pass,
  link [
      quicksort sublist [ &lt; [pass, first], pass ],
      sublist [ match [pass,first],pass ],
      quicksort sublist [ &gt; [pass,first], pass ]
  ]
]</pre></div>
<p>Using it.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>|quicksort [5, 8, 7, 4, 3]
=3 4 5 7 8</pre></div>
<h2><span class="mw-headline" id="Nim"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Nim" title="Category:Nim">Nim</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=120" title="Edit section: Nim">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span id="Procedural_.28in_place.29_algorithm"></span><span class="mw-headline" id="Procedural_(in_place)_algorithm"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Category:Procedural_(in_place)_algorithm&amp;action=edit&amp;redlink=1" class="new" title="Category:Procedural (in place) algorithm (page does not exist)">Procedural (in place) algorithm </a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=121" title="Edit section: Procedural (in place) algorithm">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-highlight-lang-nim mw-content-ltr" dir="ltr"><pre><span></span><span class="k">proc </span><span class="nf">quickSortImpl</span><span class="o">[</span><span class="n">T</span><span class="o">]</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="kd">var</span> <span class="n">openarray</span><span class="o">[</span><span class="n">T</span><span class="o">]</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">stop</span> <span class="o">-</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">let</span> <span class="n">pivot</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="n">start</span><span class="o">]</span>
    <span class="kd">var</span> <span class="n">left</span> <span class="o">=</span> <span class="n">start</span>
    <span class="kd">var</span> <span class="n">right</span> <span class="o">=</span> <span class="n">stop</span>
    <span class="k">while</span> <span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">:</span>
      <span class="k">while</span> <span class="n">cmp</span><span class="p">(</span><span class="n">a</span><span class="o">[</span><span class="n">left</span><span class="o">]</span><span class="p">,</span> <span class="n">pivot</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">inc</span><span class="p">(</span><span class="n">left</span><span class="p">)</span>
      <span class="k">while</span> <span class="n">cmp</span><span class="p">(</span><span class="n">a</span><span class="o">[</span><span class="n">right</span><span class="o">]</span><span class="p">,</span> <span class="n">pivot</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">dec</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">:</span>
        <span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="o">[</span><span class="n">left</span><span class="o">]</span><span class="p">,</span> <span class="n">a</span><span class="o">[</span><span class="n">right</span><span class="o">]</span><span class="p">)</span>
        <span class="n">inc</span><span class="p">(</span><span class="n">left</span><span class="p">)</span>
        <span class="n">dec</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
    <span class="n">quickSortImpl</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
    <span class="n">quickSortImpl</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">stop</span><span class="p">)</span>

<span class="k">proc </span><span class="nf">quickSort</span><span class="o">[</span><span class="n">T</span><span class="o">]</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="kd">var</span> <span class="n">openarray</span><span class="o">[</span><span class="n">T</span><span class="o">]</span><span class="p">)</span> <span class="o">=</span>
  <span class="n">quickSortImpl</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

<span class="kd">var</span> <span class="n">a</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">31</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">782</span><span class="o">]</span>
<span class="n">a</span><span class="p">.</span><span class="n">quickSort</span><span class="p">()</span>
<span class="n">echo</span> <span class="n">a</span>
</pre></div>
<h3><span id="Functional_.28inmmutability.29_algorithm"></span><span class="mw-headline" id="Functional_(inmmutability)_algorithm"><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Category:Functional_(inmmutability)_algorithm&amp;action=edit&amp;redlink=1" class="new" title="Category:Functional (inmmutability) algorithm (page does not exist)">Functional (inmmutability) algorithm </a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=122" title="Edit section: Functional (inmmutability) algorithm">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-highlight-lang-nim mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="n">sequtils</span><span class="p">,</span><span class="n">sugar</span>

<span class="k">func</span> <span class="n">sorted</span><span class="o">[</span><span class="n">T</span><span class="o">]</span><span class="p">(</span><span class="n">xs</span><span class="p">:</span><span class="kt">seq</span><span class="o">[</span><span class="n">T</span><span class="o">]</span><span class="p">):</span> <span class="kt">seq</span><span class="o">[</span><span class="n">T</span><span class="o">]</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">xs</span><span class="p">.</span><span class="n">len</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="o">@[]</span> <span class="k">else</span><span class="p">:</span> <span class="n">concat</span><span class="p">(</span>
    <span class="n">xs</span><span class="o">[</span><span class="mf">1</span><span class="p">..^</span><span class="mi">1</span><span class="o">]</span><span class="p">.</span><span class="n">filter</span><span class="p">(</span><span class="n">x</span><span class="o">=&gt;</span><span class="n">x</span><span class="o">&lt;</span><span class="n">xs</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">).</span><span class="n">sorted</span><span class="p">,</span>
    <span class="o">@[</span><span class="n">xs</span><span class="o">[</span><span class="mi">0</span><span class="o">]]</span><span class="p">,</span>
    <span class="n">xs</span><span class="o">[</span><span class="mf">1</span><span class="p">..^</span><span class="mi">1</span><span class="o">]</span><span class="p">.</span><span class="n">filter</span><span class="p">(</span><span class="n">x</span><span class="o">=&gt;</span><span class="n">x</span><span class="o">&gt;=</span><span class="n">xs</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">).</span><span class="n">sorted</span>
  <span class="p">)</span>

<span class="o">@[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">31</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">782</span><span class="o">]</span><span class="p">.</span><span class="n">sorted</span><span class="p">.</span><span class="n">echo</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>@[-31, 0, 2, 2, 4, 65, 83, 99, 782]</pre>
<h2><span class="mw-headline" id="Nix"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Nix" title="Category:Nix">Nix</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=123" title="Edit section: Nix">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-nix mw-content-ltr" dir="ltr"><pre><span></span><span class="k">let</span>
  <span class="ss">qs =</span> l<span class="p">:</span>
    <span class="k">if</span> <span class="ss">l =</span><span class="o">=</span> <span class="p">[]</span> <span class="k">then</span> <span class="p">[]</span>
    <span class="k">else</span>
      <span class="k">with</span> <span class="nb">builtins</span><span class="p">;</span>
      <span class="k">let</span> <span class="ss">x  =</span> head l<span class="p">;</span>
          <span class="ss">xs =</span> tail l<span class="p">;</span>
          <span class="ss">low  =</span> filter <span class="p">(</span>a<span class="p">:</span> a <span class="err">&lt;</span> x<span class="p">)</span>  xs<span class="p">;</span>
          <span class="ss">high =</span> filter <span class="p">(</span>a<span class="p">:</span> a <span class="err">&gt;</span><span class="o">=</span> x<span class="p">)</span> xs<span class="p">;</span>
      <span class="k">in</span> qs low <span class="o">++</span> <span class="p">[</span>x<span class="p">]</span> <span class="o">++</span> qs high<span class="p">;</span>
<span class="k">in</span>
  qs <span class="p">[</span><span class="mi">4</span> <span class="mi">65</span> <span class="mi">2</span> <span class="p">(</span><span class="err">-</span><span class="mi">31</span><span class="p">)</span> <span class="mi">0</span> <span class="mi">99</span> <span class="mi">83</span> <span class="mi">782</span><span class="p">]</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>[ -31 0 2 4 65 83 99 782 ]</pre>
<h2><span class="mw-headline" id="Oberon-2"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Oberon-2" title="Category:Oberon-2">Oberon-2</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=124" title="Edit section: Oberon-2">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#Pascal">Pascal</a></div>
<div class="mw-highlight mw-highlight-lang-modula2 mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">MODULE</span> <span class="n">QS</span><span class="p">;</span>

<span class="kr">IMPORT</span> <span class="n">Out</span><span class="p">;</span>
    
<span class="kr">TYPE</span>
  <span class="n">TItem</span> <span class="o">=</span> <span class="nb">INTEGER</span><span class="p">;</span>
  
<span class="kr">CONST</span>
  <span class="n">N</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  
<span class="kr">VAR</span>
  <span class="n">I</span><span class="p">:</span><span class="nb">LONGINT</span><span class="p">;</span>
  <span class="n">A</span><span class="p">:</span><span class="kr">ARRAY</span> <span class="n">N</span> <span class="kr">OF</span> <span class="nb">INTEGER</span><span class="p">;</span>
  
<span class="kr">PROCEDURE</span> <span class="n">Init</span><span class="p">(</span><span class="kr">VAR</span> <span class="n">A</span><span class="p">:</span><span class="kr">ARRAY</span> <span class="kr">OF</span> <span class="n">TItem</span><span class="p">);</span>
<span class="kr">BEGIN</span>
  <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:=</span> <span class="mi">4</span><span class="p">;</span> <span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="mi">65</span><span class="p">;</span> <span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">:=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">A</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">:=</span> <span class="o">-</span><span class="mi">31</span><span class="p">;</span> <span class="n">A</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">A</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">:=</span> <span class="mi">99</span><span class="p">;</span> <span class="n">A</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">:=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">A</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">:=</span> <span class="mi">83</span><span class="p">;</span> <span class="n">A</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">:=</span> <span class="mi">782</span><span class="p">;</span> <span class="n">A</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kr">END</span> <span class="n">Init</span><span class="p">;</span>

<span class="kr">PROCEDURE</span> <span class="n">QuickSort</span><span class="p">(</span><span class="kr">VAR</span> <span class="n">A</span><span class="p">:</span><span class="kr">ARRAY</span> <span class="kr">OF</span> <span class="n">TItem</span><span class="p">;</span> <span class="n">Left</span><span class="p">,</span><span class="n">Right</span><span class="p">:</span><span class="nb">LONGINT</span><span class="p">);</span>
<span class="kr">VAR</span>
  <span class="n">I</span><span class="p">,</span><span class="n">J</span><span class="p">:</span><span class="nb">LONGINT</span><span class="p">;</span>
  <span class="n">Pivot</span><span class="p">,</span><span class="n">Temp</span><span class="p">:</span><span class="n">TItem</span><span class="p">;</span>
<span class="kr">BEGIN</span>
  <span class="n">I</span> <span class="o">:=</span> <span class="n">Left</span><span class="p">;</span>
  <span class="n">J</span> <span class="o">:=</span> <span class="n">Right</span><span class="p">;</span>
  <span class="n">Pivot</span> <span class="o">:=</span> <span class="n">A</span><span class="p">[(</span><span class="n">Left</span> <span class="o">+</span> <span class="n">Right</span><span class="p">)</span> <span class="kr">DIV</span> <span class="mi">2</span><span class="p">];</span>
  <span class="kr">REPEAT</span>
    <span class="kr">WHILE</span> <span class="n">Pivot</span> <span class="o">&gt;</span> <span class="n">A</span><span class="p">[</span><span class="n">I</span><span class="p">]</span> <span class="kr">DO</span> <span class="nb">INC</span><span class="p">(</span><span class="n">I</span><span class="p">)</span> <span class="kr">END</span><span class="p">;</span>
    <span class="kr">WHILE</span> <span class="n">Pivot</span> <span class="o">&lt;</span> <span class="n">A</span><span class="p">[</span><span class="n">J</span><span class="p">]</span> <span class="kr">DO</span> <span class="nb">DEC</span><span class="p">(</span><span class="n">J</span><span class="p">)</span> <span class="kr">END</span><span class="p">;</span>
    <span class="kr">IF</span> <span class="n">I</span> <span class="o">&lt;=</span> <span class="n">J</span> <span class="kr">THEN</span>
      <span class="n">Temp</span> <span class="o">:=</span> <span class="n">A</span><span class="p">[</span><span class="n">I</span><span class="p">];</span>
      <span class="n">A</span><span class="p">[</span><span class="n">I</span><span class="p">]</span> <span class="o">:=</span> <span class="n">A</span><span class="p">[</span><span class="n">J</span><span class="p">];</span>
      <span class="n">A</span><span class="p">[</span><span class="n">J</span><span class="p">]</span> <span class="o">:=</span> <span class="n">Temp</span><span class="p">;</span>
      <span class="nb">INC</span><span class="p">(</span><span class="n">I</span><span class="p">);</span>
      <span class="nb">DEC</span><span class="p">(</span><span class="n">J</span><span class="p">);</span>
    <span class="kr">END</span><span class="p">;</span>
  <span class="kr">UNTIL</span> <span class="n">I</span> <span class="o">&gt;</span> <span class="n">J</span><span class="p">;</span>
  <span class="kr">IF</span> <span class="n">Left</span> <span class="o">&lt;</span> <span class="n">J</span> <span class="kr">THEN</span> <span class="n">QuickSort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">Left</span><span class="p">,</span> <span class="n">J</span><span class="p">)</span> <span class="kr">END</span><span class="p">;</span>
  <span class="kr">IF</span> <span class="n">I</span> <span class="o">&lt;</span> <span class="n">Right</span> <span class="kr">THEN</span> <span class="n">QuickSort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">Right</span><span class="p">)</span> <span class="kr">END</span><span class="p">;</span>
<span class="kr">END</span> <span class="n">QuickSort</span><span class="p">;</span>
  
<span class="kr">BEGIN</span>
  <span class="n">Init</span><span class="p">(</span><span class="n">A</span><span class="p">);</span>
  <span class="kr">FOR</span> <span class="n">I</span> <span class="o">:=</span> <span class="mi">0</span> <span class="kr">TO</span> <span class="n">LEN</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span> <span class="kr">DO</span>
    <span class="n">Out</span><span class="p">.</span><span class="n">Int</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">I</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span> <span class="n">Out</span><span class="p">.</span><span class="n">Char</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
  <span class="kr">END</span><span class="p">;</span>
  <span class="n">Out</span><span class="p">.</span><span class="n">Ln</span><span class="p">;</span>
  <span class="n">QuickSort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">LEN</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
  <span class="kr">FOR</span> <span class="n">I</span> <span class="o">:=</span> <span class="mi">0</span> <span class="kr">TO</span> <span class="n">LEN</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span> <span class="kr">DO</span>
    <span class="n">Out</span><span class="p">.</span><span class="n">Int</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">I</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span> <span class="n">Out</span><span class="p">.</span><span class="n">Char</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
  <span class="kr">END</span><span class="p">;</span>
  <span class="n">Out</span><span class="p">.</span><span class="n">Ln</span><span class="p">;</span>
<span class="kr">END</span> <span class="n">QS</span><span class="p">.</span>
</pre></div>
<h2><span class="mw-headline" id="Objeck"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Objeck" title="Category:Objeck">Objeck</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=125" title="Edit section: Objeck">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>class QuickSort {
  function&#160;: Main(args&#160;: String[]) ~ Nil {
    array&#160;:= [1, 3, 5, 7, 9, 8, 6, 4, 2];
    Sort(array);
    each(i&#160;: array) {
      array[i]-&gt;PrintLine();
    };
  }

  function&#160;: Sort(array&#160;: Int[]) ~ Nil {
    size&#160;:= array-&gt;Size();
    if(size &lt;= 1) {
      return;
    };
    Sort(array, 0, size - 1);
  }

  function&#160;: native&#160;: Sort(array&#160;: Int[], low&#160;: Int, high&#160;: Int) ~ Nil {
    i&#160;:= low; j&#160;:= high;
    pivot&#160;:= array[low + (high-low)/2];

    while(i &lt;= j) {
      while(array[i] &lt; pivot) {
        i+=1;
      };

      while(array[j] &gt; pivot) {
        j-=1;
      };

      if (i &lt;= j) {
        temp&#160;:= array[i];
        array[i]&#160;:= array[j];
        array[j]&#160;:= temp;
        i+=1; j-=1;
      };
    };

    if(low &lt; j) {
      Sort(array, low, j);
    };

    if(i &lt; high) {
      Sort(array, i, high);
    };
  }
}</pre></div>
<h2><span class="mw-headline" id="Objective-C"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Objective-C" title="Category:Objective-C">Objective-C</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=126" title="Edit section: Objective-C">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/http://weblog.bignerdranch.com/398-objective-c-literals-part-1/">latest XCode compiler</a> is assumed with <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/http://en.wikipedia.org/wiki/Automatic_Reference_Counting">ARC</a> enabled.
</p>
<div class="mw-highlight mw-highlight-lang-objc mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">quicksortInPlace</span><span class="p">(</span><span class="bp">NSMutableArray</span><span class="w"> </span><span class="o">*</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">NSInteger</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">NSInteger</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">NSComparator</span><span class="w"> </span><span class="n">comparator</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">first</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">id</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">[(</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">last</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="n">NSInteger</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">NSInteger</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">last</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">left</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">comparator</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">left</span><span class="p">],</span><span class="w"> </span><span class="n">pivot</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">NSOrderedAscending</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="n">left</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">comparator</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">right</span><span class="p">],</span><span class="w"> </span><span class="n">pivot</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">NSOrderedDescending</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="n">right</span><span class="o">--</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">left</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">right</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">[</span><span class="n">array</span><span class="w"> </span><span class="n">exchangeObjectAtIndex</span><span class="o">:</span><span class="n">left</span><span class="o">++</span><span class="w"> </span><span class="n">withObjectAtIndex</span><span class="o">:</span><span class="n">right</span><span class="o">--</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">quicksortInPlace</span><span class="p">(</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">,</span><span class="w"> </span><span class="n">comparator</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">quicksortInPlace</span><span class="p">(</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">comparator</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="bp">NSArray</span><span class="o">*</span><span class="w"> </span><span class="nf">quicksort</span><span class="p">(</span><span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="n">unsorted</span><span class="p">,</span><span class="w"> </span><span class="n">NSComparator</span><span class="w"> </span><span class="n">comparator</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="bp">NSMutableArray</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">NSMutableArray</span><span class="w"> </span><span class="n">arrayWithArray</span><span class="o">:</span><span class="n">unsorted</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="n">quicksortInPlace</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">comparator</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">@autoreleasepool</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">@[</span><span class="w"> </span><span class="mi">@1</span><span class="p">,</span><span class="w"> </span><span class="mi">@3</span><span class="p">,</span><span class="w"> </span><span class="mi">@5</span><span class="p">,</span><span class="w"> </span><span class="mi">@7</span><span class="p">,</span><span class="w"> </span><span class="mi">@9</span><span class="p">,</span><span class="w"> </span><span class="mi">@8</span><span class="p">,</span><span class="w"> </span><span class="mi">@6</span><span class="p">,</span><span class="w"> </span><span class="mi">@4</span><span class="p">,</span><span class="w"> </span><span class="mi">@2</span><span class="w"> </span><span class="l">]</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Unsorted:&#160;%@&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Sorted:&#160;%@&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">quicksort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="kt">id</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">id</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="w"> </span><span class="n">compare</span><span class="o">:</span><span class="n">y</span><span class="p">];</span><span class="w"> </span><span class="p">}));</span><span class="w"></span>
<span class="w">        </span><span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">@[</span><span class="w"> </span><span class="s">@&quot;Emil&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">@&quot;Peg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">@&quot;Helen&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">@&quot;Juergen&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">@&quot;David&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">@&quot;Rick&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">@&quot;Barb&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">@&quot;Mike&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">@&quot;Tom&quot;</span><span class="w"> </span><span class="l">]</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Unsorted:&#160;%@&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Sorted:&#160;%@&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">quicksort</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="kt">id</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">id</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="w"> </span><span class="n">compare</span><span class="o">:</span><span class="n">y</span><span class="p">];</span><span class="w"> </span><span class="p">}));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>Unsorted: (
    1,
    3,
    5,
    7,
    9,
    8,
    6,
    4,
    2
)
Sorted: (
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
)
Unsorted: (
    Emil,
    Peg,
    Helen,
    Juergen,
    David,
    Rick,
    Barb,
    Mike,
    Tom
)
Sorted: (
    Barb,
    David,
    Emil,
    Helen,
    Juergen,
    Mike,
    Peg,
    Rick,
    Tom
)</pre>
<h2><span class="mw-headline" id="OCaml"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:OCaml" title="Category:OCaml">OCaml</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=127" title="Edit section: OCaml">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Declarative_and_purely_functional">Declarative and purely functional</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=128" title="Edit section: Declarative and purely functional">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-highlight-lang-ocaml mw-content-ltr" dir="ltr"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">quicksort</span> <span class="n">gt</span> <span class="o">=</span> <span class="k">function</span>
  <span class="o">|</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="bp">[]</span>
  <span class="o">|</span> <span class="n">x</span><span class="o">::</span><span class="n">xs</span> <span class="o">-&gt;</span>
      <span class="k">let</span> <span class="n">ys</span><span class="o">,</span> <span class="n">zs</span> <span class="o">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">partition</span> <span class="o">(</span><span class="n">gt</span> <span class="n">x</span><span class="o">)</span> <span class="n">xs</span> <span class="k">in</span>
      <span class="o">(</span><span class="n">quicksort</span> <span class="n">gt</span> <span class="n">ys</span><span class="o">)</span> <span class="o">@</span> <span class="o">(</span><span class="n">x</span> <span class="o">::</span> <span class="o">(</span><span class="n">quicksort</span> <span class="n">gt</span> <span class="n">zs</span><span class="o">))</span>
 
<span class="k">let</span> <span class="o">_</span> <span class="o">=</span>
  <span class="n">quicksort</span> <span class="o">(&gt;)</span> <span class="o">[</span><span class="mi">4</span><span class="o">;</span> <span class="mi">65</span><span class="o">;</span> <span class="mi">2</span><span class="o">;</span> <span class="o">-</span><span class="mi">31</span><span class="o">;</span> <span class="mi">0</span><span class="o">;</span> <span class="mi">99</span><span class="o">;</span> <span class="mi">83</span><span class="o">;</span> <span class="mi">782</span><span class="o">;</span> <span class="mi">1</span><span class="o">]</span>
</pre></div>
<p>The list based implementation is elegant and perspicuous, but inefficient in time (because <code>partition</code> and <code>@</code> are linear) and in space (since it creates numerous new lists along the way).
</p>
<h3><span class="mw-headline" id="Imperative_and_in_place">Imperative and in place</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=129" title="Edit section: Imperative and in place">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Using aliased array slices from the <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://c-cube.github.io/ocaml-containers/2.6/containers/CCArray_slice/index.html">Containers library</a>.
</p>
<div class="mw-highlight mw-highlight-lang-ocaml mw-content-ltr" dir="ltr"><pre><span></span>  <span class="k">module</span> <span class="nc">Slice</span> <span class="o">=</span> <span class="nc">CCArray_slice</span>

  <span class="k">let</span> <span class="n">quicksort</span> <span class="o">:</span> <span class="kt">int</span> <span class="nn">Array</span><span class="p">.</span><span class="n">t</span> <span class="o">-&gt;</span> <span class="kt">unit</span> <span class="o">=</span> <span class="k">fun</span> <span class="n">arr</span> <span class="o">-&gt;</span>
    <span class="k">let</span> <span class="k">rec</span> <span class="n">quicksort&#39;</span> <span class="o">:</span> <span class="kt">int</span> <span class="nn">Slice</span><span class="p">.</span><span class="n">t</span> <span class="o">-&gt;</span> <span class="kt">unit</span> <span class="o">=</span> <span class="k">fun</span> <span class="n">slice</span> <span class="o">-&gt;</span>
      <span class="k">let</span> <span class="n">len</span> <span class="o">=</span> <span class="nn">Slice</span><span class="p">.</span><span class="n">length</span> <span class="n">slice</span> <span class="k">in</span>

      <span class="k">if</span> <span class="n">len</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">then</span> <span class="k">begin</span>
        <span class="k">let</span> <span class="n">pivot</span> <span class="o">=</span> <span class="nn">Slice</span><span class="p">.</span><span class="n">get</span> <span class="n">slice</span> <span class="o">(</span><span class="n">len</span> <span class="o">/</span> <span class="mi">2</span><span class="o">)</span>
        <span class="ow">and</span> <span class="n">i</span> <span class="o">=</span> <span class="n">ref</span> <span class="mi">0</span>
        <span class="ow">and</span> <span class="n">j</span> <span class="o">=</span> <span class="n">ref</span> <span class="o">(</span><span class="n">len</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span>
        <span class="k">in</span>
        <span class="k">while</span> <span class="o">!</span><span class="n">i</span> <span class="o">&lt;</span> <span class="o">!</span><span class="n">j</span> <span class="k">do</span>
          <span class="k">while</span> <span class="nn">Slice</span><span class="p">.</span><span class="n">get</span> <span class="n">slice</span> <span class="o">!</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">pivot</span> <span class="k">do</span> <span class="n">incr</span> <span class="n">i</span> <span class="k">done</span><span class="o">;</span>
          <span class="k">while</span> <span class="nn">Slice</span><span class="p">.</span><span class="n">get</span> <span class="n">slice</span> <span class="o">!</span><span class="n">j</span> <span class="o">&gt;</span> <span class="n">pivot</span> <span class="k">do</span> <span class="n">decr</span> <span class="n">j</span> <span class="k">done</span><span class="o">;</span>

          <span class="k">if</span> <span class="o">!</span><span class="n">i</span> <span class="o">&lt;</span> <span class="o">!</span><span class="n">j</span> <span class="k">then</span> <span class="k">begin</span>
            <span class="k">let</span> <span class="n">i_val</span> <span class="o">=</span> <span class="nn">Slice</span><span class="p">.</span><span class="n">get</span> <span class="n">slice</span> <span class="o">!</span><span class="n">i</span> <span class="k">in</span>
            <span class="nn">Slice</span><span class="p">.</span><span class="n">set</span> <span class="n">slice</span> <span class="o">!</span><span class="n">i</span> <span class="o">(</span><span class="nn">Slice</span><span class="p">.</span><span class="n">get</span> <span class="n">slice</span> <span class="o">!</span><span class="n">j</span><span class="o">);</span>
            <span class="nn">Slice</span><span class="p">.</span><span class="n">set</span> <span class="n">slice</span> <span class="o">!</span><span class="n">j</span> <span class="n">i_val</span><span class="o">;</span>

            <span class="n">incr</span> <span class="n">i</span><span class="o">;</span>
            <span class="n">decr</span> <span class="n">j</span><span class="o">;</span>
          <span class="k">end</span>
        <span class="k">done</span><span class="o">;</span>

        <span class="n">quicksort&#39;</span> <span class="o">(</span><span class="nn">Slice</span><span class="p">.</span><span class="n">sub</span> <span class="n">slice</span> <span class="mi">0</span> <span class="o">!</span><span class="n">i</span><span class="o">);</span>
        <span class="n">quicksort&#39;</span> <span class="o">(</span><span class="nn">Slice</span><span class="p">.</span><span class="n">sub</span> <span class="n">slice</span> <span class="o">!</span><span class="n">i</span> <span class="o">(</span><span class="n">len</span> <span class="o">-</span> <span class="o">!</span><span class="n">i</span><span class="o">));</span>
      <span class="k">end</span>
    <span class="k">in</span>
    <span class="c">(* Take the array into an aliased array slice *)</span>
    <span class="nn">Slice</span><span class="p">.</span><span class="n">full</span> <span class="n">arr</span> <span class="o">|&gt;</span> <span class="n">quicksort&#39;</span>
</pre></div>
<h2><span class="mw-headline" id="Octave"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Octave" title="Category:Octave">Octave</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=130" title="Edit section: Octave">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#MATLAB">MATLAB</a></div> (The MATLAB version works as is in Octave, provided that the code is put in a file named <tt>quicksort.m</tt>, and everything below the <tt>return</tt> must be typed in the prompt of course)
<div class="mw-highlight mw-highlight-lang-octave mw-content-ltr" dir="ltr"><pre><span></span><span class="k">function</span><span class="w"> </span>f<span class="p">=</span><span class="nf">quicksort</span><span class="p">(</span>v<span class="p">)</span><span class="w">                       </span><span class="c">% v must be a column vector</span>
  <span class="n">f</span> <span class="p">=</span> <span class="n">v</span><span class="p">;</span> <span class="n">n</span><span class="p">=</span><span class="nb">length</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
  <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
     <span class="n">vl</span> <span class="p">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">f</span><span class="p">);</span> <span class="n">vh</span> <span class="p">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>                  <span class="c">% min, max</span>
     <span class="n">p</span>  <span class="p">=</span> <span class="p">(</span><span class="n">vl</span><span class="o">+</span><span class="n">vh</span><span class="p">)</span><span class="o">*</span><span class="mf">0.5</span><span class="p">;</span>                          <span class="c">% pivot</span>
     <span class="n">ia</span> <span class="p">=</span> <span class="nb">find</span><span class="p">(</span><span class="n">f</span> <span class="o">&lt;</span> <span class="n">p</span><span class="p">);</span> <span class="n">ib</span> <span class="p">=</span> <span class="nb">find</span><span class="p">(</span><span class="n">f</span> <span class="o">==</span> <span class="n">p</span><span class="p">);</span> <span class="n">ic</span><span class="p">=</span><span class="nb">find</span><span class="p">(</span><span class="n">f</span> <span class="o">&gt;</span> <span class="n">p</span><span class="p">);</span>
     <span class="n">f</span>  <span class="p">=</span> <span class="p">[</span><span class="n">quicksort</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">ia</span><span class="p">));</span> <span class="n">f</span><span class="p">(</span><span class="n">ib</span><span class="p">);</span> <span class="n">quicksort</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">ic</span><span class="p">))];</span>
  <span class="k">end</span>
<span class="k">endfunction</span>
 
<span class="n">N</span><span class="p">=</span><span class="mi">30</span><span class="p">;</span> <span class="n">v</span><span class="p">=</span><span class="nb">rand</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span> <span class="nb">tic</span><span class="p">,</span><span class="n">u</span><span class="p">=</span><span class="n">quicksort</span><span class="p">(</span><span class="n">v</span><span class="p">);</span> <span class="nb">toc</span>
<span class="n">u</span>
</pre></div>
<h2><span class="mw-headline" id="Oforth"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Oforth" title="Category:Oforth">Oforth</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=131" title="Edit section: Oforth">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Oforth built-in sort uses quick sort algorithm (see lang/collect/ListBuffer.of for implementation)&#160;:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>[ 5, 8, 2, 3, 4, 1 ] sort</pre></div>
<h2><span class="mw-headline" id="Ol"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Ol" title="Category:Ol">Ol</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=132" title="Edit section: Ol">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-scheme mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">quicksort</span> <span class="nv">l</span> <span class="nv">??</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">null? </span><span class="nv">l</span><span class="p">)</span>
      <span class="o">&#39;</span><span class="p">()</span>
      <span class="p">(</span><span class="nb">append </span><span class="p">(</span><span class="nf">quicksort</span> <span class="p">(</span><span class="nf">filter</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">??</span> <span class="p">(</span><span class="nb">car </span><span class="nv">l</span><span class="p">)</span> <span class="nv">x</span><span class="p">))</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">l</span><span class="p">))</span> <span class="nv">??</span><span class="p">)</span>
              <span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="nb">car </span><span class="nv">l</span><span class="p">))</span>
              <span class="p">(</span><span class="nf">quicksort</span> <span class="p">(</span><span class="nf">filter</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nf">??</span> <span class="p">(</span><span class="nb">car </span><span class="nv">l</span><span class="p">)</span> <span class="nv">x</span><span class="p">)))</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">l</span><span class="p">))</span> <span class="nv">??</span><span class="p">))))</span>
 
<span class="p">(</span><span class="nf">print</span> 
   <span class="p">(</span><span class="nf">quicksort</span> <span class="p">(</span><span class="nb">list </span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">9</span> <span class="mi">8</span> <span class="mi">6</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">&gt;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">print</span> 
   <span class="p">(</span><span class="nf">quicksort</span> <span class="p">(</span><span class="nf">iota</span> <span class="mi">100</span><span class="p">)</span> <span class="nv">&gt;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">print</span> 
   <span class="p">(</span><span class="nf">quicksort</span> <span class="p">(</span><span class="nf">iota</span> <span class="mi">100</span><span class="p">)</span> <span class="nv">&lt;</span><span class="p">))</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>(1 2 3 3 4 5 6 8 9)
(0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99)
(99 98 97 96 95 94 93 92 91 90 89 88 87 86 85 84 83 82 81 80 79 78 77 76 75 74 73 72 71 70 69 68 67 66 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0)
</pre>
<h2><span class="mw-headline" id="ooRexx"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:OoRexx" title="Category:OoRexx">ooRexx</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=133" title="Edit section: ooRexx">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#Python">Python</a></div>
<div class="mw-highlight mw-highlight-lang-rexx mw-content-ltr" dir="ltr"><pre><span></span><span class="w">    </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">.</span>array<span class="err">~</span>Of<span class="o">(</span><span class="m">4</span><span class="o">,</span><span class="w"> </span><span class="m">65</span><span class="o">,</span><span class="w"> </span><span class="m">2</span><span class="o">,</span><span class="w"> </span><span class="o">-</span><span class="m">31</span><span class="o">,</span><span class="w"> </span><span class="m">0</span><span class="o">,</span><span class="w"> </span><span class="m">99</span><span class="o">,</span><span class="w"> </span><span class="m">83</span><span class="o">,</span><span class="w"> </span><span class="m">782</span><span class="o">,</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="kr">say</span><span class="w"> </span><span class="s">&#39;before:&#39;</span><span class="w"> </span>a<span class="err">~</span>toString<span class="o">(</span><span class="w"> </span><span class="o">,</span><span class="s">&#39;, &#39;</span><span class="o">)</span><span class="w"></span>
<span class="w">    </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span>quickSort<span class="o">(</span>a<span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="kr">say</span><span class="w"> </span><span class="s">&#39; after:&#39;</span><span class="w"> </span>a<span class="err">~</span>toString<span class="o">(</span><span class="w"> </span><span class="o">,</span><span class="s">&#39;, &#39;</span><span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="nl">exit</span><span class="w"></span>

<span class="o">:</span><span class="err">:</span>routine<span class="w"> </span>quickSort<span class="w"></span>
<span class="w">    </span>use<span class="w"> </span><span class="kr">arg</span><span class="w"> </span>arr<span class="w"> </span><span class="o">--</span><span class="w"> </span>the<span class="w"> </span>array<span class="w"> </span><span class="kr">to</span><span class="w"> </span>be<span class="w"> </span>sorted<span class="w"></span>
<span class="w">    </span>less<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">.</span>array<span class="err">~</span>new<span class="w"></span>
<span class="w">    </span>pivotList<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">.</span>array<span class="err">~</span>new<span class="w"></span>
<span class="w">    </span>more<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">.</span>array<span class="err">~</span>new<span class="w"></span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span>arr<span class="err">~</span>items<span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">then</span><span class="w"></span>
<span class="w">        </span><span class="kr">return</span><span class="w"> </span>arr<span class="w"></span>
<span class="w">    </span><span class="kr">else</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">        </span>pivot<span class="w"> </span><span class="o">=</span><span class="w"> </span>arr<span class="err">[</span><span class="m">1</span><span class="err">]</span><span class="w"></span>
<span class="w">        </span><span class="kr">do</span><span class="w"> </span>i<span class="w"> </span>over<span class="w"> </span>arr<span class="w"></span>
<span class="w">            </span><span class="kr">if</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>pivot<span class="w"> </span><span class="kr">then</span><span class="w"></span>
<span class="w">                </span>less<span class="err">~</span>append<span class="o">(</span>i<span class="o">)</span><span class="w"></span>
<span class="w">            </span><span class="kr">else</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span>i<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>pivot<span class="w"> </span><span class="kr">then</span><span class="w"></span>
<span class="w">                </span>more<span class="err">~</span>append<span class="o">(</span>i<span class="o">)</span><span class="w"></span>
<span class="w">            </span><span class="kr">else</span><span class="w"></span>
<span class="w">                </span>pivotList<span class="err">~</span>append<span class="o">(</span>i<span class="o">)</span><span class="w"></span>
<span class="w">        </span><span class="kr">end</span><span class="w"></span>
<span class="w">        </span>less<span class="w"> </span><span class="o">=</span><span class="w"> </span>quickSort<span class="o">(</span>less<span class="o">)</span><span class="w"></span>
<span class="w">        </span>more<span class="w"> </span><span class="o">=</span><span class="w"> </span>quickSort<span class="o">(</span>more<span class="o">)</span><span class="w"></span>
<span class="w">        </span><span class="kr">return</span><span class="w"> </span>less<span class="err">~~</span>appendAll<span class="o">(</span>pivotList<span class="o">)</span><span class="err">~~</span>appendAll<span class="o">(</span>more<span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>before: 4, 65, 2, -31, 0, 99, 83, 782, 1
 after: -31, 0, 1, 2, 4, 65, 83, 99, 782 </pre>
<h2><span class="mw-headline" id="Oz"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Oz" title="Category:Oz">Oz</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=134" title="Edit section: Oz">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>declare
  fun {QuickSort Xs}
     case Xs of nil then nil
     [] Pivot|Xr then
	fun {IsSmaller X} X &lt; Pivot end
        Smaller Larger
     in
	{List.partition Xr IsSmaller ?Smaller ?Larger}
        {Append {QuickSort Smaller} Pivot|{QuickSort Larger}}
     end
  end
in
  {Show {QuickSort [3 1 4 1 5 9 2 6 5]}}</pre></div>
<h2><span id="PARI.2FGP"></span><span class="mw-headline" id="PARI/GP"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:PARI/GP" title="Category:PARI/GP">PARI/GP</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=135" title="Edit section: PARI/GP">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>quickSort(v)={
  if(#v&lt;2, return(v));
  my(less=List(),more=List(),same=List(),pivot);
  pivot=median([v[random(#v)+1],v[random(#v)+1],v[random(#v)+1]]); \\ Middle-of-three
  for(i=1,#v,
    if(v[i]&lt;pivot,
      listput(less, v[i]),
      if(v[i]==pivot, listput(same, v[i]), listput(more, v[i]))
    )
  );
  concat(quickSort(Vec(less)), concat(Vec(same), quickSort(Vec(more))))
};
median(v)={
  vecsort(v)[#v&gt;&gt;1]
};</pre></div>
<h2><span class="mw-headline" id="Pascal"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Pascal" title="Category:Pascal">Pascal</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=136" title="Edit section: Pascal">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/FPC" class="mw-redirect" title="FPC">FPC</a></div>
<div class="mw-highlight mw-highlight-lang-pascal mw-content-ltr" dir="ltr"><pre><span></span><span class="k">program</span> <span class="n">QSortDemo</span><span class="o">;</span>

<span class="cm">{$mode objfpc}{$h+}{$b-}</span>

<span class="k">procedure</span> <span class="nf">QuickSort</span><span class="p">(</span><span class="k">var</span> <span class="n">A</span><span class="o">:</span> <span class="k">array</span> <span class="k">of</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
  <span class="k">procedure</span> <span class="nf">QSort</span><span class="p">(</span><span class="n">L</span><span class="o">,</span> <span class="n">R</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
  <span class="k">var</span>
    <span class="n">I</span><span class="o">,</span> <span class="n">J</span><span class="o">,</span> <span class="n">Tmp</span><span class="o">,</span> <span class="n">Pivot</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
  <span class="k">begin</span>
    <span class="k">if</span> <span class="n">R</span> <span class="o">-</span> <span class="n">L</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="k">then</span> <span class="k">exit</span><span class="o">;</span>
    <span class="n">I</span> <span class="o">:=</span> <span class="n">L</span><span class="o">;</span> <span class="n">J</span> <span class="o">:=</span> <span class="n">R</span><span class="o">;</span>
    <span class="cm">{$push}{$q-}{$r-}</span><span class="n">Pivot</span> <span class="o">:=</span> <span class="n">A</span><span class="p">[(</span><span class="n">L</span> <span class="o">+</span> <span class="n">R</span><span class="p">)</span> <span class="k">shr</span> <span class="mi">1</span><span class="p">]</span><span class="o">;</span><span class="cm">{$pop}</span>
    <span class="k">repeat</span>
      <span class="k">while</span> <span class="n">A</span><span class="p">[</span><span class="n">I</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Pivot</span> <span class="k">do</span> <span class="nb">Inc</span><span class="p">(</span><span class="n">I</span><span class="p">)</span><span class="o">;</span>
      <span class="k">while</span> <span class="n">A</span><span class="p">[</span><span class="n">J</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Pivot</span> <span class="k">do</span> <span class="nb">Dec</span><span class="p">(</span><span class="n">J</span><span class="p">)</span><span class="o">;</span>
      <span class="k">if</span> <span class="n">I</span> <span class="o">&lt;=</span> <span class="n">J</span> <span class="k">then</span> <span class="k">begin</span>
        <span class="n">Tmp</span> <span class="o">:=</span> <span class="n">A</span><span class="p">[</span><span class="n">I</span><span class="p">]</span><span class="o">;</span>
        <span class="n">A</span><span class="p">[</span><span class="n">I</span><span class="p">]</span> <span class="o">:=</span> <span class="n">A</span><span class="p">[</span><span class="n">J</span><span class="p">]</span><span class="o">;</span>
        <span class="n">A</span><span class="p">[</span><span class="n">J</span><span class="p">]</span> <span class="o">:=</span> <span class="n">Tmp</span><span class="o">;</span>
        <span class="nb">Inc</span><span class="p">(</span><span class="n">I</span><span class="p">)</span><span class="o">;</span> <span class="nb">Dec</span><span class="p">(</span><span class="n">J</span><span class="p">)</span><span class="o">;</span>
      <span class="k">end</span><span class="o">;</span>
    <span class="k">until</span> <span class="n">I</span> <span class="o">&gt;</span> <span class="n">J</span><span class="o">;</span>
    <span class="n">QSort</span><span class="p">(</span><span class="n">L</span><span class="o">,</span> <span class="n">J</span><span class="p">)</span><span class="o">;</span>
    <span class="n">QSort</span><span class="p">(</span><span class="n">I</span><span class="o">,</span> <span class="n">R</span><span class="p">)</span><span class="o">;</span>
  <span class="k">end</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="n">QSort</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="nb">High</span><span class="p">(</span><span class="n">A</span><span class="p">))</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="k">procedure</span> <span class="nf">PrintArray</span><span class="p">(</span><span class="k">const</span> <span class="n">A</span><span class="o">:</span> <span class="k">array</span> <span class="k">of</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
<span class="k">var</span>
  <span class="n">I</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="nb">Write</span><span class="p">(</span><span class="s">&#39;[&#39;</span><span class="p">)</span><span class="o">;</span>
  <span class="k">for</span> <span class="n">I</span> <span class="o">:=</span> <span class="mi">0</span> <span class="k">to</span> <span class="nb">High</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">do</span>
    <span class="nb">Write</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">I</span><span class="p">]</span><span class="o">,</span> <span class="s">&#39;, &#39;</span><span class="p">)</span><span class="o">;</span>
  <span class="nb">WriteLn</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="nb">High</span><span class="p">(</span><span class="n">A</span><span class="p">)]</span><span class="o">,</span> <span class="s">&#39;]&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="k">var</span>
  <span class="n">a</span><span class="o">:</span> <span class="k">array</span><span class="p">[</span><span class="o">-</span><span class="mi">7</span><span class="o">..</span><span class="mi">6</span><span class="p">]</span> <span class="k">of</span> <span class="kt">Integer</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">34</span><span class="o">,</span> <span class="o">-</span><span class="mi">20</span><span class="o">,</span> <span class="mi">30</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="mi">36</span><span class="o">,</span> <span class="o">-</span><span class="mi">10</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="o">-</span><span class="mi">25</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">19</span><span class="o">,</span> <span class="mi">35</span><span class="o">,</span> <span class="o">-</span><span class="mi">50</span><span class="o">,</span> <span class="mi">29</span><span class="o">,</span> <span class="mi">11</span><span class="p">)</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="n">QuickSort</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">;</span>
  <span class="n">PrintArray</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>[-50, -34, -25, -20, -10, 5, 9, 11, 13, 19, 29, 30, 35, 36]
</pre>
<h2><span class="mw-headline" id="Perl"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Perl" title="Category:Perl">Perl</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=137" title="Edit section: Perl">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-perl mw-content-ltr" dir="ltr"><pre><span></span><span class="k">sub</span> <span class="nf">quick_sort</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">@_</span> <span class="k">if</span> <span class="nv">@_</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$p</span> <span class="o">=</span> <span class="nb">splice</span> <span class="nv">@_</span><span class="p">,</span> <span class="nb">int</span> <span class="nb">rand</span> <span class="nv">@_</span><span class="p">,</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">quick_sort</span><span class="p">(</span><span class="nb">grep</span> <span class="nv">$_</span> <span class="o">&lt;</span> <span class="nv">$p</span><span class="p">,</span> <span class="nv">@_</span><span class="p">),</span> <span class="nv">$p</span><span class="p">,</span> <span class="n">quick_sort</span><span class="p">(</span><span class="nb">grep</span> <span class="nv">$_</span> <span class="o">&gt;=</span> <span class="nv">$p</span><span class="p">,</span> <span class="nv">@_</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">my</span> <span class="nv">@a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">31</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">782</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nv">@a</span> <span class="o">=</span> <span class="n">quick_sort</span> <span class="nv">@a</span><span class="p">;</span>
<span class="k">print</span> <span class="s">&quot;@a\n&quot;</span><span class="p">;</span>
</pre></div>
<h2><span class="mw-headline" id="Phix"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Phix" title="Category:Phix">Phix</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=138" title="Edit section: Phix">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre><span style="color: #008080;">with</span> <span style="color: #008080;">javascript_semantics</span>

<span style="color: #008080;">function</span> <span style="color: #000000;">quick_sort</span><span style="color: #0000FF;">(</span><span style="color: #004080;">sequence</span> <span style="color: #000000;">x</span><span style="color: #0000FF;">)</span>
<span style="color: #000080;font-style:italic;">--
-- put x into ascending order using recursive quick sort
--</span>
    <span style="color: #004080;">integer</span> <span style="color: #000000;">n</span> <span style="color: #0000FF;">=</span> <span style="color: #7060A8;">length</span><span style="color: #0000FF;">(</span><span style="color: #000000;">x</span><span style="color: #0000FF;">)</span>
    <span style="color: #008080;">if</span> <span style="color: #000000;">n</span><span style="color: #0000FF;">&lt;</span><span style="color: #000000;">2</span> <span style="color: #008080;">then</span>
        <span style="color: #008080;">return</span> <span style="color: #000000;">x</span>    <span style="color: #000080;font-style:italic;">-- already sorted (trivial case)</span>
    <span style="color: #008080;">end</span> <span style="color: #008080;">if</span>
 
    <span style="color: #004080;">integer</span> <span style="color: #000000;">mid</span> <span style="color: #0000FF;">=</span> <span style="color: #7060A8;">floor</span><span style="color: #0000FF;">((</span><span style="color: #000000;">n</span><span style="color: #0000FF;">+</span><span style="color: #000000;">1</span><span style="color: #0000FF;">)/</span><span style="color: #000000;">2</span><span style="color: #0000FF;">),</span>
            <span style="color: #000000;">last</span> <span style="color: #0000FF;">=</span> <span style="color: #000000;">1</span>
    <span style="color: #004080;">object</span> <span style="color: #000000;">midval</span> <span style="color: #0000FF;">=</span> <span style="color: #000000;">x</span><span style="color: #0000FF;">[</span><span style="color: #000000;">mid</span><span style="color: #0000FF;">]</span>
    <span style="color: #000000;">x</span><span style="color: #0000FF;">[</span><span style="color: #000000;">mid</span><span style="color: #0000FF;">]</span> <span style="color: #0000FF;">=</span> <span style="color: #000000;">x</span><span style="color: #0000FF;">[</span><span style="color: #000000;">1</span><span style="color: #0000FF;">]</span>
    <span style="color: #008080;">for</span> <span style="color: #000000;">i</span><span style="color: #0000FF;">=</span><span style="color: #000000;">2</span> <span style="color: #008080;">to</span> <span style="color: #000000;">n</span> <span style="color: #008080;">do</span>
        <span style="color: #004080;">object</span> <span style="color: #000000;">xi</span> <span style="color: #0000FF;">=</span> <span style="color: #000000;">x</span><span style="color: #0000FF;">[</span><span style="color: #000000;">i</span><span style="color: #0000FF;">]</span>
        <span style="color: #008080;">if</span> <span style="color: #000000;">xi</span><span style="color: #0000FF;">&lt;</span><span style="color: #000000;">midval</span> <span style="color: #008080;">then</span>
            <span style="color: #000000;">last</span> <span style="color: #0000FF;">+=</span> <span style="color: #000000;">1</span>
            <span style="color: #000000;">x</span><span style="color: #0000FF;">[</span><span style="color: #000000;">i</span><span style="color: #0000FF;">]</span> <span style="color: #0000FF;">=</span> <span style="color: #000000;">x</span><span style="color: #0000FF;">[</span><span style="color: #000000;">last</span><span style="color: #0000FF;">]</span>
            <span style="color: #000000;">x</span><span style="color: #0000FF;">[</span><span style="color: #000000;">last</span><span style="color: #0000FF;">]</span> <span style="color: #0000FF;">=</span> <span style="color: #000000;">xi</span>
        <span style="color: #008080;">end</span> <span style="color: #008080;">if</span>
    <span style="color: #008080;">end</span> <span style="color: #008080;">for</span>
 
    <span style="color: #008080;">return</span> <span style="color: #000000;">quick_sort</span><span style="color: #0000FF;">(</span><span style="color: #000000;">x</span><span style="color: #0000FF;">[</span><span style="color: #000000;">2</span><span style="color: #0000FF;">..</span><span style="color: #000000;">last</span><span style="color: #0000FF;">])</span> <span style="color: #0000FF;">&amp;</span> <span style="color: #0000FF;">{</span><span style="color: #000000;">midval</span><span style="color: #0000FF;">}</span> <span style="color: #0000FF;">&amp;</span> <span style="color: #000000;">quick_sort</span><span style="color: #0000FF;">(</span><span style="color: #000000;">x</span><span style="color: #0000FF;">[</span><span style="color: #000000;">last</span><span style="color: #0000FF;">+</span><span style="color: #000000;">1</span><span style="color: #0000FF;">..</span><span style="color: #000000;">n</span><span style="color: #0000FF;">])</span>
<span style="color: #008080;">end</span> <span style="color: #008080;">function</span>
 
<span style="color: #0000FF;">?</span><span style="color: #000000;">quick_sort</span><span style="color: #0000FF;">({</span><span style="color: #000000;">5</span><span style="color: #0000FF;">,</span><span style="color: #008000;">"oranges"</span><span style="color: #0000FF;">,</span><span style="color: #008000;">"and"</span><span style="color: #0000FF;">,</span><span style="color: #000000;">3</span><span style="color: #0000FF;">,</span><span style="color: #008000;">"apples"</span><span style="color: #0000FF;">})</span>
</pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>{3,5,"and","apples","oranges"}
</pre>
<h2><span class="mw-headline" id="PHP"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:PHP" title="Category:PHP">PHP</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=139" title="Edit section: PHP">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-php mw-content-ltr" dir="ltr"><pre><span></span><span class="k">function</span> <span class="nf">quicksort</span><span class="p">(</span><span class="nv">$arr</span><span class="p">){</span>
	<span class="nv">$lte</span> <span class="o">=</span> <span class="nv">$gt</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
	<span class="k">if</span><span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$arr</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">){</span>
		<span class="k">return</span> <span class="nv">$arr</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="nv">$pivot_key</span> <span class="o">=</span> <span class="nb">key</span><span class="p">(</span><span class="nv">$arr</span><span class="p">);</span>
	<span class="nv">$pivot</span> <span class="o">=</span> <span class="nb">array_shift</span><span class="p">(</span><span class="nv">$arr</span><span class="p">);</span>
	<span class="k">foreach</span><span class="p">(</span><span class="nv">$arr</span> <span class="k">as</span> <span class="nv">$val</span><span class="p">){</span>
		<span class="k">if</span><span class="p">(</span><span class="nv">$val</span> <span class="o">&lt;=</span> <span class="nv">$pivot</span><span class="p">){</span>
			<span class="nv">$lte</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nv">$gt</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nb">array_merge</span><span class="p">(</span><span class="nx">quicksort</span><span class="p">(</span><span class="nv">$lte</span><span class="p">),</span><span class="k">array</span><span class="p">(</span><span class="nv">$pivot_key</span><span class="o">=&gt;</span><span class="nv">$pivot</span><span class="p">),</span><span class="nx">quicksort</span><span class="p">(</span><span class="nv">$gt</span><span class="p">));</span>
<span class="p">}</span>

<span class="nv">$arr</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nv">$arr</span> <span class="o">=</span> <span class="nx">quicksort</span><span class="p">(</span><span class="nv">$arr</span><span class="p">);</span>
<span class="k">echo</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nv">$arr</span><span class="p">);</span>
</pre></div>
<pre>1,2,3,4,5,6,7,8,9</pre>
<div class="mw-highlight mw-highlight-lang-php mw-content-ltr" dir="ltr"><pre><span></span><span class="k">function</span> <span class="nf">quickSort</span><span class="p">(</span><span class="k">array</span> <span class="nv">$array</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// base case</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$array</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$array</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nv">$head</span> <span class="o">=</span> <span class="nb">array_shift</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
    <span class="nv">$tail</span> <span class="o">=</span> <span class="nv">$array</span><span class="p">;</span>
    <span class="nv">$lesser</span> <span class="o">=</span> <span class="nb">array_filter</span><span class="p">(</span><span class="nv">$tail</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$item</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$head</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$item</span> <span class="o">&lt;=</span> <span class="nv">$head</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nv">$bigger</span> <span class="o">=</span> <span class="nb">array_filter</span><span class="p">(</span><span class="nv">$tail</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$item</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$head</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$item</span> <span class="o">&gt;</span> <span class="nv">$head</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nb">array_merge</span><span class="p">(</span><span class="nx">quickSort</span><span class="p">(</span><span class="nv">$lesser</span><span class="p">),</span> <span class="p">[</span><span class="nv">$head</span><span class="p">],</span> <span class="nx">quickSort</span><span class="p">(</span><span class="nv">$bigger</span><span class="p">));</span>
<span class="p">}</span>
<span class="nv">$testCase</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">];</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nx">quickSort</span><span class="p">(</span><span class="nv">$testCase</span><span class="p">);</span>
<span class="k">echo</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s2">&quot;[%s] ==&gt; [%s]</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span> <span class="nv">$testCase</span><span class="p">),</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span> <span class="nv">$result</span><span class="p">));</span>
</pre></div>
<pre>[1, 4, 8, 2, 8, 0, 2, 8] ==&gt; [0, 1, 2, 2, 4, 8, 8, 8]</pre>
<h2><span class="mw-headline" id="Picat"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Picat" title="Category:Picat">Picat</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=140" title="Edit section: Picat">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Function">Function</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=141" title="Edit section: Function">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>qsort([])    = [].
qsort([H|T]) = qsort([E&#160;: E in T, E =&lt; H]) 
               ++ [H] ++
               qsort([E&#160;: E in T, E &gt; H]).</pre></div>
<h3><span class="mw-headline" id="Recursion">Recursion</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=142" title="Edit section: Recursion">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#Prolog">Prolog</a></div>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>qsort( [], [] ).
qsort( [H|U], S )&#160;:-
  splitBy(H, U, L, R),
  qsort(L, SL),
  qsort(R, SR),
  append(SL, [H|SR], S).
 
% splitBy( H, U, LS, RS )
% True if LS = { L in U | L &lt;= H }; RS = { R in U | R &gt; H }
splitBy( _, [], [], []).
splitBy( H, [U|T], [U|LS], RS )&#160;:- U =&lt; H, splitBy(H, T, LS, RS).
splitBy( H, [U|T], LS, [U|RS] )&#160;:- U  &gt; H, splitBy(H, T, LS, RS).</pre></div>
<h2><span class="mw-headline" id="PicoLisp"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:PicoLisp" title="Category:PicoLisp">PicoLisp</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=143" title="Edit section: PicoLisp">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-lisp mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="nv">de</span> <span class="nv">quicksort</span> <span class="p">(</span><span class="nv">L</span><span class="p">)</span>
   <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">L</span><span class="p">)</span>
      <span class="p">(</span><span class="k">let</span> <span class="nv">Pivot</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">L</span><span class="p">)</span>
          <span class="p">(</span><span class="nb">append</span> <span class="p">(</span><span class="nv">quicksort</span> <span class="p">(</span><span class="nv">filter</span> <span class="o">&#39;</span><span class="p">((</span><span class="nv">A</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">A</span> <span class="nv">Pivot</span><span class="p">))</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">L</span><span class="p">)))</span>
                             <span class="p">(</span><span class="nv">filter</span> <span class="o">&#39;</span><span class="p">((</span><span class="nv">A</span><span class="p">)</span> <span class="p">(</span><span class="nb">=</span> <span class="nv">A</span> <span class="nv">Pivot</span><span class="p">))</span>      <span class="nv">L</span> <span class="p">)</span>
                  <span class="p">(</span><span class="nv">quicksort</span> <span class="p">(</span><span class="nv">filter</span> <span class="o">&#39;</span><span class="p">((</span><span class="nv">A</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="nv">A</span> <span class="nv">Pivot</span><span class="p">))</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">L</span><span class="p">))))</span> <span class="p">)</span>
      <span class="nv">L</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
<h2><span id="PL.2FI"></span><span class="mw-headline" id="PL/I"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:PL/I" title="Category:PL/I">PL/I</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=144" title="Edit section: PL/I">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>DCL (T(20)) FIXED BIN(31);   /* scratch space of length N */

QUICKSORT: PROCEDURE (A,AMIN,AMAX,N) RECURSIVE&#160;;
   DECLARE (A(*))              FIXED BIN(31);
   DECLARE (N,AMIN,AMAX)       FIXED BIN(31) NONASGN;
   DECLARE (I,J,IA,IB,IC,PIV)  FIXED BIN(31);
   DECLARE (P,Q)               POINTER;
   DECLARE (AP(1))             FIXED BIN(31) BASED(P);
   
   IF(N &lt;= 1)THEN RETURN;
   IA=0; IB=0; IC=N+1;
   PIV=(AMIN+AMAX)/2;
   DO I=1 TO N;
      IF(A(I) &lt; PIV)THEN DO;
         IA+=1; A(IA)=A(I);
      END; ELSE IF(A(I) &gt; PIV) THEN DO;
         IC-=1; T(IC)=A(I);
      END; ELSE DO;
         IB+=1; T(IB)=A(I);
      END;
   END;
   DO I=1  TO IB; A(I+IA)=T(I);   END;
   DO I=IC TO N;  A(I)=T(N+IC-I); END;
   P=ADDR(A(IC));
   IC=N+1-IC;
   IF(IA &gt; 1) THEN CALL QUICKSORT(A, AMIN, PIV-1,IA);
   IF(IC &gt; 1) THEN CALL QUICKSORT(AP,PIV+1,AMAX, IC);
   RETURN;
END QUICKSORT;
 MINMAX: PROC(A,AMIN,AMAX,N);
   DCL (AMIN,AMAX) FIXED BIN(31),
       (N,A(*))    FIXED BIN(31) NONASGN&#160;;
   DCL (I,X,Y) FIXED BIN(31);
   
   AMIN=A(N); AMAX=AMIN;
   DO I=1 TO N-1;
      X=A(I); Y=A(I+1);
      IF (X &lt; Y)THEN DO;
         IF (X &lt; AMIN) THEN AMIN=X;
         IF (Y &gt; AMAX) THEN AMAX=Y;
       END; ELSE DO;
          IF (X &gt; AMAX) THEN AMAX=X;
          IF (Y &lt; AMIN) THEN AMIN=Y;
       END;
   END;
   RETURN;
END MINMAX;
CALL MINMAX(A,AMIN,AMAX,N);
CALL QUICKSORT(A,AMIN,AMAX,N);</pre></div>
<h2><span class="mw-headline" id="PowerShell"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:PowerShell" title="Category:PowerShell">PowerShell</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=145" title="Edit section: PowerShell">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="First_solution">First solution</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=146" title="Edit section: First solution">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-highlight-lang-powershell mw-content-ltr" dir="ltr"><pre><span></span><span class="k">Function</span> <span class="n">SortThree</span><span class="p">(</span> <span class="no">[Array]</span> <span class="nv">$data</span> <span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span><span class="p">(</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">0</span> <span class="p">]</span> <span class="o">-gt</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">1</span> <span class="p">]</span> <span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span><span class="p">(</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">0</span> <span class="p">]</span> <span class="o">-lt</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">2</span> <span class="p">]</span> <span class="p">)</span>
		<span class="p">{</span>
			<span class="nv">$data</span> <span class="p">=</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">1</span><span class="p">,</span> <span class="n">0</span><span class="p">,</span> <span class="n">2</span> <span class="p">]</span>
		<span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">1</span> <span class="p">]</span> <span class="o">-lt</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">2</span> <span class="p">]</span> <span class="p">){</span>
			<span class="nv">$data</span> <span class="p">=</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">1</span><span class="p">,</span> <span class="n">2</span><span class="p">,</span> <span class="n">0</span> <span class="p">]</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nv">$data</span> <span class="p">=</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">2</span><span class="p">,</span> <span class="n">1</span><span class="p">,</span> <span class="n">0</span> <span class="p">]</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">if</span><span class="p">(</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">0</span> <span class="p">]</span> <span class="o">-gt</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">2</span> <span class="p">]</span> <span class="p">)</span>
		<span class="p">{</span>
			<span class="nv">$data</span> <span class="p">=</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">2</span><span class="p">,</span> <span class="n">0</span><span class="p">,</span> <span class="n">1</span> <span class="p">]</span>
		<span class="p">}</span> <span class="k">elseif</span><span class="p">(</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">1</span> <span class="p">]</span> <span class="o">-gt</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">2</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nv">$data</span> <span class="p">=</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">0</span><span class="p">,</span> <span class="n">2</span><span class="p">,</span> <span class="n">1</span> <span class="p">]</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="nv">$data</span>
<span class="p">}</span>

<span class="k">Function</span> <span class="n">QuickSort</span><span class="p">(</span> <span class="no">[Array]</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$rand</span> <span class="p">=</span> <span class="p">(</span> <span class="nb">New-Object</span> <span class="n">Random</span> <span class="p">)</span> <span class="p">)</span>
<span class="p">{</span>
	<span class="nv">$datal</span> <span class="p">=</span> <span class="nv">$data</span><span class="p">.</span><span class="n">length</span>
	<span class="k">if</span><span class="p">(</span> <span class="nv">$datal</span> <span class="o">-gt</span> <span class="n">3</span> <span class="p">)</span>
	<span class="p">{</span>
		<span class="no">[void]</span> <span class="nv">$datal</span><span class="p">--</span>
		<span class="nv">$median</span> <span class="p">=</span> <span class="p">(</span> <span class="n">SortThree</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">0</span><span class="p">,</span> <span class="p">(</span> <span class="nv">$rand</span><span class="p">.</span><span class="n">Next</span><span class="p">(</span> <span class="n">1</span><span class="p">,</span> <span class="nv">$datal</span> <span class="p">-</span> <span class="n">1</span> <span class="p">)</span> <span class="p">),</span> <span class="p">-</span><span class="n">1</span> <span class="p">]</span> <span class="p">)[</span> <span class="n">1</span> <span class="p">]</span>
		<span class="nv">$lt</span> <span class="p">=</span> <span class="p">@()</span>
		<span class="nv">$eq</span> <span class="p">=</span> <span class="p">@()</span>
		<span class="nv">$gt</span> <span class="p">=</span> <span class="p">@()</span>
		<span class="nv">$data</span> <span class="p">|</span> <span class="k">ForEach</span><span class="n">-Object</span> <span class="p">{</span> <span class="k">if</span><span class="p">(</span> <span class="nv">$_</span> <span class="o">-lt</span> <span class="nv">$median</span> <span class="p">)</span> <span class="p">{</span> <span class="nv">$lt</span> <span class="p">+=</span> <span class="nv">$_</span> <span class="p">}</span> <span class="k">elseif</span><span class="p">(</span> <span class="nv">$_</span> <span class="o">-eq</span> <span class="nv">$median</span> <span class="p">)</span> <span class="p">{</span> <span class="nv">$eq</span> <span class="p">+=</span> <span class="nv">$_</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="nv">$gt</span> <span class="p">+=</span> <span class="nv">$_</span> <span class="p">}</span> <span class="p">}</span>
		<span class="nv">$lt</span> <span class="p">=</span> <span class="p">(</span> <span class="n">QuickSort</span> <span class="nv">$lt</span> <span class="nv">$rand</span> <span class="p">)</span>
		<span class="nv">$gt</span> <span class="p">=</span> <span class="p">(</span> <span class="n">QuickSort</span> <span class="nv">$gt</span> <span class="nv">$rand</span> <span class="p">)</span>
		<span class="nv">$data</span> <span class="p">=</span> <span class="p">@(</span><span class="nv">$lt</span><span class="p">)</span> <span class="p">+</span> <span class="nv">$eq</span> <span class="p">+</span> <span class="nv">$gt</span>
	<span class="p">}</span> <span class="k">elseif</span><span class="p">(</span> <span class="nv">$datal</span> <span class="o">-eq</span> <span class="n">3</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nv">$data</span> <span class="p">=</span> <span class="n">SortThree</span><span class="p">(</span> <span class="nv">$data</span> <span class="p">)</span>
	<span class="p">}</span> <span class="k">elseif</span><span class="p">(</span> <span class="nv">$datal</span> <span class="o">-eq</span> <span class="n">2</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span><span class="p">(</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">0</span> <span class="p">]</span> <span class="o">-gt</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">1</span> <span class="p">]</span> <span class="p">)</span>
		<span class="p">{</span>
			<span class="nv">$data</span> <span class="p">=</span> <span class="nv">$data</span><span class="p">[</span> <span class="n">1</span><span class="p">,</span> <span class="n">0</span> <span class="p">]</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="nv">$data</span>
<span class="p">}</span>

<span class="n">QuickSort</span> <span class="n">5</span><span class="p">,</span><span class="n">3</span><span class="p">,</span><span class="n">1</span><span class="p">,</span><span class="n">2</span><span class="p">,</span><span class="n">4</span> 
<span class="n">QuickSort</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span> 
<span class="n">QuickSort</span> <span class="n">0</span><span class="p">.</span><span class="n">5</span><span class="p">,</span><span class="n">0</span><span class="p">.</span><span class="n">3</span><span class="p">,</span><span class="n">0</span><span class="p">.</span><span class="n">1</span><span class="p">,</span><span class="n">0</span><span class="p">.</span><span class="n">2</span><span class="p">,</span><span class="n">0</span><span class="p">.</span><span class="n">4</span> 
<span class="nv">$l</span> <span class="p">=</span> <span class="n">100</span><span class="p">;</span> <span class="n">QuickSort</span> <span class="p">(</span> <span class="n">1</span><span class="p">..</span><span class="nv">$l</span> <span class="p">|</span> <span class="k">ForEach</span><span class="n">-Object</span> <span class="p">{</span> <span class="nv">$Rand</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">Random</span> <span class="p">}{</span> <span class="nv">$Rand</span><span class="p">.</span><span class="n">Next</span><span class="p">(</span> <span class="n">0</span><span class="p">,</span> <span class="nv">$l</span> <span class="p">-</span> <span class="n">1</span> <span class="p">)</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
<p><br/>
</p>
<h3><span class="mw-headline" id="Another_solution">Another solution</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=147" title="Edit section: Another solution">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-highlight-lang-powershell mw-content-ltr" dir="ltr"><pre><span></span><span class="k">function</span> <span class="n">quicksort</span><span class="p">(</span><span class="nv">$array</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$less</span><span class="p">,</span> <span class="nv">$equal</span><span class="p">,</span> <span class="nv">$greater</span> <span class="p">=</span> <span class="p">@(),</span> <span class="p">@(),</span> <span class="p">@()</span>
    <span class="k">if</span><span class="p">(</span> <span class="nv">$array</span><span class="p">.</span><span class="n">Count</span> <span class="o">-gt</span> <span class="n">1</span> <span class="p">)</span> <span class="p">{</span> 
        <span class="nv">$pivot</span> <span class="p">=</span> <span class="nv">$array</span><span class="p">[</span><span class="n">0</span><span class="p">]</span>
        <span class="k">foreach</span><span class="p">(</span> <span class="nv">$x</span> <span class="k">in</span> <span class="nv">$array</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$x</span> <span class="o">-lt</span> <span class="nv">$pivot</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$less</span> <span class="p">+=</span> <span class="p">@(</span><span class="nv">$x</span><span class="p">)</span> <span class="p">}</span>
            <span class="k">elseif</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">-eq</span> <span class="nv">$pivot</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$equal</span> <span class="p">+=</span> <span class="p">@(</span><span class="nv">$x</span><span class="p">)}</span>
            <span class="k">else</span> <span class="p">{</span> <span class="nv">$greater</span> <span class="p">+=</span> <span class="p">@(</span><span class="nv">$x</span><span class="p">)</span> <span class="p">}</span>
        <span class="p">}</span>    
        <span class="nv">$array</span> <span class="p">=</span> <span class="p">(@(</span><span class="n">quicksort</span> <span class="nv">$less</span><span class="p">)</span> <span class="p">+</span> <span class="p">@(</span><span class="nv">$equal</span><span class="p">)</span> <span class="p">+</span> <span class="p">@(</span><span class="n">quicksort</span> <span class="nv">$greater</span><span class="p">))</span>
    <span class="p">}</span>
    <span class="nv">$array</span>
<span class="p">}</span>
<span class="nv">$array</span> <span class="p">=</span> <span class="p">@(</span><span class="n">60</span><span class="p">,</span> <span class="n">21</span><span class="p">,</span> <span class="n">19</span><span class="p">,</span> <span class="n">36</span><span class="p">,</span> <span class="n">63</span><span class="p">,</span> <span class="n">8</span><span class="p">,</span> <span class="n">100</span><span class="p">,</span> <span class="n">80</span><span class="p">,</span> <span class="n">3</span><span class="p">,</span> <span class="n">87</span><span class="p">,</span> <span class="n">11</span><span class="p">)</span>
<span class="s2">&quot;</span><span class="p">$(</span><span class="n">quicksort</span> <span class="nv">$array</span><span class="p">)</span><span class="s2">&quot;</span>
</pre></div>
<pre>The output is: 3 8 11 19 21 36 60 63 80 87 100</pre>
<p><br/>
</p>
<h3><span class="mw-headline" id="Yet_another_solution">Yet another solution</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=148" title="Edit section: Yet another solution">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-highlight-lang-powershell mw-content-ltr" dir="ltr"><pre><span></span><span class="k">function</span> <span class="n">quicksort</span><span class="p">(</span><span class="nv">$in</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$n</span> <span class="p">=</span> <span class="nv">$in</span><span class="p">.</span><span class="n">count</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nv">$n</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">0</span> <span class="p">{}</span>
        <span class="n">1</span> <span class="p">{</span> <span class="nv">$in</span><span class="p">[</span><span class="n">0</span><span class="p">]</span> <span class="p">}</span>
        <span class="n">2</span> <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$in</span><span class="p">[</span><span class="n">0</span><span class="p">]</span> <span class="o">-lt</span> <span class="nv">$in</span><span class="p">[</span><span class="n">1</span><span class="p">])</span> <span class="p">{</span><span class="nv">$in</span><span class="p">[</span><span class="n">0</span><span class="p">],</span> <span class="nv">$in</span><span class="p">[</span><span class="n">1</span><span class="p">]}</span> <span class="k">else</span> <span class="p">{</span><span class="nv">$in</span><span class="p">[</span><span class="n">1</span><span class="p">],</span> <span class="nv">$in</span><span class="p">[</span><span class="n">0</span><span class="p">]}</span> <span class="p">}</span>
        <span class="k">default</span> <span class="p">{</span>
            <span class="nv">$pivot</span> <span class="p">=</span> <span class="nv">$in</span> <span class="p">|</span> <span class="nb">get-random</span>
            <span class="nv">$lt</span> <span class="p">=</span> <span class="nv">$in</span> <span class="p">|</span> <span class="p">?</span> <span class="p">{</span><span class="nv">$_</span> <span class="o">-lt</span> <span class="nv">$pivot</span><span class="p">}</span>
            <span class="nv">$eq</span> <span class="p">=</span> <span class="nv">$in</span> <span class="p">|</span> <span class="p">?</span> <span class="p">{</span><span class="nv">$_</span> <span class="o">-eq</span> <span class="nv">$pivot</span><span class="p">}</span>
            <span class="nv">$gt</span> <span class="p">=</span> <span class="nv">$in</span> <span class="p">|</span> <span class="p">?</span> <span class="p">{</span><span class="nv">$_</span> <span class="o">-gt</span> <span class="nv">$pivot</span><span class="p">}</span>
            <span class="p">@(</span><span class="n">quicksort</span> <span class="nv">$lt</span><span class="p">)</span> <span class="p">+</span> <span class="p">@(</span><span class="nv">$eq</span><span class="p">)</span> <span class="p">+</span> <span class="p">@(</span><span class="n">quicksort</span> <span class="nv">$gt</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="Prolog"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Prolog" title="Category:Prolog">Prolog</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=149" title="Edit section: Prolog">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-prolog mw-content-ltr" dir="ltr"><pre><span></span><span class="nf">qsort</span><span class="p">(</span> <span class="p">[],</span> <span class="p">[]</span> <span class="p">).</span>
<span class="nf">qsort</span><span class="p">(</span> <span class="p">[</span><span class="nv">H</span><span class="p">|</span><span class="nv">U</span><span class="p">],</span> <span class="nv">S</span> <span class="p">)</span> <span class="p">:-</span> <span class="nf">splitBy</span><span class="p">(</span><span class="nv">H</span><span class="p">,</span> <span class="nv">U</span><span class="p">,</span> <span class="nv">L</span><span class="p">,</span> <span class="nv">R</span><span class="p">),</span> <span class="nf">qsort</span><span class="p">(</span><span class="nv">L</span><span class="p">,</span> <span class="nv">SL</span><span class="p">),</span> <span class="nf">qsort</span><span class="p">(</span><span class="nv">R</span><span class="p">,</span> <span class="nv">SR</span><span class="p">),</span> <span class="nf">append</span><span class="p">(</span><span class="nv">SL</span><span class="p">,</span> <span class="p">[</span><span class="nv">H</span><span class="p">|</span><span class="nv">SR</span><span class="p">],</span> <span class="nv">S</span><span class="p">).</span>

<span class="c1">% splitBy( H, U, LS, RS )</span>
<span class="c1">% True if LS = { L in U | L &lt;= H }; RS = { R in U | R &gt; H }</span>
<span class="nf">splitBy</span><span class="p">(</span> <span class="k">_</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]).</span>
<span class="nf">splitBy</span><span class="p">(</span> <span class="nv">H</span><span class="p">,</span> <span class="p">[</span><span class="nv">U</span><span class="p">|</span><span class="nv">T</span><span class="p">],</span> <span class="p">[</span><span class="nv">U</span><span class="p">|</span><span class="nv">LS</span><span class="p">],</span> <span class="nv">RS</span> <span class="p">)</span> <span class="p">:-</span> <span class="nv">U</span> <span class="o">=&lt;</span> <span class="nv">H</span><span class="p">,</span> <span class="nf">splitBy</span><span class="p">(</span><span class="nv">H</span><span class="p">,</span> <span class="nv">T</span><span class="p">,</span> <span class="nv">LS</span><span class="p">,</span> <span class="nv">RS</span><span class="p">).</span>
<span class="nf">splitBy</span><span class="p">(</span> <span class="nv">H</span><span class="p">,</span> <span class="p">[</span><span class="nv">U</span><span class="p">|</span><span class="nv">T</span><span class="p">],</span> <span class="nv">LS</span><span class="p">,</span> <span class="p">[</span><span class="nv">U</span><span class="p">|</span><span class="nv">RS</span><span class="p">]</span> <span class="p">)</span> <span class="p">:-</span> <span class="nv">U</span>  <span class="o">&gt;</span> <span class="nv">H</span><span class="p">,</span> <span class="nf">splitBy</span><span class="p">(</span><span class="nv">H</span><span class="p">,</span> <span class="nv">T</span><span class="p">,</span> <span class="nv">LS</span><span class="p">,</span> <span class="nv">RS</span><span class="p">).</span>
</pre></div>
<h2><span class="mw-headline" id="PureBasic"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:PureBasic" title="Category:PureBasic">PureBasic</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=150" title="Edit section: PureBasic">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-basic mw-content-ltr" dir="ltr"><pre><span></span><span class="vg">Procedure</span><span class="w"> </span><span class="vg">qSort</span><span class="p">(</span><span class="vg">Array</span><span class="w"> </span><span class="vg">a</span><span class="p">(</span><span class="il">1</span><span class="p">),</span><span class="w"> </span><span class="vg">firstIndex</span><span class="p">,</span><span class="w"> </span><span class="vg">lastIndex</span><span class="p">)</span>
<span class="w">  </span><span class="vg">Protected</span><span class="w">  </span><span class="vg">low</span><span class="p">,</span><span class="w"> </span><span class="vg">high</span><span class="p">,</span><span class="w"> </span><span class="vg">pivotValue</span>

<span class="w">  </span><span class="vg">low</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">firstIndex</span>
<span class="w">  </span><span class="vg">high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">lastIndex</span>
<span class="w">  </span><span class="vg">pivotValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="p">((</span><span class="vg">firstIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">lastIndex</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="il">2</span><span class="p">)</span>
<span class="w">  </span>
<span class="w">  </span><span class="vg">Repeat</span>
<span class="w">    </span>
<span class="w">    </span><span class="vg">While</span><span class="w"> </span><span class="vg">a</span><span class="p">(</span><span class="vg">low</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">pivotValue</span>
<span class="w">      </span><span class="vg">low</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">    </span><span class="vg">Wend</span>
<span class="w">    </span>
<span class="w">    </span><span class="vg">While</span><span class="w"> </span><span class="vg">a</span><span class="p">(</span><span class="vg">high</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">pivotValue</span>
<span class="w">      </span><span class="vg">high</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="w">    </span><span class="vg">Wend</span>
<span class="w">    </span>
<span class="w">    </span><span class="vg">If</span><span class="w"> </span><span class="vg">low</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="vg">high</span>
<span class="w">      </span><span class="vg">Swap</span><span class="w"> </span><span class="vg">a</span><span class="p">(</span><span class="vg">low</span><span class="p">),</span><span class="w"> </span><span class="vg">a</span><span class="p">(</span><span class="vg">high</span><span class="p">)</span>
<span class="w">      </span><span class="vg">low</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">      </span><span class="vg">high</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="w">    </span><span class="vg">EndIf</span>
<span class="w">    </span>
<span class="w">  </span><span class="vg">Until</span><span class="w"> </span><span class="vg">low</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">high</span>
<span class="w">  </span>
<span class="w">  </span><span class="vg">If</span><span class="w"> </span><span class="vg">firstIndex</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">high</span>
<span class="w">    </span><span class="vg">qSort</span><span class="p">(</span><span class="vg">a</span><span class="p">(),</span><span class="w"> </span><span class="vg">firstIndex</span><span class="p">,</span><span class="w"> </span><span class="vg">high</span><span class="p">)</span>
<span class="w">  </span><span class="vg">EndIf</span>
<span class="w">  </span>
<span class="w">  </span><span class="vg">If</span><span class="w"> </span><span class="vg">low</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">lastIndex</span>
<span class="w">    </span><span class="vg">qSort</span><span class="p">(</span><span class="vg">a</span><span class="p">(),</span><span class="w"> </span><span class="vg">low</span><span class="p">,</span><span class="w"> </span><span class="vg">lastIndex</span><span class="p">)</span>
<span class="w">  </span><span class="vg">EndIf</span>
<span class="vg">EndProcedure</span>

<span class="vg">Procedure</span><span class="w"> </span><span class="vg">quickSort</span><span class="p">(</span><span class="vg">Array</span><span class="w"> </span><span class="vg">a</span><span class="p">(</span><span class="il">1</span><span class="p">))</span>
<span class="w">  </span><span class="vg">qSort</span><span class="p">(</span><span class="vg">a</span><span class="p">(),</span><span class="il">0</span><span class="p">,</span><span class="vg">ArraySize</span><span class="p">(</span><span class="vg">a</span><span class="p">()))</span>
<span class="vg">EndProcedure</span>
</pre></div>
<h2><span class="mw-headline" id="Python"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Python" title="Category:Python">Python</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=151" title="Edit section: Python">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">quickSort</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
    <span class="n">less</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">pivotList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">more</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">arr</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">pivot</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">pivot</span><span class="p">:</span>
                <span class="n">less</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">pivot</span><span class="p">:</span>
                <span class="n">more</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pivotList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">less</span> <span class="o">=</span> <span class="n">quickSort</span><span class="p">(</span><span class="n">less</span><span class="p">)</span>
        <span class="n">more</span> <span class="o">=</span> <span class="n">quickSort</span><span class="p">(</span><span class="n">more</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">less</span> <span class="o">+</span> <span class="n">pivotList</span> <span class="o">+</span> <span class="n">more</span>

<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">31</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">782</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">quickSort</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
<p>In a Haskell fashion --
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">qsort</span><span class="p">(</span><span class="n">L</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">qsort</span><span class="p">([</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span>  <span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span> <span class="o">+</span> 
            <span class="p">[</span><span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">+</span> 
            <span class="n">qsort</span><span class="p">([</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]]))</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">L</span>
</pre></div>
<p>More readable, but still using list comprehensions:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">qsort</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">list</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">pivot</span> <span class="o">=</span> <span class="nb">list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">less</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>   <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span>  <span class="n">pivot</span><span class="p">]</span>
        <span class="n">more</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">pivot</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">qsort</span><span class="p">(</span><span class="n">less</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="n">pivot</span><span class="p">]</span> <span class="o">+</span> <span class="n">qsort</span><span class="p">(</span><span class="n">more</span><span class="p">)</span>
</pre></div>
<p>More correctly in some tests:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">qSort</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">choice</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">qSort</span><span class="p">([</span><span class="n">elem</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">a</span> <span class="k">if</span> <span class="n">elem</span> <span class="o">&lt;</span> <span class="n">q</span><span class="p">])</span> <span class="o">+</span> <span class="p">[</span><span class="n">q</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">q</span><span class="p">)</span> <span class="o">+</span> <span class="n">qSort</span><span class="p">([</span><span class="n">elem</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">a</span> <span class="k">if</span> <span class="n">elem</span> <span class="o">&gt;</span> <span class="n">q</span><span class="p">])</span>
</pre></div>
<p><br/>
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">quickSort</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">less</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">more</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pivot</span> <span class="o">=</span> <span class="n">choice</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">pivot</span><span class="p">:</span>
                <span class="n">less</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">pivot</span><span class="p">:</span>
                <span class="n">more</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">less</span> <span class="o">=</span> <span class="n">quickSort</span><span class="p">(</span><span class="n">less</span><span class="p">)</span>
        <span class="n">more</span> <span class="o">=</span> <span class="n">quickSort</span><span class="p">(</span><span class="n">more</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">less</span> <span class="o">+</span> <span class="p">[</span><span class="n">pivot</span><span class="p">]</span> <span class="o">*</span> <span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span> <span class="o">+</span> <span class="n">more</span>
</pre></div>
<p>Returning a new list:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">qsort</span><span class="p">(</span><span class="n">array</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">array</span>
    <span class="n">head</span><span class="p">,</span> <span class="o">*</span><span class="n">tail</span> <span class="o">=</span> <span class="n">array</span>
    <span class="n">less</span> <span class="o">=</span> <span class="n">qsort</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tail</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">head</span><span class="p">])</span>
    <span class="n">more</span> <span class="o">=</span> <span class="n">qsort</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tail</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">head</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">less</span> <span class="o">+</span> <span class="p">[</span><span class="n">head</span><span class="p">]</span> <span class="o">+</span> <span class="n">more</span>
</pre></div>
<p>Sorting a list in place:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">quicksort</span><span class="p">(</span><span class="n">array</span><span class="p">):</span>
    <span class="n">_quicksort</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_quicksort</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">stop</span> <span class="o">-</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">pivot</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">start</span><span class="p">],</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span>
        <span class="k">while</span> <span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">:</span>
            <span class="k">while</span> <span class="n">array</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">pivot</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">array</span><span class="p">[</span><span class="n">right</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">pivot</span><span class="p">:</span>
                <span class="n">right</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">:</span>
                <span class="n">array</span><span class="p">[</span><span class="n">left</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="n">right</span><span class="p">]</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">right</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="n">left</span><span class="p">]</span>
                <span class="n">left</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">right</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">_quicksort</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
        <span class="n">_quicksort</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">stop</span><span class="p">)</span>
</pre></div>
<h2><span class="mw-headline" id="Qi"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Qi" title="Category:Qi">Qi</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=152" title="Edit section: Qi">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>(define keep
  _    []       -&gt; []
  Pred [A|Rest] -&gt; [A | (keep Pred Rest)] where (Pred A)
  Pred [_|Rest] -&gt; (keep Pred Rest))

(define quicksort
  []    -&gt; []
  [A|R] -&gt; (append (quicksort (keep (&gt;= A) R))
                   [A]
                   (quicksort (keep (&lt; A) R))))

(quicksort [6 8 5 9 3 2 2 1 4 7])</pre></div>
<h2><span class="mw-headline" id="Quackery"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Quackery" title="Category:Quackery">Quackery</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=153" title="Edit section: Quackery">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Sort a nest of numbers.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>[ stack ]                      is less      (     --&gt; s )

[ stack ]                      is same      (     --&gt; s )

[ stack ]                      is more      (     --&gt; s )

[ - -1 1 clamp 1+ ]            is &lt;=&gt;       ( n n --&gt; n )

[ tuck take join swap put ]    is append    ( x s --&gt;   )

[ dup size 2 &lt; if done
  [] less put
  [] same put
  [] more put
  behead swap witheach
    [ 2dup swap &lt;=&gt;
      [ table less same more ]
      append ]
  same append
  less take recurse
  same take join
  more take recurse join ]     is quicksort (   [ --&gt; [ )

[] 10 times [ i^ join ] 3 of
dup       echo cr
quicksort echo cr</pre></div>
<p><b>Output:</b>
</p>
<pre>[ 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 ]
[ 0 0 0 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 6 6 6 7 7 7 8 8 8 9 9 9 ]</pre>
<h2><span class="mw-headline" id="R"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:R" title="Category:R">R</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=154" title="Edit section: R">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#Octave">Octave</a></div>
<div class="mw-highlight mw-highlight-lang-r mw-content-ltr" dir="ltr"><pre><span></span><span class="n">qsort</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">if </span><span class="p">(</span> <span class="nf">length</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">&gt;</span> <span class="m">1</span> <span class="p">)</span> 
  <span class="p">{</span>
    <span class="n">pivot</span> <span class="o">&lt;-</span> <span class="p">(</span><span class="nf">min</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="nf">max</span><span class="p">(</span><span class="n">v</span><span class="p">))</span><span class="o">/</span><span class="m">2.0</span>                            <span class="c1"># Could also use pivot &lt;- median(v)</span>
    <span class="nf">c</span><span class="p">(</span><span class="nf">qsort</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">v</span> <span class="o">&lt;</span> <span class="n">pivot</span><span class="p">]),</span> <span class="n">v</span><span class="p">[</span><span class="n">v</span> <span class="o">==</span> <span class="n">pivot</span><span class="p">],</span> <span class="nf">qsort</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">v</span> <span class="o">&gt;</span> <span class="n">pivot</span><span class="p">]))</span> 
  <span class="p">}</span> <span class="n">else</span> <span class="n">v</span>
<span class="p">}</span>

<span class="n">N</span> <span class="o">&lt;-</span> <span class="m">100</span>
<span class="n">vs</span> <span class="o">&lt;-</span> <span class="nf">runif</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="nf">system.time</span><span class="p">(</span><span class="n">u</span> <span class="o">&lt;-</span> <span class="nf">qsort</span><span class="p">(</span><span class="n">vs</span><span class="p">))</span>
<span class="nf">print</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
</pre></div>
<h2><span class="mw-headline" id="Racket"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Racket" title="Category:Racket">Racket</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=155" title="Edit section: Racket">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-racket mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">#lang </span><span class="nn">racket</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">quicksort</span> <span class="nb">&lt;</span> <span class="n">l</span><span class="p">)</span>
  <span class="p">(</span><span class="k">match</span> <span class="n">l</span>
    <span class="p">[</span><span class="o">&#39;</span><span class="p">()</span> <span class="o">&#39;</span><span class="p">()]</span>
    <span class="p">[(</span><span class="nb">cons</span> <span class="n">x</span> <span class="n">xs</span><span class="p">)</span> 
     <span class="p">(</span><span class="k">let-values</span> <span class="p">([(</span><span class="n">xs-gte</span> <span class="n">xs-lt</span><span class="p">)</span> <span class="p">(</span><span class="nb">partition</span> <span class="p">(</span><span class="nb">curry</span> <span class="nb">&lt;</span> <span class="n">x</span><span class="p">)</span> <span class="n">xs</span><span class="p">)])</span>
       <span class="p">(</span><span class="nb">append</span> <span class="p">(</span><span class="n">quicksort</span> <span class="nb">&lt;</span> <span class="n">xs-lt</span><span class="p">)</span> 
               <span class="p">(</span><span class="nb">list</span> <span class="n">x</span><span class="p">)</span> 
               <span class="p">(</span><span class="n">quicksort</span> <span class="nb">&lt;</span> <span class="n">xs-gte</span><span class="p">)))]))</span>
</pre></div>
<p>Examples
</p>
<div class="mw-highlight mw-highlight-lang-racket mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="n">quicksort</span> <span class="nb">&lt;</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">8</span> <span class="mi">7</span> <span class="mi">3</span> <span class="mi">6</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">2</span><span class="p">))</span>
<span class="c1">;returns &#39;(2 3 4 5 6 7 8)</span>
<span class="p">(</span><span class="n">quicksort</span> <span class="nb">string&lt;?</span> <span class="o">&#39;</span><span class="p">(</span><span class="s2">&quot;Mergesort&quot;</span> <span class="s2">&quot;Quicksort&quot;</span> <span class="s2">&quot;Bubblesort&quot;</span><span class="p">))</span>
<span class="c1">;returns &#39;(&quot;Bubblesort&quot; &quot;Mergesort&quot; &quot;Quicksort&quot;)</span>
</pre></div>
<h2><span class="mw-headline" id="Raku"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Raku" title="Category:Raku">Raku</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=156" title="Edit section: Raku">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>(formerly Perl 6)
</p>
<div class="mw-highlight mw-highlight-lang-raku mw-content-ltr mw-highlight-lines" dir="ltr"><pre><span></span><span class="linenos" data-line="1"></span><span class="c1"># Empty list sorts to the empty list</span>
<span class="linenos" data-line="2"></span> <span class="k">multi</span> <span class="n">quicksort</span>([]) { () }
<span class="linenos" data-line="3"></span> 
<span class="linenos" data-line="4"></span> <span class="c1"># Otherwise, extract first item as pivot...</span>
<span class="linenos" data-line="5"></span> <span class="k">multi</span> <span class="n">quicksort</span>([<span class="nv">$pivot</span>, *<span class="nv">@rest</span>]) {
<span class="linenos" data-line="6"></span>     <span class="c1"># Partition.</span>
<span class="linenos" data-line="7"></span>     <span class="k">my</span> <span class="nv">$before</span>&#160;:= <span class="nv">@rest</span>.<span class="nb">grep</span>(* <span class="o">before</span> <span class="nv">$pivot</span>);
<span class="linenos" data-line="8"></span>     <span class="k">my</span> <span class="nv">$after</span> &#160;:= <span class="nv">@rest</span>.<span class="nb">grep</span>(*&#160;!<span class="o">before</span> <span class="nv">$pivot</span>);
<span class="linenos" data-line="9"></span> 
<span class="linenos" data-line="10"></span>     <span class="c1"># Sort the partitions.</span>
<span class="linenos" data-line="11"></span>     <span class="nb">flat</span> <span class="n">quicksort</span>(<span class="nv">$before</span>), <span class="nv">$pivot</span>, <span class="n">quicksort</span>(<span class="nv">$after</span>)
<span class="linenos" data-line="12"></span> }
</pre></div>
<p>Note that <code>$before</code> and <code>$after</code> are bound to lazy lists, so the partitions can (at least in theory) be sorted in parallel.
</p>
<h2><span class="mw-headline" id="Red"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Red" title="Category:Red">Red</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=157" title="Edit section: Red">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-red mw-content-ltr" dir="ltr"><pre><span></span><span class="gs">Red []</span>

<span class="c">;;-------------------------------</span>
<span class="c">;; we have to use function not func here, otherwise we&#39;d have to define all &quot;vars&quot; as local...</span>
<span class="gu">qsort:</span> <span class="nb">function</span> <span class="gs">[</span><span class="nv">list</span><span class="gs">][</span>
<span class="c">;;-------------------------------</span>
  <span class="nb">if</span> <span class="m">1</span> <span class="o">&gt;=</span> <span class="nf">length?</span> <span class="nv">list</span> <span class="gs">[</span>  <span class="ne">return</span> <span class="nv">list</span> <span class="gs">]</span>
  <span class="gu">left:</span> <span class="nf">copy</span> <span class="gs">[]</span> 
  <span class="gu">right:</span> <span class="nf">copy</span> <span class="gs">[]</span>
  <span class="gu">eq:</span>   <span class="nf">copy</span> <span class="gs">[]</span>  <span class="c">;; &quot;equal&quot;</span>
  <span class="gu">pivot:</span> <span class="nv">list</span><span class="na">/2</span> <span class="c">;; simply choose second element as pivot element</span>
  <span class="nb">foreach</span> <span class="nv">ele</span> <span class="nv">list</span> <span class="gs">[</span>
      <span class="nb">case</span> <span class="gs">[</span>
       <span class="nv">ele</span> <span class="o">&lt;</span> <span class="nv">pivot</span> <span class="gs">[</span> <span class="nf">append</span> <span class="nv">left</span> <span class="nv">ele</span> <span class="gs">]</span>
       <span class="nv">ele</span> <span class="nv">&gt;</span> <span class="nv">pivot</span> <span class="gs">[</span> <span class="nf">append</span> <span class="nv">right</span> <span class="nv">ele</span> <span class="gs">]</span>
       <span class="bp">true</span>       <span class="gs">[</span><span class="nf">append</span> <span class="nv">eq</span> <span class="nv">ele</span> <span class="gs">]</span>
      <span class="gs">]</span>
  <span class="gs">]</span>
  <span class="c">;; this is the last expression of the function, so coding &quot;return&quot; here is not necessary</span>
  <span class="nb">reduce</span> <span class="gs">[</span><span class="nv">qsort</span> <span class="nv">left</span> <span class="nv">eq</span> <span class="nv">qsort</span> <span class="nv">right</span><span class="gs">]</span>
<span class="gs">]</span>


<span class="c">;; lets test the function with an array of 100k integers, range 1..1000  </span>
<span class="gu">list:</span> <span class="gs">[]</span>
<span class="nb">loop</span> <span class="m">100000</span> <span class="gs">[</span><span class="nf">append</span> <span class="nv">list</span> <span class="nf">random</span> <span class="m">1000</span><span class="gs">]</span>
<span class="gu">t0:</span> <span class="nv">now</span><span class="na">/time/precise</span>  <span class="c">;; start timestamp</span>
<span class="nv">qsort</span> <span class="nv">list</span> <span class="c">;; the return value (block) contains the sorted list, original list has not changed</span>
<span class="nb">print</span> <span class="gs">[</span><span class="s">&quot;time1: &quot;</span>  <span class="nv">now</span><span class="na">/time/precise</span>   <span class="o">-</span> <span class="nv">t0</span><span class="gs">]</span>  <span class="c">;; about 1.1 sec on my machine</span>
<span class="gu">t0:</span> <span class="nv">now</span><span class="na">/time/precise</span>  
<span class="nf">sort</span> <span class="nv">list</span>  <span class="c">;; just for fun time the builtin function also ( also implementation of quicksort ) </span>
<span class="nb">print</span> <span class="gs">[</span><span class="s">&quot;time2: &quot;</span> <span class="nv">now</span><span class="na">/time/precise</span>   <span class="o">-</span> <span class="nv">t0</span><span class="gs">]</span>
</pre></div>
<h2><span class="mw-headline" id="REXX"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:REXX" title="Category:REXX">REXX</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=158" title="Edit section: REXX">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="version_1">version 1</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=159" title="Edit section: version 1">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This REXX version doesn't use or modify the program stack.
</p><p>It is over &#160; <b>400%</b> &#160; times faster then the 2<sup>nd</sup> REXX version &#160; (using the exact same random numbers). 
</p>
<div class="mw-highlight mw-highlight-lang-rexx mw-content-ltr" dir="ltr"><pre><span></span><span class="cm">/*REXX program  sorts  a  stemmed array  using the   quicksort  algorithm.              */</span><span class="w"></span>
<span class="kr">call</span><span class="w"> </span>gen<span class="err">@</span><span class="w">                                        </span><span class="cm">/*generate the elements for the array. */</span><span class="w"></span>
<span class="kr">call</span><span class="w"> </span>show<span class="err">@</span><span class="w">   </span><span class="s">&#39;before sort&#39;</span><span class="w">                       </span><span class="cm">/*show  the  before   array elements.  */</span><span class="w"></span>
<span class="kr">call</span><span class="w"> </span>qSort<span class="w">       </span><span class="err">#</span><span class="w">                               </span><span class="cm">/*invoke the  quicksort  subroutine.   */</span><span class="w"></span>
<span class="kr">call</span><span class="w"> </span>show<span class="err">@</span><span class="w">   </span><span class="s">&#39; after sort&#39;</span><span class="w">                       </span><span class="cm">/*show  the   after   array elements.  */</span><span class="w"></span>
<span class="kr">exit</span><span class="w">                                             </span><span class="cm">/*stick a fork in it,  we&#39;re all done. */</span><span class="w"></span>
<span class="cm">/**/</span><span class="w"></span>
<span class="nl">inOrder</span><span class="o">:</span><span class="w"> </span><span class="kr">parse</span><span class="w"> </span><span class="kr">arg</span><span class="w"> </span>n<span class="err">;</span><span class="w"> </span><span class="kr">do</span><span class="w"> </span>j<span class="o">=</span><span class="m">1</span><span class="w">  </span><span class="kr">for</span><span class="w"> </span>n<span class="o">-</span><span class="m">1</span><span class="err">;</span><span class="w">  </span>k<span class="o">=</span><span class="w"> </span>j<span class="o">+</span><span class="m">1</span><span class="err">;</span><span class="w">  </span><span class="kr">if</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>j<span class="o">&gt;</span><span class="err">@</span><span class="o">.</span>k<span class="w">  </span><span class="kr">then</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="m">0</span><span class="err">;</span><span class="w"> </span><span class="kr">end</span><span class="err">;</span><span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="cm">/**/</span><span class="w"></span>
<span class="nf">qSort</span><span class="o">:</span><span class="w"> </span><span class="kd">procedure</span><span class="w"> </span>expose<span class="w"> </span><span class="err">@</span><span class="o">.</span><span class="err">;</span><span class="w"> </span>a<span class="o">.</span><span class="m">1</span><span class="o">=</span><span class="m">1</span><span class="err">;</span><span class="w"> </span><span class="kr">parse</span><span class="w"> </span><span class="kr">arg</span><span class="w"> </span>b<span class="o">.</span><span class="m">1</span><span class="err">;</span><span class="w">  </span><span class="err">$</span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="cm">/*access @.; get @. size; pivot.*/</span><span class="w"></span>
<span class="w">       </span><span class="kr">if</span><span class="w"> </span>inOrder<span class="o">(</span>b<span class="o">.</span><span class="m">1</span><span class="o">)</span><span class="w">  </span><span class="kr">then</span><span class="w"> </span><span class="kr">return</span><span class="w">                     </span><span class="cm">/*Array already in order? Return*/</span><span class="w"></span>
<span class="w">             </span><span class="kr">do</span><span class="w">  </span><span class="kr">while</span><span class="w">  </span><span class="err">$</span><span class="o">\==</span><span class="m">0</span><span class="err">;</span><span class="w">   </span>L<span class="o">=</span><span class="w"> </span>a<span class="o">.</span><span class="err">$;</span><span class="w">    </span>t<span class="o">=</span><span class="w"> </span>b<span class="o">.</span><span class="err">$;</span><span class="w">    </span><span class="err">$</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="err">;</span><span class="w">    </span><span class="kr">if</span><span class="w"> </span>t<span class="o">&lt;</span><span class="m">2</span><span class="w">  </span><span class="kr">then</span><span class="w"> </span><span class="kr">iterate</span><span class="w"></span>
<span class="w">                  </span>H<span class="o">=</span><span class="w"> </span>L<span class="w"> </span><span class="o">+</span><span class="w"> </span>t<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="err">;</span><span class="w">    </span><span class="err">?</span><span class="o">=</span><span class="w"> </span>L<span class="w">  </span><span class="o">+</span><span class="w">  </span>t<span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="w">             </span><span class="kr">if</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>H<span class="o">&lt;</span><span class="err">@</span><span class="o">.</span>L<span class="w">  </span><span class="kr">then</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="err">@</span><span class="o">.</span><span class="err">?</span><span class="o">&lt;</span><span class="err">@</span><span class="o">.</span>H<span class="w">  </span><span class="kr">then</span><span class="w"> </span><span class="kr">do</span><span class="err">;</span><span class="w">  </span>p<span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>H<span class="err">;</span><span class="w">  </span><span class="err">@</span><span class="o">.</span>H<span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>L<span class="err">;</span><span class="w">  </span><span class="kr">end</span><span class="w"></span>
<span class="w">                                          </span><span class="kr">else</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="err">@</span><span class="o">.</span><span class="err">?</span><span class="o">&gt;</span><span class="err">@</span><span class="o">.</span>L<span class="w">  </span><span class="kr">then</span><span class="w">     </span>p<span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>L<span class="w"></span>
<span class="w">                                                           </span><span class="kr">else</span><span class="w"> </span><span class="kr">do</span><span class="err">;</span><span class="w"> </span>p<span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="o">.</span><span class="err">?;</span><span class="w"> </span><span class="err">@</span><span class="o">.</span><span class="err">?</span><span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>L<span class="err">;</span><span class="w">  </span><span class="kr">end</span><span class="w"></span>
<span class="w">                         </span><span class="kr">else</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="err">@</span><span class="o">.</span><span class="err">?</span><span class="o">&lt;</span><span class="err">@</span><span class="o">.</span>L<span class="w">  </span><span class="kr">then</span><span class="w"> </span>p<span class="o">=</span><span class="err">@</span><span class="o">.</span>L<span class="w"></span>
<span class="w">                                          </span><span class="kr">else</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="err">@</span><span class="o">.</span><span class="err">?</span><span class="o">&gt;</span><span class="err">@</span><span class="o">.</span>H<span class="w">  </span><span class="kr">then</span><span class="w"> </span><span class="kr">do</span><span class="err">;</span><span class="w"> </span>p<span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>H<span class="err">;</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>H<span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>L<span class="err">;</span><span class="w">  </span><span class="kr">end</span><span class="w"></span>
<span class="w">                                                           </span><span class="kr">else</span><span class="w"> </span><span class="kr">do</span><span class="err">;</span><span class="w"> </span>p<span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="o">.</span><span class="err">?;</span><span class="w"> </span><span class="err">@</span><span class="o">.</span><span class="err">?</span><span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>L<span class="err">;</span><span class="w">  </span><span class="kr">end</span><span class="w"></span>
<span class="w">             </span>j<span class="o">=</span><span class="w"> </span>L<span class="o">+</span><span class="m">1</span><span class="err">;</span><span class="w">                            </span>k<span class="o">=</span><span class="w"> </span>h<span class="w"></span>
<span class="w">                    </span><span class="kr">do</span><span class="w"> </span><span class="kr">forever</span><span class="w"></span>
<span class="w">                        </span><span class="kr">do</span><span class="w"> </span>j<span class="o">=</span>j<span class="w">         </span><span class="kr">while</span><span class="w"> </span>j<span class="o">&lt;=</span>k<span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>j<span class="o">&lt;=</span>p<span class="err">;</span><span class="w">  </span><span class="kr">end</span><span class="w">    </span><span class="cm">/*a teenytiny loop.*/</span><span class="w"></span>
<span class="w">                        </span><span class="kr">do</span><span class="w"> </span>k<span class="o">=</span>k<span class="w">  </span><span class="kr">by</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="w">  </span><span class="kr">while</span><span class="w"> </span>j<span class="o">&lt;</span><span class="w"> </span>k<span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>k<span class="o">&gt;=</span>p<span class="err">;</span><span class="w">  </span><span class="kr">end</span><span class="w">    </span><span class="cm">/*another   &quot;    &quot;  */</span><span class="w"></span>
<span class="w">                    </span><span class="kr">if</span><span class="w"> </span>j<span class="o">&gt;=</span>k<span class="w">  </span><span class="kr">then</span><span class="w"> </span><span class="kr">leave</span><span class="w">                             </span><span class="cm">/*segment finished? */</span><span class="w"></span>
<span class="w">                    </span>_<span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>j<span class="err">;</span><span class="w">   </span><span class="err">@</span><span class="o">.</span>j<span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>k<span class="err">;</span><span class="w">   </span><span class="err">@</span><span class="o">.</span>k<span class="o">=</span><span class="w"> </span>_<span class="w">                    </span><span class="cm">/*swap J&amp;K elements.*/</span><span class="w"></span>
<span class="w">                    </span><span class="kr">end</span><span class="w">   </span><span class="cm">/*forever*/</span><span class="w"></span>
<span class="w">             </span><span class="err">$</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">             </span>k<span class="o">=</span><span class="w"> </span>j<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="err">;</span><span class="w">   </span><span class="err">@</span><span class="o">.</span>L<span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="o">.</span>k<span class="err">;</span><span class="w">   </span><span class="err">@</span><span class="o">.</span>k<span class="o">=</span><span class="w"> </span>p<span class="w"></span>
<span class="w">             </span><span class="kr">if</span><span class="w"> </span>j<span class="o">&lt;=</span><span class="err">?</span><span class="w">  </span><span class="kr">then</span><span class="w"> </span><span class="kr">do</span><span class="err">;</span><span class="w">  </span>a<span class="o">.</span><span class="err">$</span><span class="o">=</span><span class="w"> </span>j<span class="err">;</span><span class="w">  </span>b<span class="o">.</span><span class="err">$</span><span class="o">=</span><span class="w"> </span>H<span class="o">-</span>j<span class="o">+</span><span class="m">1</span><span class="err">;</span><span class="w">  </span><span class="err">$</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="o">+</span><span class="m">1</span><span class="err">;</span><span class="w">   </span>a<span class="o">.</span><span class="err">$</span><span class="o">=</span><span class="w"> </span>L<span class="err">;</span><span class="w">   </span>b<span class="o">.</span><span class="err">$</span><span class="o">=</span><span class="w"> </span>k<span class="o">-</span>L<span class="err">;</span><span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">                      </span><span class="kr">else</span><span class="w"> </span><span class="kr">do</span><span class="err">;</span><span class="w">  </span>a<span class="o">.</span><span class="err">$</span><span class="o">=</span><span class="w"> </span>L<span class="err">;</span><span class="w">  </span>b<span class="o">.</span><span class="err">$</span><span class="o">=</span><span class="w"> </span>k<span class="o">-</span>L<span class="err">;</span><span class="w">    </span><span class="err">$</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="o">+</span><span class="m">1</span><span class="err">;</span><span class="w">   </span>a<span class="o">.</span><span class="err">$</span><span class="o">=</span><span class="w"> </span>j<span class="err">;</span><span class="w">   </span>b<span class="o">.</span><span class="err">$</span><span class="o">=</span><span class="w"> </span>H<span class="o">-</span>j<span class="o">+</span><span class="m">1</span><span class="err">;</span><span class="w">  </span><span class="kr">end</span><span class="w"></span>
<span class="w">             </span><span class="kr">end</span><span class="w">          </span><span class="cm">/*while $==0*/</span><span class="w"></span>
<span class="w">       </span><span class="kr">return</span><span class="w"></span>
<span class="cm">/**/</span><span class="w"></span>
show<span class="err">@:</span><span class="w"> </span>w<span class="o">=</span><span class="w"> </span><span class="nb">length</span><span class="o">(</span><span class="err">#</span><span class="o">)</span><span class="err">;</span><span class="w">       </span><span class="kr">do</span><span class="w"> </span>j<span class="o">=</span><span class="m">1</span><span class="w">  </span><span class="kr">for</span><span class="w"> </span><span class="err">#;</span><span class="w">  </span><span class="kr">say</span><span class="w"> </span><span class="s">&#39;element&#39;</span><span class="w">  </span><span class="nb">right</span><span class="o">(</span>j<span class="o">,</span>w<span class="o">)</span><span class="w">  </span><span class="nb">arg</span><span class="o">(</span><span class="m">1</span><span class="o">)</span><span class="s">&quot;:&quot;</span><span class="w">  </span><span class="err">@</span><span class="o">.</span>j<span class="err">;</span><span class="w">  </span><span class="kr">end</span><span class="w"></span>
<span class="w">       </span><span class="kr">say</span><span class="w"> </span><span class="nb">copies</span><span class="o">(</span><span class="s">&#39;&#39;</span><span class="o">,</span><span class="w"> </span>maxL<span class="w"> </span><span class="o">+</span><span class="w"> </span>w<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">22</span><span class="o">)</span><span class="w">            </span><span class="cm">/*display a separator (between outputs)*/</span><span class="w"></span>
<span class="w">       </span><span class="kr">return</span><span class="w"></span>
<span class="cm">/**/</span><span class="w"></span>
gen<span class="err">@:</span><span class="w">  </span><span class="err">@</span><span class="o">.=</span><span class="err">;</span><span class="w">   </span>maxL<span class="o">=</span><span class="m">0</span><span class="w">                                    </span><span class="cm">/*assign a default value for the array.*/</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">1</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">&quot; Rivers that form part of a (USA) state&#39;s border &quot;</span><span class="w">                                   </span><span class="cm">/*this value is adjusted later to include a prefix &amp; suffix.*/</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">2</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;=&#39;</span><span class="w">                                                                                   </span><span class="cm">/*this value is expanded later.  */</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">3</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Perdido River                       Alabama, Florida&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">4</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Chattahoochee River                 Alabama, Georgia&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">5</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Tennessee River                     Alabama, Kentucky, Mississippi, Tennessee&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">6</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Colorado River                      Arizona, California, Nevada, Baja California (Mexico)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">7</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Mississippi River                   Arkansas, Illinois, Iowa, Kentucky, Minnesota, Mississippi, Missouri, Tennessee, Louisiana, Wisconsin&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">8</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;St. Francis River                   Arkansas, Missouri&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">9</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Poteau River                        Arkansas, Oklahoma&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Arkansas River                      Arkansas, Oklahoma&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">11</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Red River (Mississippi watershed)   Arkansas, Oklahoma, Texas&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Byram River                         Connecticut, New York&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Pawcatuck River                     Connecticut, Rhode Island and Providence Plantations&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">14</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Delaware River                      Delaware, New Jersey, New York, Pennsylvania&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">15</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Potomac River                       District of Columbia, Maryland, Virginia, West Virginia&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">16</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;St. Marys River                     Florida, Georgia&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">17</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Chattooga River                     Georgia, South Carolina&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">18</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Tugaloo River                       Georgia, South Carolina&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">19</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Savannah River                      Georgia, South Carolina&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">20</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Snake River                         Idaho, Oregon, Washington&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">21</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Wabash River                        Illinois, Indiana&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">22</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Ohio River                          Illinois, Indiana, Kentucky, Ohio, West Virginia&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">23</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Great Miami River (mouth only)      Indiana, Ohio&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">24</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Des Moines River                    Iowa, Missouri&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">25</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Big Sioux River                     Iowa, South Dakota&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">26</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Missouri River                      Kansas, Iowa, Missouri, Nebraska, South Dakota&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">27</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Tug Fork River                      Kentucky, Virginia, West Virginia&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">28</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Big Sandy River                     Kentucky, West Virginia&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">29</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Pearl River                         Louisiana, Mississippi&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">30</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Sabine River                        Louisiana, Texas&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">31</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Monument Creek                      Maine, New Brunswick (Canada)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;St. Croix River                     Maine, New Brunswick (Canada)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">33</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Piscataqua River                    Maine, New Hampshire&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">34</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;St. Francis River                   Maine, Quebec (Canada)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">35</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;St. John River                      Maine, Quebec (Canada)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">36</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Pocomoke River                      Maryland, Virginia&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">37</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Palmer River                        Massachusetts, Rhode Island and Providence Plantations&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">38</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Runnins River                       Massachusetts, Rhode Island and Providence Plantations&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">39</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Montreal River                      Michigan (upper peninsula), Wisconsin&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">40</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Detroit River                       Michigan, Ontario (Canada)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">41</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;St. Clair River                     Michigan, Ontario (Canada)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">42</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;St. Marys River                     Michigan, Ontario (Canada)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">43</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Brule River                         Michigan, Wisconsin&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">44</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Menominee River                     Michigan, Wisconsin&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">45</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Red River of the North              Minnesota, North Dakota&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">46</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Bois de Sioux River                 Minnesota, North Dakota, South Dakota&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">47</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Pigeon River                        Minnesota, Ontario (Canada)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">48</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Rainy River                         Minnesota, Ontario (Canada)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">49</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;St. Croix River                     Minnesota, Wisconsin&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">50</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;St. Louis River                     Minnesota, Wisconsin&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">51</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Halls Stream                        New Hampshire, Canada&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">52</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Salmon Falls River                  New Hampshire, Maine&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">53</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Connecticut River                   New Hampshire, Vermont&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">54</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Arthur Kill                         New Jersey, New York (tidal strait)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">55</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Kill Van Kull                       New Jersey, New York (tidal strait)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">56</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hudson River (lower part only)      New Jersey, New York&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">57</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Rio Grande                          New Mexico, Texas, Tamaulipas (Mexico), Nuevo Leon (Mexico), Coahuila de Zaragoza (Mexico), Chihuahua (Mexico)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">58</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Niagara River                       New York, Ontario (Canada)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;St. Lawrence River                  New York, Ontario (Canada)&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Poultney River                      New York, Vermont&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">61</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Catawba River                       North Carolina, South Carolina&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Blackwater River                    North Carolina, Virginia&quot;</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Columbia River                      Oregon, Washington&quot;</span><span class="w"></span>
<span class="w">                       </span><span class="kr">do</span><span class="w"> </span><span class="err">#</span><span class="o">=</span><span class="m">1</span><span class="w">  </span><span class="kr">until</span><span class="w">  </span><span class="err">@</span><span class="o">.</span><span class="err">#</span><span class="o">==</span><span class="s">&#39;&#39;</span><span class="w">           </span><span class="cm">/*find how many entries in array,  and */</span><span class="w"></span>
<span class="w">                       </span>maxL<span class="o">=</span><span class="nb">max</span><span class="o">(</span>maxL<span class="o">,</span><span class="w"> </span><span class="nb">length</span><span class="o">(</span><span class="err">@</span><span class="o">.</span><span class="err">#</span><span class="o">))</span><span class="w">      </span><span class="cm">/*   also find the maximum width entry.*/</span><span class="w"></span>
<span class="w">                       </span><span class="kr">end</span><span class="w">   </span><span class="cm">/*#*/</span><span class="err">;</span><span class="w">   </span><span class="err">#</span><span class="o">=</span><span class="w"> </span><span class="err">#</span><span class="o">-</span><span class="m">1</span><span class="w">            </span><span class="cm">/*adjust the highest element number.   */</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">1</span><span class="o">=</span><span class="w"> </span><span class="nb">center</span><span class="o">(</span><span class="err">@</span><span class="o">.</span><span class="m">1</span><span class="o">,</span><span class="w"> </span>maxL<span class="o">,</span><span class="w"> </span><span class="s">&#39;-&#39;</span><span class="o">)</span><span class="w">                      </span><span class="cm">/*   &quot;    &quot;  header information.       */</span><span class="w"></span>
<span class="w">       </span><span class="err">@</span><span class="o">.</span><span class="m">2</span><span class="o">=</span><span class="w"> </span><span class="nb">copies</span><span class="o">(</span><span class="err">@</span><span class="o">.</span><span class="m">2</span><span class="o">,</span><span class="w"> </span>maxL<span class="o">)</span><span class="w">                           </span><span class="cm">/*   &quot;    &quot;     &quot;   separator.         */</span><span class="w"></span>
<span class="w">       </span><span class="kr">return</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>output <span style="font-weight:normal">&#160; when using the internal default input:</span></dt></dl></div>
<pre style="height:60ex">element  1 before sort: ------------------------------------------------ Rivers that form part of a (USA) state's border -------------------------------------------------
element  2 before sort: ==================================================================================================================================================
element  3 before sort: Perdido River                       Alabama, Florida
element  4 before sort: Chattahoochee River                 Alabama, Georgia
element  5 before sort: Tennessee River                     Alabama, Kentucky, Mississippi, Tennessee
element  6 before sort: Colorado River                      Arizona, California, Nevada, Baja California (Mexico)
element  7 before sort: Mississippi River                   Arkansas, Illinois, Iowa, Kentucky, Minnesota, Mississippi, Missouri, Tennessee, Louisiana, Wisconsin
element  8 before sort: St. Francis River                   Arkansas, Missouri
element  9 before sort: Poteau River                        Arkansas, Oklahoma
element 10 before sort: Arkansas River                      Arkansas, Oklahoma
element 11 before sort: Red River (Mississippi watershed)   Arkansas, Oklahoma, Texas
element 12 before sort: Byram River                         Connecticut, New York
element 13 before sort: Pawcatuck River                     Connecticut, Rhode Island and Providence Plantations
element 14 before sort: Delaware River                      Delaware, New Jersey, New York, Pennsylvania
element 15 before sort: Potomac River                       District of Columbia, Maryland, Virginia, West Virginia
element 16 before sort: St. Marys River                     Florida, Georgia
element 17 before sort: Chattooga River                     Georgia, South Carolina
element 18 before sort: Tugaloo River                       Georgia, South Carolina
element 19 before sort: Savannah River                      Georgia, South Carolina
element 20 before sort: Snake River                         Idaho, Oregon, Washington
element 21 before sort: Wabash River                        Illinois, Indiana
element 22 before sort: Ohio River                          Illinois, Indiana, Kentucky, Ohio, West Virginia
element 23 before sort: Great Miami River (mouth only)      Indiana, Ohio
element 24 before sort: Des Moines River                    Iowa, Missouri
element 25 before sort: Big Sioux River                     Iowa, South Dakota
element 26 before sort: Missouri River                      Kansas, Iowa, Missouri, Nebraska, South Dakota
element 27 before sort: Tug Fork River                      Kentucky, Virginia, West Virginia
element 28 before sort: Big Sandy River                     Kentucky, West Virginia
element 29 before sort: Pearl River                         Louisiana, Mississippi
element 30 before sort: Sabine River                        Louisiana, Texas
element 31 before sort: Monument Creek                      Maine, New Brunswick (Canada)
element 32 before sort: St. Croix River                     Maine, New Brunswick (Canada)
element 33 before sort: Piscataqua River                    Maine, New Hampshire
element 34 before sort: St. Francis River                   Maine, Quebec (Canada)
element 35 before sort: St. John River                      Maine, Quebec (Canada)
element 36 before sort: Pocomoke River                      Maryland, Virginia
element 37 before sort: Palmer River                        Massachusetts, Rhode Island and Providence Plantations
element 38 before sort: Runnins River                       Massachusetts, Rhode Island and Providence Plantations
element 39 before sort: Montreal River                      Michigan (upper peninsula), Wisconsin
element 40 before sort: Detroit River                       Michigan, Ontario (Canada)
element 41 before sort: St. Clair River                     Michigan, Ontario (Canada)
element 42 before sort: St. Marys River                     Michigan, Ontario (Canada)
element 43 before sort: Brule River                         Michigan, Wisconsin
element 44 before sort: Menominee River                     Michigan, Wisconsin
element 45 before sort: Red River of the North              Minnesota, North Dakota
element 46 before sort: Bois de Sioux River                 Minnesota, North Dakota, South Dakota
element 47 before sort: Pigeon River                        Minnesota, Ontario (Canada)
element 48 before sort: Rainy River                         Minnesota, Ontario (Canada)
element 49 before sort: St. Croix River                     Minnesota, Wisconsin
element 50 before sort: St. Louis River                     Minnesota, Wisconsin
element 51 before sort: Halls Stream                        New Hampshire, Canada
element 52 before sort: Salmon Falls River                  New Hampshire, Maine
element 53 before sort: Connecticut River                   New Hampshire, Vermont
element 54 before sort: Arthur Kill                         New Jersey, New York (tidal strait)
element 55 before sort: Kill Van Kull                       New Jersey, New York (tidal strait)
element 56 before sort: Hudson River (lower part only)      New Jersey, New York
element 57 before sort: Rio Grande                          New Mexico, Texas, Tamaulipas (Mexico), Nuevo Leon (Mexico), Coahuila de Zaragoza (Mexico), Chihuahua (Mexico)
element 58 before sort: Niagara River                       New York, Ontario (Canada)
element 59 before sort: St. Lawrence River                  New York, Ontario (Canada)
element 60 before sort: Poultney River                      New York, Vermont
element 61 before sort: Catawba River                       North Carolina, South Carolina
element 62 before sort: Blackwater River                    North Carolina, Virginia
element 63 before sort: Columbia River                      Oregon, Washington

element  1  after sort: ------------------------------------------------ Rivers that form part of a (USA) state's border -------------------------------------------------
element  2  after sort: ==================================================================================================================================================
element  3  after sort: Arkansas River                      Arkansas, Oklahoma
element  4  after sort: Arthur Kill                         New Jersey, New York (tidal strait)
element  5  after sort: Big Sandy River                     Kentucky, West Virginia
element  6  after sort: Big Sioux River                     Iowa, South Dakota
element  7  after sort: Blackwater River                    North Carolina, Virginia
element  8  after sort: Bois de Sioux River                 Minnesota, North Dakota, South Dakota
element  9  after sort: Brule River                         Michigan, Wisconsin
element 10  after sort: Byram River                         Connecticut, New York
element 11  after sort: Catawba River                       North Carolina, South Carolina
element 12  after sort: Chattahoochee River                 Alabama, Georgia
element 13  after sort: Chattooga River                     Georgia, South Carolina
element 14  after sort: Colorado River                      Arizona, California, Nevada, Baja California (Mexico)
element 15  after sort: Columbia River                      Oregon, Washington
element 16  after sort: Connecticut River                   New Hampshire, Vermont
element 17  after sort: Delaware River                      Delaware, New Jersey, New York, Pennsylvania
element 18  after sort: Des Moines River                    Iowa, Missouri
element 19  after sort: Detroit River                       Michigan, Ontario (Canada)
element 20  after sort: Great Miami River (mouth only)      Indiana, Ohio
element 21  after sort: Halls Stream                        New Hampshire, Canada
element 22  after sort: Hudson River (lower part only)      New Jersey, New York
element 23  after sort: Kill Van Kull                       New Jersey, New York (tidal strait)
element 24  after sort: Menominee River                     Michigan, Wisconsin
element 25  after sort: Mississippi River                   Arkansas, Illinois, Iowa, Kentucky, Minnesota, Mississippi, Missouri, Tennessee, Louisiana, Wisconsin
element 26  after sort: Missouri River                      Kansas, Iowa, Missouri, Nebraska, South Dakota
element 27  after sort: Montreal River                      Michigan (upper peninsula), Wisconsin
element 28  after sort: Monument Creek                      Maine, New Brunswick (Canada)
element 29  after sort: Niagara River                       New York, Ontario (Canada)
element 30  after sort: Ohio River                          Illinois, Indiana, Kentucky, Ohio, West Virginia
element 31  after sort: Palmer River                        Massachusetts, Rhode Island and Providence Plantations
element 32  after sort: Pawcatuck River                     Connecticut, Rhode Island and Providence Plantations
element 33  after sort: Pearl River                         Louisiana, Mississippi
element 34  after sort: Perdido River                       Alabama, Florida
element 35  after sort: Pigeon River                        Minnesota, Ontario (Canada)
element 36  after sort: Piscataqua River                    Maine, New Hampshire
element 37  after sort: Pocomoke River                      Maryland, Virginia
element 38  after sort: Poteau River                        Arkansas, Oklahoma
element 39  after sort: Potomac River                       District of Columbia, Maryland, Virginia, West Virginia
element 40  after sort: Poultney River                      New York, Vermont
element 41  after sort: Rainy River                         Minnesota, Ontario (Canada)
element 42  after sort: Red River (Mississippi watershed)   Arkansas, Oklahoma, Texas
element 43  after sort: Red River of the North              Minnesota, North Dakota
element 44  after sort: Rio Grande                          New Mexico, Texas, Tamaulipas (Mexico), Nuevo Leon (Mexico), Coahuila de Zaragoza (Mexico), Chihuahua (Mexico)
element 45  after sort: Runnins River                       Massachusetts, Rhode Island and Providence Plantations
element 46  after sort: Sabine River                        Louisiana, Texas
element 47  after sort: Salmon Falls River                  New Hampshire, Maine
element 48  after sort: Savannah River                      Georgia, South Carolina
element 49  after sort: Snake River                         Idaho, Oregon, Washington
element 50  after sort: St. Clair River                     Michigan, Ontario (Canada)
element 51  after sort: St. Croix River                     Maine, New Brunswick (Canada)
element 52  after sort: St. Croix River                     Minnesota, Wisconsin
element 53  after sort: St. Francis River                   Arkansas, Missouri
element 54  after sort: St. Francis River                   Maine, Quebec (Canada)
element 55  after sort: St. John River                      Maine, Quebec (Canada)
element 56  after sort: St. Lawrence River                  New York, Ontario (Canada)
element 57  after sort: St. Louis River                     Minnesota, Wisconsin
element 58  after sort: St. Marys River                     Florida, Georgia
element 59  after sort: St. Marys River                     Michigan, Ontario (Canada)
element 60  after sort: Tennessee River                     Alabama, Kentucky, Mississippi, Tennessee
element 61  after sort: Tug Fork River                      Kentucky, Virginia, West Virginia
element 62  after sort: Tugaloo River                       Georgia, South Carolina
element 63  after sort: Wabash River                        Illinois, Indiana

</pre>
<h3><span class="mw-headline" id="version_2">version 2</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=160" title="Edit section: version 2">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#Python">Python</a></div>The Python code translates very well to <a href="/web/20230609112831/https://rosettacode.org/wiki/OoRexx" class="mw-redirect" title="OoRexx">ooRexx</a> but here is a way to implement it in classic REXX as well.
<p>This REXX version doesn't handle numbers with leading/trailing/embedded blanks, or textual values that have blanks (or whitespace) in them.
</p>
<div class="mw-highlight mw-highlight-lang-rexx mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span>
<span class="cm">/*REXX*/</span><span class="w"></span>
<span class="w">    </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;4 65 2 -31 0 99 83 782 1&#39;</span><span class="w"></span>
<span class="w">    </span><span class="kr">do</span><span class="w"> </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="nb">words</span><span class="o">(</span>a<span class="o">)</span><span class="w"></span>
<span class="w">        </span><span class="kr">queue</span><span class="w"> </span><span class="nb">word</span><span class="o">(</span>a<span class="o">,</span><span class="w"> </span>i<span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="kr">call</span><span class="w"> </span>quickSort<span class="w"></span>
<span class="w">    </span><span class="kr">parse</span><span class="w"> </span><span class="kr">pull</span><span class="w"> </span>item<span class="w"></span>
<span class="w">    </span><span class="kr">do</span><span class="w"> </span><span class="nb">queued</span><span class="o">()</span><span class="w"></span>
<span class="w">        </span><span class="kr">call</span><span class="w"> </span>charout<span class="w"> </span><span class="o">,</span>item<span class="s">&#39;, &#39;</span><span class="w"></span>
<span class="w">        </span><span class="kr">parse</span><span class="w"> </span><span class="kr">pull</span><span class="w"> </span>item<span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="kr">say</span><span class="w"> </span>item<span class="w"></span>
<span class="w">    </span><span class="kr">exit</span><span class="w"></span>

<span class="nf">quickSort</span><span class="o">:</span><span class="w"> </span><span class="kd">procedure</span><span class="w"></span>
<span class="cm">/* In classic Rexx, arguments are passed by value, not by reference so stems</span>
<span class="cm">    cannot be passed as arguments nor used as return values.  Putting their</span>
<span class="cm">    contents on the external data queue is a way to bypass this issue. */</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* construct the input stem */</span><span class="w"></span>
<span class="w">    </span>arr<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">queued</span><span class="o">()</span><span class="w"></span>
<span class="w">    </span><span class="kr">do</span><span class="w"> </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>arr<span class="o">.</span><span class="m">0</span><span class="w"></span>
<span class="w">        </span><span class="kr">parse</span><span class="w"> </span><span class="kr">pull</span><span class="w"> </span>arr<span class="o">.</span>i<span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span>less<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
<span class="w">    </span>pivotList<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
<span class="w">    </span>more<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span>arr<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">        </span><span class="kr">if</span><span class="w"> </span>arr<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">then</span><span class="w"></span>
<span class="w">            </span><span class="kr">queue</span><span class="w"> </span>arr<span class="o">.</span><span class="m">1</span><span class="w"></span>
<span class="w">        </span><span class="kr">return</span><span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="kr">else</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">        </span>pivot<span class="w"> </span><span class="o">=</span><span class="w"> </span>arr<span class="o">.</span><span class="m">1</span><span class="w"></span>
<span class="w">        </span><span class="kr">do</span><span class="w"> </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>arr<span class="o">.</span><span class="m">0</span><span class="w"></span>
<span class="w">            </span>item<span class="w"> </span><span class="o">=</span><span class="w"> </span>arr<span class="o">.</span>i<span class="w"></span>
<span class="w">            </span><span class="kr">select</span><span class="w"></span>
<span class="w">                </span>when<span class="w"> </span>item<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>pivot<span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">                    </span>j<span class="w"> </span><span class="o">=</span><span class="w"> </span>less<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">                    </span>less<span class="o">.</span>j<span class="w"> </span><span class="o">=</span><span class="w"> </span>item<span class="w"></span>
<span class="w">                    </span>less<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>j<span class="w"></span>
<span class="w">                </span><span class="kr">end</span><span class="w"></span>
<span class="w">                </span>when<span class="w"> </span>item<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>pivot<span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">                    </span>j<span class="w"> </span><span class="o">=</span><span class="w"> </span>more<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">                    </span>more<span class="o">.</span>j<span class="w"> </span><span class="o">=</span><span class="w"> </span>item<span class="w"></span>
<span class="w">                    </span>more<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>j<span class="w"></span>
<span class="w">                </span><span class="kr">end</span><span class="w"></span>
<span class="w">                </span>otherwise<span class="w"></span>
<span class="w">                    </span>j<span class="w"> </span><span class="o">=</span><span class="w"> </span>pivotList<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">                    </span>pivotList<span class="o">.</span>j<span class="w"> </span><span class="o">=</span><span class="w"> </span>item<span class="w"></span>
<span class="w">                    </span>pivotList<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>j<span class="w"></span>
<span class="w">            </span><span class="kr">end</span><span class="w"></span>
<span class="w">        </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* recursive call to sort the less. stem */</span><span class="w"></span>
<span class="w">    </span><span class="kr">do</span><span class="w"> </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>less<span class="o">.</span><span class="m">0</span><span class="w"></span>
<span class="w">        </span><span class="kr">queue</span><span class="w"> </span>less<span class="o">.</span>i<span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nb">queued</span><span class="o">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">        </span><span class="kr">call</span><span class="w"> </span>quickSort<span class="w"></span>
<span class="w">        </span>less<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">queued</span><span class="o">()</span><span class="w"></span>
<span class="w">        </span><span class="kr">do</span><span class="w"> </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>less<span class="o">.</span><span class="m">0</span><span class="w"></span>
<span class="w">            </span><span class="kr">parse</span><span class="w"> </span><span class="kr">pull</span><span class="w"> </span>less<span class="o">.</span>i<span class="w"></span>
<span class="w">        </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* recursive call to sort the more. stem */</span><span class="w"></span>
<span class="w">    </span><span class="kr">do</span><span class="w"> </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>more<span class="o">.</span><span class="m">0</span><span class="w"></span>
<span class="w">        </span><span class="kr">queue</span><span class="w"> </span>more<span class="o">.</span>i<span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nb">queued</span><span class="o">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kr">do</span><span class="w"></span>
<span class="w">        </span><span class="kr">call</span><span class="w"> </span>quickSort<span class="w"></span>
<span class="w">        </span>more<span class="o">.</span><span class="m">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">queued</span><span class="o">()</span><span class="w"></span>
<span class="w">        </span><span class="kr">do</span><span class="w"> </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>more<span class="o">.</span><span class="m">0</span><span class="w"></span>
<span class="w">            </span><span class="kr">parse</span><span class="w"> </span><span class="kr">pull</span><span class="w"> </span>more<span class="o">.</span>i<span class="w"></span>
<span class="w">        </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* put the contents of all 3 stems on the queue in order */</span><span class="w"></span>
<span class="w">    </span><span class="kr">do</span><span class="w"> </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>less<span class="o">.</span><span class="m">0</span><span class="w"></span>
<span class="w">        </span><span class="kr">queue</span><span class="w"> </span>less<span class="o">.</span>i<span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="kr">do</span><span class="w"> </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>pivotList<span class="o">.</span><span class="m">0</span><span class="w"></span>
<span class="w">        </span><span class="kr">queue</span><span class="w"> </span>pivotList<span class="o">.</span>i<span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="kr">do</span><span class="w"> </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span>more<span class="o">.</span><span class="m">0</span><span class="w"></span>
<span class="w">        </span><span class="kr">queue</span><span class="w"> </span>more<span class="o">.</span>i<span class="w"></span>
<span class="w">    </span><span class="kr">end</span><span class="w"></span>
<span class="w">    </span><span class="kr">return</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="Ring"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Ring" title="Category:Ring">Ring</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=161" title="Edit section: Ring">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre># Project&#160;: Sorting algorithms/Quicksort

test = [4, 65, 2, -31, 0, 99, 2, 83, 782, 1]
see "before sort:" + nl
showarray(test)
quicksort(test, 1, 10)
see "after sort:" + nl
showarray(test)
 
func quicksort(a, s, n)
       if n &lt; 2 
          return
       ok
       t = s + n - 1
       l = s
       r = t
       p = a[floor((l + r) / 2)]
       while l &lt;= r
               while a[l] &lt; p 
                       l = l + 1
               end
               while a[r] &gt; p
                       r = r - 1
               end
               if l &lt;= r
                  temp = a[l]
                  a[l] = a[r]
                  a[r] = temp
                  l = l + 1
                  r = r - 1
              ok
       end
       if s &lt; r 
          quicksort(a, s, r - s + 1)
       ok
       if l &lt; t 
         quicksort(a, l, t - l + 1 )
       ok

func showarray(vect)
        svect = ""
        for n = 1 to len(vect)
              svect = svect + vect[n] + " "
        next
        svect = left(svect, len(svect) - 1)
        see svect + nl</pre></div>
<p>Output:
</p>
<pre>before sort:
4 65 2 -31 0 99 2 83 782 1
after sort:
-31 0 1 2 2 4 65 83 99 782
</pre>
<h2><span class="mw-headline" id="Ruby"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Ruby" title="Category:Ruby">Ruby</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=162" title="Edit section: Ruby">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-ruby mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">Array</span>
  <span class="k">def</span> <span class="nf">quick_sort</span>
    <span class="k">return</span> <span class="nb">self</span> <span class="k">if</span> <span class="n">length</span> <span class="o">&lt;=</span> <span class="mi">1</span>
    <span class="n">pivot</span> <span class="o">=</span> <span class="nb">self</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
    <span class="n">less</span><span class="p">,</span> <span class="n">greatereq</span> <span class="o">=</span> <span class="nb">self</span><span class="o">[</span><span class="mi">1</span><span class="o">..-</span><span class="mi">1</span><span class="o">].</span><span class="n">partition</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">pivot</span> <span class="p">}</span>
    <span class="n">less</span><span class="o">.</span><span class="n">quick_sort</span> <span class="o">+</span> <span class="o">[</span><span class="n">pivot</span><span class="o">]</span> <span class="o">+</span> <span class="n">greatereq</span><span class="o">.</span><span class="n">quick_sort</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
<p>or
</p>
<div class="mw-highlight mw-highlight-lang-ruby mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">Array</span>
  <span class="k">def</span> <span class="nf">quick_sort</span>
    <span class="k">return</span> <span class="nb">self</span> <span class="k">if</span> <span class="n">length</span> <span class="o">&lt;=</span> <span class="mi">1</span>
    <span class="n">pivot</span> <span class="o">=</span> <span class="n">sample</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">group_by</span><span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span> <span class="o">&lt;=&gt;</span> <span class="n">pivot</span> <span class="p">}</span>
    <span class="n">group</span><span class="o">.</span><span class="n">default</span> <span class="o">=</span> <span class="o">[]</span>
    <span class="n">group</span><span class="o">[-</span><span class="mi">1</span><span class="o">].</span><span class="n">quick_sort</span> <span class="o">+</span> <span class="n">group</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">+</span> <span class="n">group</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="n">quick_sort</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
<p>or functionally
</p>
<div class="mw-highlight mw-highlight-lang-ruby mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">Array</span>
  <span class="k">def</span> <span class="nf">quick_sort</span>
    <span class="n">h</span><span class="p">,</span> <span class="o">*</span><span class="n">t</span> <span class="o">=</span> <span class="nb">self</span>
    <span class="n">h</span> <span class="p">?</span> <span class="n">t</span><span class="o">.</span><span class="n">partition</span> <span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span> <span class="o">&lt;</span> <span class="n">h</span> <span class="p">}</span><span class="o">.</span><span class="n">inject</span> <span class="p">{</span> <span class="o">|</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="o">|</span> <span class="n">l</span><span class="o">.</span><span class="n">quick_sort</span> <span class="o">+</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="o">+</span> <span class="n">r</span><span class="o">.</span><span class="n">quick_sort</span> <span class="p">}</span> <span class="p">:</span> <span class="o">[]</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
<h2><span class="mw-headline" id="Run_BASIC"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Run_BASIC" title="Category:Run BASIC">Run BASIC</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=163" title="Edit section: Run BASIC">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>' -------------------------------
' quick sort
' -------------------------------
size = 50
dim s(size)			' array to sort
for i = 1 to size		' fill it with some random numbers
 s(i) = rnd(0) * 100
next i

lft  = 1
rht  = size

[qSort]
  lftHold = lft
  rhtHold = rht
  pivot   = s(lft)
  while lft &lt; rht
    while (s(rht) &gt;= pivot) and (lft &lt; rht)&#160;: rht = rht - 1 :wend
    if lft &lt;&gt; rht then
      s(lft) = s(rht)
      lft    = lft + 1
    end if
    while (s(lft) &lt;= pivot) and (lft &lt; rht)&#160;: lft = lft + 1 :wend
    if lft &lt;&gt; rht then
      s(rht) = s(lft)
      rht    = rht - 1
    end if
  wend

  s(lft) = pivot
  pivot  = lft
  lft    = lftHold
  rht    = rhtHold
  if lft &lt; pivot then
    rht = pivot - 1
    goto [qSort]
  end if 
 if rht &gt; pivot then
    lft = pivot + 1
    goto [qSort]
 end if

for i = 1 to size
 print i;"--&gt;";s(i)
next i</pre></div>
<h2><span class="mw-headline" id="Rust"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Rust" title="Category:Rust">Rust</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=164" title="Edit section: Rust">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-rust mw-content-ltr" dir="ltr"><pre><span></span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Sort numbers in descending order&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">99</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="mi">782</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Before: {:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">numbers</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">quick_sort</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">numbers</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;|</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;After:  {:?}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">numbers</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Sort strings alphabetically&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;beach&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hotel&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;airplane&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;car&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;house&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;art&quot;</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Before: {:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">strings</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">quick_sort</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">strings</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;|</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">y</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;After:  {:?}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">strings</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Sort strings by length&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Before: {:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">strings</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">quick_sort</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">strings</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;|</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">y</span><span class="p">.</span><span class="n">len</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;After:  {:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">strings</span><span class="p">);</span><span class="w">    </span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">quick_sort</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">F</span><span class="o">&gt;</span><span class="p">(</span><span class="n">v</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="p">[</span><span class="n">T</span><span class="p">],</span><span class="w"> </span><span class="n">f</span>: <span class="kp">&amp;</span><span class="nc">F</span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">F</span>: <span class="nb">Fn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">T</span><span class="p">,</span><span class="o">&amp;</span><span class="n">T</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">bool</span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">len</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">pivot_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">partition</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">quick_sort</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="n">pivot_index</span><span class="p">],</span><span class="w"> </span><span class="n">f</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">quick_sort</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="n">pivot_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="n">len</span><span class="p">],</span><span class="w"> </span><span class="n">f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">partition</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">F</span><span class="o">&gt;</span><span class="p">(</span><span class="n">v</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="p">[</span><span class="n">T</span><span class="p">],</span><span class="w"> </span><span class="n">f</span>: <span class="kp">&amp;</span><span class="nc">F</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">usize</span> 
    <span class="nc">where</span><span class="w"> </span><span class="n">F</span>: <span class="nb">Fn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">T</span><span class="p">,</span><span class="o">&amp;</span><span class="n">T</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">bool</span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">len</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">pivot_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">last_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">v</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">pivot_index</span><span class="p">,</span><span class="w"> </span><span class="n">last_index</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">store_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">..</span><span class="n">last_index</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="o">&amp;</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="o">&amp;</span><span class="n">v</span><span class="p">[</span><span class="n">last_index</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">v</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">store_index</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">store_index</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="n">v</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">store_index</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">store_index</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>Sort numbers in descending order
Before: [4, 65, 2, -31, 0, 99, 2, 83, 782, 1]
After:  [782, 99, 83, 65, 4, 2, 2, 1, 0, -31]

Sort strings alphabetically
Before: ["beach", "hotel", "airplane", "car", "house", "art"]
After:  ["airplane", "art", "beach", "car", "hotel", "house"]

Sort strings by length
Before: ["airplane", "art", "beach", "car", "hotel", "house"]
After:  ["car", "art", "house", "hotel", "beach", "airplane"]</pre>
<p>Or, using functional style (slower than the imperative style but faster than functional style in other languages):
</p>
<div class="mw-highlight mw-highlight-lang-rust mw-content-ltr" dir="ltr"><pre><span></span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">99</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="mi">782</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{:?}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">quick_sort</span><span class="p">(</span><span class="n">numbers</span><span class="p">.</span><span class="n">iter</span><span class="p">()));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">quick_sort</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="n">v</span>: <span class="nc">T</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">T</span>: <span class="nb">Iterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">E</span>: <span class="nb">PartialOrd</span><span class="p">,</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">next</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">Vec</span>::<span class="n">new</span><span class="p">(),</span><span class="w"></span>

<span class="w">        </span><span class="nb">Some</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">lower</span><span class="p">,</span><span class="w"> </span><span class="n">higher</span><span class="p">)</span>: <span class="p">(</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">_</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">_</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">partition</span><span class="p">(</span><span class="o">|</span><span class="n">it</span><span class="o">|</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pivot</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quick_sort</span><span class="p">(</span><span class="n">lower</span><span class="p">.</span><span class="n">into_iter</span><span class="p">());</span><span class="w"></span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">higher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quick_sort</span><span class="p">(</span><span class="n">higher</span><span class="p">.</span><span class="n">into_iter</span><span class="p">());</span><span class="w"></span>
<span class="w">            </span><span class="n">lower</span><span class="p">.</span><span class="n">into_iter</span><span class="p">()</span><span class="w"></span>
<span class="w">                </span><span class="p">.</span><span class="n">chain</span><span class="p">(</span><span class="n">core</span>::<span class="n">iter</span>::<span class="n">once</span><span class="p">(</span><span class="n">pivot</span><span class="p">))</span><span class="w"></span>
<span class="w">                </span><span class="p">.</span><span class="n">chain</span><span class="p">(</span><span class="n">higher</span><span class="p">.</span><span class="n">into_iter</span><span class="p">())</span><span class="w"></span>
<span class="w">                </span><span class="p">.</span><span class="n">collect</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>By the way this implementation needs only O(n) memory because the partition(...) call already "consumes" v. This means that the memory of v will be freed here, before the recursive calls to quick_sort(...). If we tried to use v later, we would get a compilation error.
</p>
<h2><span class="mw-headline" id="SASL"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:SASL" title="Category:SASL">SASL</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=165" title="Edit section: SASL">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Copied from SASL manual, Appendix II, solution (2)(b)
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>DEF || this rather nice solution is due to Silvio Meira
sort () = ()
sort (a&#160;: x) = sort {b &lt;- x; b &lt;= a } ++ a&#160;: sort { b &lt;- x; b&gt;a}
?</pre></div>
<h2><span class="mw-headline" id="Sather"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Sather" title="Category:Sather">Sather</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=166" title="Edit section: Sather">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>class SORT{T &lt; $IS_LT{T}} is

  private afilter(a:ARRAY{T}, cmp:ROUT{T,T}:BOOL, p:T):ARRAY{T} is
    filtered&#160;::= #ARRAY{T};
    loop v&#160;::= a.elt!;
      if cmp.call(v, p) then
        filtered&#160;:= filtered.append(|v|);
      end;
    end;
    return filtered;
  end;

  private mlt(a, b:T):BOOL is return a &lt; b; end;
  private mgt(a, b:T):BOOL is return a &gt; b; end;
  quick_sort(inout a:ARRAY{T}) is
    if a.size &lt; 2 then return; end;
    pivot&#160;::= a.median;
    left:ARRAY{T}&#160;:= afilter(a, bind(mlt(_,_)), pivot);
    right:ARRAY{T}&#160;:= afilter(a, bind(mgt(_,_)), pivot);
    quick_sort(inout left);
    quick_sort(inout right);
    res&#160;::= #ARRAY{T};
    res&#160;:= res.append(left, |pivot|,  right);
    a&#160;:= res;
  end;
end;</pre></div>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>class MAIN is
  main is
    a:ARRAY{INT}&#160;:= |10, 9, 8, 7, 6, -10, 5, 4, 656, -11|;
    b&#160;::= a.copy;
    SORT{INT}::quick_sort(inout a);
    #OUT + a + "\n" + b.sort + "\n";
  end;
end;</pre></div>
<p>The ARRAY class has a builtin sorting method, which is quicksort (but under certain condition an insertion sort is used instead), exactly <code>quicksort_range</code>; this implementation is original.
</p>
<h2><span class="mw-headline" id="Scala"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Scala" title="Category:Scala">Scala</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=167" title="Edit section: Scala">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>What follows is a progression on genericity here.
</p><p>First, a quick sort of a list of integers:
</p>
<div class="mw-highlight mw-highlight-lang-scala mw-content-ltr" dir="ltr"><pre><span></span>  <span class="k">def</span> <span class="nf">sort</span><span class="p">(</span><span class="n">xs</span><span class="p">:</span> <span class="nc">List</span><span class="p">[</span><span class="nc">Int</span><span class="p">]):</span> <span class="nc">List</span><span class="p">[</span><span class="nc">Int</span><span class="p">]</span> <span class="o">=</span> <span class="n">xs</span> <span class="k">match</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nc">Nil</span> <span class="o">=&gt;</span> <span class="nc">Nil</span>
    <span class="k">case</span> <span class="n">head</span> <span class="o">::</span> <span class="n">tail</span> <span class="o">=&gt;</span>
      <span class="kd">val</span> <span class="p">(</span><span class="n">less</span><span class="p">,</span> <span class="n">notLess</span><span class="p">)</span> <span class="o">=</span> <span class="n">tail</span><span class="p">.</span><span class="n">partition</span><span class="p">(</span><span class="n">_</span> <span class="o">&lt;</span> <span class="n">head</span><span class="p">)</span> <span class="c1">// Arbitrarily partition list in two</span>
      <span class="n">sort</span><span class="p">(</span><span class="n">less</span><span class="p">)</span> <span class="o">++</span> <span class="p">(</span><span class="n">head</span> <span class="o">::</span> <span class="n">sort</span><span class="p">(</span><span class="n">notLess</span><span class="p">))</span>          <span class="c1">// Sort each half</span>
  <span class="p">}</span>
</pre></div>
<p>Next, a quick sort of a list of some type T, given a lessThan function:
</p>
<div class="mw-highlight mw-highlight-lang-scala mw-content-ltr" dir="ltr"><pre><span></span>  <span class="k">def</span> <span class="nf">sort</span><span class="p">[</span><span class="nc">T</span><span class="p">](</span><span class="n">xs</span><span class="p">:</span> <span class="nc">List</span><span class="p">[</span><span class="nc">T</span><span class="p">],</span> <span class="n">lessThan</span><span class="p">:</span> <span class="p">(</span><span class="nc">T</span><span class="p">,</span> <span class="nc">T</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nc">Boolean</span><span class="p">):</span> <span class="nc">List</span><span class="p">[</span><span class="nc">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">xs</span> <span class="k">match</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nc">Nil</span> <span class="o">=&gt;</span> <span class="nc">Nil</span>
    <span class="k">case</span> <span class="n">x</span> <span class="o">::</span> <span class="n">xx</span> <span class="o">=&gt;</span>
      <span class="kd">val</span> <span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span> <span class="o">=</span> <span class="n">xx</span><span class="p">.</span><span class="n">partition</span><span class="p">(</span><span class="n">lessThan</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
      <span class="n">sort</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">lessThan</span><span class="p">)</span> <span class="o">++</span> <span class="p">(</span><span class="n">x</span> <span class="o">::</span> <span class="n">sort</span><span class="p">(</span><span class="n">hi</span><span class="p">,</span> <span class="n">lessThan</span><span class="p">))</span>
  <span class="p">}</span>
</pre></div>
<p>To take advantage of known orderings, a quick sort of a list of some type T,
for which exists an implicit (or explicit) Ordering[T]:
</p>
<div class="mw-highlight mw-highlight-lang-scala mw-content-ltr" dir="ltr"><pre><span></span>  <span class="k">def</span> <span class="nf">sort</span><span class="p">[</span><span class="nc">T</span><span class="p">](</span><span class="n">xs</span><span class="p">:</span> <span class="nc">List</span><span class="p">[</span><span class="nc">T</span><span class="p">])(</span><span class="k">implicit</span> <span class="n">ord</span><span class="p">:</span> <span class="nc">Ordering</span><span class="p">[</span><span class="nc">T</span><span class="p">]):</span> <span class="nc">List</span><span class="p">[</span><span class="nc">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">xs</span> <span class="k">match</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nc">Nil</span> <span class="o">=&gt;</span> <span class="nc">Nil</span>
    <span class="k">case</span> <span class="n">x</span> <span class="o">::</span> <span class="n">xx</span> <span class="o">=&gt;</span>
      <span class="kd">val</span> <span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span> <span class="o">=</span> <span class="n">xx</span><span class="p">.</span><span class="n">partition</span><span class="p">(</span><span class="n">ord</span><span class="p">.</span><span class="n">lt</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
      <span class="n">sort</span><span class="p">[</span><span class="nc">T</span><span class="p">](</span><span class="n">lo</span><span class="p">)</span> <span class="o">++</span> <span class="p">(</span><span class="n">x</span> <span class="o">::</span> <span class="n">sort</span><span class="p">[</span><span class="nc">T</span><span class="p">](</span><span class="n">hi</span><span class="p">))</span>
  <span class="p">}</span>
</pre></div>
<p>That last one could have worked with Ordering, but Ordering is Java, and doesn't have
the less than operator. Ordered is Scala-specific, and provides it.
</p>
<div class="mw-highlight mw-highlight-lang-scala mw-content-ltr" dir="ltr"><pre><span></span>  <span class="k">def</span> <span class="nf">sort</span><span class="p">[</span><span class="nc">T</span> <span class="o">&lt;:</span> <span class="nc">Ordered</span><span class="p">[</span><span class="nc">T</span><span class="p">]](</span><span class="n">xs</span><span class="p">:</span> <span class="nc">List</span><span class="p">[</span><span class="nc">T</span><span class="p">]):</span> <span class="nc">List</span><span class="p">[</span><span class="nc">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">xs</span> <span class="k">match</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nc">Nil</span> <span class="o">=&gt;</span> <span class="nc">Nil</span>
    <span class="k">case</span> <span class="n">x</span> <span class="o">::</span> <span class="n">xx</span> <span class="o">=&gt;</span>
      <span class="kd">val</span> <span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span> <span class="o">=</span> <span class="n">xx</span><span class="p">.</span><span class="n">partition</span><span class="p">(</span><span class="n">_</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">)</span>
      <span class="n">sort</span><span class="p">(</span><span class="n">lo</span><span class="p">)</span> <span class="o">++</span> <span class="p">(</span><span class="n">x</span> <span class="o">::</span> <span class="n">sort</span><span class="p">(</span><span class="n">hi</span><span class="p">))</span>
  <span class="p">}</span>
</pre></div>
<p>What hasn't changed in all these examples is ordering a list. It is possible
to write a generic quicksort in Scala, which will order any kind of collection. To do
so, however, requires that the type of the collection, itself, be made a parameter to
the function. Let's see it below, and then remark upon it:
</p>
<div class="mw-highlight mw-highlight-lang-scala mw-content-ltr" dir="ltr"><pre><span></span>  <span class="k">def</span> <span class="nf">sort</span><span class="p">[</span><span class="nc">T</span><span class="p">,</span> <span class="nc">C</span><span class="p">[</span><span class="nc">T</span><span class="p">]</span> <span class="o">&lt;:</span> <span class="n">scala</span><span class="p">.</span><span class="n">collection</span><span class="p">.</span><span class="nc">TraversableLike</span><span class="p">[</span><span class="nc">T</span><span class="p">,</span> <span class="nc">C</span><span class="p">[</span><span class="nc">T</span><span class="p">]]]</span>
    <span class="p">(</span><span class="n">xs</span><span class="p">:</span> <span class="nc">C</span><span class="p">[</span><span class="nc">T</span><span class="p">])</span>
    <span class="p">(</span><span class="k">implicit</span> <span class="n">ord</span><span class="p">:</span> <span class="n">scala</span><span class="p">.</span><span class="n">math</span><span class="p">.</span><span class="nc">Ordering</span><span class="p">[</span><span class="nc">T</span><span class="p">],</span>
      <span class="n">cbf</span><span class="p">:</span> <span class="n">scala</span><span class="p">.</span><span class="n">collection</span><span class="p">.</span><span class="n">generic</span><span class="p">.</span><span class="nc">CanBuildFrom</span><span class="p">[</span><span class="nc">C</span><span class="p">[</span><span class="nc">T</span><span class="p">],</span> <span class="nc">T</span><span class="p">,</span> <span class="nc">C</span><span class="p">[</span><span class="nc">T</span><span class="p">]]):</span> <span class="nc">C</span><span class="p">[</span><span class="nc">T</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// Some collection types can&#39;t pattern match</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">xs</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">xs</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="kd">val</span> <span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span> <span class="o">=</span> <span class="n">xs</span><span class="p">.</span><span class="n">tail</span><span class="p">.</span><span class="n">partition</span><span class="p">(</span><span class="n">ord</span><span class="p">.</span><span class="n">lt</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">xs</span><span class="p">.</span><span class="n">head</span><span class="p">))</span>
      <span class="kd">val</span> <span class="n">b</span> <span class="o">=</span> <span class="n">cbf</span><span class="p">()</span>
      <span class="n">b</span><span class="p">.</span><span class="n">sizeHint</span><span class="p">(</span><span class="n">xs</span><span class="p">.</span><span class="n">size</span><span class="p">)</span>
      <span class="n">b</span> <span class="o">++=</span> <span class="n">sort</span><span class="p">(</span><span class="n">lo</span><span class="p">)</span>
      <span class="n">b</span> <span class="o">+=</span> <span class="n">xs</span><span class="p">.</span><span class="n">head</span>
      <span class="n">b</span> <span class="o">++=</span> <span class="n">sort</span><span class="p">(</span><span class="n">hi</span><span class="p">)</span>
      <span class="n">b</span><span class="p">.</span><span class="n">result</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">}</span>
</pre></div>
<p>The type of our collection is "C[T]", and,
by providing C[T] as a type parameter to TraversableLike, we ensure C[T] is capable
of returning instances of type C[T]. Traversable is the base type of all collections,
and TraversableLike is a trait which contains the implementation of most Traversable
methods.
</p><p>We need another parameter, though, which is a factory capable of building a C[T] collection.
That is being passed implicitly, so callers to this method do not need to provide them, as
the collection they are using should already provide one as such implicitly. Because we need that
implicitly, then we need to ask for the "T =&gt; Ordering[T]" as well, as the "T &lt;: Ordered[T]"
which provides it cannot be used in conjunction with implicit parameters.
</p><p>The body of the function is from the list variant, since many of the Traversable
collection types don't support pattern matching, "+:" or "::".
</p>
<h2><span class="mw-headline" id="Scheme"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Scheme" title="Category:Scheme">Scheme</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=168" title="Edit section: Scheme">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="List_quicksort">List quicksort</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=169" title="Edit section: List quicksort">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="mw-highlight mw-highlight-lang-scheme mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">split-by</span> <span class="nv">l</span> <span class="nv">p</span> <span class="nv">k</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let </span><span class="nv">loop</span> <span class="p">((</span><span class="nf">low</span> <span class="o">&#39;</span><span class="p">())</span>
             <span class="p">(</span><span class="nf">high</span> <span class="o">&#39;</span><span class="p">())</span>
             <span class="p">(</span><span class="nf">l</span> <span class="nv">l</span><span class="p">))</span>
    <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">null? </span><span class="nv">l</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">k</span> <span class="nv">low</span> <span class="nv">high</span><span class="p">))</span>
          <span class="p">((</span><span class="nf">p</span> <span class="p">(</span><span class="nb">car </span><span class="nv">l</span><span class="p">))</span>
           <span class="p">(</span><span class="nf">loop</span> <span class="nv">low</span> <span class="p">(</span><span class="nb">cons </span><span class="p">(</span><span class="nb">car </span><span class="nv">l</span><span class="p">)</span> <span class="nv">high</span><span class="p">)</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">l</span><span class="p">)))</span>
          <span class="p">(</span><span class="nf">else</span>
           <span class="p">(</span><span class="nf">loop</span> <span class="p">(</span><span class="nb">cons </span><span class="p">(</span><span class="nb">car </span><span class="nv">l</span><span class="p">)</span> <span class="nv">low</span><span class="p">)</span> <span class="nv">high</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">l</span><span class="p">))))))</span>
 
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">quicksort</span> <span class="nv">l</span> <span class="nv">gt?</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">null? </span><span class="nv">l</span><span class="p">)</span>
      <span class="o">&#39;</span><span class="p">()</span>
      <span class="p">(</span><span class="nf">split-by</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">l</span><span class="p">)</span> 
                <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">gt?</span> <span class="nv">x</span> <span class="p">(</span><span class="nb">car </span><span class="nv">l</span><span class="p">)))</span>
                <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">low</span> <span class="nv">high</span><span class="p">)</span>
                  <span class="p">(</span><span class="nb">append </span><span class="p">(</span><span class="nf">quicksort</span> <span class="nv">low</span> <span class="nv">gt?</span><span class="p">)</span>
                          <span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="nb">car </span><span class="nv">l</span><span class="p">))</span>
                          <span class="p">(</span><span class="nf">quicksort</span> <span class="nv">high</span> <span class="nv">gt?</span><span class="p">))))))</span>

<span class="p">(</span><span class="nf">quicksort</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">7</span> <span class="mi">9</span> <span class="mi">8</span> <span class="mi">6</span> <span class="mi">4</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">&gt;</span><span class="p">)</span>
</pre></div>
<p>With srfi-1:
</p>
<div class="mw-highlight mw-highlight-lang-scheme mw-content-ltr" dir="ltr"><pre><span></span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">quicksort</span> <span class="nv">l</span> <span class="nv">gt?</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">null? </span><span class="nv">l</span><span class="p">)</span>
      <span class="o">&#39;</span><span class="p">()</span>
      <span class="p">(</span><span class="nb">append </span><span class="p">(</span><span class="nf">quicksort</span> <span class="p">(</span><span class="nf">filter</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">gt?</span> <span class="p">(</span><span class="nb">car </span><span class="nv">l</span><span class="p">)</span> <span class="nv">x</span><span class="p">))</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">l</span><span class="p">))</span> <span class="nv">gt?</span><span class="p">)</span>
              <span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="nb">car </span><span class="nv">l</span><span class="p">))</span>
              <span class="p">(</span><span class="nf">quicksort</span> <span class="p">(</span><span class="nf">filter</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nf">gt?</span> <span class="p">(</span><span class="nb">car </span><span class="nv">l</span><span class="p">)</span> <span class="nv">x</span><span class="p">)))</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">l</span><span class="p">))</span> <span class="nv">gt?</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">quicksort</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">7</span> <span class="mi">9</span> <span class="mi">8</span> <span class="mi">6</span> <span class="mi">4</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">&gt;</span><span class="p">)</span>
</pre></div>
<p><br/>
</p>
<h3><span id="Vector_quicksort_.28in_place.29"></span><span class="mw-headline" id="Vector_quicksort_(in_place)">Vector quicksort (in place)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=170" title="Edit section: Vector quicksort (in place)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Chibi_Scheme&amp;action=edit&amp;redlink=1" class="new" title="Chibi Scheme (page does not exist)">Chibi Scheme</a></div>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/Gauche_Scheme" title="Gauche Scheme">Gauche Scheme</a></div>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=CHICKEN_Scheme&amp;action=edit&amp;redlink=1" class="new" title="CHICKEN Scheme (page does not exist)">CHICKEN Scheme</a> version 5.3.0</div>
For CHICKEN:<div class="examplemeta libheader"><b>Library:</b> <a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Category:R7rs&amp;action=edit&amp;redlink=1" class="new" title="Category:R7rs (page does not exist)">r7rs</a></div>
<p><br/>
</p>
<div class="mw-highlight mw-highlight-lang-scheme mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">;;;-------------------------------------------------------------------</span>
<span class="c1">;;;</span>
<span class="c1">;;; Quicksort in R7RS Scheme, working in-place on vectors (that is,</span>
<span class="c1">;;; arrays). I closely follow the &quot;better quicksort algorithm&quot;</span>
<span class="c1">;;; pseudocode, and thus the code is more &quot;procedural&quot; than</span>
<span class="c1">;;; &quot;functional&quot;.</span>
<span class="c1">;;;</span>
<span class="c1">;;; I use a random pivot. If you can generate a random number quickly,</span>
<span class="c1">;;; this is a good method, but for this demonstration I have taken a</span>
<span class="c1">;;; fast linear congruential generator and made it brutally slow. It&#39;s</span>
<span class="c1">;;; just a demonstration.&#160;:)</span>
<span class="c1">;;;</span>

<span class="p">(</span><span class="nf">import</span> <span class="p">(</span><span class="nf">scheme</span> <span class="nv">base</span><span class="p">))</span>
<span class="p">(</span><span class="nf">import</span> <span class="p">(</span><span class="nf">scheme</span> <span class="nv">case-lambda</span><span class="p">))</span>
<span class="p">(</span><span class="nf">import</span> <span class="p">(</span><span class="nf">scheme</span> <span class="nv">write</span><span class="p">))</span>

<span class="c1">;;;-------------------------------------------------------------------</span>
<span class="c1">;;;</span>
<span class="c1">;;; Add &quot;while&quot; loops to the language.</span>
<span class="c1">;;;</span>

<span class="p">(</span><span class="k">define-syntax </span><span class="nv">while</span>
  <span class="p">(</span><span class="k">syntax-rules </span><span class="p">()</span>
    <span class="p">((</span><span class="nf">_</span> <span class="nv">pred?</span> <span class="nv">body</span> <span class="o">...</span><span class="p">)</span>
     <span class="p">(</span><span class="k">let </span><span class="nv">loop</span> <span class="p">()</span>
       <span class="p">(</span><span class="nf">when</span> <span class="nv">pred?</span>
         <span class="p">(</span><span class="k">begin </span><span class="nv">body</span> <span class="o">...</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">loop</span><span class="p">))))))</span>

<span class="c1">;;;-------------------------------------------------------------------</span>
<span class="c1">;;;</span>
<span class="c1">;;; In-place quicksort.</span>
<span class="c1">;;;</span>

<span class="p">(</span><span class="k">define </span><span class="nv">vector-quicksort!</span>
  <span class="p">(</span><span class="nf">case-lambda</span>

    <span class="c1">;; Use a default pivot selector.</span>
    <span class="p">((</span><span class="nf">&lt;?</span> <span class="nv">vec</span><span class="p">)</span>
     <span class="c1">;; Random pivot.</span>
     <span class="p">(</span><span class="nf">vector-quicksort!</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">vec</span> <span class="nv">i-first</span> <span class="nv">i-last</span><span class="p">)</span>
                          <span class="p">(</span><span class="nb">vector-ref </span><span class="nv">vec</span> <span class="p">(</span><span class="nf">randint</span> <span class="nv">i-first</span> <span class="nv">i-last</span><span class="p">)))</span>
                        <span class="nv">&lt;?</span> <span class="nv">vec</span><span class="p">))</span>

    <span class="c1">;; Specify a pivot selector.</span>
    <span class="p">((</span><span class="nf">pivot-select</span> <span class="nv">&lt;?</span> <span class="nv">vec</span><span class="p">)</span>
     <span class="c1">;;</span>
     <span class="c1">;; The recursion:</span>
     <span class="c1">;;</span>
     <span class="p">(</span><span class="k">let </span><span class="nv">quicksort!</span> <span class="p">((</span><span class="nf">i-first</span> <span class="mi">0</span><span class="p">)</span>
                      <span class="p">(</span><span class="nf">i-last</span> <span class="p">(</span><span class="nb">- </span><span class="p">(</span><span class="nb">vector-length </span><span class="nv">vec</span><span class="p">)</span> <span class="mi">1</span><span class="p">)))</span>
       <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">n</span> <span class="p">(</span><span class="nb">- </span><span class="nv">i-last</span> <span class="nv">i-first</span> <span class="mi">-1</span><span class="p">)))</span>
         <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">&gt; </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)</span>
           <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">pivot</span> <span class="p">(</span><span class="nf">pivot-select</span> <span class="nv">vec</span> <span class="nv">i-first</span> <span class="nv">i-last</span><span class="p">)))</span>
             <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">left</span> <span class="nv">i-first</span><span class="p">)</span>
                   <span class="p">(</span><span class="nf">right</span> <span class="nv">i-last</span><span class="p">))</span>
               <span class="p">(</span><span class="nf">while</span> <span class="p">(</span><span class="nb">&lt;= </span><span class="nv">left</span> <span class="nv">right</span><span class="p">)</span>
                 <span class="p">(</span><span class="nf">while</span> <span class="p">(</span><span class="nb">&lt; </span><span class="p">(</span><span class="nb">vector-ref </span><span class="nv">vec</span> <span class="nv">left</span><span class="p">)</span> <span class="nv">pivot</span><span class="p">)</span>
                   <span class="p">(</span><span class="k">set! </span><span class="nv">left</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">left</span> <span class="mi">1</span><span class="p">)))</span>
                 <span class="p">(</span><span class="nf">while</span> <span class="p">(</span><span class="nb">&gt; </span><span class="p">(</span><span class="nb">vector-ref </span><span class="nv">vec</span> <span class="nv">right</span><span class="p">)</span> <span class="nv">pivot</span><span class="p">)</span>
                   <span class="p">(</span><span class="k">set! </span><span class="nv">right</span> <span class="p">(</span><span class="nb">- </span><span class="nv">right</span> <span class="mi">1</span><span class="p">)))</span>
                 <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">&lt;= </span><span class="nv">left</span> <span class="nv">right</span><span class="p">)</span>
                   <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">lft</span> <span class="p">(</span><span class="nb">vector-ref </span><span class="nv">vec</span> <span class="nv">left</span><span class="p">))</span>
                         <span class="p">(</span><span class="nf">rgt</span> <span class="p">(</span><span class="nb">vector-ref </span><span class="nv">vec</span> <span class="nv">right</span><span class="p">)))</span>
                     <span class="p">(</span><span class="nb">vector-set! </span><span class="nv">vec</span> <span class="nv">left</span> <span class="nv">rgt</span><span class="p">)</span>
                     <span class="p">(</span><span class="nb">vector-set! </span><span class="nv">vec</span> <span class="nv">right</span> <span class="nv">lft</span><span class="p">)</span>
                     <span class="p">(</span><span class="k">set! </span><span class="nv">left</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">left</span> <span class="mi">1</span><span class="p">))</span>
                     <span class="p">(</span><span class="k">set! </span><span class="nv">right</span> <span class="p">(</span><span class="nb">- </span><span class="nv">right</span> <span class="mi">1</span><span class="p">)))))</span>
               <span class="p">(</span><span class="nf">quicksort!</span> <span class="nv">i-first</span> <span class="nv">right</span><span class="p">)</span>
               <span class="p">(</span><span class="nf">quicksort!</span> <span class="nv">left</span> <span class="nv">i-last</span><span class="p">)))))))))</span>

<span class="c1">;;;-------------------------------------------------------------------</span>
<span class="c1">;;;</span>
<span class="c1">;;; A simple linear congruential generator, attributed by</span>
<span class="c1">;;; https://en.wikipedia.org/w/index.php?title=Linear_congruential_generator&amp;oldid=1083800601</span>
<span class="c1">;;; to glibc and GCC. No attempt has been made to optimize this code.</span>
<span class="c1">;;;</span>

<span class="p">(</span><span class="k">define </span><span class="nv">seed</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">two**31</span> <span class="p">(</span><span class="nb">expt </span><span class="mi">2</span> <span class="mi">31</span><span class="p">))</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">random-integer</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">s0</span> <span class="nv">seed</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">s1</span> <span class="p">(</span><span class="nf">truncate-remainder</span> <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nb">* </span><span class="mi">1103515245</span> <span class="nv">s0</span><span class="p">)</span> <span class="mi">12345</span><span class="p">)</span>
                                 <span class="nv">two**31</span><span class="p">)))</span>
    <span class="p">(</span><span class="k">set! </span><span class="nv">seed</span> <span class="nv">s1</span><span class="p">)</span>
    <span class="nv">s0</span><span class="p">))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">randint</span>
  <span class="p">(</span><span class="nf">case-lambda</span>
    <span class="p">((</span><span class="nf">n</span><span class="p">)</span> <span class="p">(</span><span class="nf">truncate-remainder</span> <span class="p">(</span><span class="nf">random-integer</span><span class="p">)</span> <span class="nv">n</span><span class="p">))</span>
    <span class="p">((</span><span class="nf">i-first</span> <span class="nv">i-last</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">i-first</span> <span class="p">(</span><span class="nf">randint</span> <span class="p">(</span><span class="nb">- </span><span class="nv">i-last</span> <span class="nv">i-first</span> <span class="mi">-1</span><span class="p">))))))</span>

<span class="c1">;;;-------------------------------------------------------------------</span>
<span class="c1">;;;</span>
<span class="c1">;;; A demonstration of in-place vector quicksort.</span>
<span class="c1">;;;</span>

<span class="p">(</span><span class="k">define </span><span class="nv">vec1</span> <span class="p">(</span><span class="nf">vector-copy</span> <span class="o">#</span><span class="p">(</span><span class="mi">60</span> <span class="mi">53</span> <span class="mi">100</span> <span class="mi">72</span> <span class="mi">19</span> <span class="mi">67</span> <span class="mi">14</span>
                               <span class="mi">31</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">5</span> <span class="mi">9</span> <span class="mi">2</span> <span class="mi">6</span> <span class="mi">5</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span>
                               <span class="mi">28</span> <span class="mi">9</span> <span class="mi">95</span> <span class="mi">22</span> <span class="mi">67</span> <span class="mi">55</span> <span class="mi">20</span> <span class="mi">41</span>
                               <span class="mi">42</span> <span class="mi">29</span> <span class="mi">20</span> <span class="mi">74</span> <span class="mi">39</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">vector-quicksort!</span> <span class="nv">&lt;</span> <span class="nv">vec1</span><span class="p">)</span>
<span class="p">(</span><span class="nb">write </span><span class="nv">vec1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">newline</span><span class="p">)</span>

<span class="c1">;;;-------------------------------------------------------------------</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>$ gosh vector-quicksort.scm
#(1 2 3 4 5 5 5 6 8 9 9 14 19 20 20 22 28 29 31 39 41 42 53 55 60 67 67 72 74 95 100)</pre>
<h2><span class="mw-headline" id="Seed7"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Seed7" title="Category:Seed7">Seed7</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=171" title="Edit section: Seed7">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>const proc: quickSort (inout array elemType: arr, in integer: left, in integer: right) is func
  local
    var elemType: compare_elem is elemType.value;
    var integer: less_idx is 0;
    var integer: greater_idx is 0;
    var elemType: help is elemType.value;
  begin
    if right &gt; left then
      compare_elem&#160;:= arr[right];
      less_idx&#160;:= pred(left);
      greater_idx&#160;:= right;
      repeat
        repeat
          incr(less_idx);
        until arr[less_idx] &gt;= compare_elem;
        repeat
          decr(greater_idx);
        until arr[greater_idx] &lt;= compare_elem or greater_idx = left;
        if less_idx &lt; greater_idx then
          help&#160;:= arr[less_idx];
          arr[less_idx]&#160;:= arr[greater_idx];
          arr[greater_idx]&#160;:= help;
        end if;
      until less_idx &gt;= greater_idx;
      arr[right]&#160;:= arr[less_idx];
      arr[less_idx]&#160;:= compare_elem;
      quickSort(arr, left, pred(less_idx));
      quickSort(arr, succ(less_idx), right);
    end if;
  end func;

const proc: quickSort (inout array elemType: arr) is func
  begin
    quickSort(arr, 1, length(arr));
  end func;</pre></div>
<p>Original source: <a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20230609112831/http://seed7.sourceforge.net/algorith/sorting.htm#quickSort">[2]</a>
</p>
<h2><span class="mw-headline" id="SETL"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:SETL" title="Category:SETL">SETL</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=172" title="Edit section: SETL">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In-place sort (looks much the same as the C version)
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>a&#160;:= [2,5,8,7,0,9,1,3,6,4];
qsort(a);
print(a);

proc qsort(rw a);
  if #a &gt; 1 then
    pivot&#160;:= a(#a div 2 + 1);
    l&#160;:= 1;
    r&#160;:= #a;
    (while l &lt; r)
      (while a(l) &lt; pivot) l +:= 1; end;
      (while a(r) &gt; pivot) r -:= 1; end;
      swap(a(l), a(r));
    end;
    qsort(a(1..l-1));
    qsort(a(r+1..#a));
  end if;
end proc;

proc swap(rw x, rw y);
  [y,x]&#160;:= [x,y];
end proc;</pre></div>
<p>Copying sort using comprehensions:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>a&#160;:= [2,5,8,7,0,9,1,3,6,4];
print(qsort(a));

proc qsort(a);
  if #a &gt; 1 then
    pivot&#160;:= a(#a div 2 + 1);
    a&#160;:= qsort([x in a | x &lt; pivot]) +
         [x in a | x = pivot] +
         qsort([x in a | x &gt; pivot]);
  end if;
  return a;
end proc;</pre></div>
<h2><span class="mw-headline" id="Sidef"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Sidef" title="Category:Sidef">Sidef</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=173" title="Edit section: Sidef">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-ruby mw-content-ltr" dir="ltr"><pre><span></span><span class="n">func</span> <span class="n">quicksort</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">a</span><span class="o">.</span><span class="n">len</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="k">return</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
    <span class="n">var</span> <span class="nb">p</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">pop_rand</span><span class="p">;</span>          <span class="c1"># to avoid the worst cases</span>
    <span class="n">__FUNC__</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">grep</span><span class="p">{</span> <span class="o">.</span><span class="n n-Operator">&lt;</span> <span class="nb">p</span><span class="p">})</span> <span class="o">+</span> <span class="o">[</span><span class="nb">p</span><span class="o">]</span> <span class="o">+</span> <span class="n">__FUNC__</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">grep</span><span class="p">{</span> <span class="o">.</span><span class="n n-Operator">&gt;=</span> <span class="nb">p</span><span class="p">});</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="Simula"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Simula" title="Category:Simula">Simula</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=174" title="Edit section: Simula">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>PROCEDURE QUICKSORT(A); REAL ARRAY A;
BEGIN

    PROCEDURE QS(A, FIRST, LAST); REAL ARRAY A; INTEGER FIRST, LAST;
    BEGIN
        INTEGER LEFT, RIGHT;
        LEFT&#160;:= FIRST; RIGHT&#160;:= LAST;
        IF RIGHT - LEFT + 1 &gt; 1 THEN
        BEGIN
            REAL PIVOT;
            PIVOT&#160;:= A((LEFT + RIGHT) // 2); 
            WHILE LEFT &lt;= RIGHT DO
            BEGIN
                WHILE A(LEFT) &lt; PIVOT DO LEFT&#160;:= LEFT + 1;
                WHILE A(RIGHT) &gt; PIVOT DO RIGHT&#160;:= RIGHT - 1;
                IF LEFT &lt;= RIGHT THEN
                BEGIN
                    REAL SWAP;
                    SWAP&#160;:= A(LEFT); A(LEFT)&#160;:= A(RIGHT); A(RIGHT)&#160;:= SWAP;
                    LEFT&#160;:= LEFT + 1; RIGHT&#160;:= RIGHT - 1;
                END;
            END;
            QS(A, FIRST, RIGHT);
            QS(A, LEFT, LAST);
        END;
    END QS;

    QS(A, LOWERBOUND(A, 1), UPPERBOUND(A, 1));

END QUICKSORT;</pre></div>
<h2><span class="mw-headline" id="Standard_ML"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Standard_ML" title="Category:Standard ML">Standard ML</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=175" title="Edit section: Standard ML">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-sml mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">fun</span> <span class="nf">quicksort</span> <span class="p">[]</span> <span class="p">=</span> <span class="p">[]</span>
  <span class="p">|</span> <span class="nf">quicksort</span> <span class="p">(</span><span class="n">x::xs</span><span class="p">)</span> <span class="p">=</span>
    <span class="kr">let</span> 
        <span class="kr">val</span> <span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="nv">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">partition</span> <span class="p">(</span><span class="kr">fn</span> <span class="n">y</span> <span class="p">=&gt;</span> <span class="n">y&lt;x</span><span class="p">)</span> <span class="n">xs</span>
    <span class="kr">in</span>
        <span class="n">quicksort</span> <span class="n">left</span> <span class="n">@</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="n">@</span> <span class="n">quicksort</span> <span class="n">right</span>
    <span class="kr">end</span>
</pre></div>
<hr/>
<p>Solution 2:
</p><p>Without using List.partition
</p>
<div class="mw-highlight mw-highlight-lang-sml mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">fun</span> <span class="nf">par_helper</span><span class="p">([],</span> <span class="n">x</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> 
  <span class="p">|</span> <span class="nf">par_helper</span><span class="p">(</span><span class="n">h::t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> <span class="p">=</span> 
		<span class="kr">if</span> <span class="n">h</span> <span class="n">&lt;=</span> <span class="n">x</span> <span class="kr">then</span> 
			<span class="n">par_helper</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">l</span> <span class="n">@</span> <span class="p">[</span><span class="n">h</span><span class="p">],</span> <span class="n">r</span><span class="p">)</span>
		<span class="kr">else</span>
			<span class="n">par_helper</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span> <span class="n">@</span> <span class="p">[</span><span class="n">h</span><span class="p">]);</span>

<span class="kr">fun</span> <span class="nf">par</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="p">=</span> <span class="n">par_helper</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]);</span>

<span class="kr">fun</span> <span class="nf">quicksort</span> <span class="p">[]</span> <span class="p">=</span> <span class="p">[]</span>
  <span class="p">|</span> <span class="nf">quicksort</span> <span class="p">(</span><span class="n">h::t</span><span class="p">)</span> <span class="p">=</span>
    <span class="kr">let</span> 
        <span class="kr">val</span> <span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="nv">=</span> <span class="n">par</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
    <span class="kr">in</span>
        <span class="n">quicksort</span> <span class="n">left</span> <span class="n">@</span> <span class="p">[</span><span class="n">h</span><span class="p">]</span> <span class="n">@</span> <span class="n">quicksort</span> <span class="n">right</span>
    <span class="kr">end</span><span class="p">;</span>
</pre></div>
<h2><span class="mw-headline" id="Swift"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Swift" title="Category:Swift">Swift</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=176" title="Edit section: Swift">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-swift mw-content-ltr" dir="ltr"><pre><span></span><span class="kd">func</span> <span class="nf">quicksort</span><span class="p">&lt;</span><span class="n">T</span> <span class="k">where</span> <span class="n">T</span> <span class="p">:</span> <span class="nb">Comparable</span><span class="p">&gt;(</span><span class="kr">inout</span> <span class="n">elements</span><span class="p">:</span> <span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">range</span><span class="p">:</span> <span class="nb">Range</span><span class="p">&lt;</span><span class="nb">Int</span><span class="p">&gt;)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">range</span><span class="p">.</span><span class="n">endIndex</span> <span class="o">-</span> <span class="n">range</span><span class="p">.</span><span class="n">startIndex</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">pivotIndex</span> <span class="p">=</span> <span class="bp">partition</span><span class="p">(&amp;</span><span class="n">elements</span><span class="p">,</span> <span class="n">range</span><span class="p">)</span>
    <span class="n">quicksort</span><span class="p">(&amp;</span><span class="n">elements</span><span class="p">,</span> <span class="n">range</span><span class="p">.</span><span class="n">startIndex</span> <span class="p">..</span><span class="o">&lt;</span> <span class="n">pivotIndex</span><span class="p">)</span>
    <span class="n">quicksort</span><span class="p">(&amp;</span><span class="n">elements</span><span class="p">,</span> <span class="n">pivotIndex</span><span class="o">+</span><span class="mi">1</span> <span class="p">..</span><span class="o">&lt;</span> <span class="n">range</span><span class="p">.</span><span class="n">endIndex</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">quicksort</span><span class="p">&lt;</span><span class="n">T</span> <span class="k">where</span> <span class="n">T</span> <span class="p">:</span> <span class="nb">Comparable</span><span class="p">&gt;(</span><span class="kr">inout</span> <span class="n">elements</span><span class="p">:</span> <span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="p">{</span>
  <span class="n">quicksort</span><span class="p">(&amp;</span><span class="n">elements</span><span class="p">,</span> <span class="bp">indices</span><span class="p">(</span><span class="n">elements</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="Symsyn"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Symsyn" title="Category:Symsyn">Symsyn</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=177" title="Edit section: Symsyn">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>x&#160;: 23&#160;: 15&#160;: 99&#160;: 146&#160;: 3&#160;: 66&#160;: 71&#160;: 5&#160;: 23&#160;: 73&#160;: 19

quicksort param l r

   l i
   r j
   ((l+r) shr 1) k
   x.k pivot

repeat
   if pivot &gt; x.i
      + cmp 
      + i
      goif
   endif

   if pivot &lt; x.j
      + cmp
      - j
      goif
   endif

   if i &lt;= j
      swap x.i x.j
      - j
      + i
   endif

   if i &lt;= j
      go repeat
   endif

   if l &lt; j 
      save l r i j
      call quicksort l j
      restore l r i j
   endif
 
   if i &lt; r 
      save l r i j
      call quicksort i r
      restore l r i j
   endif

   return

start

 ' original values&#160;: ' $r

 call showvalues

 call quicksort 0 10

 ' sorted values&#160;: ' $r

 call showvalues

 stop

showvalues
 $s
 i
 if i &lt;= 10
    "$s ' ' x.i ' '" $s
    + i
    goif
 endif
 " $r $s " []

 return</pre></div>
<h2><span class="mw-headline" id="Tailspin"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Tailspin" title="Category:Tailspin">Tailspin</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=178" title="Edit section: Tailspin">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Simple recursive quicksort:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>templates quicksort
  @: [];
  $ -&gt; #
  when &lt;[](2..)&gt; do
    def pivot: $(1);
    [ [ $(2..last)... -&gt; \(
      when &lt;..$pivot&gt; do
        $&#160;!
      otherwise
        ..|@quicksort: $;
     \)] -&gt; quicksort..., $pivot, $@ -&gt; quicksort... ]&#160;!
   otherwise
     $&#160;!
end quicksort

[4,5,3,8,1,2,6,7,9,8,5] -&gt; quicksort -&gt; !OUT::write</pre></div>
<p>In place:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>templates quicksort
  templates partial
    def first: $(1);
    def last: $(2);
    def pivot: $@quicksort($first);
    [ $first + 1, $last  ] -&gt; #

    when &lt;?($(2) &lt;..~$(1)&gt;)&gt; do
      def limit: $(2);
      @quicksort($first): $@quicksort($limit);
      @quicksort($limit): $pivot;
      [ $first, $limit - 1 ]&#160;!
      [ $limit + 1, $last ]&#160;!

    when &lt;?($@quicksort($(2)) &lt;$pivot~..&gt;)&gt; do
      [ $(1), $(2) - 1] -&gt; #

    when &lt;?($@quicksort($(1)) &lt;..$pivot&gt;)&gt; do
      [ $(1) + 1, $(2)] -&gt; #

    otherwise
      def temp: $@quicksort($(1));
      @quicksort($(1)): $@quicksort($(2));
      @quicksort($(2)): $temp;
      [ $(1) + 1, $(2) - 1] -&gt; #
  end partial
  @: $;
  [1, $@::length] -&gt; #
  $@&#160;!

  when &lt;?($(1) &lt;..~$(2)&gt;)&gt; do
    $ -&gt; partial -&gt; #
end quicksort

[4,5,3,8,1,2,6,7,9,8,5] -&gt; quicksort -&gt; !OUT::write</pre></div>
<h2><span class="mw-headline" id="Tcl"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Tcl" title="Category:Tcl">Tcl</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=179" title="Edit section: Tcl">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-tcl mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">package</span><span class="w"> </span>require<span class="w"> </span>Tcl<span class="w"> </span><span class="mf">8.5</span>

<span class="k">proc</span><span class="w"> </span>quicksort<span class="w"> </span><span class="k">{</span><span class="nv">m</span><span class="k">}</span><span class="w"> </span><span class="k">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="k">{[</span><span class="nb">llength</span><span class="w"> </span><span class="nv">$m</span><span class="k">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nv">1</span><span class="k">}</span><span class="w"> </span><span class="k">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">$m</span>
<span class="w">    </span><span class="k">}</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span>pivot<span class="w"> </span><span class="k">[</span><span class="nb">lindex</span><span class="w"> </span><span class="nv">$m</span><span class="w"> </span><span class="mi">0</span><span class="k">]</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span>less<span class="w"> </span><span class="k">[set</span><span class="w"> </span>equal<span class="w"> </span><span class="k">[set</span><span class="w"> </span>greater<span class="w"> </span><span class="k">[</span><span class="nb">list</span><span class="k">]]]</span>
<span class="w">    </span><span class="k">foreach</span><span class="w"> </span>x<span class="w"> </span><span class="nv">$m</span><span class="w"> </span><span class="k">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">lappend</span><span class="w"> </span><span class="k">[expr</span><span class="w"> </span><span class="k">{</span><span class="nv">$x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">$pivot</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s2">&quot;less&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nv">$x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">$pivot</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s2">&quot;greater&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;equal&quot;</span><span class="k">}]</span><span class="w"> </span><span class="nv">$x</span>
<span class="w">    </span><span class="k">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">[</span><span class="nb">concat</span><span class="w"> </span><span class="k">[</span><span class="nv">quicksort</span><span class="w"> </span><span class="nv">$less</span><span class="k">]</span><span class="w"> </span><span class="nv">$equal</span><span class="w"> </span><span class="k">[</span><span class="nv">quicksort</span><span class="w"> </span><span class="nv">$greater</span><span class="k">]]</span>
<span class="k">}</span>

<span class="nb">puts</span><span class="w"> </span><span class="k">[</span><span class="nv">quicksort</span><span class="w"> </span><span class="k">{</span><span class="nv">8</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">9</span><span class="k">}]</span><span class="w"> </span><span class="k">;</span><span class="c"># =&gt; 1 2 3 4 5 6 7 8 9</span>
</pre></div>
<h2><span class="mw-headline" id="True_BASIC"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:True_BASIC" title="Category:True BASIC">True BASIC</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=180" title="Edit section: True BASIC">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-qbasic mw-content-ltr" dir="ltr"><pre><span></span><span class="kr">SUB</span><span class="w"> </span><span class="nl">quicksort</span><span class="w"> </span><span class="p">(</span><span class="vg">arr</span><span class="p">(),</span><span class="w"> </span><span class="vg">l</span><span class="p">,</span><span class="w"> </span><span class="vg">r</span><span class="p">)</span>
<span class="w">    </span><span class="kd">LET</span><span class="w"> </span><span class="vg">lidx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">round</span><span class="p">(</span><span class="vg">l</span><span class="p">)</span>
<span class="w">    </span><span class="kd">LET</span><span class="w"> </span><span class="vg">ridx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">round</span><span class="p">(</span><span class="vg">r</span><span class="p">)</span>
<span class="w">    </span><span class="kr">IF</span><span class="w"> </span><span class="p">(</span><span class="vg">r</span><span class="o">-</span><span class="vg">l</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="kr">THEN</span>
<span class="w">       </span><span class="kd">LET</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">round</span><span class="p">((</span><span class="vg">l</span><span class="o">+</span><span class="vg">r</span><span class="p">)</span><span class="o">/</span><span class="il">2</span><span class="p">)</span>
<span class="w">       </span><span class="kr">DO</span><span class="w"> </span><span class="kr">WHILE</span><span class="w"> </span><span class="p">(</span><span class="vg">lidx</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="vg">pivot</span><span class="p">)</span><span class="w"> </span><span class="ow">AND</span><span class="w"> </span><span class="p">(</span><span class="vg">ridx</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">pivot</span><span class="p">)</span>
<span class="w">          </span><span class="kr">DO</span><span class="w"> </span><span class="kr">WHILE</span><span class="w"> </span><span class="p">(</span><span class="vg">arr</span><span class="p">(</span><span class="vg">lidx</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">pivot</span><span class="p">))</span><span class="w"> </span><span class="ow">AND</span><span class="w"> </span><span class="p">(</span><span class="vg">lidx</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="vg">pivot</span><span class="p">)</span>
<span class="w">             </span><span class="kd">LET</span><span class="w"> </span><span class="vg">lidx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">lidx</span><span class="o">+</span><span class="il">1</span>
<span class="w">          </span><span class="kr">LOOP</span>
<span class="w">          </span><span class="kr">DO</span><span class="w"> </span><span class="kr">WHILE</span><span class="w"> </span><span class="p">(</span><span class="vg">arr</span><span class="p">(</span><span class="vg">ridx</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">pivot</span><span class="p">))</span><span class="w"> </span><span class="ow">AND</span><span class="w"> </span><span class="p">(</span><span class="vg">ridx</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">pivot</span><span class="p">)</span>
<span class="w">             </span><span class="kd">LET</span><span class="w"> </span><span class="vg">ridx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">ridx</span><span class="il">-1</span>
<span class="w">          </span><span class="kr">LOOP</span>
<span class="w">          </span><span class="kd">LET</span><span class="w"> </span><span class="vg">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">lidx</span><span class="p">)</span>
<span class="w">          </span><span class="kd">LET</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">lidx</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">ridx</span><span class="p">)</span>
<span class="w">          </span><span class="kd">LET</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">ridx</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">temp</span>
<span class="w">          </span><span class="kd">LET</span><span class="w"> </span><span class="vg">lidx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">lidx</span><span class="o">+</span><span class="il">1</span>
<span class="w">          </span><span class="kd">LET</span><span class="w"> </span><span class="vg">ridx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">ridx</span><span class="il">-1</span>
<span class="w">          </span><span class="kr">IF</span><span class="w"> </span><span class="p">(</span><span class="vg">lidx</span><span class="il">-1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="kr">THEN</span>
<span class="w">             </span><span class="kd">LET</span><span class="w"> </span><span class="vg">ridx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">ridx</span><span class="o">+</span><span class="il">1</span>
<span class="w">             </span><span class="kd">LET</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">ridx</span>
<span class="w">          </span><span class="k">ELSEIF</span><span class="w"> </span><span class="p">(</span><span class="vg">ridx</span><span class="o">+</span><span class="il">1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="kr">THEN</span>
<span class="w">             </span><span class="kd">LET</span><span class="w"> </span><span class="vg">lidx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">lidx</span><span class="il">-1</span>
<span class="w">             </span><span class="kd">LET</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">lidx</span>
<span class="w">          </span><span class="kr">END</span><span class="w"> </span><span class="kr">IF</span>
<span class="w">       </span><span class="kr">LOOP</span>
<span class="w">       </span><span class="kr">CALL</span><span class="w"> </span><span class="vg">quicksort</span><span class="w"> </span><span class="p">(</span><span class="vg">arr</span><span class="p">(),</span><span class="w"> </span><span class="vg">l</span><span class="p">,</span><span class="w"> </span><span class="vg">pivot</span><span class="il">-1</span><span class="p">)</span>
<span class="w">       </span><span class="kr">CALL</span><span class="w"> </span><span class="vg">quicksort</span><span class="w"> </span><span class="p">(</span><span class="vg">arr</span><span class="p">(),</span><span class="w"> </span><span class="vg">pivot</span><span class="o">+</span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">r</span><span class="p">)</span>
<span class="w">    </span><span class="kr">END</span><span class="w"> </span><span class="kr">IF</span>
<span class="kr">END</span><span class="w"> </span><span class="kr">SUB</span>

<span class="kd">DIM</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="il">15</span><span class="p">)</span>
<span class="kd">LET</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">round</span><span class="p">(</span><span class="kr">LBOUND</span><span class="p">(</span><span class="vg">arr</span><span class="p">))</span>
<span class="kd">LET</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">round</span><span class="p">(</span><span class="kr">UBOUND</span><span class="p">(</span><span class="vg">arr</span><span class="p">))</span>

<span class="kr">RANDOMIZE</span>
<span class="kr">FOR</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="vg">b</span>
<span class="w">    </span><span class="kd">LET</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">round</span><span class="p">(</span><span class="kr">INT</span><span class="p">(</span><span class="kr">RND</span><span class="o">*</span><span class="il">99</span><span class="p">))</span>
<span class="kr">NEXT</span><span class="w"> </span><span class="vg">n</span>

<span class="kr">PRINT</span><span class="w"> </span><span class="s2">&quot;unsort &quot;</span><span class="p">;</span>
<span class="kr">FOR</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="vg">b</span>
<span class="w">    </span><span class="kr">PRINT</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">n</span><span class="p">);</span><span class="w"> </span><span class="s2">&quot; &quot;</span><span class="p">;</span>
<span class="kr">NEXT</span><span class="w"> </span><span class="vg">n</span>

<span class="kr">PRINT</span>
<span class="kr">PRINT</span><span class="w"> </span><span class="s2">&quot;  sort &quot;</span><span class="p">;</span>
<span class="kr">CALL</span><span class="w"> </span><span class="vg">quicksort</span><span class="w"> </span><span class="p">(</span><span class="vg">arr</span><span class="p">(),</span><span class="w"> </span><span class="vg">a</span><span class="p">,</span><span class="w"> </span><span class="vg">b</span><span class="p">)</span>
<span class="kr">FOR</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="vg">b</span>
<span class="w">    </span><span class="kr">PRINT</span><span class="w"> </span><span class="vg">arr</span><span class="p">(</span><span class="vg">n</span><span class="p">);</span><span class="w"> </span><span class="s2">&quot; &quot;</span><span class="p">;</span>
<span class="kr">NEXT</span><span class="w"> </span><span class="vg">n</span>
<span class="kr">END</span>
</pre></div>
<h2><span class="mw-headline" id="TypeScript"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:TypeScript" title="Category:TypeScript">TypeScript</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=181" title="Edit section: TypeScript">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-text mw-content-ltr" dir="ltr"><pre><span></span>/**
  Generic quicksort function using typescript generics.
  Follows quicksort as done in CLRS.
*/
export type Comparator&lt;T&gt; = (o1: T, o2: T) =&gt; number;


export function quickSort&lt;T&gt;(array: T[], compare: Comparator&lt;T&gt;) {
  if (array.length &lt;= 1 || array == null) {
    return;
  }
  sort(array, compare, 0, array.length - 1);
}

function sort&lt;T&gt;(
    array: T[], compare: Comparator&lt;T&gt;, low: number, high: number) {
  if (low &lt; high) {
    const partIndex = partition(array, compare, low, high);
    sort(array, compare, low, partIndex - 1);
    sort(array, compare, partIndex + 1, high);
  }
}

function partition&lt;T&gt;(
    array: T[], compare: Comparator&lt;T&gt;, low: number, high: number): number {
  const pivot: T = array[high];
  let i: number = low - 1;
  for (let j = low; j &lt;= high - 1; j++) {
    if (compare(array[j], pivot) == -1) {
      i = i + 1;
      swap(array, i, j)
    }
  }
  if (compare(array[high], array[i + 1]) == -1) {
    swap(array, i + 1, high);
  }
  return i + 1;
}

function swap&lt;T&gt;(array: T[], i: number, j: number) {
  const newJ: T = array[i];
  array[i] = array[j];
  array[j] = newJ;
}

export function testQuickSort(): void {
  function numberComparator(o1: number, o2: number): number {
    if (o1 &lt; o2) {
      return -1;
    } else if (o1 == o2) {
      return 0;
    }
    return 1;
  }
  let tests: number[][] = [
    [], [1], [2, 1], [-1, 2, -3], [3, 16, 8, -5, 6, 4], [1, 2, 3, 4, 5, 6],
    [1, 2, 3, 4, 5]
  ];

  for (let testArray of tests) {
    quickSort(testArray, numberComparator);
    console.log(testArray);
  }
}
</pre></div>
<h2><span id="uBasic.2F4tH"></span><span class="mw-headline" id="uBasic/4tH"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:UBasic/4tH" title="Category:UBasic/4tH">uBasic/4tH</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=182" title="Edit section: uBasic/4tH">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-text mw-content-ltr" dir="ltr"><pre><span></span>PRINT &quot;Quick sort:&quot;
  n = FUNC (_InitArray)
  PROC _ShowArray (n)
  PROC _Quicksort (n)
  PROC _ShowArray (n)
PRINT
 
END


_InnerQuick PARAM(2)
  LOCAL(4)

  IF b@ &lt; 2 THEN RETURN
  f@ = a@ + b@ - 1
  c@ = a@
  e@ = f@
  d@ = @((c@ + e@) / 2)

  DO
    DO WHILE @(c@) &lt; d@
      c@ = c@ + 1
    LOOP

    DO WHILE @(e@) &gt; d@
      e@ = e@ - 1
    LOOP

    IF c@ - 1 &lt; e@ THEN
      PROC _Swap (c@, e@)
      c@ = c@ + 1
      e@ = e@ - 1
    ENDIF

    UNTIL c@ &gt; e@
  LOOP

  IF a@ &lt; e@ THEN PROC _InnerQuick (a@, e@ - a@ + 1)
  IF c@ &lt; f@ THEN PROC _InnerQuick (c@, f@ - c@ + 1)
RETURN


_Quicksort PARAM(1)                   &#39; Quick sort
  PROC _InnerQuick (0, a@)
RETURN
 
 
_Swap PARAM(2)                         &#39; Swap two array elements
  PUSH @(a@)
  @(a@) = @(b@)
  @(b@) = POP()
RETURN
 
 
_InitArray                             &#39; Init example array
  PUSH 4, 65, 2, -31, 0, 99, 2, 83, 782, 1
 
  FOR i = 0 TO 9
    @(i) = POP()
  NEXT
 
RETURN (i)
 
 
_ShowArray PARAM (1)                   &#39; Show array subroutine
  FOR i = 0 TO a@-1
    PRINT @(i),
  NEXT
 
  PRINT
RETURN
</pre></div>
<h2><span class="mw-headline" id="UnixPipes"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:UnixPipes" title="Category:UnixPipes">UnixPipes</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=183" title="Edit section: UnixPipes">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/Zsh" class="mw-redirect" title="Zsh">Zsh</a></div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>split<span class="o">()</span> <span class="o">{</span>
  <span class="o">(</span><span class="k">while</span> <span class="nb">read</span> n <span class="p">;</span> <span class="k">do</span>
      <span class="nb">test</span> <span class="nv">$1</span> -gt <span class="nv">$n</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="nv">$n</span> &gt; <span class="nv">$2</span> <span class="o">||</span> <span class="nb">echo</span> <span class="nv">$n</span> &gt; <span class="nv">$3</span>
  <span class="k">done</span><span class="o">)</span>
<span class="o">}</span>

qsort<span class="o">()</span> <span class="o">{</span>
 <span class="o">(</span><span class="nb">read</span> p<span class="p">;</span> <span class="nb">test</span> -n <span class="s2">&quot;</span><span class="nv">$p</span><span class="s2">&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">(</span>
     <span class="nv">lc</span><span class="o">=</span><span class="s2">&quot;1.</span><span class="nv">$1</span><span class="s2">&quot;</span> <span class="p">;</span> <span class="nv">gc</span><span class="o">=</span><span class="s2">&quot;2.</span><span class="nv">$1</span><span class="s2">&quot;</span>
     split <span class="nv">$p</span> &gt;<span class="o">(</span>qsort <span class="nv">$lc</span> &gt;<span class="nv">$lc</span><span class="o">)</span> &gt;<span class="o">(</span>qsort <span class="nv">$gc</span> &gt;<span class="nv">$gc</span><span class="o">)</span><span class="p">;</span>
     cat <span class="nv">$lc</span> &lt;<span class="o">(</span><span class="nb">echo</span> <span class="nv">$p</span><span class="o">)</span> <span class="nv">$gc</span>
     rm -f <span class="nv">$lc</span> <span class="nv">$gc</span><span class="p">;</span>
 <span class="o">))</span>
<span class="o">}</span>

cat to.sort <span class="p">|</span> qsort
</pre></div>
<h2><span class="mw-headline" id="Ursala"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Ursala" title="Category:Ursala">Ursala</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=184" title="Edit section: Ursala">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The distributing bipartition operator, *|, is useful for this
algorithm. The pivot is chosen as the greater of the first two
items, this being the least sophisticated method sufficient to
ensure termination. The quicksort function is a higher order
function parameterized by the relational predicate p, which
can be chosen appropriately for the type of items in the list
being sorted. This example demonstrates sorting a list of
natural numbers.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>#import nat

quicksort "p" = ~&amp;itB^?a\~&amp;a ^|WrlT/~&amp; "p"*|^\~&amp; "p"?hthPX/~&amp;th ~&amp;h

#cast %nL

example = quicksort(nleq) &lt;694,1377,367,506,3712,381,1704,1580,475,1872&gt;</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>&lt;367,381,475,506,694,1377,1580,1704,1872,3712&gt;
</pre>
<h2><span class="mw-headline" id="V"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:V" title="Category:V">V</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=185" title="Edit section: V">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-v mw-content-ltr" dir="ltr"><pre><span></span><span class="p">[</span><span class="n">qsort</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="n">joinparts</span><span class="w"> </span><span class="p">[</span><span class="n">p</span><span class="w"> </span><span class="p">[</span><span class="o">*</span><span class="n">l1</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="o">*</span><span class="n">l2</span><span class="p">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="o">*</span><span class="n">l1</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">*</span><span class="n">l2</span><span class="p">]]</span><span class="w"> </span><span class="n">view</span><span class="p">].</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="n">split_on_first</span><span class="w"> </span><span class="n">uncons</span><span class="w"> </span><span class="p">[</span><span class="o">&gt;</span><span class="p">]</span><span class="w"> </span><span class="n">split</span><span class="p">].</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="k">small</span><span class="o">?</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">[]</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="n">split_on_first</span><span class="w"> </span><span class="p">[</span><span class="n">l1</span><span class="w"> </span><span class="n">l2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="n">l1</span><span class="w"> </span><span class="n">qsort</span><span class="w"> </span><span class="n">l2</span><span class="w"> </span><span class="n">qsort</span><span class="w"> </span><span class="n">joinparts</span><span class="p">]]</span><span class="w"> </span><span class="n">view</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="n">ifte</span><span class="p">].</span><span class="w"></span>
</pre></div>
<p>The way of joy (using binrec)
</p>
<div class="mw-highlight mw-highlight-lang-v mw-content-ltr" dir="ltr"><pre><span></span><span class="p">[</span><span class="n">qsort</span><span class="w"></span>
<span class="w">   </span><span class="p">[</span><span class="k">small</span><span class="o">?</span><span class="p">]</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">     </span><span class="p">[</span><span class="n">uncons</span><span class="w"> </span><span class="p">[</span><span class="o">&gt;</span><span class="p">]</span><span class="w"> </span><span class="n">split</span><span class="p">]</span><span class="w"></span>
<span class="w">     </span><span class="p">[[</span><span class="n">p</span><span class="w"> </span><span class="p">[</span><span class="o">*</span><span class="n">l</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="o">*</span><span class="n">g</span><span class="p">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="o">*</span><span class="n">l</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">*</span><span class="n">g</span><span class="p">]]</span><span class="w"> </span><span class="n">view</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="n">binrec</span><span class="p">].</span><span class="w"></span>
</pre></div>
<h2><span class="mw-headline" id="VBA"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:VBA" title="Category:VBA">VBA</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=186" title="Edit section: VBA">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This is the "simple" quicksort, using temporary arrays.
</p>
<div class="mw-highlight mw-highlight-lang-vbnet mw-content-ltr" dir="ltr"><pre><span></span><span class="k">Public</span><span class="w"> </span><span class="k">Sub</span><span class="w"> </span><span class="nf">Quick</span><span class="p">(</span><span class="n">a</span><span class="p">()</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Variant</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Integer</span><span class="p">)</span><span class="w"></span>
<span class="c">&#39; quicksort a Variant array (1-based, numbers or strings)</span><span class="w"></span>
<span class="k">Dim</span><span class="w"> </span><span class="n">aLess</span><span class="p">()</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Variant</span><span class="w"></span>
<span class="k">Dim</span><span class="w"> </span><span class="n">aEq</span><span class="p">()</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Variant</span><span class="w"></span>
<span class="k">Dim</span><span class="w"> </span><span class="n">aGreater</span><span class="p">()</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Variant</span><span class="w"></span>
<span class="k">Dim</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Variant</span><span class="w"></span>
<span class="k">Dim</span><span class="w"> </span><span class="n">naLess</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Integer</span><span class="w"></span>
<span class="k">Dim</span><span class="w"> </span><span class="n">naEq</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Integer</span><span class="w"></span>
<span class="k">Dim</span><span class="w"> </span><span class="n">naGreater</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Integer</span><span class="w"></span>

<span class="k">If</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">Then</span><span class="w"></span>
<span class="w">    </span><span class="c">&#39;choose pivot in the middle of the array</span><span class="w"></span>
<span class="w">    </span><span class="n">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">(</span><span class="n">Int</span><span class="p">((</span><span class="n">last</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="c">&#39;construct arrays</span><span class="w"></span>
<span class="w">    </span><span class="n">naLess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="n">naEq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="n">naGreater</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="k">For</span><span class="w"> </span><span class="k">Each</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="ow">In</span><span class="w"> </span><span class="n">a</span><span class="p">()</span><span class="w"></span>
<span class="w">      </span><span class="k">If</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="k">Then</span><span class="w"></span>
<span class="w">        </span><span class="n">naGreater</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">naGreater</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">        </span><span class="k">ReDim</span><span class="w"> </span><span class="n">Preserve</span><span class="w"> </span><span class="n">aGreater</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="k">To</span><span class="w"> </span><span class="n">naGreater</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">aGreater</span><span class="p">(</span><span class="n">naGreater</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">el</span><span class="w"></span>
<span class="w">      </span><span class="k">ElseIf</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">pivot</span><span class="w"> </span><span class="k">Then</span><span class="w"></span>
<span class="w">        </span><span class="n">naLess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">naLess</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">        </span><span class="k">ReDim</span><span class="w"> </span><span class="n">Preserve</span><span class="w"> </span><span class="n">aLess</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="k">To</span><span class="w"> </span><span class="n">naLess</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">aLess</span><span class="p">(</span><span class="n">naLess</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">el</span><span class="w"></span>
<span class="w">      </span><span class="k">Else</span><span class="w"></span>
<span class="w">        </span><span class="n">naEq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">naEq</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">        </span><span class="k">ReDim</span><span class="w"> </span><span class="n">Preserve</span><span class="w"> </span><span class="n">aEq</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="k">To</span><span class="w"> </span><span class="n">naEq</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">aEq</span><span class="p">(</span><span class="n">naEq</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">el</span><span class="w"></span>
<span class="w">      </span><span class="k">End</span><span class="w"> </span><span class="k">If</span><span class="w"></span>
<span class="w">    </span><span class="k">Next</span><span class="w"></span>
<span class="w">    </span><span class="c">&#39;sort arrays &quot;less&quot; and &quot;greater&quot;</span><span class="w"></span>
<span class="w">    </span><span class="n">Quick</span><span class="w"> </span><span class="n">aLess</span><span class="p">(),</span><span class="w"> </span><span class="n">naLess</span><span class="w"></span>
<span class="w">    </span><span class="n">Quick</span><span class="w"> </span><span class="n">aGreater</span><span class="p">(),</span><span class="w"> </span><span class="n">naGreater</span><span class="w"></span>
<span class="w">    </span><span class="c">&#39;concatenate</span><span class="w"></span>
<span class="w">    </span><span class="n">P</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">    </span><span class="k">For</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">To</span><span class="w"> </span><span class="n">naLess</span><span class="w"></span>
<span class="w">      </span><span class="n">a</span><span class="p">(</span><span class="n">P</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aLess</span><span class="p">(</span><span class="n">i</span><span class="p">):</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">    </span><span class="k">Next</span><span class="w"></span>
<span class="w">    </span><span class="k">For</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">To</span><span class="w"> </span><span class="n">naEq</span><span class="w"></span>
<span class="w">      </span><span class="n">a</span><span class="p">(</span><span class="n">P</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aEq</span><span class="p">(</span><span class="n">i</span><span class="p">):</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">    </span><span class="k">Next</span><span class="w"></span>
<span class="w">    </span><span class="k">For</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">To</span><span class="w"> </span><span class="n">naGreater</span><span class="w"></span>
<span class="w">      </span><span class="n">a</span><span class="p">(</span><span class="n">P</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aGreater</span><span class="p">(</span><span class="n">i</span><span class="p">):</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">    </span><span class="k">Next</span><span class="w"></span>
<span class="k">End</span><span class="w"> </span><span class="k">If</span><span class="w"></span>
<span class="k">End</span><span class="w"> </span><span class="k">Sub</span><span class="w"></span>

<span class="k">Public</span><span class="w"> </span><span class="k">Sub</span><span class="w"> </span><span class="nf">QuicksortTest</span><span class="p">()</span><span class="w"></span>
<span class="k">Dim</span><span class="w"> </span><span class="n">a</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="k">To</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Variant</span><span class="w"></span>

<span class="w"> </span><span class="c">&#39;populate a with numbers in descending order, then sort</span><span class="w"></span>
<span class="w"> </span><span class="k">For</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">To</span><span class="w"> </span><span class="mi">26</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">26</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">i</span><span class="p">:</span><span class="w"> </span><span class="k">Next</span><span class="w"></span>
<span class="w"> </span><span class="n">Quick</span><span class="w"> </span><span class="n">a</span><span class="p">(),</span><span class="w"> </span><span class="mi">26</span><span class="w"></span>
<span class="w"> </span><span class="k">For</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">To</span><span class="w"> </span><span class="mi">26</span><span class="p">:</span><span class="w"> </span><span class="n">Debug</span><span class="p">.</span><span class="n">Print</span><span class="w"> </span><span class="n">a</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="err">;</span><span class="p">:</span><span class="w"> </span><span class="k">Next</span><span class="w"></span>
<span class="w"> </span><span class="n">Debug</span><span class="p">.</span><span class="n">Print</span><span class="w"></span>
<span class="w"> </span><span class="c">&#39;now populate a with strings in descending order, then sort</span><span class="w"></span>
<span class="w"> </span><span class="k">For</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">To</span><span class="w"> </span><span class="mi">26</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Chr$</span><span class="p">(</span><span class="n">Asc</span><span class="p">(</span><span class="s">&quot;z&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="s">&quot;-stuff&quot;</span><span class="p">:</span><span class="w"> </span><span class="k">Next</span><span class="w"></span>
<span class="w"> </span><span class="n">Quick</span><span class="w"> </span><span class="n">a</span><span class="p">(),</span><span class="w"> </span><span class="mi">26</span><span class="w"></span>
<span class="w"> </span><span class="k">For</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">To</span><span class="w"> </span><span class="mi">26</span><span class="p">:</span><span class="w"> </span><span class="n">Debug</span><span class="p">.</span><span class="n">Print</span><span class="w"> </span><span class="n">a</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="err">;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="err">;</span><span class="p">:</span><span class="w"> </span><span class="k">Next</span><span class="w"></span>
<span class="w"> </span><span class="n">Debug</span><span class="p">.</span><span class="n">Print</span><span class="w"></span>
<span class="k">End</span><span class="w"> </span><span class="k">Sub</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>quicksorttest
 0  1  2  3  4  5  6  7  8  9  10  11  12  13  14  15  16  17  18  19  20  21  22  23  24  25 
a-stuff b-stuff c-stuff d-stuff e-stuff f-stuff g-stuff h-stuff i-stuff j-stuff k-stuff l-stuff m-stuff n-stuff o-stuff p-stuff q-stuff r-stuff s-stuff t-stuff u-stuff v-stuff w-stuff x-stuff y-stuff z-stuff </pre>
<p>Note: the "quicksort in place"
</p>
<h2><span class="mw-headline" id="VBScript"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:VBScript" title="Category:VBScript">VBScript</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=187" title="Edit section: VBScript">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="#BBC_BASIC">BBC BASIC</a></div>
<div class="mw-highlight mw-highlight-lang-vbnet mw-content-ltr" dir="ltr"><pre><span></span><span class="k">Function</span><span class="w"> </span><span class="nf">quicksort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">n</span><span class="p">)</span><span class="w"></span>
<span class="w">	</span><span class="k">If</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">Then</span><span class="w"></span>
<span class="w">		</span><span class="k">Exit</span><span class="w"> </span><span class="k">Function</span><span class="w"></span>
<span class="w">	</span><span class="nf">End</span><span class="w"> </span><span class="k">If</span><span class="w"></span>
<span class="w">	</span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">	</span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="w"></span>
<span class="w">	</span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="w"></span>
<span class="w">	</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr</span><span class="p">(</span><span class="n">Int</span><span class="p">((</span><span class="n">l</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">r</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span><span class="w"></span>
<span class="w">	</span><span class="k">Do</span><span class="w"> </span><span class="n">Until</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">r</span><span class="w"></span>
<span class="w">		</span><span class="k">Do</span><span class="w"> </span><span class="k">While</span><span class="w"> </span><span class="n">arr</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">p</span><span class="w"></span>
<span class="w">			</span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">		</span><span class="k">Loop</span><span class="w"></span>
<span class="w">		</span><span class="k">Do</span><span class="w"> </span><span class="k">While</span><span class="w"> </span><span class="n">arr</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">p</span><span class="w"></span>
<span class="w">			</span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"></span>
<span class="w">		</span><span class="k">Loop</span><span class="w"></span>
<span class="w">		</span><span class="k">If</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">Then</span><span class="w"></span>
<span class="w">			</span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="w"></span>
<span class="w">			</span><span class="n">arr</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="w"></span>
<span class="w">			</span><span class="n">arr</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="w"></span>
<span class="w">			</span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">			</span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">		</span><span class="k">End</span><span class="w"> </span><span class="k">If</span><span class="w"></span>
<span class="w">	</span><span class="k">Loop</span><span class="w"></span>
<span class="w">	</span><span class="k">If</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">Then</span><span class="w"></span>
<span class="w">		</span><span class="k">Call</span><span class="w"> </span><span class="n">quicksort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">r</span><span class="o">-</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">	</span><span class="k">End</span><span class="w"> </span><span class="k">If</span><span class="w"></span>
<span class="w">	</span><span class="k">If</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">Then</span><span class="w"></span>
<span class="w">		</span><span class="k">Call</span><span class="w"> </span><span class="n">quicksort</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="n">l</span><span class="p">,</span><span class="n">t</span><span class="o">-</span><span class="n">l</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">	</span><span class="k">End</span><span class="w"> </span><span class="k">If</span><span class="w"></span>
<span class="w">	</span><span class="n">quicksort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr</span><span class="w"></span>
<span class="k">End</span><span class="w"> </span><span class="k">Function</span><span class="w"></span>

<span class="n">myarray</span><span class="o">=</span><span class="n">Array</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quicksort</span><span class="p">(</span><span class="n">myarray</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">)</span><span class="w"></span>
<span class="n">WScript</span><span class="p">.</span><span class="n">Echo</span><span class="w"> </span><span class="n">Join</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="s">&quot;,&quot;</span><span class="p">)</span><span class="w"></span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>-1,0,1,2,3,4,5,5,6,7,8,9</pre>
<h2><span class="mw-headline" id="Visual_Basic"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Visual_Basic" title="Category:Visual Basic">Visual Basic</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=188" title="Edit section: Visual Basic">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/Visual_Basic" class="mw-redirect" title="Visual Basic">Visual Basic</a> version 5</div>
<div class="examplemeta workswith"><b>Works with</b>: <a href="/web/20230609112831/https://rosettacode.org/wiki/Visual_Basic" class="mw-redirect" title="Visual Basic">Visual Basic</a> version 6</div>
<p>QuickSort without swapping
</p>
<div class="mw-highlight mw-highlight-lang-vbnet mw-content-ltr" dir="ltr"><pre><span></span><span class="k">Sub</span><span class="w"> </span><span class="nf">QuickSort</span><span class="p">(</span><span class="n">arr</span><span class="p">()</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Integer</span><span class="p">,</span><span class="w"> </span><span class="k">ByVal</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Integer</span><span class="p">,</span><span class="w"> </span><span class="k">ByVal</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="ow">As</span><span class="w"> </span><span class="kt">Integer</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="c">&#39;First</span><span class="w"></span>
<span class="w">    </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="c">&#39;Last</span><span class="w"></span>
<span class="w">    </span><span class="n">Key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="c">&#39;Pivot</span><span class="w"></span>
<span class="w">    </span><span class="k">Do</span><span class="w"> </span><span class="k">While</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">j</span><span class="w"></span>
<span class="w">        </span><span class="k">Do</span><span class="w"> </span><span class="k">While</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="ow">And</span><span class="w"> </span><span class="n">Key</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">arr</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">        </span><span class="k">Loop</span><span class="w"></span>
<span class="w">        </span><span class="k">If</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">Then</span><span class="w"> </span><span class="n">arr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr</span><span class="p">(</span><span class="n">j</span><span class="p">):</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">        </span><span class="k">Do</span><span class="w"> </span><span class="k">While</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="ow">And</span><span class="w"> </span><span class="n">Key</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">arr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">        </span><span class="k">Loop</span><span class="w"></span>
<span class="w">        </span><span class="k">If</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="k">Then</span><span class="w"> </span><span class="n">arr</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr</span><span class="p">(</span><span class="n">i</span><span class="p">):</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">    </span><span class="k">Loop</span><span class="w"></span>
<span class="w">    </span><span class="n">arr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Key</span><span class="w"></span>
<span class="w">    </span><span class="k">If</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="k">Then</span><span class="w"> </span><span class="n">QuickSort</span><span class="w"> </span><span class="n">arr</span><span class="p">(),</span><span class="w"> </span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">    </span><span class="k">If</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">Then</span><span class="w"> </span><span class="n">QuickSort</span><span class="w"> </span><span class="n">arr</span><span class="p">(),</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="w"></span>
<span class="k">End</span><span class="w"> </span><span class="k">Sub</span><span class="w"></span>
</pre></div>
<h2><span id="V_.28Vlang.29"></span><span class="mw-headline" id="V_(Vlang)"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:V_(Vlang)" title="Category:V (Vlang)">V (Vlang)</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=189" title="Edit section: V (Vlang)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>fn partition(mut arr []int, low int, high int) int {
	pivot&#160;:= arr[high]
	mut i&#160;:= (low - 1)
	for j in low .. high {
		if arr[j] &lt; pivot {
			i++
			temp&#160;:= arr[i]
			arr[i] = arr[j]
			arr[j] = temp
		}
	}
	temp&#160;:= arr[i + 1]
	arr[i + 1] = arr[high]
	arr[high] = temp
	return i + 1
}

fn quick_sort(mut arr []int, low int, high int) {
	if low &lt; high {
		pi&#160;:= partition(mut arr, low, high)
		quick_sort(mut arr, low, pi - 1)
		quick_sort(mut arr, pi + 1, high)
	}
}

fn main() {
	mut arr&#160;:= [4, 65, 2, -31, 0, 99, 2, 83, 782, 1]
	n&#160;:= arr.len - 1
	println('Input: ' + arr.str())
	quick_sort(mut arr, 0, n)
	println('Output: ' + arr.str())
}</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>Input: [4, 65, 2, -31, 0, 99, 2, 83, 782, 1]
Output: [-31, 0, 1, 2, 2, 4, 65, 83, 99, 782]</pre>
<h2><span class="mw-headline" id="Wart"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Wart" title="Category:Wart">Wart</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=190" title="Edit section: Wart">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="p">(</span><span class="n">qsort</span> <span class="p">(</span><span class="n">pivot</span> <span class="o">...</span> <span class="n">ns</span><span class="p">))</span>
  <span class="p">(</span><span class="o">+</span> <span class="p">(</span><span class="n">qsort</span><span class="o">+</span><span class="n">keep</span> <span class="p">(</span><span class="n">fn</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="p">(</span><span class="n">_</span> <span class="o">&lt;</span> <span class="n">pivot</span><span class="p">))</span> <span class="n">ns</span><span class="p">)</span>
     <span class="nb">list</span><span class="o">.</span><span class="n">pivot</span>
     <span class="p">(</span><span class="n">qsort</span><span class="o">+</span><span class="n">keep</span> <span class="p">(</span><span class="n">fn</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="p">(</span><span class="n">_</span> <span class="o">&gt;</span> <span class="n">pivot</span><span class="p">))</span> <span class="n">ns</span><span class="p">))</span>

<span class="k">def</span> <span class="p">(</span><span class="n">qsort</span> <span class="n">x</span><span class="p">)</span> <span class="p">:</span><span class="n">case</span> <span class="n">x</span><span class="o">=</span><span class="n">nil</span>
  <span class="n">nil</span>
</pre></div>
<h2><span class="mw-headline" id="Wren"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Wren" title="Category:Wren">Wren</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=191" title="Edit section: Wren">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta libheader"><b>Library:</b> <a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Wren-sort" title="Category:Wren-sort">Wren-sort</a></div>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="k">import</span> <span class="s2">&quot;/sort&quot;</span> <span class="k">for</span> <span class="nx">Sort</span>

<span class="kd">var</span> <span class="kr">as</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mf">4</span><span class="p">,</span> <span class="mf">65</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="o">-</span><span class="mf">31</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">99</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">83</span><span class="p">,</span> <span class="mf">782</span><span class="p">,</span> <span class="mf">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">7</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">6</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">4</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">6</span><span class="p">,</span> <span class="mf">3</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="s2">&quot;lima&quot;</span><span class="p">,</span> <span class="s2">&quot;charlie&quot;</span><span class="p">,</span> <span class="s2">&quot;whiskey&quot;</span><span class="p">,</span> <span class="s2">&quot;golf&quot;</span><span class="p">,</span> <span class="s2">&quot;papa&quot;</span><span class="p">,</span> <span class="s2">&quot;alfa&quot;</span><span class="p">,</span> <span class="s2">&quot;india&quot;</span><span class="p">,</span> <span class="s2">&quot;foxtrot&quot;</span><span class="p">,</span> <span class="s2">&quot;kilo&quot;</span><span class="p">]</span>
<span class="p">]</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">a</span> <span class="ow">in</span> <span class="kr">as</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">System</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="s2">&quot;Before:&#160;%(a)&quot;</span><span class="p">)</span>
    <span class="nx">Sort</span><span class="p">.</span><span class="nx">quick</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
    <span class="nx">System</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="s2">&quot;After&#160;:&#160;%(a)&quot;</span><span class="p">)</span>
    <span class="nx">System</span><span class="p">.</span><span class="nx">print</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>Before: [4, 65, 2, -31, 0, 99, 2, 83, 782, 1]
After&#160;: [-31, 0, 1, 2, 2, 4, 65, 83, 99, 782]

Before: [7, 5, 2, 6, 1, 4, 2, 6, 3]
After&#160;: [1, 2, 2, 3, 4, 5, 6, 6, 7]

Before: [echo, lima, charlie, whiskey, golf, papa, alfa, india, foxtrot, kilo]
After&#160;: [alfa, charlie, echo, foxtrot, golf, india, kilo, lima, papa, whiskey]
</pre>
<h2><span class="mw-headline" id="Yabasic"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Yabasic" title="Category:Yabasic">Yabasic</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=192" title="Edit section: Yabasic">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Rosetta Code problem: <a rel="nofollow" class="external free" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/wiki/Sorting_algorithms/Quicksort">https://rosettacode.org/wiki/Sorting_algorithms/Quicksort</a>
</p><p>by Jjuanhdez, 03/2023
</p>
<div class="mw-highlight mw-highlight-lang-basic mw-content-ltr" dir="ltr"><pre><span></span><span class="vg">dim</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="il">15</span><span class="p">)</span>
<span class="vg">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span>
<span class="vg">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">arraysize</span><span class="p">(</span><span class="vg">array</span><span class="p">(),</span><span class="il">1</span><span class="p">)</span>

<span class="vg">for</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span>
<span class="w">    </span><span class="vg">array</span><span class="p">(</span><span class="vg">i</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">ran</span><span class="p">(</span><span class="il">1000</span><span class="p">)</span>
<span class="vg">next</span><span class="w"> </span><span class="vg">i</span>

<span class="vg">print</span><span class="w"> </span><span class="s2">&quot;unsort &quot;</span><span class="p">;</span>
<span class="vg">for</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span>
<span class="w">	</span><span class="vg">print</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="vg">i</span><span class="p">)</span><span class="w"> </span><span class="vg">using</span><span class="p">(</span><span class="s2">&quot;####&quot;</span><span class="p">);</span><span class="w"> </span>
<span class="w">	</span><span class="vg">if</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="vg">then</span><span class="w"> </span><span class="vg">print</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="w"> </span><span class="vg">else</span><span class="w"> </span><span class="vg">print</span><span class="w"> </span><span class="s2">&quot;, &quot;</span><span class="p">;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="vg">fi</span>
<span class="vg">next</span><span class="w"> </span><span class="vg">i</span>

<span class="vg">quickSort</span><span class="p">(</span><span class="vg">array</span><span class="p">(),</span><span class="w"> </span><span class="vg">a</span><span class="p">,</span><span class="w"> </span><span class="vg">b</span><span class="p">)</span>

<span class="vg">print</span><span class="w"> </span><span class="s2">&quot;\n  sort &quot;</span><span class="p">;</span>
<span class="vg">for</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span>
<span class="w">    </span><span class="vg">print</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="vg">i</span><span class="p">)</span><span class="w"> </span><span class="vg">using</span><span class="p">(</span><span class="s2">&quot;####&quot;</span><span class="p">);</span><span class="w"> </span>
<span class="w">    </span><span class="vg">if</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="vg">then</span><span class="w"> </span><span class="vg">print</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="w"> </span><span class="vg">else</span><span class="w"> </span><span class="vg">print</span><span class="w"> </span><span class="s2">&quot;, &quot;</span><span class="p">;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="vg">fi</span>
<span class="vg">next</span><span class="w"> </span><span class="vg">i</span>
<span class="vg">print</span>
<span class="vg">end</span>

<span class="vg">sub</span><span class="w"> </span><span class="vg">quickSort</span><span class="p">(</span><span class="vg">array</span><span class="p">(),</span><span class="w"> </span><span class="vg">l</span><span class="p">,</span><span class="w"> </span><span class="vg">r</span><span class="p">)</span>
<span class="w">    </span><span class="vg">local</span><span class="w"> </span><span class="vg">asize</span><span class="p">,</span><span class="w"> </span><span class="vg">i</span><span class="p">,</span><span class="w"> </span><span class="vg">j</span><span class="p">,</span><span class="w"> </span><span class="vg">pivot</span>
<span class="w">    </span>
<span class="w">    </span><span class="vg">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">r</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">l</span><span class="w"> </span><span class="o">+</span><span class="il">1</span>
<span class="w">    </span><span class="vg">if</span><span class="w"> </span><span class="vg">size</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="il">2</span><span class="w">  </span><span class="vg">return</span>
<span class="w">    </span>
<span class="w">    </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">l</span>
<span class="w">	</span><span class="vg">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">r</span>
<span class="w">    </span><span class="vg">pivot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="vg">l</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">int</span><span class="p">(</span><span class="vg">size</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="il">2</span><span class="p">))</span>
<span class="w">    </span>
<span class="w">    </span><span class="vg">repeat</span>
<span class="w">        </span><span class="vg">while</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="vg">i</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">pivot</span>
<span class="w">            </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">        </span><span class="vg">wend</span>
<span class="w">        </span><span class="vg">while</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="vg">j</span><span class="p">)</span>
<span class="w">            </span><span class="vg">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">j</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="w">        </span><span class="vg">wend</span>
<span class="w">        </span><span class="vg">if</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="vg">j</span><span class="w"> </span><span class="vg">then</span>
<span class="w">            </span><span class="vg">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="vg">i</span><span class="p">)</span>
<span class="w">            </span><span class="vg">array</span><span class="p">(</span><span class="vg">i</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">array</span><span class="p">(</span><span class="vg">j</span><span class="p">)</span>
<span class="w">            </span><span class="vg">array</span><span class="p">(</span><span class="vg">j</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">temp</span>
<span class="w">            </span><span class="vg">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span>
<span class="w">            </span><span class="vg">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">j</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="w">        </span><span class="vg">fi</span>
<span class="w">    </span><span class="vg">until</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">j</span>
<span class="w">    </span>
<span class="w">    </span><span class="vg">if</span><span class="w"> </span><span class="vg">l</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">j</span><span class="w">  </span><span class="vg">quickSort</span><span class="p">(</span><span class="vg">array</span><span class="p">(),</span><span class="w"> </span><span class="vg">l</span><span class="p">,</span><span class="w"> </span><span class="vg">j</span><span class="p">)</span>
<span class="w">    </span><span class="vg">if</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="vg">r</span><span class="w">  </span><span class="vg">quickSort</span><span class="p">(</span><span class="vg">array</span><span class="p">(),</span><span class="w"> </span><span class="vg">i</span><span class="p">,</span><span class="w"> </span><span class="vg">r</span><span class="p">)</span>
<span class="vg">end</span><span class="w"> </span><span class="vg">sub</span>
</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>unsort  582,  796,  598,  478,   27,  125,  477,  679,  133,  513,  154,   93,  451,  463,   20
  sort   20,   27,   93,  125,  133,  154,  451,  463,  477,  478,  513,  582,  598,  679,  796
</pre>
<h2><span class="mw-headline" id="XPL0"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:XPL0" title="Category:XPL0">XPL0</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=193" title="Edit section: XPL0">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>include c:\cxpl\codes;          \intrinsic 'code' declarations
string 0;                       \use zero-terminated strings

proc    QSort(Array, Num);      \Quicksort Array into ascending order
char    Array;                  \address of array to sort
int     Num;                    \number of elements in the array
int     I, J, Mid, Temp;
[I:= 0;
J:= Num-1;
Mid:= Array(J&gt;&gt;1);
while I &lt;= J do
       [while Array(I) &lt; Mid do I:= I+1;
        while Array(J) &gt; Mid do J:= J-1;
        if I &lt;= J then
                [Temp:= Array(I);  Array(I):= Array(J);  Array(J):= Temp;
                I:= I+1;
                J:= J-1;
                ];
        ];
if I &lt; Num-1 then QSort(@Array(I), Num-I);
if J &gt; 0 then QSort(Array, J+1);
];      \QSort

func    StrLen(Str);            \Return number of characters in an ASCIIZ string
char    Str;
int     I;
for I:= 0 to -1&gt;&gt;1-1 do
        if Str(I) = 0 then return I;

char    Str;
[Str:= "Pack my box with five dozen liquor jugs.";
QSort(Str, StrLen(Str), 1);
Text(0, Str);  CrLf(0);
]</pre></div>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>       .Pabcdeefghiiijklmnoooqrstuuvwxyz
</pre>
<h2><span class="mw-headline" id="Z80_Assembly"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Z80_Assembly" title="Category:Z80 Assembly">Z80 Assembly</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=194" title="Edit section: Z80 Assembly">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>sjasmplus syntax
</p>
<div class="mw-highlight mw-highlight-lang-asm mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">;--------------------------------------------------------------------------------------------------------------------</span>
<span class="c1">; Quicksort, inputs (__sdcccall(1) calling convention):</span>
<span class="c1">; HL = uint16_t* A (pointer to beginning of array)</span>
<span class="c1">; DE = uint16_t len (number of word elements in array)</span>
<span class="c1">; modifies: AF, A&#39;F&#39;, BC, DE, HL</span>
<span class="c1">; WARNING: array can&#39;t be aligned to start/end of 64ki address space, like HL == 0x0000, or having last value at 0xFFFE</span>
<span class="c1">; WARNING: stack space required is on average about 6*log(len) (depending on the data, in extreme case it may be more)</span>
<span class="nl">quicksort_a:</span><span class="w"></span>
<span class="w">    </span><span class="c1">; convert arguments to HL=A.begin(), DE=A.end() and continue with quicksort_a_impl</span>
<span class="w">    </span><span class="nf">ex</span><span class="w">      </span><span class="no">de</span><span class="p">,</span><span class="no">hl</span><span class="w"></span>
<span class="w">    </span><span class="nf">add</span><span class="w">     </span><span class="no">hl</span><span class="p">,</span><span class="no">hl</span><span class="w"></span>
<span class="w">    </span><span class="nf">add</span><span class="w">     </span><span class="no">hl</span><span class="p">,</span><span class="no">de</span><span class="w"></span>
<span class="w">    </span><span class="nf">ex</span><span class="w">      </span><span class="no">de</span><span class="p">,</span><span class="no">hl</span><span class="w"></span>
<span class="w">    </span><span class="c1">;  |</span>
<span class="w">    </span><span class="c1">; fallthrough into implementation</span>
<span class="w">    </span><span class="c1">;  |</span>
<span class="w">    </span><span class="c1">;  v</span>
<span class="c1">;--------------------------------------------------------------------------------------------------------------------</span>
<span class="c1">; Quicksort implementation, inputs:</span>
<span class="c1">; HL = uint16_t* A.begin() (pointer to beginning of array)</span>
<span class="c1">; DE = uint16_t* A.end() (pointer beyond array)</span>
<span class="c1">; modifies: AF, A&#39;F&#39;, BC, HL (DE is preserved)</span>
<span class="nl">quicksort_a_impl:</span><span class="w"></span>
<span class="w">    </span><span class="c1">; array must be located within 0x0002..0xFFFD</span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">c</span><span class="p">,</span><span class="no">l</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">b</span><span class="p">,</span><span class="no">h</span><span class="w">         </span><span class="c1">; BC = A.begin()</span>
<span class="w">    </span><span class="c1">; if (len &lt; 2) return; -&gt; if (end &lt;= begin+2) return;</span>
<span class="w">    </span><span class="nf">inc</span><span class="w">     </span><span class="no">hl</span><span class="w"></span>
<span class="w">    </span><span class="nf">inc</span><span class="w">     </span><span class="no">hl</span><span class="w"></span>
<span class="w">    </span><span class="nf">or</span><span class="w">      </span><span class="no">a</span><span class="w"></span>
<span class="w">    </span><span class="nf">sbc</span><span class="w">     </span><span class="no">hl</span><span class="p">,</span><span class="no">de</span><span class="w">       </span><span class="c1">; HL = -(2*len-2), len = (2-HL)/2</span>
<span class="w">    </span><span class="nf">ret</span><span class="w">     </span><span class="no">nc</span><span class="w">          </span><span class="c1">; case: begin+2 &gt;= end &lt;=&gt; (len &lt; 2)</span>

<span class="w">    </span><span class="nf">push</span><span class="w">    </span><span class="no">de</span><span class="w">          </span><span class="c1">; preserve A.end() for recursion</span>
<span class="w">    </span><span class="nf">push</span><span class="w">    </span><span class="no">bc</span><span class="w">          </span><span class="c1">; preserve A.begin() for recursion</span>

<span class="w">    </span><span class="c1">; uint16_t pivot = A[len / 2];</span>
<span class="w">    </span><span class="nf">rr</span><span class="w">      </span><span class="no">h</span><span class="w"></span>
<span class="w">    </span><span class="nf">rr</span><span class="w">      </span><span class="no">l</span><span class="w"></span>
<span class="w">    </span><span class="nf">dec</span><span class="w">     </span><span class="no">hl</span><span class="w"></span>
<span class="w">    </span><span class="nf">res</span><span class="w">     </span><span class="mi">0</span><span class="p">,</span><span class="no">l</span><span class="w"></span>
<span class="w">    </span><span class="nf">add</span><span class="w">     </span><span class="no">hl</span><span class="p">,</span><span class="no">de</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">a</span><span class="p">,(</span><span class="no">hl</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nf">inc</span><span class="w">     </span><span class="no">hl</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">l</span><span class="p">,(</span><span class="no">hl</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">h</span><span class="p">,</span><span class="no">b</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">b</span><span class="p">,</span><span class="no">l</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">l</span><span class="p">,</span><span class="no">c</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">c</span><span class="p">,</span><span class="no">a</span><span class="w">         </span><span class="c1">; HL = A.begin(), DE = A.end(), BC = pivot</span>

<span class="w">    </span><span class="c1">; flip HL/DE meaning, it makes simpler the recursive tail and (A[j] &gt; pivot) test</span>
<span class="w">    </span><span class="nf">ex</span><span class="w">      </span><span class="no">de</span><span class="p">,</span><span class="no">hl</span><span class="w">       </span><span class="c1">; DE = A.begin(), HL = A.end(), BC = pivot</span>
<span class="w">    </span><span class="nf">dec</span><span class="w">     </span><span class="no">de</span><span class="w">          </span><span class="c1">; but keep &quot;from&quot; address (related to A[i]) at -1 as &quot;default&quot; state</span>

<span class="w">    </span><span class="c1">; for (i = 0, j = len - 1;&#160;; i++, j--) {&#160;; DE = (A+i-1).hi, HL = A+j+1</span>
<span class="nl">.find_next_swap:</span><span class="w"></span>

<span class="w">    </span><span class="c1">; while (A[j] &gt; pivot) j--;</span>
<span class="nl">.find_j:</span><span class="w"></span>
<span class="w">    </span><span class="nf">dec</span><span class="w">     </span><span class="no">hl</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">a</span><span class="p">,</span><span class="no">b</span><span class="w"></span>
<span class="w">    </span><span class="nf">sub</span><span class="w">     </span><span class="p">(</span><span class="no">hl</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nf">dec</span><span class="w">     </span><span class="no">hl</span><span class="w">          </span><span class="c1">; HL = A+j (finally)</span>
<span class="w">    </span><span class="nf">jr</span><span class="w">      </span><span class="no">c</span><span class="p">,.</span><span class="no">find_j</span><span class="w">   </span><span class="c1">; if cf=1, A[j].hi &gt; pivot.hi</span>
<span class="w">    </span><span class="nf">jr</span><span class="w">      </span><span class="no">nz</span><span class="p">,.</span><span class="no">j_found</span><span class="w"> </span><span class="c1">; if zf=0, A[j].hi &lt; pivot.hi</span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">a</span><span class="p">,</span><span class="no">c</span><span class="w">         </span><span class="c1">; if (A[j].hi == pivot.hi) then A[j].lo vs pivot.lo is checked</span>
<span class="w">    </span><span class="nf">sub</span><span class="w">     </span><span class="p">(</span><span class="no">hl</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nf">jr</span><span class="w">      </span><span class="no">c</span><span class="p">,.</span><span class="no">find_j</span><span class="w"></span>
<span class="nl">.j_found:</span><span class="w"></span>

<span class="w">    </span><span class="c1">; while (A[i] &lt; pivot) i++;</span>
<span class="nl">.find_i:</span><span class="w"></span>
<span class="w">    </span><span class="nf">inc</span><span class="w">     </span><span class="no">de</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">a</span><span class="p">,(</span><span class="no">de</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nf">inc</span><span class="w">     </span><span class="no">de</span><span class="w">          </span><span class="c1">; DE = (A+i).hi (ahead +0.5 for swap)</span>
<span class="w">    </span><span class="nf">sub</span><span class="w">     </span><span class="no">c</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">a</span><span class="p">,(</span><span class="no">de</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nf">sbc</span><span class="w">     </span><span class="no">a</span><span class="p">,</span><span class="no">b</span><span class="w"></span>
<span class="w">    </span><span class="nf">jr</span><span class="w">      </span><span class="no">c</span><span class="p">,.</span><span class="no">find_i</span><span class="w">   </span><span class="c1">; cf=1 -&gt; A[i] &lt; pivot</span>

<span class="w">    </span><span class="c1">; if (i &gt;= j) break; // DE = (A+i).hi, HL = A+j, BC=pivot</span>
<span class="w">    </span><span class="nf">sbc</span><span class="w">     </span><span class="no">hl</span><span class="p">,</span><span class="no">de</span><span class="w">       </span><span class="c1">; cf=0 since `jr c,.find_i`</span>
<span class="w">    </span><span class="nf">jr</span><span class="w">      </span><span class="no">c</span><span class="p">,.</span><span class="no">swaps_done</span><span class="w"></span>
<span class="w">    </span><span class="nf">add</span><span class="w">     </span><span class="no">hl</span><span class="p">,</span><span class="no">de</span><span class="w">       </span><span class="c1">; DE = (A+i).hi, HL = A+j</span>

<span class="w">    </span><span class="c1">; swap(A[i], A[j]);</span>
<span class="w">    </span><span class="nf">inc</span><span class="w">     </span><span class="no">hl</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">a</span><span class="p">,(</span><span class="no">de</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nf">ldd</span><span class="w"></span>
<span class="w">    </span><span class="nf">ex</span><span class="w">      </span><span class="no">af</span><span class="p">,</span><span class="no">af</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="no">a</span><span class="p">,(</span><span class="no">de</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nf">ldi</span><span class="w"></span>
<span class="w">    </span><span class="nf">ex</span><span class="w">      </span><span class="no">af</span><span class="p">,</span><span class="no">af</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="p">(</span><span class="no">hl</span><span class="p">),</span><span class="no">a</span><span class="w">      </span><span class="c1">; Swap(A[i].hi, A[j].hi) done</span>
<span class="w">    </span><span class="nf">dec</span><span class="w">     </span><span class="no">hl</span><span class="w"></span>
<span class="w">    </span><span class="nf">ex</span><span class="w">      </span><span class="no">af</span><span class="p">,</span><span class="no">af</span><span class="w"></span>
<span class="w">    </span><span class="nf">ld</span><span class="w">      </span><span class="p">(</span><span class="no">hl</span><span class="p">),</span><span class="no">a</span><span class="w">      </span><span class="c1">; Swap(A[i].lo, A[j].lo) done</span>

<span class="w">    </span><span class="nf">inc</span><span class="w">     </span><span class="no">bc</span><span class="w"></span>
<span class="w">    </span><span class="nf">inc</span><span class="w">     </span><span class="no">bc</span><span class="w">          </span><span class="c1">; pivot value restored (was -=2 by ldd+ldi)</span>
<span class="w">    </span><span class="c1">; --j; HL = A+j is A+j+1 for next loop (ready)</span>
<span class="w">    </span><span class="c1">; ++i; DE = (A+i).hi is (A+i-1).hi for next loop (ready)</span>
<span class="w">    </span><span class="nf">jp</span><span class="w">      </span><span class="no">.find_next_swap</span><span class="w"></span>

<span class="nl">.swaps_done:</span><span class="w"></span>
<span class="w">    </span><span class="c1">; i &gt;= j, all elements were already swapped WRT pivot, call recursively for the two sub-parts</span>
<span class="w">    </span><span class="nf">dec</span><span class="w">     </span><span class="no">de</span><span class="w">          </span><span class="c1">; DE = A+i</span>

<span class="w">    </span><span class="c1">; quicksort_c(A, i);</span>
<span class="w">    </span><span class="nf">pop</span><span class="w">     </span><span class="no">hl</span><span class="w">          </span><span class="c1">; HL = A</span>
<span class="w">    </span><span class="nf">call</span><span class="w">    </span><span class="no">quicksort_a_impl</span><span class="w"></span>

<span class="w">    </span><span class="c1">; quicksort_c(A + i, len - i);</span>
<span class="w">    </span><span class="nf">ex</span><span class="w">      </span><span class="no">de</span><span class="p">,</span><span class="no">hl</span><span class="w">       </span><span class="c1">; HL = A+i</span>
<span class="w">    </span><span class="nf">pop</span><span class="w">     </span><span class="no">de</span><span class="w">          </span><span class="c1">; DE = end() (and return it preserved)</span>
<span class="w">    </span><span class="nf">jp</span><span class="w">      </span><span class="no">quicksort_a_impl</span><span class="w"></span>
</pre></div>
<p>Full example with test/debug data for ZX Spectrum is at [<a rel="nofollow" class="external text" href="https://web.archive.org/web/20230609112831/https://gist.github.com/ped7g/0c4e94796b474994ed88d0bdd1bf2f25">github</a>].
</p>
<h2><span class="mw-headline" id="zkl"><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Zkl" title="Category:Zkl">zkl</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;action=edit&amp;section=195" title="Edit section: zkl">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>These are the Wikipedia algorithms.
</p><p>Quick sort immutable sequence using crappy pivot choice:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>fcn qtSort(list,cmp=Op("&lt;")){	// sort immutable lists
   fcn(list,cmp,N){	// spendy to keep recreating cmp
      reg pivot=list[0], rest=list[1,*];
      left,right:=rest.filter22(cmp,pivot);
      N+=1;
      T.extend(self.fcn(left,cmp,N),T(pivot),self.fcn(right,cmp,N));
   }(list,cmp,0);
}</pre></div>
<p>In place quick sort:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>fcn qiSort(list,cmp='&lt;){		// in place quick sort
   fcn(list,left,right,cmp){
      if (left&lt;right){
	 // partition list
	 pivotIndex:=(left+right)/2; // or median of first,middle,last
	 pivot:=list[pivotIndex];
	 list.swap(pivotIndex,right);	// move pivot to end
	 pivotIndex:=left;
	 i:=left; do(right-left){	// foreach i in ([left..right-1])
	    if(cmp(list[i],pivot)){	// not cheap
	       list.swap(i,pivotIndex);
	       pivotIndex+=1;
	    }
	    i+=1;
	 }
	 list.swap(pivotIndex,right);	// move pivot to final place

	 // sort the partitions
         self.fcn(list,left,pivotIndex-1,cmp);
	 return(self.fcn(list,pivotIndex+1,right,cmp));
      }
   }(list,0,list.len()-1,cmp);
   list;
}</pre></div>
<!-- 
NewPP limit report
Parsed by mw141
Cached time: 20230609101458
Cache expiry: 864000
Reduced expiry: false
Complications: [showtoc]
[SMW] Intext annotation parser time: 0.001 seconds
CPU time usage: 1.538 seconds
Real time usage: 2.185 seconds
Preprocessor visited node count: 7048/1000000
Postexpand include size: 31396/2097152 bytes
Template argument size: 6103/2097152 bytes
Highest expansion depth: 6/100
Expensive parser function count: 0/99
Unstrip recursion depth: 0/20
Unstrip postexpand size: 1096858/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  281.401      1 -total
 41.96%  118.074    166 Template:Header
  4.54%   12.767      1 Template:Task
  2.21%    6.216      4 Template:Libheader
  1.77%    4.980     22 Template:Works_with
  1.60%    4.506     15 Template:Trans
  1.51%    4.255     62 Template:Out
  1.39%    3.912      1 Template:Omit_from
  0.80%    2.249      2 Template:Output
  0.79%    2.219      1 Template:Eff_note
-->

<!-- Saved in parser cache with key rosettacodewiki:pcache:idhash:560-0!canonical and timestamp 20230609101456 and revision id 343393.
 -->
</div><noscript><img src="https://web.archive.org/web/20230609112831im_/https://rosettacode.org/wiki/Special:CentralAutoLogin/start?type=1x1" alt="" title="" width="1" height="1" style="border: none; position: absolute;"/></noscript>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://web.archive.org/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;oldid=343393">https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;oldid=343393</a>"</div></div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/web/20230609112831/https://rosettacode.org/wiki/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Category:Pages_with_syntax_highlighting_errors&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages with syntax highlighting errors (page does not exist)">Pages with syntax highlighting errors</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Programming_Tasks" title="Category:Programming Tasks">Programming Tasks</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Sorting_Algorithms" title="Category:Sorting Algorithms">Sorting Algorithms</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Sorting" title="Category:Sorting">Sorting</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Recursion" title="Category:Recursion">Recursion</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:WikipediaSourced" title="Category:WikipediaSourced">WikipediaSourced</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:11l" title="Category:11l">11l</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:360_Assembly" title="Category:360 Assembly">360 Assembly</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:AArch64_Assembly" title="Category:AArch64 Assembly">AArch64 Assembly</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ABAP" title="Category:ABAP">ABAP</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ACL2" title="Category:ACL2">ACL2</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Action!" title="Category:Action!">Action!</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ActionScript" title="Category:ActionScript">ActionScript</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Ada" title="Category:Ada">Ada</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ALGOL_68" title="Category:ALGOL 68">ALGOL 68</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ALGOL_W" title="Category:ALGOL W">ALGOL W</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:APL" title="Category:APL">APL</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:AppleScript" title="Category:AppleScript">AppleScript</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Arc" title="Category:Arc">Arc</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ARM_Assembly" title="Category:ARM Assembly">ARM Assembly</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Arturo" title="Category:Arturo">Arturo</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ATS" title="Category:ATS">ATS</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:AutoHotkey" title="Category:AutoHotkey">AutoHotkey</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:AWK" title="Category:AWK">AWK</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:BASIC" title="Category:BASIC">BASIC</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:BBC_BASIC" title="Category:BBC BASIC">BBC BASIC</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:IS-BASIC" title="Category:IS-BASIC">IS-BASIC</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:QB64" title="Category:QB64">QB64</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:BCPL" title="Category:BCPL">BCPL</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Beads" title="Category:Beads">Beads</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Bracmat" title="Category:Bracmat">Bracmat</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:C" title="Category:C">C</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:C_sharp" title="Category:C sharp">C sharp</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:CafeOBJ" title="Category:CafeOBJ">CafeOBJ</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:C%2B%2B" title="Category:C++">C++</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Clojure" title="Category:Clojure">Clojure</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:COBOL" title="Category:COBOL">COBOL</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:CoffeeScript" title="Category:CoffeeScript">CoffeeScript</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Common_Lisp" title="Category:Common Lisp">Common Lisp</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Cowgol" title="Category:Cowgol">Cowgol</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Craft_Basic" title="Category:Craft Basic">Craft Basic</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Crystal" title="Category:Crystal">Crystal</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Curry" title="Category:Curry">Curry</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:D" title="Category:D">D</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Delphi" title="Category:Delphi">Delphi</a></li><li><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Category:SysUtils,StdCtrls&amp;action=edit&amp;redlink=1" class="new" title="Category:SysUtils,StdCtrls (page does not exist)">SysUtils,StdCtrls</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Dart" title="Category:Dart">Dart</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:E" title="Category:E">E</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:EasyLang" title="Category:EasyLang">EasyLang</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:EchoLisp" title="Category:EchoLisp">EchoLisp</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Eero" title="Category:Eero">Eero</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Eiffel" title="Category:Eiffel">Eiffel</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Elena" title="Category:Elena">Elena</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Elixir" title="Category:Elixir">Elixir</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Erlang" title="Category:Erlang">Erlang</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Emacs_Lisp" title="Category:Emacs Lisp">Emacs Lisp</a></li><li><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Category:Seq.el&amp;action=edit&amp;redlink=1" class="new" title="Category:Seq.el (page does not exist)">Seq.el</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:ERRE" title="Category:ERRE">ERRE</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:F_Sharp" title="Category:F Sharp">F Sharp</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Factor" title="Category:Factor">Factor</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Fe" title="Category:Fe">Fe</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Fexl" title="Category:Fexl">Fexl</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Forth" title="Category:Forth">Forth</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Fortran" title="Category:Fortran">Fortran</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:FreeBASIC" title="Category:FreeBASIC">FreeBASIC</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:FunL" title="Category:FunL">FunL</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:FutureBasic" title="Category:FutureBasic">FutureBasic</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Go" title="Category:Go">Go</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Haskell" title="Category:Haskell">Haskell</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Icon" title="Category:Icon">Icon</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Unicon" title="Category:Unicon">Unicon</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:IDL" title="Category:IDL">IDL</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Idris" title="Category:Idris">Idris</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Io" title="Category:Io">Io</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Isabelle" title="Category:Isabelle">Isabelle</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:J" title="Category:J">J</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Java" title="Category:Java">Java</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:JavaScript" title="Category:JavaScript">JavaScript</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Joy" title="Category:Joy">Joy</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Jq" title="Category:Jq">Jq</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Julia" title="Category:Julia">Julia</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:K" title="Category:K">K</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Koka" title="Category:Koka">Koka</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Kotlin" title="Category:Kotlin">Kotlin</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Lambdatalk" title="Category:Lambdatalk">Lambdatalk</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Lobster" title="Category:Lobster">Lobster</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Logo" title="Category:Logo">Logo</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Logtalk" title="Category:Logtalk">Logtalk</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Lua" title="Category:Lua">Lua</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Lucid" title="Category:Lucid">Lucid</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:M2000_Interpreter" title="Category:M2000 Interpreter">M2000 Interpreter</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:M4" title="Category:M4">M4</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Maclisp" title="Category:Maclisp">Maclisp</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Maple" title="Category:Maple">Maple</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Mathematica" title="Category:Mathematica">Mathematica</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Wolfram_Language" class="mw-redirect" title="Category:Wolfram Language">Wolfram Language</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:MATLAB" title="Category:MATLAB">MATLAB</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:MAXScript" title="Category:MAXScript">MAXScript</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Mercury" title="Category:Mercury">Mercury</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:MiniScript" title="Category:MiniScript">MiniScript</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Miranda" title="Category:Miranda">Miranda</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Modula-2" title="Category:Modula-2">Modula-2</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Modula-3" title="Category:Modula-3">Modula-3</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Mond" title="Category:Mond">Mond</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:MUMPS" title="Category:MUMPS">MUMPS</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Nanoquery" title="Category:Nanoquery">Nanoquery</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Nemerle" title="Category:Nemerle">Nemerle</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:NetRexx" title="Category:NetRexx">NetRexx</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Nial" title="Category:Nial">Nial</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Nim" title="Category:Nim">Nim</a></li><li><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Category:Procedural_(in_place)_algorithm&amp;action=edit&amp;redlink=1" class="new" title="Category:Procedural (in place) algorithm (page does not exist)">Procedural (in place) algorithm</a></li><li><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Category:Functional_(inmmutability)_algorithm&amp;action=edit&amp;redlink=1" class="new" title="Category:Functional (inmmutability) algorithm (page does not exist)">Functional (inmmutability) algorithm</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Nix" title="Category:Nix">Nix</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Oberon-2" title="Category:Oberon-2">Oberon-2</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Objeck" title="Category:Objeck">Objeck</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Objective-C" title="Category:Objective-C">Objective-C</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:OCaml" title="Category:OCaml">OCaml</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Octave" title="Category:Octave">Octave</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Oforth" title="Category:Oforth">Oforth</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Ol" title="Category:Ol">Ol</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:OoRexx" title="Category:OoRexx">OoRexx</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Oz" title="Category:Oz">Oz</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:PARI/GP" title="Category:PARI/GP">PARI/GP</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Pascal" title="Category:Pascal">Pascal</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Perl" title="Category:Perl">Perl</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Phix" title="Category:Phix">Phix</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:PHP" title="Category:PHP">PHP</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Picat" title="Category:Picat">Picat</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:PicoLisp" title="Category:PicoLisp">PicoLisp</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:PL/I" title="Category:PL/I">PL/I</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:PowerShell" title="Category:PowerShell">PowerShell</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Prolog" title="Category:Prolog">Prolog</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:PureBasic" title="Category:PureBasic">PureBasic</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Python" title="Category:Python">Python</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Qi" title="Category:Qi">Qi</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Quackery" title="Category:Quackery">Quackery</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:R" title="Category:R">R</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Racket" title="Category:Racket">Racket</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Raku" title="Category:Raku">Raku</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Red" title="Category:Red">Red</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:REXX" title="Category:REXX">REXX</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Ring" title="Category:Ring">Ring</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Ruby" title="Category:Ruby">Ruby</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Run_BASIC" title="Category:Run BASIC">Run BASIC</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Rust" title="Category:Rust">Rust</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:SASL" title="Category:SASL">SASL</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Sather" title="Category:Sather">Sather</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Scala" title="Category:Scala">Scala</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Scheme" title="Category:Scheme">Scheme</a></li><li><a href="/web/20230609112831/https://rosettacode.org/w/index.php?title=Category:R7rs&amp;action=edit&amp;redlink=1" class="new" title="Category:R7rs (page does not exist)">R7rs</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Seed7" title="Category:Seed7">Seed7</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:SETL" title="Category:SETL">SETL</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Sidef" title="Category:Sidef">Sidef</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Simula" title="Category:Simula">Simula</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Standard_ML" title="Category:Standard ML">Standard ML</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Swift" title="Category:Swift">Swift</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Symsyn" title="Category:Symsyn">Symsyn</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Tailspin" title="Category:Tailspin">Tailspin</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Tcl" title="Category:Tcl">Tcl</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:True_BASIC" title="Category:True BASIC">True BASIC</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:TypeScript" title="Category:TypeScript">TypeScript</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:UBasic/4tH" title="Category:UBasic/4tH">UBasic/4tH</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:UnixPipes" title="Category:UnixPipes">UnixPipes</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Ursala" title="Category:Ursala">Ursala</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:V" title="Category:V">V</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:GUISS/Omit" title="Category:GUISS/Omit">GUISS/Omit</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:VBA" title="Category:VBA">VBA</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:VBScript" title="Category:VBScript">VBScript</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Visual_Basic" title="Category:Visual Basic">Visual Basic</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:V_(Vlang)" title="Category:V (Vlang)">V (Vlang)</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Wart" title="Category:Wart">Wart</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Wren" title="Category:Wren">Wren</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Wren-sort" title="Category:Wren-sort">Wren-sort</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Yabasic" title="Category:Yabasic">Yabasic</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:XPL0" title="Category:XPL0">XPL0</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Z80_Assembly" title="Category:Z80 Assembly">Z80 Assembly</a></li><li><a href="/web/20230609112831/https://rosettacode.org/wiki/Category:Zkl" title="Category:Zkl">Zkl</a></li></ul></div></div>
				</div>
			</main>
			<div id="mw-data-after-content">
	<div class="mw-cookiewarning-container"><div class="mw-cookiewarning-text"><span>Cookies help us deliver our services. By using our services, you agree to our use of cookies.</span></div><form method="POST"><div class="oo-ui-layout oo-ui-horizontalLayout"><span class="oo-ui-widget oo-ui-widget-enabled oo-ui-buttonElement oo-ui-buttonElement-framed oo-ui-labelElement oo-ui-flaggedElement-progressive oo-ui-buttonWidget"><a role="button" tabindex="0" href="https://web.archive.org/web/20230609112831/https://meta.miraheze.org/wiki/Special:MyLanguage/Privacy_Policy#4._Cookies" rel="nofollow" class="oo-ui-buttonElement-button"><span class="oo-ui-iconElement-icon oo-ui-iconElement-noIcon oo-ui-image-progressive"></span><span class="oo-ui-labelElement-label">More information</span><span class="oo-ui-indicatorElement-indicator oo-ui-indicatorElement-noIndicator oo-ui-image-progressive"></span></a></span><span class="oo-ui-widget oo-ui-widget-enabled oo-ui-inputWidget oo-ui-buttonElement oo-ui-buttonElement-framed oo-ui-labelElement oo-ui-flaggedElement-primary oo-ui-flaggedElement-progressive oo-ui-buttonInputWidget"><button type="submit" tabindex="0" name="disablecookiewarning" value="OK" class="oo-ui-inputWidget-input oo-ui-buttonElement-button"><span class="oo-ui-iconElement-icon oo-ui-iconElement-noIcon oo-ui-image-invert"></span><span class="oo-ui-labelElement-label">OK</span><span class="oo-ui-indicatorElement-indicator oo-ui-indicatorElement-noIndicator oo-ui-image-invert"></span></button></span></div></form></div>
</div>

		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo">
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 28 May 2023, at 17:14.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://web.archive.org/web/20230609112831/https://www.gnu.org/licenses/fdl-1.3.en.html">GNU Free Document License 1.3</a> unless otherwise noted.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://web.archive.org/web/20230609112831/https://meta.miraheze.org/wiki/Special:MyLanguage/Privacy_Policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="/web/20230609112831/https://rosettacode.org/wiki/Rosetta_Code:About">About Rosetta Code</a></li>
	<li id="footer-places-disclaimer"><a href="/web/20230609112831/https://rosettacode.org/wiki/Rosetta_Code:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-termsofservice"><a href="https://web.archive.org/web/20230609112831/https://meta.miraheze.org/wiki/Special:MyLanguage/Terms_of_Use">Terms of Use</a></li>
	<li id="footer-places-donate"><a href="https://web.archive.org/web/20230609112831/https://meta.miraheze.org/wiki/Special:MyLanguage/Donate">Donate to Miraheze</a></li>
	<li id="footer-places-mobileview"><a href="https://web.archive.org/web/20230609112831/https://rosettacode.org/w/index.php?title=Sorting_algorithms/Quicksort&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://web.archive.org/web/20230609112831/https://meta.miraheze.org/wiki/Special:MyLanguage/Miraheze"><img src="https://web.archive.org/web/20230609112831im_/https://static.miraheze.org/commonswiki/f/ff/Powered_by_Miraheze.svg" alt="Hosted by Miraheze" width="88" height="31" loading="lazy"/></a><a href="https://web.archive.org/web/20230609112831/https://www.mediawiki.org/"><img src="/web/20230609112831im_/https://rosettacode.org/w/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/web/20230609112831im_/https://rosettacode.org/w/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /web/20230609112831im_/https://rosettacode.org/w/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a><a href="https://web.archive.org/web/20230609112831/https://www.semantic-mediawiki.org/wiki/Semantic_MediaWiki"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAABNCAYAAADNYApnAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAACbYAAAm2AHNRPEFAAAAB3RJTUUH5QcCDx837M/YpgAAN+hJREFUeNrtnXl4VdW5/z9r7zNkOCdzyBwSwhgIg8wQRhEBpQ4V67WoVSutFu/V/m7VUsSpqFhbtNcrtVoHxKFqURHpVZQhAmESAkEIEUJCEsh4CDlJzrj3/v1xONuTkSQEatus59n6cLL23mut/b7rnb9L0EbLzc1FCCE0TUvRNO1q4HIhxDghRJIQQtDbelsnm6Zp/9Jz0nytXNO0vcAXQoj1iqKclCRJy87ObnVvM+bZs2cPXq8XIUQfVVVvkSTpFrPZPMxiscihoaEYDAYMBgO9PNfLEL1r5mterxev10tDQwN2u11xuVzfqKq6WgjxBlADEMh4Oufs3LkTr9eLLMvjgGeCgoKmxMXFSVFRUZhMpl4m62W43naedXS5XNhsNioqKhSHw7EFWKJp2m4hBFOmTPmO4Xbs2OG/6UpJkl6Ijo7un5ycTHBwcO9H6SX+C27/bpu1w+GgpKSE2traY5qmLRZCfKaqKtOmTUNs377d32+8EGJNXFxc/9TUVGRZ7iXAXsLs/e7d/I4ej4eSkhIqKiqOqaq6UAixS9M0DOcmFws8GR0d3T8lJQVZlr8Xk+4lwF61759x/TVNw2Aw0LdvX9xud//q6uongZuAaoOmaWia9pOQkJAZKSkpGAwGNE275MTue53oNoF19h7/vL6bn4am9RJ17wbQPr10hxcCma6hoWFGU1PTTyRJ+p1BVdV0SZJuiYuLE8HBwfpiXopFFUKgaRoVNiffltmpqHUSYTXRP8lCalwIBlnq0XFIQuBweyk61UjRqUYcLi8pfUIYkGIlOswEGmi9RHlRCPDfcTPSNI2QkBDi4+PFiRMnFqqq+oFB07R5JpNpSFRU1EUlksBnC+H7cKVVjby1sYRPc09zsrIJl0fFIAv6RJqZMjyW2+emM6J/xAUTsBACRdXYlFfF6s+K2Vtgo67Bg6pqBAfJ9E+ycP3UZH40M4VIqwlV1XqJsnfj6bH5x8TEUF5enulwOObJt91222+ioqIy4+LidIlzsXZFPxFKkiD/+Fn+84/7+dvWcmrOulHOEbmqatQ3ejl4vI6tedUk9wlhQLK12TO6enkVlVc/PcFvXs7n4PE6HG4FTdPQAI9X5VSNg5wDNRw/1cC4IVGEhRrRtO6/r5coezeAQNqXZRm73S7Z7Xa3QdO0saGhoUiSdElsN0kSlFY18cCfDrCnwIYstSZSIUBCcLKyiSUv5xMVZmLS0GidKbuqRv5taxlPv1VAo9OLQZZa9THIvo3m0x2nMcoSv//FCKwhxn9bRuhVh3ua5iUsFgvAOAOQ4HeUXKqFfmvjSfYePdMmswU2WRaUVzfx3PuFDEsfgyXYQFeGKAk4WdXE/6w9RoPDiyyLDj+GJGls2HmaWaP7cNPlqShar5OgVxr2zJoaDAaABIMQQpz7x0UfnCQJTtU4WL/jlD6Q8zVZEuw9auPAsTomZHZNysmSYPO+So6XNyBJnVsYl0dhfe5pfjA5EbNJ7vQ4ewmwt3W0budSIoUh0CvZ3QXt7K4oCZ+aWF7jQOoCDTc0eXn142MUHK1BVbsyLli/twpF1ZA7+UJJCA4X11NV5yI1LoSuLkkvUfYyf1v8oTOef+AXaxdvvjA+b2FXvIBCCFRVo+hUA7FBXR/jmXo3gq4xaYPDyxm7m75xIaj/xAz0r8z8/4xaRzOGuxQ2nKZpCPxB7q6sLsSEm4mJDKIrfhMBBJmauhRb0zQIMknn7EXtn5poe1Xh78/G46clQ0uiupiDUzWIjw4iOsxMaVVTpxhP0zSCTTK3XZ3BlOHRKEoXbDhZYAwrIa+koNMeWFXTyEi00CfSjKr9+xBtryp8CSVcoJS7mASmaZDaJ4RZo/vwlw0nkDqh7CmqxpC+ViYOiybcYuqal1ISzBkfzxuflXCqxnFeBtc0n6135bg4rCGGLjF3T0ukfycGuBDfQWeeE2hD/aM0jWYSrrsqSHcmYJAFt1zZl8151Zw43dihM0NVNcJCjPz8mgyiwkxdjsOpikb/ZAu3XpnK794pRO1gQ9E0DVWFicOi+MHkxAvONulK8yeLu91uPB4PQgiCgoL031VV7bXH2tqMFQW3262voclkam3CCIGi+BIdjEYjqqr+w7SWZhLuUtkrfom17NYh/GrVQWrq3brHMnAnUs4x2//70UDmjo/vFAO0NX5JCO6cl07VGRerPyvB49WQpNa7nqpB/6RQHv1JJnGR5m4F2bvaJEnC6XSybds2Nm7cyIkTJ6ipqcFkMpGcnMyAAQOYPXs2w4YN+4cllX9fpaEsy+Tl5bFkyRKampq47rrruO+++1AD3NiSJHH69Gkee+wxGhsbefjhhxk4cGCzPv8QG+5SqzFCCOLCDEwdFE5esZ2Keg8Ot4Ki+Haf0CCZoWlh3HV1P+ZOiEeWOpdy1hYxqpqGJcTAkoWD6ZcYypqNJyk61YjLraKhYZAlgk0SyZFmJgwIIzxI1p0sF9NzK8syJ0+eZNmyZXz88cfY7fY2+z7//PMsWLCAJ554AqvV2muPBXybM2fOsG3bNpxOJ8OGDWs1b0mS2Lx5M6+99hqqqnLZZZcxaNCgS64O++lIVdXmNtyl2D0FUFfvZse+KqKCZa4cEc2IYbHYGr2UVTuIspoYlh7GyAERRFqMuleyu2PzhxVCggzcOS+dqyYmsK+wjoKTdpqcXvolWpBVhUNHalFVjZyvK4iPDcFsung1gUII6urqeOCBB/jggw98qrbBQFRUFMHBwSiKwtmzZ2loaKC6ulrHmvlnZaaLMeb2nhn4u6qqDBgwgPT0dJxOJyNGjOhxTa6zdKlLuEDxeik+pgbsPVRNRY3PXZ+ZEcH87CSMBglV03T1UlG1HlXr/MnKcZFmrpoQz1UT4tE0kCRfYL2+zklxeQPHT9o5fOwMozKjL6oquXHjRtatWwdAYmIiDz74INOnTyc0NBRFUaioqGDHjh28/fbbXHXVVURGRrYiFkmSkCSplbPFb7O0JAx/Fb/fLvTf3969/ns683x//5bPbHlPoCrf1pgCfwtknEA7VpIkZFlu1s+fPuWnZ0VRUFWV0aNH88knn+D1ehk0aFCbNpx/3G3N86LacBdfDYCyikb2HqpB0yDMYmLCiFgkCbyKb6HUzjC/EOdkpWge1NO0cyytQbs7IKgBkTlFheAgmQkj+3Cqqgm3RyU3r4r0ZCvhVlOPr4vfiN+yZYtu8N91110sXrxYJyohBBkZGUyaNIkf//jHmEwmWjq3JEnCZrOxc+dOiouL8Xg8mM1mMjMzGTNmDCEhISiKomcBVVRUsHbtWhwOB1lZWcyaNYtDhw6xa9cuGhoaMBgMpKenk52dTVhYmA6Ks2/fPvLz83G5XBiNRjIyMpg4cSIWi6UZ8UqSRFNTEwUFBRw4cIDGxkZUVcVoNJKens7EiRMJDw/XGUIIgcPh4G9/+xuVlZWkpKRw/fXXU1VVxbZt26iurgYgLCyMSZMmkZGRoc+lqKiIDRs2UFBQoEv+AwcO8Oyzz6KqKlFRUdxwww1YrVby8vLYsmULmqZhs9mYNGlSszFIkkR1dTW5ubmUlZXh8XgwmUwMHDiQsWPHYrVae8Tmu+Q2nBACr1dl54Eq7I0ehIDRQ6NJigtts+K6+S6kAQINAUJCKA5w1yDc1eCpB80LkhGMkWimGDBFo0lm0FSEpp430q5pMCg9nCEZERwosHG6uol9h2uZMT7hoqjZXq+XqqoqnVD79++vM2LLEqn4+Hh9lw9cl88//5ynn36a3bt343K59P5hYWHMmTOHZcuWMWjQIBRFQZZlSktLeeSRRzh79iwLFiwgLy+PVatWUV5ert8bFBTEnDlzeOqppzCbzTz66KN88sknnDlzRu8THBzMVVddxZNPPklaWpo+rm3btrFy5Uq2b9+OzWZrNofg4GCmTp3K448/zqhRo3RGbWho4A9/+APffPMN48aNo6mpiT/+8Y8UFBTo0kUIQXp6Og888AC33HILZrOZw4cP8+CDD+LxePR37Ny5k507dwIwYMAArrjiCiIiIsjNzeVXv/oVAEuWLGHSpEnNvsNHH33Ec889x4EDB/QNECA0NJTs7GweffRRRo8efUHSLpCGLpkNJwQUltRTUHTWR0gxIYweGoPws1N779Y0NCEBAuE4iVTzBVLNJkTDEfDUger0cYwQIIeCMQI1bBRa7CzU6Bk+BkTlfAE8o0Fiwog+FJXasTd62He4hiEZ4STE9Hx6l8FgoE+fPjojvfPOO0yYMIG0tLRm6lVbm6AQgg0bNnD33Xdz+vRpAKxWK1arFZvNRn19Pe+99x5FRUW8+uqrDB48uJUG8+WXX7J+/XocDkezZzudTj766CPq6uoQQrB58+ZWY3c4HHzwwQd4PB5eeeUVwsLC8Hg8/OlPf9JVZEmSMJvNeqjD4XDw2WefYbPZeOedd0hJSWn13IKCAh588EHq6upaSYaioiIefPBBXXIFBweTkpKC3W7XJaHFYiEyMhJVVUlISOgULs/LL7/MsmXLqK+v1z2fBoMBt9tNY2Mjn332GWVlZbzxxhsMHz78giWd7jS52BJOCGh0KOzMq8LhUjAaBBNHxhJhNZ2fmIUEbhvy6feRyt5ENBQgNOWc1GpRAqA4wF2N3FCIVvERUvhlKCm3o8ZdBVJIgMLa1mJoJPYJZtSQaL76uoK6eje7D1Yzb1pKh7HC7qyZLMtMnz6d119/HZfLxYYNGygtLWXu3LnMmDGDQYMGERcXh8lk0u0XPyGfOHGCZcuWcfr0aYKCgli4cCE333wzCQkJFBYW8tJLL/H3v/+dvXv3snLlSv7nf/4Hs9nc7P02mw2z2cyNN96og5R+9dVXfPTRR3g8HrZs2QKA2Wzmmmuu0fvk5OTw0Ucf4fV6+eyzz8jJyeEHP/gBZrOZ6667jpycHKZPn86sWbNISUlBURT27dvHqlWrKCsrY8+ePbz77rs88MADrdatvr4eIQTZ2dlce+21WCwWqqqqeOONNzh+/Dhnz57lz3/+M1dccQUTJkzgiy++YNu2bdx11124XC7mz5/PE088oaux0dHR7X4bSZLIycnhySefpL6+HqPRyJVXXskNN9xAfHw8x48f5/XXX2fPnj0cOXKETZs2MXz48G5/91aB70thwx0qtFFyqgGA9GQrQzIiUDt8r099lOxHkL99zCfVNK+PySRDBz7Qc7dqXkRdLqL+AKotB2/GQ2hBSaC1rxpIQjBmWDRHi89SWeMgv/AMQ/pFMCAtrN04YHe0AkVRmD17Nrfffjsvv/wyiqKQn59Pfn4+L7zwAomJiUyYMIH58+czZcoUYmJidCfHJ598wsGDBwG47bbb+N3vfkdISIjukRs1ahS33347X375JevWreOOO+5g8uTJrcawaNEifvvb3xIaGooQgh//+McoisLatWv1Pj/96U9Zvnw5FosFIQT/8R//QVNTExs2bMDpdJKTk8P8+fNRVZXZs2fz0UcfMWTIEEJCQvRnzJ49m9jYWBYvXozb7WbLli3ce++9BAUFtRrTjBkz+Mtf/tJMAo4ePZpbb72V2tpaDh48yIkTJxg2bBhhYWEcO3ZMX3+r1Urfvn31zak9DQHA4/GwevVqXa2/5ZZbWLFihe6YmjVrFjNmzGDJkiWMGzeOhQsXXlDyQSCPSS0lXE9fArDVudh1sBpF0QgJkpk4sg9BZll3ELQJUyBkpLpdGPIXIVd/fs4Wkzuf+SwECANCdSGVv43xm3uRGr8FIeuYKi0vDYgMNzMuKwZZFjhdCrkHqnC6lB6BUwhcF4vFwhNPPMGKFSvIysrSsySampo4duwYa9asYeHChSxYsICcnBzdKbFp0yYAYmJi+MlPfoLZbMbtduP1enG73cTHx3PrrbciyzK1tbXs3bu31TgSEhK44447CA4OxuPx4Ha7CQ8P5/rrr9c9fwkJCfz0pz8lJCRE7xMREcFNN92k96mrq9O9j8HBwYwePVp/ZmNjI3a7nYaGBsaPH09MTIw+P7/tFUh7ZrOZu+++m+TkZDwej35NnjyZESNG6O/z25x+L2RLr2KgRtCSQfz0Vl5ejh+PNSEhgcWLFxMeHq5n+rjdbtLT03nllVe47777iIqK0hmuO1crL+WF7Nbn1Vs1jd35NVTZnAAM7R9Jv2TrObNLtK2iCRnJfhDDkV8h2Q8BcjdKDL5jPKGBqN2MoeDXeIb+ES0oAbT21cusgVEcOX6WYyfrOVFqJ7/wDGOHxfSoLaeqKlarlXvvvZcbbriBr7/+ms2bN/P1119z9OhRbDYbHo+H7du3s3jxYtasWUNMTAyFhYX6Lv3MM8+0UheFEPrODXDs2LFWu3NaWpqu8umZNudsH7PZTFNTE+np6aSmpjbro2kaCQkJmEwmHA4HZ8+exev16udNHD16lI0bN5KXl8epU6dwuVwIIXA6ndTW1gLgcrl0z2Jgi4mJYejQoc3GKoTAbDbTt29f3cnhty87E4drT50sLS3V7d+hQ4eSnp6uO6wCW2hoqL42PcEbPZ7aJQmBkAJPCBGUnGrkwFEbaBARZmLc8BgkiY5VSVc1cuEjSPX5HaiPXTQiNRmpdhPyiT/gHfgESKZ2PZZBZokJI2IprWzE5VLYdbCa/qlWoiPMAb4XX+6ldgG2r3/HjY+PZ/78+cybN4+GhgYKCgpYu3Yta9asobq6moKCAt566y3uuece3SN59uxZPvzww/O+w+12txqfwWDQY2WBhCTLsv57YPwtsE+gZPczhyRJfPnll/zyl7+koKCgU1K+LUbwOzpavi8QkeB8jovOMIbX69WfExMTo2sXHX3HC0WNa7c8pzsRfkkSaBqU1zj4tqyB0qomTEaZ9IQQjhTaaGzyIEmCscNiiIsO7gB4VYAAw6m3kWpzfCpkT3puNAn51F9Ro6aj9LmqA3tO0C/FwpD0cPIKbFTbnGzZW0lcXCgnTjf6XNUJIWQkhhIbYfaFLLqQ5xioSvvX3+92tlgsjB8/nnHjxpGWlsb999+PqqocPnwYVVX18x6io6P5z//8T93uaE+KtpXy1JOZHZIkUVlZyaOPPkpBQQEmk4l58+YxdepUnWltNhvPP/98s/BCZ7NF2tWC2rn/fE5AfxKzXy0+ffo0TqdTX9e2GKWnYnBdjsO1tFv85SynbU7e2ljKuu2nOVXrxOFWkM7lRFrMMgPigpg6LJqRQ6I6XkgEkqME+dQ7CNSeZTi/eqk0IJf+BTVqCprB0maBkKaBwSAxcVQfvj1pZ1dhHR/vr6XJpdDk8jFGSJCBtPgQfjQjmRumJREWauh0hYEQArvdjsPhID4+vlkYwL8DG41GMjMzMZlMOJ1OnE4nkZGRDB06lMLCQpqamsjKyuK6667D6/U2U8MCsznOZ+y3V4Dcng3SVpiisLCQQ4cOATB37lxefvllwsPDdYYsKSnhL3/5i85w7W3ybf3e3r/b+l33G3RQ5qSqKn379iUlJYWCggK++eYbCgoKGDNmjK7qBiYL+E+PupCQQOD3kFruJp3FW/SpEoKi003c/0I+K98/xrFTjTjdii+2pmk0OLycrnOxrfAshTUu5HMQde0blwKpcr3PuYHExWky0tk9SGe2A1I74ziXqSIJ9pc1srvITnW9W2c2gCanl0NF9Tz2xhGWvXoYW72702amJEn83//9HzfccAN//etfqampQZIk/fw9g8FAQ0MDGzduxOn02b4ZGRmEh4cze/ZsJEnC4XDw5JNPsnfv3mZBWY/Hw9atW3n11VdxOp1tBmw7Muy7ogYGel39BJmQkEBYWBiKouj234EDB7DZbN2SCOcLr/jp8uTJk3o2zPlsvPj4eKZNmwZATU0NK1asoLy8HKPRqEu/PXv2cNNNN/HQQw9RWlp6QbioPWLDCQF1djePv3GEnAM1SJLPhmvLUa9pGh9uO83AFAuL5qd3oFw3Itm2+hwaPWG7tSflvI1INZvwxsz+TqS12JEcbpXfv/ct276x6V7N1h/cF7/7W045UWFGHrp54Hnh2YUQNDU18f7777Nnzx4WLVrEkCFDmDFjBqmpqT7kMJeLrVu36h7JsLAw5s+fjxCCq6++mvfff59Nmzaxd+9ebrrpJhYsWEBiYiKaplFQUMCHH36Iw+EgNDSU66+//oJtno76aJpGWFgYISEhOJ1O1q9fz+TJk5k4cSJer5fc3FyeeeYZGhsbu5WZ0dF74+LiiIiIwOFwsHPnTp599llGjhzJN998w/XXX8+QIUPavE+WZW6//XY+//xzTpw4wfr166moqOCaa67BarVy6tQp3n33XYqLi9m9ezd9+/blvvvuu6BskzZtuK4wnCQJPt9bxeb91c3qy9pbQI9X5bX/O8n0UbEMTrG0TkwWMpLzJFLDYV+w+2I2IZDs+QhvPZohrA01GXYdtvHJjopzGCwdz03VNN7bXM6ccXGMGxKJqorzxuH69OmD2WzG6XSyf/9+9u/f32Zfv7v88ssvx+v1Ehsby29/+1t+/vOfc/DgQY4fP87TTz/dOnPGaKSoqKhT0qu79ptfRRsyZAjz58/njTfeoKysjEWLFhEfH4+iKJw6dYrg4GDCw8M5e/Zsp6RmS62rLfVRURRSU1OZNWsWb775JvX19SxfvhxZllEUhcjIyFYM53+OoigMHz6cxx9/nP/+7/+msrKS3bt3s3v37lZjmTJlCtdee223VMpANb/NOFxXxKTTrfL3XZW4vWond0mfU2V7fm07cTeBcNeAtx642GVCAuEsRbgqW6muPmh0jQ27KrA3eToN/2eze/j7rkqf5/I8cZmQkBBWrFjBK6+8wpVXXkliYiJGo7HZM8PCwpg4cSLPP/88Dz74oF6AqigKo0aNYvXq1dx+++34Tzzyt+DgYIYPH86zzz7L3Xff3Wl7rD376Xz3qKqK2Wxm2bJl3HbbbURFReFwODhx4gRlZWWkpaWxdOlSMjMzO+UsOZ+6GygczGYzS5Ys4brrriMkJARN0/B6vXqWSlvhh8DnXn/99bz++utceeWVREZGNvPKxsXFceedd/LSSy+RmprarThcuyplV71UkhCcbfBQXNHUac+cLzlXZd+3dbi9KrLURnqjp86XiHzRmwCvHdw1EDqo1Ud1uhVOnG7q6n7G4WI7TpdXB5DtaC2Dg4O54YYbuOqqqygtLeXo0aOcPn1aJ+DBgwczZMgQIiIimgVz/Tv0oEGDeP755zl58iQHDhygqqoKWZbp168fWVlZxMbGNnPGpKam8vTTT+N0OklKStIZPDAOl5aWxooVK3C5XO32ycjI4JlnnsHtdtOvXz9kWdZjeM899xx33XUXBw8exOVyER0dzbhx40hISCAtLY0bbriBuLg4goODUVWV0NBQHnzwQWpqaggLC8N/oExLIl2wYAGZmZnIsqwnEvvqHH0OkJdeeok9e/Zw7NgxJEkiMzNTr32bPHkyK1euBOCyyy7Tn+////Tp0xk7diwFBQXk5+fjdDoJDQ1l1KhRDBo0SC/56ak4nFizZo02ceJEEhISOq1SSgJKqxwseGwP5dUOpE6CrHoVleysaF578DKCWhClJgwYytdgLvjld8nIF6tpGpochGvEWyiRU5oxuRCCRqeX257ax64jZzDInZ/bpGHRvPGQb25dqQT212K1V4/VVsjB/1vLe9vyTPr7+iVhW7Vene3jj5f5GTAwq6Oteji/48Tv4GhZG9fe7y1tLv8zW2aY+Ncx0IES+KyW423LDms5br+E6iksGSEEp06dYvv27d2z4TQEJqNEiFnu8nlqsRFmjAap9fuEBoYwNCGfy5m8BFJOSG0a6bIkzp1DoHVJvZVbBGw727oTzPX/1llDXtO0ZuUs3e3TUtq2ZVu1Nab21Lv2fm9p83Y0z/aec77xdmbcF2r/thn47iqRaEC4xUjf+BCOlto7RZT+MMKo/uGYDBKK2mInAzRjBAgDcLEZTgODFc0Yje8EVK2ZV9VklEiPD2HHodouMXBmmpUgk/QvgSnilxiB1daB2SDthRv+0a3lGFtK0vakXFtM4peMHVW4d5VBu12eE2SUmDuuD1v2V7dinna0OJJigpicFd1OlYCKZozxeQ0Vx0V2nGioQcmopj6tcio1wCAJ5o2PY92O0zQ5lfPOTdU0Iq1G5ozt40to0c6jxwd8zM7swIFqT6Bku1hn+TU0NPDJJ59QX1/P8OHDmThxol4ZvXHjRmJiYpg2bVqblejnm3dbc2ipQnalXyBEg6ZpVFRU8OWXX5KYmMjkyZMxmUw0NDSwfv166urqGDp0qF5u1FHzJ4o7nU6uuOIKPZB/oTacfO211z6akpLSaUSoQMpMjAmisLSB4+VN7caq/C8yGiR+cW06V4zp04wgmxGNHIpctwPJUXRxQwOaihIzB2+fq9qMw2lAfFQQp2qcHCq2d0hM/oqIW2an8MNpiedNB/JnmaxZs4acnBysVit9+vTpsHLCf23bto0PPviA48eP079/fz3I29NXZWUld955Jx988AEWi4U5c+bg9Xp55JFHeOSRR/j000/JzMwkMzOzTW9c+04zhXXr1rFhwwYOHTpEenq67l1sFmZRVTZs2MD69es5evQoGRkZekFrYD+Xy8V7773H559/TmVlJWlpaTz00EMsX76cTz/9lGHDhjF48GAqKipYtGgR7733HkFBQcydO7fDbyTLMq+++iq/+MUv+PDDDwkODiY7O/uCNrj6+npKSkq6H4fTgAiLkYdvGYTTrbItv7YZCFBgP0nAtZPjWXhFSptxlu8cGSGokVOgdvPFc5xoGpohFCV6BiAjUFq9x3++wP0L+lNa6WD7NzY0H8BDC/sADAbBtZMT+MW1/TDKUsfV63yH2LVixQrKysr46quveO211/TM9LZUND++4kMPPcT+/fsZOnQos2fP1uvgelrCtUUH/piaf/f3x9S6QjOyLLN//36effZZjEYjcXFxXHPNNa3mUF5ezm9+8xu+/fZbrFYrAwcOZNKkSc1UQSEEJSUlLF26lIqKCn75y18yd+5cvQK8sbFRr+TuKNTR1savaRpVVVU65EJNTU23eKQljV9weY6qQXpCCL+/Zxhvf1nGJzsqON0ql1JiQFwwA2PNqEoHUA7C56Twxl7lS15u+haQL4J4U1DDxqBETAI6UMs0AYrKqJQQPA4PJ2pdNLoUHIG5lHHBLJieyA+nJhIWYuxU+U5Lgv7yyy/5+OOPWbhwYYe2xTvvvNMsON5R4Lir0N7ng1jXNA2TycTSpUsZMGAA8fHxzJs3r1UOZ1vPCnyeLMvMmDGD//3f/8XhcLB9+3auvvrqZu+VZZmdO3dSVFQEgN1uZ9u2bUycOLFVMDknJ4eKigqsVitz5swhODiYhx9+mMzMTFJTU5k7d267a9pW/Dnwb3fccQdmsxmXy8XNN9+sS97uhgd6DERI0SA+0sx9P+zHTTOS+La8gbIqh+54KDhWR9FJO5U1TvKO2pg8KrYDG0dDDeqLJ+EmTMeXI3paymkammzBnXwHqhzmg2pop3m8KrkHamhq8jI81cLC2SnExoZQXNGEJCAtIYSMhFBiInznHSidlDQt19jlcrFq1SqmTZtGUlJSq91elmUOHz7MK6+80u5uHBhaqK+v58yZMwghiIyMxGq1tkqODrQJ3W431dXVeDwerFYrMTExbYYgNE1j4MCBPPDAA3qdWuBzNE2jsbGRM2fOoCgKJpNJL33xO11UVSUzM5NBgwaRl5fH5s2bqaysJC4urpk3MycnpxmjbNq0ibvvvpuQkBB9bC6Xi6+++grw5Zn6AZOGDBnCAw88gCRJBAUFdbgpBcbkGhoa9DWyWCz06dOHe+65B0C3Vbt7RkErCXehtXD+nT0h2kxSTFAzoRUfYaKy2kFDk5evD9non2IlLiao/cx6oeGJvwn5TA4G2xbA0GPMBire+AUoUTM6lG6SJDhR1sDREz6VJDbSzLTRfYgKNzF5WNR3m8M5bCLtAk/Z2b9/P6tXr+bXv/51q+d4vV5eeeUVSkpK2mRcP8GXlZWxevVqNm/eTGlpKQDp6elceeWV/PjHPyY2NlYnYj+jffrpp/ztb3/TA76xsbHMmjVLT5Buyfjr1q1j5cqVBAcH8/TTTzNy5Ejcbjd5eXl8+OGH7N+/n5MnT+L1egkODmbkyJHccsstTJ8+HUmSUFWV2NhYJk6cSF5eHseOHeObb74hISEBr9eLJElUVFTo1djJycmUl5dz+PBhjh07xsiRI3UUsqKiIh2la+bMmURH+3BE//SnP/H++++TlJTEc889R0JCQodOHEVRePXVV3n77bdRFIX58+dz3333sXPnTh5//HG8Xi/33Xcf1113XbdzKVuV51yIftqSpgMxH4UQJMQGkzUwgp0Haqizu9lzqJa5UxLbD5ZrKpopBnfGMoS7Brnh0LkyHXGBzKbgjZqJu+99aJL5XPlP2890uhR25dfgcisYZB/OSbjViFdpb7fsvGRryVAmkwm3283q1auZP38+WVlZ+oeVZVl3lAghMJlMuFyuVmCwBw8e5Je//CW5ubkAeoZIaWkpX331Fdu3b+fZZ58lNTUVTdNoampixYoVrFq1iqampma204EDB1i/fr2e3R/4rsrKSvbu3UtwcDD19fXIssyRI0f4yU9+om8Ifve71+vl2LFjbNq0iaeeeoqbb75Zn//MmTN57bXXcDqdbNq0iRkzZuh/27dvHyUlJYSHh/Ozn/2MlStXUlNTw86dOxk5cqTeLzc3l/LycsxmM5MmTdJVvuLiYvbv3091dbVerNteepjX6+Wll15i+fLl2O12Lr/8cm688UaCg4Ox2Wzs2bMHRVGoqqq6oNq4bpfndKcsQRKC0UOjiYn0qSBHis5SXN5wzn3eRg4agKagWIbhGvg0imWoz3Xf3c1A09DQ8EZOwzXgt6hmH7yCvwi2rby9Q9/WUXLKl92elmRhaP/wC8Z2aU+tzM7Opn///pSWlrJq1apmGJMNDQ28+OKL1NbWMmHChGbIUf5n1NbWsnTpUnJzc4mKiuK+++5j7dq1fPDBByxevBir1cqGDRt46qmncDqdSJLERx99xAsvvEBTUxPJycncf//9vPzyyzz11FNMmDCBo0eP0tDQcF5TQ1VVUlJS6N+/P2PGjGHJkiW89dZbvPvuuyxevJjIyEhsNhsrV66krKxMZ4rRo0eTkZEBwI4dO3QHjKIofPHFF7hcLtLT07nuuuvIysoCYMuWLTqsnx/ACGDgwIFcdtllXXIe+TeEF198kSeeeAK73c7UqVN5/vnnm2FttnVfd/ngkgHBakBkmJExw6L5fPtpHE6FXQdrSYoLwWTswPWvKShhY3EOeRFz0XJk2+bvULs6J1J8aqMUgrfPtbjSf4VqTmzXbtM0DUkI6upd7P3GhqJoBJllxmZFYTZJPXZ8Vcs1HjhwILNnz+bXv/41a9euZf78+cydOxeAzz77jM8//xyr1co999zDO++80+zjSZLEli1byMnJwWAw8PDDD7No0SJdHZw5cyZxcXE88sgjrF+/njvvvJOhQ4fy9ttv43K5iI+P58UXX2TmzJn6PT/84Q/52c9+1iYmZVtzCQ8P5w9/+AMWi4XExESdwObOnYvVauWpp57i2LFj7Nu3T8dIiY6OZuzYsXrx55EjR5g8eTKnTp3SpfTMmTPp168fEydOZOvWrezatYvjx4+TlZVFaWmpntk/YcIEYmJiOl1xL4TA7Xbzhz/8gd///vc4HA49STwtLQ1FUZolg/dEYL+VhOusDdf9HR4yM8JJiffBpxWXN1BQdLZ9KadfCkroYByDn8eV8QhK6JBzEtD7ndRrdqk+2ATNiyZklPDxOAc9i3PAclRzAkJTOszsVjWNfUfOUH0O8CgzI5y0JItuo/WU1G/Zbr75ZrKzs7Hb7axatYqzZ89SXV3Niy++iMvl4gc/+AFXXHFFKzQqr9fLpk2b8Hg8pKWlMXr0aEpKSigqKqKoqIiysjLGjRtHbGwsZ86cITc3l+LiYr755hsA5s2bx/Tp01FVFa/Xi8fjITk5mbvuuqvVWWsdtQEDBhAVFcWJEyfYt28feXl5HDlyhOTkZEwmE16vl8rKSl0tMxgMXH755RgMBurr69myZQuSJLFnzx6OHj1KUFAQ2dnZSJLEzJkzCQsLo6qqir179+r9ysrKMJlMzJgxo13Q17Zou7GxkWeeeUZntqysLFauXMmAAQPOmz52IZtstyEWuvvCkCCZcVnRnK524nIr7MqvJS3JQpjFeF43vmaMxJ18F96YORhsm5BtW5AbCxDeOlBcPjkqBEghaMYIFOsIvFGX442aimb0IS/7bTbR7tygvNLBgYIzaBqEW42MGRqFQRaoassjDC4MUKalWhYbG8s999zDvn37yMnJYe3atdjtdnbt2kVCQgI///nPMZvNre51uVwcP34c8FU833jjja36KIqiI2YVFxdTU1OjH401bNgwZFluloeoKArDhg0jJiZGj7t1FC7QNI2tW7fyyiuvsGfPHs6ePatvLn7IuZYhAlVVGTFiBMnJyRQXF7Nz507q6urYvn07Ho+HrKwsLrvsMtxuN0OGDGHw4MHs3r2bjRs3smDBAjZs2IDX6yUjI4NRo0bpmSidgZL47LPPaGxs1FV3IYQefO8IvqGnJNxFgzpvPWjISLEyMM1KfmEdVbVO9h+xMW1sXCcmcg7cMygZd+JPEPE3Itw2hKca4bWD5gFhQjNGoBmjUY3RIJkBRQcK0gL+21bzejX2HLLR0ORFCBgxKJLYKLOuSvaUtt0WYXi9XmbNmsW8efN4//33WbFihU5Ed9xxByNGjMDtdreyBwIdJH44uZbeRb8EUhSFfv36Nfs9kBmahUQ8nma7fXsEJ0kSO3fu5K677qKsrIz4+HgyMzN1hqurq+PIkSOt8CP9tt+ECRMoLi4mLy+P3Nxc3S6bOHGiXqoTHh5OdnY2u3fv5uDBg+zfv5+8vDwAJk2apGPCdJZ2bTYbkiSRlJREZWUlBw8eZPny5Tz33HOtsl56SuBcUhuuWR6ZDGOHRVFc3oC90cuBo3UM6GslsU9w5whaUwEVTZh8zg9zIn6kr3O6Jr5aBq1VXV1Hc5MkwbcldgqLfWGAuOggRgyKuChr0h4KVVBQEL/4xS/Yvn277tbPyspi4cKFHd4zdOhQNm3aRGhoKE8//TRZWVnNJFZgyYnRaKS4uJjo6GjKy8vJzc3lpz/9qR4r84cYcnNz9YyN87WPP/6YsrIyoqOj+fOf/8yECRN8GPoGA9u2beNHP/pRM0eQfy5Go5EpU6bw17/+lbq6Ol577TVOnDhBUFAQl19+OZIkoSgKkiQxffp0Vq1aRWlpKStXrqSkpAQhBFOmTMFkMunHNHe2zZkzh1//+tc89thjfPHFF6xdu5asrCzuvffeDmNtPWLDXQiibHdsufiYIEYOjkQIqG/wsOeQDVX1oX9JAmTJd53PZgy011C95+w65ZwHsi0PoThHUAKDLCHLAlkSGA0SDqfCnkO1uD0qBoNgbJYvDKBdJM9tex6/UaNGceuttwI+7MhFixaRnJzc6uScwGD37NmzsVgsVFRUsHLlSk6fPk1oaCihoaEEBwdz/Phx1qxZg8fjwWAwkJycrLvXN23axOrVq3E6nXoS8K5du3jxxRc75fXzhxjAV6E+YMAALBYLVqsVk8nEvn37mjFb4DdVVZXs7GzdkbJ+/Xrsdjvp6el6aMSf8Z+ZmcnAgQPxeDxs3LgRl8tFamoq48aNa1Yz2BkbbuLEifz+97/nsssuY9myZfTv3x+Px8Mf//hHNm3a1K77vzvM1pIOWx3mcUlOQBWCkYMjKSy2U2VzUnCiHtksY2v0Ul7jJMpqJLOvheH9wog4dwJq16rS2g9yCqDyjIu8Y/UUljbQ5FJITwjBoGqUVToQAtKTLAxODzt31JyGdhHm366XVJK47bbbyM3NJTo6Ws8zbEvl9xPj+PHjWbBgAa+99hrr1q3j22+/Zfz48ZjNZhoaGti+fTsnT56kvr6e+++/n+DgYO6880527NjBmTNnWLp0KRs3biQpKQmHw0FOTo4uYTtSJ/1r6j8HoLS0lCeffJLrr78eTdPYtGkTb775ZrtEq6oqSUlJjBw5kpKSEp3Bp0+frler+/vHxsYyYcIEDhw4oDPY+PHjm0EfdJYpMjMzSUpKwu12M3LkSB577DEWL15MVVUVy5YtIy0trd1jibt6gEdbGTuGzsKk9WQLtxgZNzya1Z+WkFfSwOptlTjciu6cCDHLZPa1cPucVGaPiUWWL8yGEsIHa/f+1tP8dfMpTlQ0nTvjGwyy0M/4Hj8gjIkjojEZxUVTrzvCCfFDFbz++uvIskxYWFiz/L2WNpwf1+M3v/kNBoOBd999lyNHjnDkyJFm70xPTyctLU1n0unTp/P444/rCdR///vfmwXip06dSn5+fjMcyfbmsWDBArZu3crmzZt58803efvtt/W/jxkzhsLCwmZHULU8T2DmzJmsW7dOz9fMzs7WHTmBFfEzZ87kjTfewOl0IoRg8uTJGI3GZv06Q6vNvNKqyrx587j33ntZvnw5+fn5PP7447zwwgsdFv1eyHeX58yZ82i/fv30Uy8vSRNwoMjOqxvLOXXG7aung3NqpcCrqJTVuPgq34bZJBjeL6wZBF+X0MWEoMHp5XfvFbHq42Kq6tx6MawPMVrDo2hU2z00uFSmjYomPtLc42fCBX40RVFoampi4MCBZGdn62UugV4zfzlKIJPZ7Xbi4uIYN24ckydP1vtYLBYdmyMmJobo6Gji4uIYM2YMP/zhD3n44Yf1GjC/JB0xYgRTp04lKiqK8PBw4uLimDBhAnfffTd33303kiQxYMAAsrOzdfSrpqYmzGYzo0ePZvr06URGRhIWFqZLJT8uyahRo7jtttv4r//6L/000WnTppGamtoqgBwWFqbbq9OmTWsGCBTYoqKiEEIwcOBApkyZwo033qjniQaurd1uJyIignHjxpGdnU1QUJC+3v37929zvYcOHUpISAj9+vXDarWSlpZGREQEQgh9nfzStLvt7NmzHD9+HLFy5Upt1qxZF/zAzjZZEhw52cA9z+VTXOno8Ow1VdWwBMs8ddcQrhrfh+7EnjVNY9W6Ep7/2wnUDrxZPh0bxg+J4I/3DiM23MTF3H66kwjbUSa+3+HhDxd4vV5MJpPuxWwrxuS32/z9zWZzK9Ccll7stn73J077T58xGo3N0IoDIQbadlpJzVTNzs6/K33a+z2w4DVQ02hvrt1pfvTpzz///NLbcF5F451N5ZyocJwXoEeSBPYmhVc2nGRCZiTRVmOXmE6W4GhpE29vKkdRtQ7BjnyLrrHnaB3rd1Zyx5yUHssu6Sk1/XxxJj9T+dGb22O0wJhbe/07C0XuJ1A/2I+fidvDGOloHD2xZt05Vac9wKS2NpoL/eY9mrx8fk4XlFY72JJXi9RpWHAoLG1kz5EzTMqMbA0gex5punFvNZU2V6eywfyYlF98XcOCqQmEBMmXlKH+mVtLgrwUm/f3sbWHfdIqDncpCESgUWFzUVvv6cK5igKHW+Gdz8s4fry+a+MU8OWhM6gaHaquzW0+KK5ooqrORXpCSLel3L8rwfVuRu3P95JLOBB0yzDSoLbezZl6d9e8lQJcbrVLIQUhwOlWaXQq54U57yXA3g2gs5vvBcHkXZBa2cXDTH1GLaTFh5CeFNol76EQgsMVji7xuKaBJVgmPNRwQYct9hLgP686fDHX9ZJKOFUVJMcEkRgdxLfljXQS1BhLsIGbr0xmzMDwLql4siQQQTJ7jtV3Ot9O1TQGpoQSE27q8F3/ykTZqw737DduJuEURdEcDoe48Grv89+vAnGRZq4cG8O35Y2dYgJFhZH9wxiaZtVjZ11RD6cMjyI9Pphjp5rOy+CapmEySswZG0uIWWq3wruXKHvV4a6ukcPhQFEUTVIU5bT/0L8LyZPsTB6hHxNowbQERvUPQ1E7/mCKqpEYbebu+alYg+UuZ5v4wWcXXZ1KaJB8XomlajB7dCyzLotBUelWTuSly0v9flzfR+L+Pq7RucMxT8vTpk2barFYBqelpV2UpNyWEkfTICLUwNA0K0dLGzhtc/kYsQWjKKpGSp9gli7sz5Ss6Av6uAOSQgkJkjlYZPedYipaqrq+kMUVo2P4zY8ziA4z/cvs3P+O9tj37dI0jfz8fCorK7+Up0+fHu31emenp6dLLdFtLx4RQJ8IE5OGRhIaZOBsg5dGly+X0miQiIsyc+XYWB64qR8TMyMvuBZNEoLh6VaG9LXgcKvUN3rxeFVAEBwkMzjVwh1zkvnFNX3Pa7v1EuD3+/q+bUb+dLPdu3d7HQ7Hi+LRRx9NlyTp48mTJ2eNGjXqkqoKkuQLE1SccVF0qonKOjfhoQb6JYSQHBuEURa+aoEeOjJIEuBwq5RUOiiucOB0KyTFBJGRGEKk1QgaHaZ/9dpjva07dPf111+zbdu2fFVVrzGoqnpCVdU38/PzV/Tt21e0dSjexZR0APFRZhKjzfgrSdVzECXKOVWzp8aiamA2SgxOCWVIqsU3BrRmoGDnP5Sklyh7N4DOChQJm81Gfn6+5vF43hRCnDCcI7DXbTbbnJ07d86cOXNmq0z1i70oPjxLH/m3+ttFWAhFu1hP7iXKnlaF/1m/iRACp9PJjh07qKmp2SxJ0uuAHviu1jRtSWFh4ZqgoKD+kyZN4lLZc70E+O9JlP/K393PbNu3b+fo0aPHgCWaplVrmoa8detWpk6ditfrLRdCFFZWVk6or6+PioqKIiQk5J+OkHsdBL2q7z+a9mpra9myZQuHDx8+pmnaYlVVtwoheOqpp75zkC9dutSPezFO07QVUVFRU4cNGyYNGDAAq9Wql130tl5p0dvaMFMUBbvdTmFhIQcPHlRsNtsWIcQSj8ez22Qy8fTTT/uYMvCmpUuX+ovv+iiKcossy7dYrdZhiYmJclxcHEFBQQQHB/9TqDG9RNPbLnZTVRWn04nD4aCyspJTp04p9fX1hxRFWS1J0mqgBmDFihXfScG2HrRkyRIsFouw2+0pqqpeDVwuhBgnSVKSJEnifJkWvbt+b/s3kmyaqqrlmqbtBb6QJGl9SEjISYfDofmlWmD7/y/4QwUI9ZzIAAAAWHRFWHRjb21tZW50AEZpbGUgc291cmNlOiBodHRwczovL3d3dy5zZW1hbnRpYy1tZWRpYXdpa2kub3JnL3dpa2kvRmlsZTpTTVdfcG93ZXJlZGJ5XzI1MjAucG5nR/HgGQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wNy0wMlQxNTozMTo1NSswMjowMJD7GggAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDctMDJUMTU6MzE6NTUrMDI6MDDhpqK0AAAAPHRFWHRzb2Z0d2FyZQAvdXNyL3NoYXJlL2RvYy9pbWFnZW1hZ2ljay02LWNvbW1vbi9odG1sL2luZGV4Lmh0bWx15G87AAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAGHRFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAA4ODHPniohAAAAGHRFWHRUaHVtYjo6SW1hZ2U6OldpZHRoADI1MjDhfK24AAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE2MjUyMzI3MTXeTZeiAAAAEnRFWHRUaHVtYjo6U2l6ZQAxMzVLQkL58MQeAAAAAElFTkSuQmCC" alt="Powered by Semantic MediaWiki" class="smw-footer" width="88" height="31" loading="lazy"/></a></li>
	<li id="footer-copyrightico"><a href="https://web.archive.org/web/20230609112831/https://www.gnu.org/licenses/fdl-1.3.en.html"><img src="https://web.archive.org/web/20230609112831im_/https://www.gnu.org/graphics/gfdl-logo-tiny.png" alt="GNU Free Document License 1.3" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

		</div>
	</div> 
</div> 

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"smw":{"limitreport-intext-parsertime":0.001},"limitreport":{"cputime":"1.538","walltime":"2.185","ppvisitednodes":{"value":7048,"limit":1000000},"postexpandincludesize":{"value":31396,"limit":2097152},"templateargumentsize":{"value":6103,"limit":2097152},"expansiondepth":{"value":6,"limit":100},"expensivefunctioncount":{"value":0,"limit":99},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":1096858,"limit":5000000},"timingprofile":["100.00%  281.401      1 -total"," 41.96%  118.074    166 Template:Header","  4.54%   12.767      1 Template:Task","  2.21%    6.216      4 Template:Libheader","  1.77%    4.980     22 Template:Works_with","  1.60%    4.506     15 Template:Trans","  1.51%    4.255     62 Template:Out","  1.39%    3.912      1 Template:Omit_from","  0.80%    2.249      2 Template:Output","  0.79%    2.219      1 Template:Eff_note"]},"cachereport":{"origin":"mw141","timestamp":"20230609101458","ttl":864000,"transientcontent":false}}});});</script>
	<script>
	var _paq = window._paq = window._paq || [];
	if ( 1 ) {
		_paq.push(['disableCookies']);
	}
	if ( 0 ) {
		_paq.push(['setRequestMethod', 'GET']);
	}
	_paq.push(['trackPageView']);
	_paq.push(['enableLinkTracking']);
	(function() {
		var u = "https://web.archive.org/web/20230609112831/https://matomo.miraheze.org/";
		_paq.push(['setTrackerUrl', u+'matomo.php']);
		_paq.push(['setDocumentTitle', "rosettacodewiki" + " - " + "Sorting algorithms/Quicksort"]);
		_paq.push(['setSiteId', 15059]);
		_paq.push(['setCustomVariable', 1, 'userType', "Anonymous", "visit"]);
		if ( 8590 ) {
			_paq.push(['addTracker', u + 'matomo.php', 8590]);
		}
		var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
	})();
	</script>
	<noscript><p><img src="https://web.archive.org/web/20230609112831im_/https://matomo.miraheze.org/matomo.php?idsite=15059&amp;rec=1&amp;action_name=Sorting_algorithms/Quicksort" style="border:0;" alt=""/></p></noscript>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":3260,"wgHostname":"mw141"});});</script>
</body>
</html><!--
     FILE ARCHIVED ON 11:28:31 Jun 09, 2023 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 10:19:15 Jul 08, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 0.687
  exclusion.robots: 0.036
  exclusion.robots.policy: 0.024
  esindex: 0.013
  cdx.remote: 19.013
  LoadShardBlock: 142.955 (3)
  PetaboxLoader3.datanode: 85.576 (4)
  load_resource: 564.691
  PetaboxLoader3.resolve: 530.527
-->